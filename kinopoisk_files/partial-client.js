!function(e){function webpackJsonpCallback(t){for(var o,a,i=t[0],s=t[1],u=t[2],l=0,p=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&p.push(n[a][0]),n[a]=0;for(o in s)Object.prototype.hasOwnProperty.call(s,o)&&(e[o]=s[o]);for(c&&c(t);p.length;)p.shift()();return r.push.apply(r,u||[]),checkDeferredModules()}function checkDeferredModules(){for(var e,t=0;t<r.length;t++){for(var o=r[t],a=!0,i=1;i<o.length;i++){var c=o[i];0!==n[c]&&(a=!1)}a&&(r.splice(t--,1),e=__webpack_require__(__webpack_require__.s=o[0]))}return e}var t={},n={97:0},r=[];function __webpack_require__(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,__webpack_require__),r.l=!0,r.exports}__webpack_require__.e=function(e){var t=[],r=n[e];if(0!==r)if(r)t.push(r[2]);else{var o=new Promise(function(t,o){r=n[e]=[t,o]});t.push(r[2]=o);var a,i=document.createElement("script");i.charset="utf-8",i.timeout=120,__webpack_require__.nc&&i.setAttribute("nonce",__webpack_require__.nc),i.src=function(e){return __webpack_require__.p+""+({95:"features-yandex-butterfly"}[e]||e)+"."+{95:"786aaae92f3b5e58d9ba"}[e]+".bundle.min.js"}(e);var c=new Error;a=function(t){i.onerror=i.onload=null,clearTimeout(s);var r=n[e];if(0!==r){if(r){var o=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+o+": "+a+")",c.name="ChunkLoadError",c.type=o,c.request=a,r[1](c)}n[e]=void 0}};var s=setTimeout(function(){a({type:"timeout",target:i})},12e4);i.onerror=i.onload=a,document.head.appendChild(i)}return Promise.all(t)},__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,n){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(__webpack_require__.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)__webpack_require__.d(n,r,function(t){return e[t]}.bind(null,r));return n},__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="//yastatic.net/s3/kinopoisk-frontend/desktop-www/release/dist/",__webpack_require__.oe=function(e){throw console.error(e),e};var o=window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[],a=o.push.bind(o);o.push=webpackJsonpCallback,o=o.slice();for(var i=0;i<o.length;i++)webpackJsonpCallback(o[i]);var c=a;r.push([1768,2]),checkDeferredModules()}([,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"defaultMemoize",function(){return o}),n.d(t,"createSelectorCreator",function(){return a}),n.d(t,"createSelector",function(){return i}),n.d(t,"createStructuredSelector",function(){return c});var r=n(148),o=r.c,a=r.a,i=Object(r.a)(o),c=function(e,t){return Object(r.b)(e,t)}},function(e,t,n){"use strict";var r=n(419);n.o(r,"EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES")&&n.d(t,"EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES",function(){return r.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES}),n.o(r,"MobileAppsMarkets")&&n.d(t,"MobileAppsMarkets",function(){return r.MobileAppsMarkets}),n.o(r,"NavigationMenuItemCustomTypes")&&n.d(t,"NavigationMenuItemCustomTypes",function(){return r.NavigationMenuItemCustomTypes}),n.o(r,"SUGGEST_ITEMS_GROUPS_IDS")&&n.d(t,"SUGGEST_ITEMS_GROUPS_IDS",function(){return r.SUGGEST_ITEMS_GROUPS_IDS}),n.o(r,"SUGGEST_ITEM_TYPE")&&n.d(t,"SUGGEST_ITEM_TYPE",function(){return r.SUGGEST_ITEM_TYPE}),n.o(r,"SocialNetworks")&&n.d(t,"SocialNetworks",function(){return r.SocialNetworks}),n.o(r,"TV_SERIES_SUGGEST_TYPES")&&n.d(t,"TV_SERIES_SUGGEST_TYPES",function(){return r.TV_SERIES_SUGGEST_TYPES})},,function(e,t,n){"use strict";var r=n(425);n.o(r,"ANALYTICS_EVENTS_NAMES")&&n.d(t,"ANALYTICS_EVENTS_NAMES",function(){return r.ANALYTICS_EVENTS_NAMES}),n.o(r,"ANALYTICS_ZONES_NAMES")&&n.d(t,"ANALYTICS_ZONES_NAMES",function(){return r.ANALYTICS_ZONES_NAMES}),n.o(r,"buildParams")&&n.d(t,"buildParams",function(){return r.buildParams}),n.o(r,"buildTargetName")&&n.d(t,"buildTargetName",function(){return r.buildTargetName}),n.o(r,"useAnalyticsClick")&&n.d(t,"useAnalyticsClick",function(){return r.useAnalyticsClick}),n.o(r,"useSendParams")&&n.d(t,"useSendParams",function(){return r.useSendParams}),n.o(r,"useVisibilitySensor")&&n.d(t,"useVisibilitySensor",function(){return r.useVisibilitySensor})},,,,function(e,t,n){"use strict";var r=n(0),o=n.n(r);function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e){return o.a.useCallback(function(){e.forEach(function(e){e&&e()})},_toConsumableArray(e))},i=r.useLayoutEffect;n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},function(e,t,n){"use strict";n.r(t);t.default=function(e){return function(t){return function(e,t){return{type:e,payload:void 0===t?{}:t}}(e,t)}}},,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get2(e,t,n){return(_get2="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1027);var r=n(15),o=n(413),a=n(174),i=n(391),c=function(e){function Request(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Request),_possibleConstructorReturn(this,_getPrototypeOf(Request).apply(this,arguments))}var t,c,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Request,a),t=Request,(c=[{key:"ask",value:function(){for(var e,t=this,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return(e=_get2(_getPrototypeOf(Request.prototype),"ask",this)).call.apply(e,[this].concat(o)).then(this._logBackendRequests).catch(function(e){var r=e.body&&e.body.code&&i[e.body.code]||"КиноПоиск временно не принимает данные.";if(401===e.status){if(!window.__mdaLogin)return void n(122).showNotification({text:r});window.__mdaLogin()}else n(122).showNotification({text:r});throw t._logBackendRequests(e.body),e})}},{key:"_logBackendRequests",value:function(e){var t=r(e,"common.backendRequests");if(t){var n=t.length;o.groupCollapsed("App XHR: ".concat(n," backend request")+"".concat(n>1?"s":""," for ").concat(location.pathname)),t.map(function(e){return o.log(e.url,e)}),o.groupEnd()}return e}},{key:"csrfToken",get:function(){return n(104).default.getStore().getState().csrf.token}}])&&_defineProperties(t.prototype,c),s&&_defineProperties(t,s),Request}();e.exports=new c},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"SELECT_ITEM_TYPES",function(){return r}),n.d(t,"SEO_SELECTIONS_BASE_URL",function(){return i}),n.d(t,"EDITORIAL_SELECTIONS_BASE_URL",function(){return c}),n.d(t,"EMPTY_FILTER_VALUE",function(){return s}),n.d(t,"LOADING_STATUSES",function(){return o}),n.d(t,"PENDING_TYPES",function(){return a}),n.d(t,"WATCHLIST_FOLDER",function(){return p}),n.d(t,"FILM_FOLDER_OPERATIONS",function(){return u}),n.d(t,"FILM_FOLDER_ROLLBACKS",function(){return l}),n.d(t,"OTT_SERVICE_ID",function(){return f}),n.d(t,"QUICK_FILTERS_I18N_NAMESPACE",function(){return d}),n.d(t,"SELECTIONS_SERVER_CONTEXT",function(){return m}),function(e){e.groupLabel="group-label",e.textItem="text-item"}(r||(r={}));var o,a,i="/lists/navigator",c="/lists/editorial",s="none";!function(e){e.loaded="loaded",e.error="error",e.pending="pending"}(o||(o={})),function(e){e.full="full",e.listOnly="list-only"}(a||(a={}));var u,l,p=3575;!function(e){e.add="add",e.remove="remove"}(u||(u={})),function(e){e.add="remove",e.remove="add"}(l||(l={}));var f=25,d="selections.quick_filters",m=Symbol("selections")},function(e,t,n){"use strict";var r,o;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"FROM_BLOCK_QUERY_VALUE",function(){return c}),n.d(t,"EXTERNAL_OTT_TYPE",function(){return a}),n.d(t,"TYPE",function(){return i}),n.d(t,"TYPE_BY_EXTERNAL_OTT_TYPE",function(){return l}),n.d(t,"EXTERNAL_OTT_SUBSCRIPTION",function(){return s}),n.d(t,"SUBSCRIPTION",function(){return u}),n.d(t,"SUBSCRIPTION_BY_EXTERNAL_OTT_SUBSCRIPTION",function(){return f}),n.d(t,"SUBSCRIPTION_PURCHASE_TAG",function(){return p}),n.d(t,"RIGHTHOLDER_LOGO_SIZES",function(){return d}),n.d(t,"WATCH_ONLINE_URL_FALLBACK_PARAM_NAME",function(){return m}),n.d(t,"WATCH_ONLINE_URL_FALLBACK_PARAM_VALUE",function(){return y}),n.d(t,"OPEN_PAYMENT_WIDGET_PARAM_NAME",function(){return _}),n.d(t,"OPEN_PAYMENT_WIDGET_PARAM_VALUE",function(){return h}),n.d(t,"OTT_API_DOMAIN",function(){return g}),n.d(t,"ONLINE_VIEW_OPTIONS_BUTTON_ID",function(){return b}),n.d(t,"WATCH_ONLINE_PAYMENT_URL_ATTRIBUTE_NAME",function(){return E}),n.d(t,"ONLINE_VIEW_OPTIONS_PAYMENT_WIDGET_MODAL",function(){return v}),n.d(t,"PAYMENT_WIDGET_EXPERIMENT_NAME",function(){return O}),n.d(t,"PAYMENT_WIDGET_EXPERIMENT_VALUE",function(){return P});var a,i,c="button_online";!function(e){e.paid="PAID",e.paidMultiple="PAID_MULTIPLE",e.subscription="SUBSCRIPTION",e.free="FREE"}(a||(a={})),function(e){e.transaction="TRANSACTION",e.subscription="SUBSCRIPTION",e.free="FREE"}(i||(i={}));var s,u,l=(_defineProperty(r={},a.free,i.free),_defineProperty(r,a.subscription,i.subscription),_defineProperty(r,a.paid,i.transaction),_defineProperty(r,a.paidMultiple,i.transaction),r);!function(e){e.yaPlus="YA_PLUS",e.yaPlus3M="YA_PLUS_3M",e.yaPlusKp="YA_PLUS_KP",e.yaPremium="YA_PREMIUM",e.kpBasic="KP_BASIC"}(s||(s={})),function(e){e.yaPlus="YA_PLUS",e.yaPremium="YA_PREMIUM",e.kpBasic="KP_BASIC"}(u||(u={}));var p,f=(_defineProperty(o={},s.yaPlus,u.yaPlus),_defineProperty(o,s.yaPlus3M,u.yaPlus),_defineProperty(o,s.yaPlusKp,u.yaPlus),_defineProperty(o,s.yaPremium,u.yaPremium),_defineProperty(o,s.kpBasic,u.kpBasic),o);!function(e){e.plus="plus",e.kpBasic="kp-basic",e.kpAmediateka="kp-amediateka"}(p||(p={}));var d={x1:"80x45",x2:"160x90"},m="fallback",y="1",_="open_payment_widget",h="1",g="kinopoisk",b="online-view-options-watch-button",E="data-payment-url",v="modal/ONLINE_VIEW_OPTIONS_PAYMENT_WIDGET",O="kinopoisk_kp1_film_payment_widget",P="experiment"},function(e,t,n){var r=n(6).createSelector,o=n(58).SUBSCRIPTION,a=function(e){return e.models.users},i=function(e,t){return a(e)[t]},c=function(e){return e.auth||{}},s=function(e){return c(e).isAuthorized},u=function(e){return e.abExperiments||{}},l=r(u,function(e){return Boolean(e["welcome-screen"]&&"hard"===e["welcome-screen"].backendValue)}),p=r([a,c],function(e,t){return e[t&&t.userId]}),f=function(e){return r(p,function(){return((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).integrations||[]).find(function(t){return t.service===e})})},d=f("yandex"),m=f("ott"),y=r(d,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscription}),_=r(i,function(){return(((arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).socialAccounts||[]).some(function(e){return"yandex"===e.type})||{}).subscription}),h=r([s,p],function(e,t){return e&&t.socialAccounts&&!t.socialAccounts.find(function(e){return"yandex"===e.type})}),g=function(e){return c(e).userId},b=r(g,function(e){return e.user.permissions},function(e,t){return{id:e,permissions:t}}),E=r(m,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscription===o.YA_PREMIUM}),v=r(m,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscription===o.KP_BASIC}),O=r(m,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscription===o.YA_PLUS_KP}),P=r(m,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).subscription}),S=r(P,function(e){return[o.YA_PLUS,o.YA_PLUS_3M].includes(e)}),T=r(i,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.hasIntegrationsData&&e.integrations.some(function(e){return"yandex"===e.service&&!0===e.subscription})});e.exports={getUserId:g,getUsersModels:a,getUserModel:i,getUserAuth:c,getYandexPlusStatus:y,getCurrentUserModel:p,getYandexAccountStatus:_,getIsAuthorized:s,getAbExperiments:u,getIsHardModeWelcomeScreen:l,getIsAuthorizedWithoutYandexAccount:h,getUserState:b,hasPremiumStatus:E,hasKpBasicStatus:v,hasYandexPlusKpStatus:O,getIsUserPlusSubscriber:T,getYandexIntegration:d,getOttIntegration:m,selectOttSubscription:P,selectIsYaPlus:S,selectIsUnderAbExperiment:function(e,t){return r(u,function(n){var r=n[e];return r&&r.backendValue===t})},selectUserHasOttIntegration:function(e){return Boolean(m(e))}}},function(e,t,n){"use strict";var r,o,a=n(65),i=n.n(a),c=n(212);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.ApiHeaderConfig="apiHeaderConfig",e.ApiSuggest="apiSuggest",e.SearchPage="searchPage",e.Chance="chance",e.VkontaktePage="vkontaktePage",e.FacebookPage="facebookPage",e.TwitterPage="twitterPage",e.TelegramPage="telegramPage",e.InstagramPage="instagramPage",e.YoutubePage="youtubePage"}(o||(o={}));var s,u,l,p=(_defineProperty(r={},o.ApiHeaderConfig,"/api/header/v4/config/"),_defineProperty(r,o.ApiSuggest,"/api/suggest/"),_defineProperty(r,o.SearchPage,"/index.php"),_defineProperty(r,o.Chance,"/chance/"),_defineProperty(r,o.VkontaktePage,"https://vk.com/kinopoisk"),_defineProperty(r,o.FacebookPage,"https://www.facebook.com/kinopoisk"),_defineProperty(r,o.TwitterPage,"https://twitter.com/kinopoiskru"),_defineProperty(r,o.TelegramPage,"https://telegram.me/kinopoisk"),_defineProperty(r,o.InstagramPage,"https://www.instagram.com/kinopoisk/"),_defineProperty(r,o.YoutubePage,"https://www.youtube.com/user/kinopoisk"),r),f=(s=p,u={},{getRoute:l=function(e){return s[e]},getUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=l(e);if(r)try{var o=u[e];return o||(o=Object(c.compile)(r),u[e]=o),[o.call(null,t),i.a.stringify(n)].filter(Boolean).join("?")}catch(e){}return""}});n.d(t,"a",function(){return o}),n.d(t,"b",function(){return f})},,,,function(e,t,n){e.exports={root:"_72hv15RYf8W9XtmxvTVYK",rootGrey:"lVHhG1P9VlLvJl_TY2W0T _72hv15RYf8W9XtmxvTVYK",rootDark:"_2FL29hJ_PxecWHD8jviURa _72hv15RYf8W9XtmxvTVYK",contentMenu:"_2z63RQjcpEBmA0xtcfmZYJ",contentMenuItem:"_2zXVcCYaCq3oiOYn5yZawz",contentLink:"dx14ziPMRP5e9582-PxO_",mobileAppLink:"_1akQY_nFJ_9y5YVaVt2ofq",bottomSection:"wltFZkZ3_xCXKD4HO5Bq9",bottomSectionInfo:"OhVVJ2L20INU2uLE9YoXM",bottomSectionInfoLink:"_3H_Ow7kA2TOLZyDxEFgl2f",year:"_1CncUjTRU2J1j1_jRWiDrd",age:"_3vtdx3LWiOkMdOYq2kkVQE",bottomSectionMenu:"mc4dS1UAstXcPsnsiQfvi",bottomSectionMenuItem:"mI5507YQ32gn4bIZlPqnV",bottomSectionMenuLink:"_3BNyyAKmDyPO0U4AMTPlDv",companySection:"_3wq4eYs2D1djkkbhTcGuc5",companySectionTitle:"_3CCtAabQVXI-haPyzLQfCe",companyLogo:"NOMr2uUZ3Q9cE6DPd17rZ",mobileAppsMenu:"_2fOlQmKNcx6aWqBX0WiujK",mobileAppsMenuItem:"_1sl1zuApWbvdX8fZLJ0ZU",mobileAppsLink:"_3mkWDd4rqGjYTk1s1UOzzr",appStoreLink:"_1O5_zWJvoUgCUnuS7-5due _3mkWDd4rqGjYTk1s1UOzzr",googlePlayMarketLink:"_1_PJf6ST-_QOungUKo2ThZ _3mkWDd4rqGjYTk1s1UOzzr"}},function(e,t){var n="request_middleware/SEND_REQUEST_EFFECT";e.exports={createRequestMiddleware:function(e){var t=e.requester;return function(){return function(e){return function(r){if(r.type===n){var o=r.payload,a=o.method,i=o.url,c=o.params;if(!t[a])throw new Error("Requeter doesn't contain ".concat(a," method"));return t[a].call(t,i,c)}return e(r)}}}},SEND_REQUEST_EFFECT:n,sendRequestEffect:function(e){var t=e.method,r=e.url,o=e.params;return{type:n,payload:{method:t,url:r,params:o}}}}},function(e,t,n){function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(28).parse,o=n(65),a=n(6).createSelector,i=n(138).MEDIA_CUSTOM_SUPER_BANNER,c=n(429).ADMIN_SNIPPET_STATUS,s=function(e){return e.page},u=function(e){return e.page.title},l=function(e){return e.page.name},p=function(e){return e.page.pagination.currentPage},f=function(e){return e.page.pagination.perPage},d=function(e){return e.common.bunker[e.page.yaPlusPromoBunkerNodeName]},m=function(e){return e.page.originalUrl},y=a([m],function(e){return r(e)}),_=a([y],function(e){return e.pathname}),h=a([y],function(e){return o.parse(e.query)}),g=a(d,function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})["ya-plus-price"]}),b=function(e){return"".concat(e.common.kp1Protocol,"://").concat(e.common.kp1Host)},E=a([u,l,function(e){return e.page.meta},function(e){return e.page.breadcrumbs},function(e){return e.page.categoryLink},function(e){return e.page.categoryTitle}],function(e,t,n,r,o,a){return{title:e,name:t,meta:n,breadcrumbs:r,categoryLink:o,categoryTitle:a}}),v=a([p,f,function(e){return e.page.pagination.hasMore}],function(e,t,n){return{currentPage:e,perPage:t,hasMore:n}}),O=function(e){return s(e).adfoxItems||{}},P=a([m],function(e){return void 0!==e&&"/"===_slicedToArray(e.split("?"),1)[0]}),S=a(s,function(e){return e.blocksConfig});e.exports={getOriginalUrl:m,getOriginalPathName:_,getPageState:s,getPageInfo:E,getPageName:l,getPageTitle:u,getPageTheme:function(e){return e.page.theme},getPagination:v,getPaginationCurrentPage:p,getPaginationPerPage:f,getPageUrl:function(e){return"".concat(b(e)).concat(e.page.originalUrl)},getDisableFilmPreviewCard:function(e){return e.page.disableFilmPreviewCard},getYaPlusSource:function(e){return e.page.yaPlusSource},getYaPlusPromoData:d,getYaPlusPrice:g,getShowMoreLink:function(e){return e.common.bunker[e.page.linkYandexShowMoreBunkerNodeName]},getLinkYandexPromoCode:function(e){return e.common.bunker[e.page.linkYandexPromoCodeBunkerNodeName]},getLinkYandexPromoText:function(e){return e.common.bunker[e.page.linkYandexPromoTextBunkerNodeName]},getAdfoxItems:O,getAdfoxItem:function(e,t){return O(e)[t]},getScrollToOffset:function(e){return s(e).scrollToOffset||0},getAppUrl:b,getPreviewCard:function(e){return e.page.previewCard},getMediaPostCustomSuperBanner:function(e,t){return e.common.bunker[i]&&e.common.bunker[i][t]},getIsAdminSnippetOpen:function(e){return s(e).adminSnippetStatus===c.OPEN},getAdminPanelUrl:function(e){return s(e).adminPanelUrl},selectOriginalUrlQueryParams:h,selectIsHomePage:P,selectRegionId:function(e){return e.common.regionId},selectBlocksConfig:S}},function(e,t,n){"use strict";e.exports={KINOPOISK_GO_NAMESPACE:"kinopoisk-go",STATUSES:{active:"active",unknown:"unknown",active_and_prolongation_disabled:"active_and_prolongation_disabled",inactive:"inactive",inactive_prolongation:"inactive_prolongation"},PROLONGATION_STATUSES:{enabled:"enabled",disabled_by_user:"disabled_by_user",disabled_by_kp:"disabled_by_kp"},LOAD_DATA_STATUS:{pending:"pending",loaded:"loaded",failed:"failed"},MODAL_TYPE:"modal/KINOPOISK_GO_SUBSCRIPTION",MODAL_TYPE_CONTENT_STATES:{detail:"DETAIL",termsOfUse:"TERMS_OF_USE",cancel:"CANCEL"},COMING_SOON_FILMS_LIST_ID:"kinopoisk_go.coming_soon_films",COMING_SOON_FILMS_LIST_LIMIT:12,COMING_SOON_FILMS_MONTHS_COUNT:6}},,function(e,t,n){var r=n(691),o=n(692),a=n(693),i=n(694).authRequired;e.exports={takeAwait:r,takeOptimistic:o,takeAwaitUniq:a,authRequired:i}},,function(e,t,n){"use strict";var r=n(198),o=n(428),a=o.authParams,i=o.deadpoolDialog,c=o.header,s=o.headerPopup,u=o.watchOnline,l=o.passportConnector,p=o.yandexPlus,f=o.regSuggest,d=o.media,m=o.featuring,y=o.promocode,_=o.code,h=o.mda,g=n(311).PLATFORMS,b=a(r),E=u(r,{authParamsMetrika:b}),v=l(r,!1),O=p(r,!1),P=p(r,!1,!0),S=f(r,!1),T=d(r),k=m(r,{platform:g.desktop}),C=y(r),w=_(r);e.exports={authParams:b,mdaMetrika:h(r),deadpoolDialog:i(r),header:c(r),headerPopup:s(r),footer:{linkClick:function(e){r.params(["desktop_footer_click"].concat(e))}},openTicketsWidget:function(e){r.params(["tickets_widget_open","desktop",document.location.pathname,e])},afisha:{_getBaseParams:function(){return"blocks_afisha_click"},_filterParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._getBaseParams();r.params([t,"filter"].concat(e))},_searchParams:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=this._getBaseParams();r.params([t,"search"].concat(e))},filterChange:function(e){this._filterParams(e)},minSearchValue:function(){this._searchParams("search_start")},resultClick:function(e){this._searchParams(["result_click"].concat(e))}},special:{bladeRunnerClick:function(){r.params(["spec_blade_runner_2049","click"])},bladeRunnerShow:function(){r.params(["spec_blade_runner_2049","show"])}},passportConnector:v,promoBanner:{adfoxSpecialClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"banner";r.params(["corner_promo","click",e])}},watchOnline:E,yandexPlus:O,yandexPlusOTT:P,promocode:C,code:w,adblock:{adblockDetector:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r.params(["adblock_detector"].concat(e))}},regSuggest:S,media:T,featuring:k}},function(e,t,n){e.exports={root:"bXzg7r5XQC3ZVblxhL2u8",branding:"EZWu_sPdCUIBYmOrf5dCt",navigation:"_1-l73HTWDqvlLZwyF9gfjC",navigationWithBranding:"_1Xce2Tcor1FMxsvngxri1z _1-l73HTWDqvlLZwyF9gfjC",inner:"_3OJ2fPP0bVsOaBAR7yxzqE",logoContainer:"_3rtR-x9ZjRGXg0EXmXebMd",dropdownMenu:"_1SfzZtK3MP1cVTGd7G98he",mainContainer:"sPKf8mADmv7IgW7E4TxfX",mainContainerInner:"_3EsDO2z7xO7kswl_hSHrxT",userContainer:"_3_P5mq6PctmEWCOPqHCak2",featureMenuContainer:"_3tmz2UPcIDTjaP7bG35GSc",featureMenuContainerCompact:"_3Vk4noEzukDi_qvvpvcLcU _3tmz2UPcIDTjaP7bG35GSc",searchFormContainer:"_1zsMqV12gvgF8aGvdXwKvz",searchFormContainerWide:"_1aDW3d2QsWiQksjQhCXXNN _1zsMqV12gvgF8aGvdXwKvz",searchForm:"WZTdO8hpgpt4bqAi-_UCW"}},,,function(e,t,n){"use strict";var r=n(159).requestAction,o=n(64),a=o.OPEN_AUTH_POPUP,i=o.CLOSE_AUTH_POPUP,c=o.SET_AUTH_DATA,s=o.LINK_YANDEX_ACCOUNT_EFFECT,u=o.LOGOUT_EFFECT,l=o.LOGOUT_MULTI_ACCOUNT_EFFECT,p=o.CHANGE_MULTI_ACCOUNT_EFFECT,f=o.ADD_MULTI_ACCOUNT_EFFECT,d=o.LOAD_USER_EFFECT,m=o.LOAD_USER,y=n(61).openAuthPopupEffect,_=n(31).yandexPlus,h=n(19),g=h.getUserAuth,b=h.getUserModel;e.exports={openAuthPopup:function(e){return{type:a,payload:e}},logoutEffect:function(){return{type:u}},closeAuthPopup:function(){return{type:i}},setAuthData:function(e){return function(t,n){if(!e.isAuthorized)return null;var r,o,a,i=n().common.avatarsHost,s=e.avatar?{x1:"//".concat(i).concat(e.avatar,"/40x40"),x2:"//".concat(i).concat(e.avatar,"/80x80")}:{};return t({type:c,payload:{state:{models:{users:(r={},o=e.userId,a={id:e.userId,displayName:e.login,img:s,messagesCount:e.messagesCount},o in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r)},auth:Object.assign({},e)}}})}},linkYandexAccount:function(e){var t=e.retPath;return{type:s,retPath:t}},openAuthPopupEffect:y,logoutMultiAccountEffect:function(e){return{type:l,payload:e}},changeMultiAccountEffect:function(e){return{type:p,payload:e}},addMultiAccountEffect:function(){return{type:f}},loadUserEffect:function(){return{type:d}},loadUser:function(){return r(m,"/api/user/",null,void 0,{onSuccess:function(e){var t=e(),n=g(t).userId,r=b(t,n);_.sendPlusMetrika(n),_.sendForumDataMetrika(r)}})},OPEN_AUTH_POPUP:a,CLOSE_AUTH_POPUP:i,SET_AUTH_DATA:c,LINK_YANDEX_ACCOUNT_EFFECT:s,LOAD_USER_EFFECT:d,LOAD_USER:m}},,function(e,t,n){var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(167).NON_BREAKING_SPACE,a={DEFAULT:"DEFAULT",MARK:"MARK",FOLDER:"FOLDER",CHANGE_EMAIL:"CHANGE_EMAIL"};e.exports={WHITE_EMAIL_STATUS_COOKIE_NAME:"white_email_status",WHITE_EMAIL_STATUS_COOKIE_MAX_AGE:2592e6,DEFAULT_EMAIL_STATUS_VALUE:{isHiddenForHit:!0,actionCount:0,expires:0},WHITE_EMAIL_STATUS_COOKIE_DELIMITER:":",WHITE_EMAIL_MAX_ACTION_COUNT:1,MODES:{EMAIL_FORM:"email_form",SUCCESS_MESSAGE:"success_message"},TYPES:{DESKTOP:"desktop",TOUCH:"touch"},AUTHORITY_ACTION_PROPERTY_NAME:"__mdaAuthorityAction",CHANGE_EMAIL_ACTION_PROPERTY_NAME:"__changeEmailAction",END_POINTS:{NODEJS:{WHITE_EMAIL_STATUS:"/user/white-email-status/",SET_EMAIL_WHITE:"/user/set-email-white/",CHANGE_EMAIL:"/user/change-email/"},WHITE_EMAIL_API:{WHITELISTED_EMAIL_STATUS:"/whitelisted-email/status"},KP1_API:{USERS_ME_EMAIL:"/users/me/email"}},LINKS:{CONFIDENTIAL_URL:"https://yandex.ru/legal/confidential/",TERMS_OF_USE_URL:"https://www.kinopoisk.ru/docs/usage/"},ERROR_TEXT_500:"Что-то пошло не так, попробуйте снова",ERROR_TEXT_400:"Неверный формат, или почта занята",DEFAULT_RET_PATH:"/",LOG_NAMESPACE:"white-email:common",AB_EXPERIMENT:{EXPERIMENT_NAME:"email_wl",EXPERIMENT_VALUE:"experiment"},TEXT_PRESETS:(r={},_defineProperty(r,a.DEFAULT,{TITLE:"Нам нужна ваша почта и".concat(o,"мотоцикл"),HINT:"На".concat(o,"самом деле только почта").concat(o,"—")+" если вы хотите получать письма от".concat(o,"КиноПоиска."),BUTTON_CAPTION:"Хочу получать кинописьма"}),_defineProperty(r,a.FOLDER,{TITLE:"Хорошо, что сейчас ".concat((new Date).getFullYear(),", а").concat(o,"не").concat(o,"1955"),HINT:"Мы".concat(o,"можем напоминать вам о").concat(o,"выходе фильма")+" в".concat(o,"прокат и").concat(o,"отправлять другие кинописьма")+" на".concat(o,"любые расстояния. Подтвердите адрес, и").concat(o,"всё заработает!"),BUTTON_CAPTION:"Подтверждаю"}),_defineProperty(r,a.MARK,{TITLE:"Надо, киноман, надо!",HINT:"Подтвердите свою почту, чтобы получать письма от".concat(o,"КиноПоиска"),BUTTON_CAPTION:"Хочу получать кинописьма"}),_defineProperty(r,a.CHANGE_EMAIL,{TITLE:"Изменить email",HINT:"Введите новый адрес",BUTTON_CAPTION:"Изменить"}),r),TEXT_PRESETS_NAMES:a,DIALOG_BOTTOM:35,USER_EMAIL_NOT_EXIST_ERROR_STATUS:406,OK_STATUS:200,METRIKA:{PACKAGE_NAME:"email_wl",SHOW_PARAM_NAME:"show",SHOW_VALUE_PROPOSAL:"proposal",SHOW_VALUE_SENT:"sent",SHOW_VALUE_CHANGE:"change",CLICK_PARAM_NAME:"click",CLICK_VALUE_OK:"ok",CLICK_VALUE_CLOSE:"close"},REQUEST_STATUSES:{IDLE:"idle",PENDING:"pending",LOADED:"loaded",ERROR:"error",UPDATING:"updating"},WHITE_EMAIL_STATUS_DEFAULT_RESPONSE:{isWhitelisted:!1,email:""}}},,,,,,,function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(356).getLogger("Metrika"),o=Object.create(null),a={},i={reachGoal:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this._execute.apply(this,[e,"reachGoal"].concat(n))},params:function(){for(var e,t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(2===o.length)e=o[0],t=o[1];else{if(1!==o.length)return void r.error("[params] Wrong amount of arguments: ".concat(o.length));t=o[0]}t=t.slice(),t=t.reduceRight(function(e,t){return o=e,(r=t)in(n={})?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n;var n,r,o},t.pop()),this._execute(e||"default","params",t)},_execute:function(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];this.getCounterByName(e).then(function(n){r.log("".concat(t," (").concat(e,")(").concat(o[e].id,"): ").concat(JSON.stringify(a))),n[t].apply(n,a)})},onApiReady:function(e,t){e.name||(e.name="default"),o[e.name]||(o[e.name]={id:e.id,api:t},a[e.name]&&a[e.name].forEach(function(e){return e(t)}))},getCounterByName:function(e){return new Promise(function(t){o[e]?t(o[e].api):a[e]?a[e].push(t):a[e]=[t]})},getNameOfPathLevel:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.getPathLevels();return t.length-1>=e?t[e]:"/"},getPathLevels:function(){return location.pathname.split("/").filter(Boolean)},getPathTemplate:function(){return this.getPathLevels().map(function(e){return/\d+/.test(e)?"id":e}).join("/")||"/"},hit:function(){for(var e,t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];"string"==typeof r[1]?(e=r[0],t=r.slice(1)):t=r,this._execute.apply(this,[e||"default","hit"].concat(_toConsumableArray(t)))}};e.exports=i},,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="button".concat("-partial-component");n(1378);var o=n(0),a=n(4).lock(r),i=n(3),c=n(2),s=function(e){function Button(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Button),_possibleConstructorReturn(this,_getPrototypeOf(Button).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Button,o.Component),t=Button,(n=[{key:"render",value:function(){var e=this.props,t=e.size,n=e.theme,r=e.block,i=e.href,s=e.selected,u=e.loading,l=e.target,p=e.className,f=i?"a":"button";return o.createElement(f,{className:c(a({size:t,theme:n,block:r,selected:s,loading:u}),p),onClick:this.props.onClick,disabled:this.props.disabled,href:i,target:l},o.createElement("span",{className:a("content")},this.props.children),this._renderLoader())}},{key:"_renderLoader",value:function(){return this.props.loading?o.createElement("span",{className:a("loader")},o.createElement("span",{className:a("loader-content")})):null}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Button}();s.defaultProps={target:"_self"},s.propTypes={href:i.string,loading:i.bool,size:i.string.isRequired,theme:i.string,disabled:i.bool,selected:i.bool,onClick:i.func,block:i.bool,className:i.string,children:i.node,target:i.string},e.exports=s},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(733),o=n(497),a=n(98),i=n(734);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a,{},i)},function(e,t,n){"use strict";var r=n(65),o=n(954),a=n(1047),i=n(494),c=function(e,t,n){n.forEach(function(n){if(!(n in t))throw new TypeError('param "'.concat(n,'" is required for route "').concat(e,'"'))})};e.exports={url:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s="",u="";switch(e){case"ab-afisha-film-seances-list":c(e,n,["id","cityId"]),n.slug&&(u="".concat(n.slug,"-")),s="/film/".concat(u).concat(n.id,"/afisha/city/").concat(n.cityId,"/"),n.date&&(s="".concat(s,"day_view/").concat(n.date,"/")),t=o(n,["id","slug","cityId","date"]);break;case"ab-afisha-film-seances-map":c(e,n,["id","cityId"]),s="/map/city/".concat(n.cityId,"/film/").concat(n.id,"/"),t=o(n,["id","cityId"]);break;case"ab-afisha-film-seances-in-cinema":c(e,n,["id","cinemaId"]),n.slug&&(u="".concat(n.slug,"-")),s="/film/".concat(u).concat(n.id,"/seances-in-cinema/").concat(n.cinemaId,"/"),t=o(n,["id","slug","cinemaId"]);break;case"api-tooltip-film":c(e,n,["id"]),t=o(n,["id"]),s="/api/tooltip/film/".concat(n.id,"/");break;case"api-tooltip-person":c(e,n,["id"]),t=o(n,["id"]),s="/api/tooltip/person/".concat(n.id,"/");break;case"afisha":s="/afisha/new/",n.cityId&&(s+="city/".concat(n.cityId,"/"));break;case"cinema-seances-list":c(e,n,["id"]),s="/afisha/city/".concat(n.cityId,"/cinema/").concat(n.id,"/"),n.date&&(s="".concat(s,"day_view/").concat(n.date,"/"));break;case"cinema-comments-list":c(e,n,["id"]),s="/cinemas/".concat(n.id,"/ord/date/page/").concat(n.pageNumber,"/#list");break;case"cinema":c(e,n,["id"]),s="/cinemas/".concat(n.id,"/");break;case"cinema-comment":s="/cinemas/".concat(n.id,"/comment/");break;case"watch-online-selection":s="/watch/selection/".concat(n.selectionId,"/");break;case"user-me-films-to-watch":s="/user/me/films-to-watch/",n.filmId&&(s="".concat(s).concat(n.filmId,"/"));break;case"film-object-card":s="/film-object-card/".concat(n.id,"/");break;case"person-object-card":s="/person-object-card/".concat(n.id,"/");break;case"comments":s="/".concat(n.entityType,"/").concat(n.entityId,"/comments/"),n.commentId&&(s+="".concat(n.commentId,"/"));break;case"comments-subscribe":s="/".concat(n.entityType,"/").concat(n.entityId,"/comments/subscribe/");break;case"comments-votes":s="/".concat(n.entityType,"/").concat(n.entityId,"/comments/"),n.commentId&&(s="".concat(s).concat(n.commentId,"/")),s="".concat(s,"votes/");break;case"comments-complaints":s="/".concat(n.entityType,"/").concat(n.entityId,"/comments/"),n.commentId&&(s+="".concat(n.commentId,"/")),s+="complaints/";break;default:throw new TypeError('Route for provided name "'.concat(e,'" does not exist'))}return t=a(t,i),Object.keys(t).length&&(s="".concat(s,"?").concat(r.stringify(t))),s}}},,function(e,t,n){var r=n(14).default,o=n(17).PENDING_TYPES,a=r("selections/START_UPDATE_STATS_WATCHING_EFFECT");e.exports={SEO_CHANGE_PAGE:"selections/PAGE_CHANGE",SEO_CHANGE_FILTER:"selections/FILTER_CHANGE_EFFECT",SEO_CHANGE_SORT:"selections/SORT_CHANGE",SEO_CHANGE_EXCLUDE_VIEWED:"selections/SEO_TOGGLE_EXCLUDE_VIEWED",SEO_UPDATE_LIST:"selections/SEO_UPDATE_LIST",SEO_UPDATE_COVER:"selections/SEO_UPDATE_COVER",RAISE_SELECTION_ERROR:"selections/ERROR",SUSPEND_SELECTION:"selections/SUSPEND",ON_FILM_CLICK_EFFECT:"selections/ON_FILM_CLICK_EFFECT",ON_TRAILER_CLICK_EFFECT:"selections/ON_TRAILER_CLICK_EFFECT",ON_ONLINE_CLICK_EFFECT:"selections/ON_ONLINE_CLICK_EFFECT",ON_ACTION_CLICK_EFFECT:"selections/ON_ACTION_CLICK_EFFECT",ON_TOPBAR_LINK_CLICK_EFFECT:"selections/ON_TOPBAR_LINK_CLICK_EFFECT",ON_HAS_WATCHED_EFFECT:"selections/ON_HAS_WATCHED_EFFECT",CHANGE_SEO_ROUTE_EFFECT:"selections/CHANGE_SEO_ROUTE_EFFECT",CHANGE_EDITORIAL_ROUTE_EFFECT:"selections/CHANGE_EDITORIAL_ROUTE_EFFECT",SEO_CHANGE_APPLIED_QUICK_FILTERS:"selections/SEO_CHANGE_APPLIED_QUICK_FILTERS",START_UPDATE_STATS_WATCHING_EFFECT:"selections/START_UPDATE_STATS_WATCHING_EFFECT",EDITORIAL_UPDATE_STATS:"selections/EDITORIAL_UPDATE_STATS",changeSeoFilter:function(e){return{type:"selections/FILTER_CHANGE_EFFECT",payload:e}},changeSeoPage:function(e){return{type:"selections/PAGE_CHANGE",payload:e}},changeSeoSort:function(e){return{type:"selections/SORT_CHANGE",payload:e}},changeSeoExcludeViewed:function(e){return{type:"selections/SEO_TOGGLE_EXCLUDE_VIEWED",payload:{value:e}}},updateSeoList:function(e){return{type:"selections/SEO_UPDATE_LIST",payload:e}},updateSeoCover:function(e){return{type:"selections/SEO_UPDATE_COVER",payload:e}},raiseSelectionError:function(e){return{type:"selections/ERROR",payload:{status:e.status,error:e.error}}},suspendSelection:function(){return{type:"selections/SUSPEND",payload:{type:arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.full}}},onFilmClickEffect:function(e){return{type:"selections/ON_FILM_CLICK_EFFECT",payload:{filmId:e}}},onTrailerClickEffect:function(e){return{type:"selections/ON_TRAILER_CLICK_EFFECT",payload:{filmId:e}}},onOnlineClickEffect:function(e,t){return{type:"selections/ON_ONLINE_CLICK_EFFECT",payload:{filmId:e,buttonCaption:t}}},onActionClickEffect:function(e){return{type:"selections/ON_ACTION_CLICK_EFFECT",payload:{filmId:e}}},onTopbarLinkClickEffect:function(e){return{type:"selections/ON_TOPBAR_LINK_CLICK_EFFECT",payload:{linkType:e}}},onHasWatchedEffect:function(e,t){return{type:"selections/ON_HAS_WATCHED_EFFECT",payload:{filmId:e,operation:t}}},changeSeoRouteEffect:function(e){return{type:"selections/CHANGE_SEO_ROUTE_EFFECT",payload:{query:e.query,params:e.params}}},changeEditorialRouteEffect:function(e){return{type:"selections/CHANGE_EDITORIAL_ROUTE_EFFECT",payload:{query:e.query,params:e.params}}},changeSeoAppliedQuickFilters:function(e){return{type:"selections/SEO_CHANGE_APPLIED_QUICK_FILTERS",payload:{appliedQuickFilters:e}}},startUpdateStatsWatchingEffect:a,updateEditorialStats:function(e){return{type:"selections/EDITORIAL_UPDATE_STATS",payload:e}}}},,,,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(6).createSelector,o=n(107).default,a=n(172),i=a.selectEntityUserData,c=a.selectEntityOttData,s=a.selectEntityIdByType,u=a.selectEntityAfishaData,l=n(227),p=l.selectFilm,f=l.selectFilmUserData,d=l.selectFilmOttData,m=l.selectFilmAfishaData,y=n(454).selectFolders,_=n(70).composeSeoSelectionLink,h=n(583).itemKeys,g=n(17).EMPTY_FILTER_VALUE,b=n(92).ENTITIES_TYPES,E=n(189).getCurrentFiltersForSelects,v=n(391),O=v["selections.list_types.film"],P=v["selections.list_types.serial"],S=n(151).noun,T=n(575),k=n(167).EN_DASH,C=n(15),w=function(e){return e.selections.filters||{countries:[],genres:[],years:[]}},I=r(function(e){return e.selections.currentFilters},w,function(e,t){return{country:t.countries.find(function(t){return t.id===e.countryId}),genre:t.genres.find(function(t){return t.id===e.genreId}),years:e.years&&e.years.join()!==g?e.years:null}}),A=function(e){return C(e,"selections.page",{})},x=r(A,function(e){return e&&e.number}),R=function(e){return C(e,"selections.sort[0]")},N=r(R,function(e){return e?e.parameter:null}),j=function(e){return Boolean(C(e,"selections.excludeViewed",!1))},D=function(e){return C(e,"selections.appliedQuickFilters")},M=r(I,x,R,D,j,function(e,t,n,r,o){var a=e.genre,i=e.country;return{page:t,quickFilters:r,excludeViewed:o,years:e.years,genreSlug:C(a,"nameEng","").toLowerCase()||void 0,countryId:i&&i.id,sort:n&&n.parameter}}),L=r(I,D,function(e){var t=e.genre,n=e.country,r=e.years,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];switch(t&&t.nameRusPlural?a.push(t.nameRusPlural):o.includes(h.serials)?a.push("Сериалы"):o.includes(h.films)?a.push("Фильмы"):a.push("Фильмы и сериалы"),r&&r.length){case 1:a.push("".concat(r[0]," года"));break;case 2:a.push("".concat(r[0],"-х годов"))}return n&&n.nameRus&&a.push("(".concat(n.nameRus,")")),a.join(" ")}),F=r(I,D,L,function(e,t,n){var r={};return r=t.includes(h.serials)?{title:"".concat(n," – списки лучших сериалов – КиноПоиск"),description:"".concat(n," и другие списки лучших сериалов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")}:t.includes(h.films)?{title:"".concat(n," – списки лучших фильмов – КиноПоиск"),description:"".concat(n," и другие списки лучших фильмов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")}:{title:"".concat(n," – списки лучших фильмов и сериалов – КиноПоиск"),description:"".concat(n," и другие списки лучших фильмов и сериалов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")},t.some(function(e){return[h.availableOnline,h.kinopoiskSubscription,h.kinopoiskWithAmediatekaSubscription,h.userAvailable,h.yandexPlusSubscription].includes(e)})&&(r.title="Смотреть онлайн ".concat(r.title.slice(0,1).toLowerCase()).concat(r.title.slice(1)),r.description="Смотреть онлайн ".concat(r.description.slice(0,1).toLowerCase()).concat(r.description.slice(1))),r}),U=r(M,function(e){return _(_objectSpread({},e,{quickFilters:e.quickFilters.filter(function(e){return[h.films,h.serials].includes(e)}),sort:null,page:null,excludeViewed:null}))}),W=r(w,function(e){return e.genres}),B=r(w,function(e){return e.countries}),G=r(w,function(e){return e.years}),H=r(W,function(e){return e.filter(function(e){return e.isVisible})}),Y=r(I,E),K=r(I,function(e){var t=e.country,n=e.genre,r=e.years,o={heading:"",subHeading:""};return n?(o.heading=n.nameRusPlural.toLowerCase(),r&&r.length?(o.subHeading=r.join(k),t&&(o.subHeading+=", ".concat(t.nameRus))):t&&(o.subHeading=t.nameRus)):t?(o.heading=t.nameRus,r&&r.length&&(o.subHeading=r.join(k))):r&&r.length&&(o.heading=r.join(k)),o}),z=r(D,function(e){return e.includes(h.serials)?P:O}),V=r(A,z,function(e,t){return"".concat(T(e.total,{maximumFractionDigits:0})," ").concat(S(e.total,"".concat(t),"".concat(t,"а"),"".concat(t,"ов")))}),q=function(e){return e.selections.meta},X=function(e){return e.selections.meta.slug},Q=r(X,x,R,D,j,function(e,t,n,r,o){return{page:t,quickFilters:r,excludeViewed:o,slug:e,sort:n&&n.parameter}}),Z=r(D,q,function(e,t){var n={},r=t&&t.name;return n=e.includes(h.serials)?{title:"".concat(r," – списки лучших сериалов – КиноПоиск"),description:"".concat(r," и другие списки лучших сериалов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")}:e.includes(h.films)?{title:"".concat(r," – списки лучших фильмов – КиноПоиск"),description:"".concat(r," и другие списки лучших фильмов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")}:{title:"".concat(r," – списки лучших фильмов и сериалов – КиноПоиск"),description:"".concat(r," и другие списки лучших фильмов и сериалов с рейтингом и отзывами. Выбирайте и смотрите кино онлайн на КиноПоиске")},e.some(function(e){return[h.availableOnline,h.kinopoiskSubscription,h.kinopoiskWithAmediatekaSubscription,h.userAvailable,h.yandexPlusSubscription].includes(e)})&&(n.title="Смотреть онлайн ".concat(n.title.slice(0,1).toLowerCase()).concat(n.title.slice(1)),n.description="Смотреть онлайн ".concat(n.description.slice(0,1).toLowerCase()).concat(n.description.slice(1))),n}),$=r(Q,function(e){return _(_objectSpread({},e,{quickFilters:e.quickFilters.filter(function(e){return[h.films,h.serials].includes(e)}),sort:null,page:null,excludeViewed:null}))}),J=o(function(e){return e.selections.stats},{});e.exports={selectSeoCurrentFiltersNormalized:I,selectSeoAllFilters:w,selectSorting:R,selectSortingParam:N,selectExcludeViewed:j,selectSeoListItems:function(e){return C(e,"selections.items",[]).map(function(t){return s(e,{type:b.film,id:t})}).filter(Boolean)},selectSeoListUserData:function(e){return C(e,"selections.items",[]).map(function(t){return i(e,{type:b.film})[t]})},selectSeoListOttData:function(e){return C(e,"selections.items",[]).map(function(t){return c(e,{type:b.film})[t]})},selectPageData:A,selectSeoPageNumber:x,selectLoadingStatus:function(e){return C(e,"selections.status")},selectError:function(e){return C(e,"selections.error")},selectPendingType:function(e){return C(e,"selections.pendingType")},selectSeoCover:function(e){return C(e,"selections.cover")},selectSeoQuickFilters:function(e){return C(e,"selections.quickFilters")},selectTotalPages:function(e){var t=C(e,"selections.page",{}),n=t.total,r=t.size;return n&&r?Math.ceil(n/r):0},selectAppliedQuickFilters:D,selectQuickFiltersEnabled:function(e){return C(e,"common.selectionsQuickFiltersEnabled",!1)},selectSeoCurrentUrlParameters:M,selectSeoSelectionHeading:L,selectSeoSelectionMeta:F,selectSeoSelectionCanonical:U,selectSeoCurrentFiltersForSelects:Y,selectSeoCoverCaptions:K,selectSeoListType:z,selectTotalCaption:V,selectSeoListAfishaData:function(e){return C(e,"selections.items",[]).map(function(t){return u(e,{type:b.film})[t]})},selectFilmItemProps:function(e,t){var n=t.filmId,r=p(e,n),o=f(e,n),a=m(e,n),i=d(e,n),c=y(e).map(function(e){return o.folderIds&&o.folderIds.includes(e.id)?_objectSpread({},e,{hasFilm:!0}):e}),s=!Boolean(o.folderIds);return{filmId:n,poster:r.posterLink,russianTitle:r.title,originalTitle:r.originalTitle,countries:r.countries&&r.countries.map(function(e){return e.name}),genres:r.genres&&r.genres.map(function(e){return e.name}),year:r.year,serialYear:r.serialYear,serialYears:r.serialYears,rating:r.ratings&&r.ratings.rating,expectation:r.ratings&&r.ratings.expectation,isVotingScored:Boolean(o.rating),votingValue:o.rating,willWatch:o.isPlannedToWatch,hasWatched:o.isWatched,hasTrailer:r.hasTrailer,href:"/film/".concat(n,"/"),onlineLink:i.onlineLink,onlineCaption:i.textToDisplay,onlineOriginalCaption:i.originalOfferText,afishaLink:a.afishaLink,areFoldersPending:s,subscriptionPurchaseTag:i.subscriptionPurchaseTag,isPurchased:i.isPurchased,folders:c}},selectEditorialMeta:q,selectEditorialMetaTag:Z,selectEditorialSlug:X,selectEditorialCurrentUrlParameters:Q,selectEditorialSelectionCanonical:$,selectEditorialSelectionStats:J,selectEditorialSelectionStatsTotal:function(e){var t=e.selections,n=t.stats,r=t.page;return n?n.total:r.total},selectEditorialSelectionStatsWatched:function(e){return C(e.selections,"stats.watched",null)},selectSeoVisibleGenres:H,selectSeoCountryFilter:B,selectSeoYearFilter:G}},function(e,t,n){"use strict";var r=function(e,t){return{type:"comments/models/UPDATE",payload:{id:e,data:t}}};e.exports={commentsLoadNextPageEffect:function(e){return{type:"comments/LOAD_NEXT_PAGE_EFFECT",payload:{entityId:e.entityId,entityType:e.entityType,page:e.page}}},update:function(e){return{type:"comments/UPDATE",payload:e}},addComment:function(e){return{type:"comments/ADD",payload:e}},toggleComment:function(e,t){return r(e,{collapsed:t})},voteComment:function(e){return{type:"comments/VOTE_COMMENT",payload:e}},updateUserVote:function(e,t){return{type:"comments/UPDATE_USER_VOTE",payload:{commentId:e,type:t}}},deleteUserVote:function(e){return{type:"comments/DELETE_USER_VOTE",payload:{commentId:e}}},commentsInitPageEffect:function(e){return{type:"comments/INIT_PAGE_EFFECT",payload:{entityId:e.entityId,entityType:e.entityType,limit:e.limit}}},flashHighlightEffect:function(e){var t=e.commentId,n=e.ms;return{type:"comments/FLASH_HIGHLIGHT_EFFECT",payload:{commentId:t,ms:void 0===n?2e3:n}}},toggleSubscribe:function(e){return{type:"comments/TOGGLE_SUBSCRIBE",payload:{entityId:e.entityId,entityType:e.entityType,isSubscribed:e.isSubscribed}}},commentsModelsUpdate:r,commentsModelsDeleteEffect:function(e){return{type:"comments/models/DELETE_EFFECT",payload:{entityId:e.entityId,entityType:e.entityType,commentId:e.commentId}}},commentsPaginationUpdate:function(e){return{type:"comments/pagination/UPDATE",payload:e}},commentsUserComplaintsCreateEffect:function(e){return{type:"comments/user_complaints/CREATE_EFFECT",payload:{entityId:e.entityId,entityType:e.entityType,commentId:e.commentId}}},commentsUserComplaintsCreate:function(e){return{type:"comments/user_complaints/CREATE",payload:e}},toggleHighlightEffect:function(e){return{type:"comments/TOGGLE_HIGHLIGHT_EFFECT",payload:{commentId:e.commentId,isHighlighted:e.isHighlighted}}},commentsHighlightCreate:function(e){return{type:"comments/highlight/CREATE",payload:e}},commentsHighlightDelete:function(e){return{type:"comments/highlight/DELETE",payload:e}},commentsCopyDeepLinkEffect:function(e){return{type:"comments/COPY_DEEP_LINK_EFFECT",payload:{entityBasePath:e.entityBasePath,commentId:e.commentId}}},COMMENTS_MODELS_DELETE_EFFECT:"comments/models/DELETE_EFFECT",COMMENTS_MODELS_UPDATE:"comments/models/UPDATE",COMMENTS_LOAD_NEXT_PAGE_EFFECT:"comments/LOAD_NEXT_PAGE_EFFECT",COMMENTS_UPDATE:"comments/UPDATE",COMMENTS_VOTE_COMMENT:"comments/VOTE_COMMENT",COMMENTS_UPDATE_USER_VOTE:"comments/UPDATE_USER_VOTE",COMMENTS_DELETE_USER_VOTE:"comments/DELETE_USER_VOTE",COMMENTS_INIT_PAGE_EFFECT:"comments/INIT_PAGE_EFFECT",COMMENTS_ADD:"comments/ADD",COMMENTS_PAGINATION_UPDATE:"comments/pagination/UPDATE",COMMENTS_FLASH_HIGHLIGHT_EFFECT:"comments/FLASH_HIGHLIGHT_EFFECT",COMMENTS_TOGGLE_SUBSCRIBE:"comments/TOGGLE_SUBSCRIBE",COMMENTS_USER_COMPLAINTS_CREATE_EFFECT:"comments/user_complaints/CREATE_EFFECT",COMMENTS_USER_COMPLAINTS_CREATE:"comments/user_complaints/CREATE",COMMENTS_TOGGLE_HIGHLIGHT_EFFECT:"comments/TOGGLE_HIGHLIGHT_EFFECT",COMMENTS_HIGHLIGHT_CREATE:"comments/highlight/CREATE",COMMENTS_HIGHLIGHT_DELETE:"comments/highlight/DELETE",COMMENTS_COPY_DEEP_LINK_EFFECT:"comments/COPY_DEEP_LINK_EFFECT"}},function(e,t,n){var r=n(14).default,o=r("white-email/CONFIRM_REQUESTED_EFFECT"),a=r("white-email/CONFIRM_POPUP_CLOSED_EFFECT"),i=r("white-email/SET_EMAIL_WHITE_EFFECT"),c=r("white-email/EMAIL_CHANGED_WHITE_MODE_EFFECT"),s=r("white-email/EMAIL_CHANGED_NORMAL_MODE_EFFECT"),u=r("white-email/ERROR_CLEARED"),l=r("white-email/UPDATE"),p=r("white-email/LOADING_FAILURE"),f=r("white-email/CHANGE_EMAIL_REQUESTED"),d=r("white-email/CHANGE_EMAIL_POPUP_CLOSED_EFFECT");e.exports={WHITE_EMAIL_CONFIRM_REQUESTED_EFFECT:"white-email/CONFIRM_REQUESTED_EFFECT",whiteEmailConfirmRequestedEffect:o,WHITE_EMAIL_CONFIRM_POPUP_CLOSED_EFFECT:"white-email/CONFIRM_POPUP_CLOSED_EFFECT",whiteEmailConfirmPopupClosedEffect:a,WHITE_EMAIL_SET_EMAIL_WHITE_EFFECT:"white-email/SET_EMAIL_WHITE_EFFECT",whiteEmailSetEmailWhiteEffect:i,EMAIL_CHANGED_WHITE_MODE_EFFECT:"white-email/EMAIL_CHANGED_WHITE_MODE_EFFECT",emailChangedWhiteModeEffect:c,EMAIL_CHANGED_NORMAL_MODE_EFFECT:"white-email/EMAIL_CHANGED_NORMAL_MODE_EFFECT",emailChangedNormalModeEffect:s,WHITE_EMAIL_ERROR_CLEARED:"white-email/ERROR_CLEARED",whiteEmailErrorCleared:u,WHITE_EMAIL_UPDATE:"white-email/UPDATE",whiteEmailUpdate:l,WHITE_EMAIL_LOADING_FAILURE:"white-email/LOADING_FAILURE",whiteEmailLoadingFailure:p,CHANGE_EMAIL_REQUESTED_EFFECT:"white-email/CHANGE_EMAIL_REQUESTED",changeEmailRequestedEffect:f,CHANGE_EMAIL_POPUP_CLOSED_EFFECT:"white-email/CHANGE_EMAIL_POPUP_CLOSED_EFFECT",changeEmailPopupClosedEffect:d}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(801),o=n(802),a=n(803),i=n(804),c=n(805);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a,{},i,{},c)},function(e,t){var n,r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={SAME_MONTH:1,LAST_THREE_MONTH:2,LAST_SIX_MONTH:3,SAME_YEAR:4},a=(_defineProperty(n={},o.SAME_MONTH,"В этом месяце"),_defineProperty(n,o.LAST_THREE_MONTH,"Последние 3 месяца"),_defineProperty(n,o.LAST_SIX_MONTH,"Последние 6 месяцев"),_defineProperty(n,o.SAME_YEAR,"Этот год"),n),i={YA_PLUS:"YA_PLUS",YA_PLUS_3M:"YA_PLUS_3M",YA_PLUS_KP:"YA_PLUS_KP",YA_PREMIUM:"YA_PREMIUM",KP_BASIC:"KP_BASIC"},c={PLUS:"plus",KP_BASIC:"kp-basic",KP_AMEDIATEKA:"kp-amediateka"},s=(_defineProperty(r={},i.YA_PLUS_3M,c.PLUS),_defineProperty(r,i.YA_PLUS,c.PLUS),_defineProperty(r,i.YA_PLUS_KP,c.PLUS),_defineProperty(r,i.KP_BASIC,c.KP_BASIC),_defineProperty(r,i.YA_PREMIUM,c.KP_AMEDIATEKA),r);e.exports={SERVICE_ID:25,SELECTION_TYPES:{BASIC:"basic",PERSONAL:"personal",SLIDER:"slider",MULTISELECTION:"multiselection",UNSEEN:"unseen",BUNKER_ITEM:"bunker-item"},SELECTION_WINDOW_ID:"kp-morda",MONETIZATION_MODELS:{AVOD:"AVOD",EST:"EST",TVOD:"TVOD",SVOD:"SVOD"},WATCH_STATUS:{UNLIMITED:"UNLIMITED",EXPIRED:"EXPIRED",WAITING_START_WATCHING:"WAITING_START_WATCHING",WAITING_END_WATCHING:"WAITING_END_WATCHING"},PURCHASES_SLUG:"PURCHASES",PURCHASES_GROUPS_ID:o,PURCHASES_GROUPS_TITLE:a,CATEGORIES_SLUGS:{FILMS:"FILMS",SERIES:"SERIES",KIDS:"KIDS",SUBSCRIPTION:"SUBSCRIPTION",KP_BASIC:"KP_BASIC"},SELECTIONS_PER_PAGE:3,FILMS_PER_CAROUSEL_CHUNK:12,PLUS_BADGE_TEXT:"По подписке",SUBSCRIPTION:i,DEFAULT_BACKGROUND_FILM_ID:{YA_PREMIUM:195523,YA_PLUS:1040949,KP_BASIC:1111018},DEFAULT_UNSEEN_POSITION:1,DEFAULT_LIFT_SELECTION_POSITION:1,WATCHING_OPTION_TYPE:{PAID:"PAID",PAID_MULTIPLE:"PAID_MULTIPLE",SUBSCRIPTION:"SUBSCRIPTION",FREE:"FREE"},SUBSCRIPTION_PURCHASE_TAG:c,SUBSCRIPTION_TO_SUBSCRIPTION_PURCHASE_TAG:s,VIEW_OPTIONS_IDS_LIMIT:50,CURRENCIES:{rub:"₽",byn:"BYN"},FILM_TYPES:{movie:"MOVIE",episode:"EPISODE"}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(367),o=n(668);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({reducer:o},r)},,function(e,t,n){var r=n(64).OPEN_AUTH_POPUP_EFFECT;e.exports={mdaRouteChangeEffect:function(){return{type:"mda/ROUTE_CHANGE_EFFECT"}},mdaInitEffect:function(){return{type:"mda/INIT_EFFECT"}},mdaExperimentInitDoneEffect:function(){return{type:"mda/EXPERIMENT_INIT_DONE_EFFECT"}},updateMdaExperimentIsActive:function(e){return{type:"mda/UPDATE_EXPERIMENT_IS_ACTIVE",payload:e}},mdaDomikBindYandexAccountEffect:function(e){return{type:"mda/DOMIK_BIND_YANDEX_ACCOUNT_EFFECT",payload:e}},mdaDomikDoneEffect:function(){return{type:"mda/DOMIK_DONE_EFFECT"}},closeMdaHeaderHintEffect:function(){return{type:"mda/CLOSE_HEADER_HINT_EFFECT"}},updateMdaUserMenuHintMode:function(e){return{type:"mda/UPDATE_USER_MENU_HINT_SHOWN",payload:e}},updateMdaHeaderHintShown:function(e){return{type:"mda/UPDATE_HEADER_HINT_SHOWN",payload:e}},openAuthPopupEffect:function(e){return{type:r,payload:e}},updateMdaDomikLoginCaptcha:function(e){return{type:"mda/UPDATE_DOMIK_LOGIN_CAPTCHA",payload:e}},updateMdaDomikMode:function(e){return{type:"mda/UPDATE_DOMIK_MODE",payload:e}},mdaLoginEffect:function(e){return{type:"mda/LOGIN_EFFECT",payload:e}},mdaCaptchaRefreshEffect:function(e){return{type:"mda/CAPTCHA_REFRESH_EFFECT",payload:e}},mdaRemindPasswordEffect:function(){return{type:"mda/REMIND_PASSWORD_EFFECT"}},mdaSocialLoginEffect:function(e){return{type:"mda/SOCIAL_LOGIN_EFFECT",payload:{socialNetwork:e}}},mdaAccountRecoveryEffect:function(){return{type:"mda/ACCOUNT_RECOVERY_EFFECT"}},mdaDomikCloseEffect:function(){return{type:"mda/DOMIK_CLOSE_EFFECT"}},mdaAuthorityActionEffect:function(e){return{type:"mda/AUTHORITY_ACTION_EFFECT",payload:e}},MDA_LOGIN_EFFECT:"mda/LOGIN_EFFECT",MDA_ROUTE_CHANGE_EFFECT:"mda/ROUTE_CHANGE_EFFECT",MDA_INIT_EFFECT:"mda/INIT_EFFECT",MDA_UPDATE_EXPERIMENT_IS_ACTIVE:"mda/UPDATE_EXPERIMENT_IS_ACTIVE",MDA_CLOSE_HEADER_HINT_EFFECT:"mda/CLOSE_HEADER_HINT_EFFECT",MDA_ACCOUNT_RECOVERY_EFFECT:"mda/ACCOUNT_RECOVERY_EFFECT",MDA_REMIND_PASSWORD_EFFECT:"mda/REMIND_PASSWORD_EFFECT",MDA_SOCIAL_LOGIN_EFFECT:"mda/SOCIAL_LOGIN_EFFECT",MDA_CAPTCHA_REFRESH_EFFECT:"mda/CAPTCHA_REFRESH_EFFECT",MDA_UPDATE_DOMIK_LOGIN_CAPTCHA:"mda/UPDATE_DOMIK_LOGIN_CAPTCHA",MDA_UPDATE_DOMIK_MODE:"mda/UPDATE_DOMIK_MODE",MDA_DOMIK_CLOSE_EFFECT:"mda/DOMIK_CLOSE_EFFECT",MDA_DOMIK_BIND_YANDEX_ACCOUNT_EFFECT:"mda/DOMIK_BIND_YANDEX_ACCOUNT_EFFECT",MDA_DOMIK_DONE_EFFECT:"mda/DOMIK_DONE_EFFECT",MDA_UPDATE_USER_MENU_HINT_MODE:"mda/UPDATE_USER_MENU_HINT_SHOWN",MDA_UPDATE_HEADER_HINT_SHOWN:"mda/UPDATE_HEADER_HINT_SHOWN",MDA_EXPERIMENT_INIT_DONE_EFFECT:"mda/EXPERIMENT_INIT_DONE_EFFECT",MDA_AUTHORITY_ACTION_EFFECT:"mda/AUTHORITY_ACTION_EFFECT"}},function(e,t,n){var r=n(6).createSelector,o=n(74).getAvatarsHost,a=function(e){return e.auth},i=r(a,function(e){return e.sezam||{}}),c=r(i,function(e){return e.accounts||[]}),s=r(a,function(e){return e.passportUserId}),u=r([i,o],function(e,t){var n=e.accounts&&e.accounts.find(function(t){return t.uid===e.default_uid});return n&&n.displayName.default_avatar&&Object.assign(n,{imageUrl:{x1:"//".concat(t,"/get-yapic/").concat(n.displayName.default_avatar,"/islands-200")}}),n}),l=r(u,function(e){return e&&e.attributes.has_plus}),p=r(s,c,function(e,t){return t.find(function(t){var n=t.uid;return Number(n)===e})}),f=r(i,function(e){return Boolean(e.default_uid)});e.exports={selectAuthState:a,getSezam:i,getPlusHost:function(e){return e.common.plusHost},getSezamDefaultAccount:u,getSezamDefaultAccountPlusStatus:l,hasYandexAccountInSezam:f,selectIsAuthorized:function(e){return e.auth&&e.auth.isAuthorized},selectCurrentSezamAccount:p,selectSezamAccounts:c,selectPassportUserId:s}},function(e,t,n){var r=n(14).default,o=r("page/UPDATE"),a=r("page/PAGE_SET_ORIGINAL_URL_EFFECT");e.exports={enablePageScroll:function(){return{type:"page/ENABLE_PAGE_SCROLL"}},disablePageScroll:function(){return{type:"page/DISABLE_PAGE_SCROLL"}},pageChangeSectionEffect:function(e){var t=e.sectionElement,n=e.sectionId,r=e.onlyOnTheFirstVisit;return{type:"page/CHANGE_SECTION_EFFECT",payload:{sectionElement:t,sectionId:n,onlyOnTheFirstVisit:void 0!==r&&r}}},pageScrollToEffect:function(e){var t=e.top,n=e.behavior;return{type:"page/SCROLL_TO_EFFECT",payload:{top:t,behavior:void 0===n?"smooth":n}}},reloadPage:function(){return{type:"page/PAGE_RELOAD"}},ENABLE_PAGE_SCROLL:"page/ENABLE_PAGE_SCROLL",DISABLE_PAGE_SCROLL:"page/DISABLE_PAGE_SCROLL",PAGE_CHANGE_SECTION_EFFECT:"page/CHANGE_SECTION_EFFECT",PAGE_SCROLL_TO_EFFECT:"page/SCROLL_TO_EFFECT",PAGE_UPDATE:"page/UPDATE",pageUpdate:o,PAGE_OPEN_ADMIN_SNIPPET_EFFECT:"page/OPEN_ADMIN_SNIPPET_EFFECT",pageOpenAdminSnippetEffect:function(){return{type:"page/OPEN_ADMIN_SNIPPET_EFFECT",payload:{}}},PAGE_CLOSE_ADMIN_SNIPPET_EFFECT:"page/CLOSE_ADMIN_SNIPPET_EFFECT",pageCloseAdminSnippetEffect:function(){return{type:"page/CLOSE_ADMIN_SNIPPET_EFFECT",payload:{}}},PAGE_RESTORE_ADMIN_SNIPPET_EFFECT:"page/RESTORE_ADMIN_SNIPPET_EFFECT",pageRestoreAdminSnippetEffect:function(){return{type:"page/RESTORE_ADMIN_SNIPPET_EFFECT",payload:{}}},PAGE_SET_ORIGINAL_URL_EFFECT:"page/PAGE_SET_ORIGINAL_URL_EFFECT",pageSetOriginalUrlEffect:a,PAGE_RELOAD:"page/PAGE_RELOAD"}},function(e,t,n){"use strict";e.exports={COOKIE_NAME:"Session_id",YANDEX_SESSION_COOKIE_NAME:"ya_sess_id",COOKIE_DOMAIN:".kinopoisk.ru",COOKIE_USER_SOURCE_NAME:"user-source",MDA_EXPERIMENT_COOKIE_NAME:"mda_exp",MDA_EXPERIMENT_ENABLED_COOKIE_NAME:"mda_exp_enabled",MDA_USER_HINT_CLOSED_COOKIE_NAME:"mda_hint_closed",MDA_RELOADED_PAGE_AFTER_LOGIN:"mda_reloaded_page",MDA_RELOADED_PAGE_AFTER_LOGIN_EXPIRES:120,MDA_EXPERIMENT_COOKIE_EXPIRES:31536e3,LINK_YANDEX_ACCOUNT_EFFECT:"auth/LINK_YANDEX_ACCOUNT_EFFECT",SET_AUTH_DATA:"auth/SET_DATA",OPEN_AUTH_POPUP:"auth/OPEN_POPUP",OPEN_AUTH_POPUP_EFFECT:"auth/OPEN_POPUP_EFFECT",CLOSE_AUTH_POPUP:"auth/CLOSE_POPUP",LOGOUT_EFFECT:"auth/LOGOUT_EFFECT",LOAD_HEADER_FEATURES:"header/LOAD_FEATURES",COOKIE_USER_FROM_LOGIN:"user-from-login",LOGOUT_MULTI_ACCOUNT_EFFECT:"auth/LOGOUT_MULTI_ACCOUNT_EFFECT",CHANGE_MULTI_ACCOUNT_EFFECT:"auth/CHANGE_MULTI_ACCOUNT_EFFECT",ADD_MULTI_ACCOUNT_EFFECT:"auth/ADD_MULTI_ACCOUNT_EFFECT",MDA_USER_MENU_HINT_MODES:{hidden:"hidden",recover:"recover",connectAnother:"connectAnother"},LOAD_USER_EFFECT:"auth/LOAD_USER_EFFECT",LOAD_USER:"auth/LOAD_USER"}},,,,,,function(e,t,n){var r,o,a;function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(393).DEFAULT_SORTING_OPTION,c=n(394).DEFAULT_SORTING_OPTION,s=n(392),u=n(279),l={genre:"genre",country:"country",year:"year",yearRange:"yearRange",page:"page",sort:"sort",quickFilters:"quick_filters",excludeViewed:"exclude_viewed",slug:"slug"},p=[l.genre,l.country,l.year,l.yearRange,l.slug],f=[l.page,l.sort,l.quickFilters,l.excludeViewed],d=(_defineProperty(r={},l.page,function(e){return e&&e>1?e:null}),_defineProperty(r,l.quickFilters,function(e){return e&&e.length?e.join(","):null}),_defineProperty(r,l.excludeViewed,function(e){return e?1:null}),r),m=_objectSpread((_defineProperty(o={},l.genre,function(e){return e||null}),_defineProperty(o,l.country,function(e){return e?"country-".concat(e):null}),_defineProperty(o,l.year,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&1===e.length?e[0]:null}),_defineProperty(o,l.yearRange,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e&&2===e.length?e.join("-"):null}),_defineProperty(o,l.sort,function(e){return e!==i.parameter?e:null}),o),d),y=_objectSpread({},d,(_defineProperty(a={},l.sort,function(e){return e!==c.parameter?e:null}),_defineProperty(a,l.slug,function(e){return e||null}),a)),_=function(e,t){return Object.entries(t).reduce(function(t,n){var r=_slicedToArray(n,2),o=r[0],a=r[1],i=e[o];if(i){var c=i(a);null!==c&&(t[o]=c)}return t},{})};e.exports={composeSeoSelectionLink:function(e){var t,n=e.genreSlug,r=void 0===n?"":n,o=e.countryId,a=void 0===o?null:o,c=e.years,d=void 0===c?[]:c,y=e.page,h=void 0===y?1:y,g=e.sort,b=void 0===g?i.parameter:g,E=e.quickFilters,v=void 0===E?[]:E,O=e.excludeViewed,P=void 0!==O&&O,S=_(m,(_defineProperty(t={},l.genre,r),_defineProperty(t,l.country,a),_defineProperty(t,l.year,d),_defineProperty(t,l.yearRange,d),_defineProperty(t,l.page,h),_defineProperty(t,l.sort,b),_defineProperty(t,l.quickFilters,v),_defineProperty(t,l.excludeViewed,P),t)),T=Boolean(S.yearRange);return u.getUrl(T?"seoPageWithYearRange":"seoPageWithYear",s(S,p),s(S,f))},composeEditorialSelectionLink:function(e){var t,n=e.slug,r=void 0===n?"":n,o=e.page,a=void 0===o?1:o,i=e.sort,d=void 0===i?c.parameter:i,m=e.quickFilters,h=void 0===m?[]:m,g=e.excludeViewed,b=void 0!==g&&g,E=_(y,(_defineProperty(t={},l.slug,r),_defineProperty(t,l.page,a),_defineProperty(t,l.sort,d),_defineProperty(t,l.quickFilters,h),_defineProperty(t,l.excludeViewed,b),t));return u.getUrl("editorialPage",s(E,p),s(E,f))}}},function(e,t,n){"use strict";var r,o;n.d(t,"b",function(){return r}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return a}),function(e){e.sendParams="send-params",e.reportZoneVisible="report-zone-visible"}(r||(r={})),function(e){e.page="page"}(o||(o={}));var a="none"},function(e,t,n){e.exports={root:"_2xoO4Nwxud8kgo7GDjQgcL",rootActive:"_3PThiNB97_By5pB8L2suLS _2xoO4Nwxud8kgo7GDjQgcL",input:"ox2zn9faW_r5U5mVwgm4T",inputActive:"og95q0NsKjWqVZlKJUDti ox2zn9faW_r5U5mVwgm4T",controlContainer:"_3VMRyuYyHQJ_iVvhgScnla",submit:"woZ2pDUCLx3ZUbEOpsICL",advancedSearch:"nsbkofuuSifuaoskfpZh2",advancedSearchIcon:"_2FH670uFhYVKlvRlWSz43X",advancedSearchIconActive:"_1RH35kP_b6ZFKBVhFIlbE1 _2FH670uFhYVKlvRlWSz43X"}},function(e,t,n){e.exports={root:"_1Uu8PTKmmgYmsiEraO6q5V",rootActive:"J49tmuYuq9ujNinaKVHFy _1Uu8PTKmmgYmsiEraO6q5V",logo:"_39OdVCijJ8PHMEvT9DvfcY",burger:"_1GO9vd0V4qywVk3Y5rlmMD",dropdown:"_1Ndh29sFvCq3EDI2r5irqn",dropdownMenuWrapper:"_22-7S4HM7YlldLXTb04Z7b",dropdownMenu:"_3NuHAWtwtXHP1F5ZAlwvEO",dropdownMenuDark:"_2FQ7Bf3_eVfYHfQ_ysN7WF _3NuHAWtwtXHP1F5ZAlwvEO",dropdownMenuLight:"_2F6ZH6Ac4kZI49-ud4GlyL _3NuHAWtwtXHP1F5ZAlwvEO",navigationMenu:"_1JBdV3e2TdmJPspLPc8O0t"}},function(e,t,n){"use strict";var r=n(6).createSelector,o=n(15),a=function(e){return e.common},i=function(e){return e.common.adfox},c=r(i,function(e){return e.cinemaSlider}),s=r(i,function(e){return e.cinemaWeekReview}),u=r(i,function(e){return e.desktopTopBanner}),l=r(a,function(e){return e.hideSmartTvLink||!1}),p=r(a,function(e){return e.passportPlusProfileUrl}),f=r(a,function(e){return e.yandexLinkMenuItemVisible||!1}),d=r(a,function(e){return e.hideOttButton||!1}),m=r(a,function(e){return e.hideMovieGeekButton||!1}),y=r(a,function(e){var t=e.user;return o(t,"platform.isMobile",!1)}),_=r(a,function(e){return e.touchUrl}),h=r(a,function(e){return e.currentYear}),g=r(a,function(e){return e.rumId});e.exports={selectCommonState:a,getAvatarsHost:function(e){return e.common.avatarsHost},getIsPartialComponent:function(e){return e.page.isPartialComponent},getBunker:function(e){return e.common.bunker},getBunkerNode:function(e,t){var n=t.nodeName;return e.common.bunker[n]},selectIsTouch:function(e){return e.common.user.platform.isTouch},selectRequestId:function(e){return e.common.requestId},selectDeviceOS:function(e){return e.common.deviceOS},selectAdfox:i,selectAdfoxCinemaSlider:c,selectAdfoxCinemaWeekReview:s,selectAdfoxDesktopTopBanner:u,selectHideSmartTvLink:l,selectPassportPlusProfileUrl:p,selectYandexLinkMenuItemVisible:f,selectHideOttButton:d,selectHideMovieGeekButton:m,selectIsMobile:y,selectTouchUrl:_,selectCurrentYear:h,selectRumId:g}},function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o);!function(e){e.Link="link"}(r||(r={}));var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.a.createContext(e);return{CustomComponentsProvider:function(e){var n=e.children,r=e.components,o=a.a.useMemo(function(){return r},Object.values(r));return a.a.createElement(t.Provider,{value:o},n)},useCustomComponent:function(e,n){var r=a.a.useContext(t)[e];return function(e){return void 0!==e}(r)?r:n}}}(),c=i.CustomComponentsProvider,s=i.useCustomComponent,u=n(4),l=n.n(u),p=n(2),f=n.n(p),d=n(7),m=n(20);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=Object(o.forwardRef)(function(e,t){return a.a.createElement("a",_extends({ref:t},e))});function link_extends(){return(link_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _,h=Object(o.forwardRef)(function(e,t){var n=s(r.Link,y);return a.a.createElement(n,link_extends({ref:t},e))}),g=n(99),b=n.n(g);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=l.a.lock("social-section"),v=(_defineProperty(_={},d.SocialNetworks.Vkontakte,b.a.vkontakte),_defineProperty(_,d.SocialNetworks.Facebook,b.a.facebook),_defineProperty(_,d.SocialNetworks.Instagram,b.a.instagram),_defineProperty(_,d.SocialNetworks.Telegram,b.a.telegram),_defineProperty(_,d.SocialNetworks.Twitter,b.a.twitter),_defineProperty(_,d.SocialNetworks.Youtube,b.a.youtube),_),O=function(e){var t=e.items;return a.a.createElement("section",{className:f()(b.a.root,E())},t.map(function(e){var t=e.type,n=e.url;return a.a.createElement(h,{className:f()(v[t],E("icon",{type:t})),key:t,href:n,target:"_blank",rel:"noopener noreferrer","aria-label":"presentation"},t)}))},P={items:[{type:d.SocialNetworks.Vkontakte,url:m.b.getUrl(m.a.VkontaktePage)},{type:d.SocialNetworks.Facebook,url:m.b.getUrl(m.a.FacebookPage)},{type:d.SocialNetworks.Twitter,url:m.b.getUrl(m.a.TwitterPage)},{type:d.SocialNetworks.Telegram,url:m.b.getUrl(m.a.TelegramPage)},{type:d.SocialNetworks.Instagram,url:m.b.getUrl(m.a.InstagramPage)},{type:d.SocialNetworks.Youtube,url:m.b.getUrl(m.a.YoutubePage)}]};O.defaultProps=P;var S,T=O;!function(e){e.Dark="dark",e.Grey="grey"}(S||(S={}));var k,C=[{type:d.MobileAppsMarkets.AppStore,url:"https://itunes.apple.com/ru/app/id477718890"},{type:d.MobileAppsMarkets.GooglePlay,url:"https://play.google.com/store/apps/details?id=ru.kinopoisk"}],w=n(24),I=n.n(w);function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function component_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=l.a.lock("footer".concat("-partial-component")),x=(component_defineProperty(k={},d.MobileAppsMarkets.AppStore,I.a.appStoreLink),component_defineProperty(k,d.MobileAppsMarkets.GooglePlay,I.a.googlePlayMarketLink),k),R=function(e){var t=e.currentYear,n=e.mobileVersionLink,r=e.availableAge,o=e.className,i=e.colorScheme,c=e.mainLinks,s=e.bottomSectionLinks,u=e.mobileAppsLinks,l=a.a.useMemo(function(){return[].concat(_toConsumableArray(c),[{title:"Мобильная версия",url:n}])},[c]);return a.a.createElement("footer",{className:f()(A(),o,i===S.Dark?I.a.rootDark:I.a.rootGrey)},a.a.createElement(T,null),Boolean(l.length)&&a.a.createElement("ul",{className:f()(A("content-links"),I.a.contentMenu)},l.map(function(e){var t=e.title,n=e.url,r=e.target;return a.a.createElement("li",{className:f()(A("content-item"),I.a.contentMenuItem),key:n},a.a.createElement(h,{href:n,target:r,className:f()(A("content-link"),I.a.contentLink)},t))})),Boolean(u.length)&&a.a.createElement("div",{className:f()(I.a.mobileAppsMenu,A("content-apps"))},u.map(function(e){var t=e.type,n=e.url;return a.a.createElement("div",{key:t,className:f()(I.a.mobileAppsMenuItem,A("content-apps-app"))},a.a.createElement(h,{href:n,target:"_blank",rel:"noopener noreferrer",className:x[t]},t))})),a.a.createElement("div",{className:f()(I.a.bottomSection,A("bottom"))},a.a.createElement("div",{className:f()(I.a.bottomSectionInfo,A("bottom-info"))},a.a.createElement("span",{className:f()(I.a.year,A("bottom-info-year"))},"© 2003 – ",t,","),a.a.createElement(h,{className:f()(I.a.bottomSectionInfoLink,A("bottom-info-link")),href:"https://www.kinopoisk.ru/",target:"_blank"},"КиноПоиск"),a.a.createElement("span",{className:f()(I.a.age,A("bottom-info-age"))},r,"+")),Boolean(s.length)&&a.a.createElement("ul",{className:f()(I.a.bottomSectionMenu,A("bottom-links"))},s.map(function(e){var t=e.title,n=e.url,r=e.target;return a.a.createElement("li",{className:f()(I.a.bottomSectionMenuItem,A("bottom-item")),key:n},a.a.createElement(h,{href:n,target:r,className:f()(I.a.bottomSectionMenuLink,A("bottom-link"))},t))})),a.a.createElement("div",{className:f()(I.a.companySection,A("bottom-company"))},a.a.createElement("span",{className:f()(I.a.companySectionTitle,A("bottom-company-name"))},"Проект компании"),a.a.createElement(h,{className:f()(I.a.companyLogo,A("bottom-company-logo")),href:"https://yandex.ru",target:"_blank",rel:"noopener noreferrer"},"Яндекс"))))},N={currentYear:(new Date).getFullYear(),availableAge:18,mobileVersionLink:"/",colorScheme:S.Dark,mainLinks:[{title:"Вакансии",url:"https://yandex.ru/jobs/vacancies/dev/?from=kinopoisk&services=kinopoisk",target:"_blank"},{title:"Реклама",url:"https://yandex.ru/adv/products/display/kinopoiskmedia",target:"_blank"},{title:"Соглашение",url:"/docs/usage/",target:"_blank"},{title:"Помощь",url:"https://yandex.ru/support/kinopoisk/index.html",target:"_blank"},{title:"Участие в исследованиях",url:"https://yandex.ru/poll/9zsAFgZjRD1NDQfdLMYqzK",target:"_blank"}],bottomSectionLinks:[{title:"Телепрограмма",url:"https://tv.yandex.ru",target:"_blank"},{title:"Музыка",url:"https://music.yandex.ru",target:"_blank"},{title:"Афиша",url:"https://afisha.yandex.ru",target:"_blank"}],mobileAppsLinks:C};R.defaultProps=N;var j=R;function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var D=function(e){var t,n,o,i=e.renderLink,s=_objectWithoutProperties(e,["renderLink"]);return a.a.createElement(c,{components:(t={},n=r.Link,o=i,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t)},a.a.createElement(j,s))},M=n(472),L=n.n(M);function component_extends(){return(component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var F=function(e){var t=e.className,n=component_objectWithoutProperties(e,["className"]);return a.a.createElement("div",component_extends({},n,{className:f()(L.a.root,t)}))},U=n(473),W=n.n(U);function container_component_extends(){return(container_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function container_component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var B=function(e){var t=e.className,n=container_component_objectWithoutProperties(e,["className"]);return a.a.createElement("div",container_component_extends({},n,{className:f()(W.a.root,t)}))},G=n(474),H=n.n(G);function fluid_container_component_extends(){return(fluid_container_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fluid_container_component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Y=function(e){var t=e.className,n=fluid_container_component_objectWithoutProperties(e,["className"]);return a.a.createElement("div",fluid_container_component_extends({},n,{className:f()(H.a.root,t)}))},K=n(335),z=n.n(K);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=function(e){var t=e.className,n=e.md,r=e.lg,o=e.children,i=a.a.useMemo(function(){return Object.entries({md:n,lg:r}).reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],o=n[1];if(void 0!==o){var a=z.a["".concat(r,"_").concat(o)];e.push(a)}return e},[z.a.column])},[n,r]);return a.a.createElement("div",{className:f()(i,t)},o)};n.d(t,"CustomComponentsProvider",function(){return c}),n.d(t,"useCustomComponent",function(){return s}),n.d(t,"Footer",function(){return D}),n.d(t,"Link",function(){return h}),n.d(t,"GridRow",function(){return F}),n.d(t,"GridContainer",function(){return B}),n.d(t,"FluidGridContainer",function(){return Y}),n.d(t,"GridColumn",function(){return V})},,,function(e,t,n){"use strict";var r=n(14).default,o=r("userSubscription/SWITCH_CANCELLATION_TYPE_EFFECT"),a=r("userSubscription/SWITCH_BACK_SUBSCRIPTION_EFFECT");e.exports={LOAD_AVAILABLE_LIST_EFFECT:"userSubscription/LOAD_AVAILABLE_LIST_EFFECT",loadAvailableSubscriptionsListEffect:function(){return{type:"userSubscription/LOAD_AVAILABLE_LIST_EFFECT"}},CANCEL_SUBSCRIPTION_EFFECT:"userSubscription/CANCEL_SUBSCRIPTION_EFFECT",cancelSubscriptionEffect:function(){return{type:"userSubscription/CANCEL_SUBSCRIPTION_EFFECT"}},UPDATE_USER_SUBSCRIPTION:"userSubscription/UPDATE",update:function(e){return{type:"userSubscription/UPDATE",payload:e}},SWITCH_CANCELLATION_TYPE_EFFECT:"userSubscription/SWITCH_CANCELLATION_TYPE_EFFECT",switchCancellationTypeEffect:o,SWITCH_BACK_SUBSCRIPTION_EFFECT:"userSubscription/SWITCH_BACK_SUBSCRIPTION_EFFECT",switchBackSubscriptionEffect:a}},function(e,t,n){"use strict";var r,o;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(674),i=n(675),c={YA_PLUS:"YA_PLUS",YA_PLUS_3M:"YA_PLUS_3M",YA_PLUS_KP:"YA_PLUS_KP",YA_PREMIUM:"YA_PREMIUM",KP_BASIC:"KP_BASIC"},s={PLUS:"plus",KP_BASIC:"kp-basic",KP_AMEDIATEKA:"kp-amediateka"},u=(_defineProperty(r={},c.YA_PLUS_3M,s.PLUS),_defineProperty(r,c.YA_PLUS,s.PLUS),_defineProperty(r,c.YA_PLUS_KP,s.PLUS),_defineProperty(r,c.KP_BASIC,s.KP_BASIC),_defineProperty(r,c.YA_PREMIUM,s.KP_AMEDIATEKA),r),l={FORM:{collapsed:"collapsed",expanded:"expanded"},TYPE:(o={},_defineProperty(o,s.PLUS,"ya_plus"),_defineProperty(o,s.KP_AMEDIATEKA,"ya_premium"),_defineProperty(o,s.KP_BASIC,"kp_basic"),_defineProperty(o,"transaction","transaction"),_defineProperty(o,"purchased","purchased"),_defineProperty(o,"tickets","tickets"),o),BUTTON_TEXT:{TO_WATCH:"Смотреть",BY_SUBSCRIPTION:"По подписке"}};e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({NAMEPLATE:l,MONETIZATION_MODELS:{AVOD:"AVOD",EST:"EST",TVOD:"TVOD",SVOD:"SVOD"},SUBSCRIPTION_PURCHASE_TAG:s,SUBSCRIPTION:c,SUBSCRIPTION_TO_SUBSCRIPTION_PURCHASE_TAG:u,WATCHING_OPTION_TYPE:{PAID:"PAID",PAID_MULTIPLE:"PAID_MULTIPLE",SUBSCRIPTION:"SUBSCRIPTION",FREE:"FREE"},HD_FILM_ENTITY_TYPE:"hdFilms"},a,{},i)},function(e,t,n){"use strict";var r=n(159).requestAction,o=n(115),a=n(64).LOAD_HEADER_FEATURES,i=null,c=o(function(e,t,n){if(!i){var o=n().common.env;i=["production","prestable","testing"].includes(o)?"/handler_search.php":"/search/suggest/"}return r("header/UPDATE_SUGGEST",i,{q:e,topsuggest:!0,ajax:1})(t,n)},250),s="";e.exports={updateSuggest:function(e){return function(t,n){if(!e.startsWith(s)){var r=n().page.suggest,o=void 0===r?[]:r;o&&o.length&&t({type:"header/UNSET_SUGGEST"})}s=e,""!==e?c(e,t,n):c.cancel()}},hideSuggest:function(){return function(e){e({type:"header/HIDE_SUGGEST"})}},loadHeaderFeaturesEffect:function(){return{type:"header/LOAD_FEATURES_EFFECT"}},LOAD_HEADER_FEATURES_EFFECT:"header/LOAD_FEATURES_EFFECT",loadHeaderFeatures:function(){return r(a,"/api/header/",null,void 0)},LOAD_HEADER_FEATURES:a,UPDATE_SUGGEST:"header/UPDATE_SUGGEST",UNSET_SUGGEST:"header/UNSET_SUGGEST",HIDE_SUGGEST:"header/HIDE_SUGGEST"}},,,function(e,t){e.exports=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}},function(e,t,n){var r=n(14).default,o=r("router/CHANGE_ROUTE_EFFECT"),a=r("router/UPDATE"),i=r("router/HISTORY_PUSH_EFFECT"),c=r("router/HISTORY_REPLACE_EFFECT");e.exports={changeRouteEffect:o,ROUTER_CHANGE_ROUTE_EFFECT:"router/CHANGE_ROUTE_EFFECT",update:a,ROUTER_UPDATE:"router/UPDATE",changeRoute:function(e){return a({route:e})},HISTORY_PUSH_EFFECT:"router/HISTORY_PUSH_EFFECT",HISTORY_REPLACE_EFFECT:"router/HISTORY_REPLACE_EFFECT",historyPushEffect:i,historyReplaceEffect:c}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"ERROR_TYPES",function(){return r}),function(e){e.emptySelection="empty-selection",e.serverError="server-error",e.clientError="client-error"}(r||(r={}))},function(e,t,n){e.exports={root:"_3YqLLMSEOgqaedoRS_q52y",rootActive:"_2eRyDnagfklL5ZB2VlwW1U _3YqLLMSEOgqaedoRS_q52y",imgContainer:"_1Xee2oexr0RZvMMGtGhMrk",img:"_3ByVkXmwQTBkSDQA8KFB1g",mainContainer:"ivCePZxZ-SgBxX31ABHmm",title:"_1K-9tWLcxBUOOOQnxUK4Ba",subtitle:"_29Cn-BadM92131EahaRYXE",sidebarContainer:"_3TGPBRdeuy_xXR5lUvfwnX"}},,function(e,t){e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).idFieldName,n=void 0===t?"id":t;return e.reduce(function(e,t){return e.map[t[n]]=t,e.list.push(t[n]),e},{map:{},list:[]})}},function(e,t){e.exports={UI_LIST_STATUS:{pending:"pending",loaded:"loaded",failed:"failed"}}},,function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(159).requestAction,o=n(416);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({loadDevices:function(){return r("page/LOAD_DEVICES","/api/user/devices/")},removeDevice:function(e){return r("page/REMOVE_DEVICE","/api/user/device/".concat(e,"/"),{deviceId:e},"delete")},pageShowPreviewCardEffect:function(e){return{type:"page/SHOW_PREVIEW_CARD_EFFECT",payload:{id:e.id,type:e.type}}},pageHidePreviewCardEffect:function(){return{type:"page/HIDE_PREVIEW_CARD_EFFECT",payload:{}}},showPreviewCard:function(e){return{type:"page/SHOW_PREVIEW_CARD",payload:{type:e.type,id:e.id}}},hidePreviewCard:function(){return{type:"page/HIDE_PREVIEW_CARD",payload:{}}},togglePageScroll:function(e){return function(t,n){t({type:"page/TOGGLE_SCROLL",payload:void 0!==e?e:!n().page.disableScroll})}},togglePopup:function(e,t){return function(n){n({type:t?"page/SHOW_POPUP":"page/HIDE_POPUP",payload:e})}},nextPage:function(){return function(e,t){e({type:"page/CHANGE_PAGINATION_CURRENT_PAGE",payload:t().page.pagination.currentPage+1})}},updatePagePagination:function(e){return{type:"page/UPDATE_PAGINATION",payload:e}},REMOVE_DEVICE:"page/REMOVE_DEVICE",LOAD_DEVICES:"page/LOAD_DEVICES",SHOW_POPUP:"page/SHOW_POPUP",HIDE_POPUP:"page/HIDE_POPUP",SHOW_PREVIEW_CARD:"page/SHOW_PREVIEW_CARD",HIDE_PREVIEW_CARD:"page/HIDE_PREVIEW_CARD",TOGGLE_PAGE_SCROLL:"page/TOGGLE_SCROLL",CHANGE_PAGINATION_CURRENT_PAGE:"page/CHANGE_PAGINATION_CURRENT_PAGE",UPDATE_PAGINATION:"page/UPDATE_PAGINATION",PAGE_SHOW_PREVIEW_CARD_EFFECT:"page/SHOW_PREVIEW_CARD_EFFECT",PAGE_HIDE_PREVIEW_CARD_EFFECT:"page/HIDE_PREVIEW_CARD_EFFECT"},o)},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"ENTITIES_TYPES",function(){return r}),function(e){e.film="film",e.person="person",e.folders="folders",e.trailer="trailer",e.navigationHistory="navigation-history",e.tvSeries="tvSeries",e.criticReview="criticReview"}(r||(r={}))},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(823),o=n(172),a=n(166);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},,,function(e,t,n){var r=regeneratorRuntime.mark(sendWhiteEmailMetrika),o=regeneratorRuntime.mark(popupOpenedMetrikaSaga),a=regeneratorRuntime.mark(popupClosedMetrikaSaga),i=regeneratorRuntime.mark(submitEmailMetrikaSaga),c=regeneratorRuntime.mark(changeEmailSuccessWhiteModeMetrikaSaga),s=regeneratorRuntime.mark(changeEmailSuccessNormalModeMetrikaSaga),u=n(1),l=u.call,p=u.select,f=n(44),d=n(37),m=d.METRIKA,y=m.PACKAGE_NAME,_=m.SHOW_PARAM_NAME,h=m.SHOW_VALUE_PROPOSAL,g=m.SHOW_VALUE_SENT,b=m.SHOW_VALUE_CHANGE,E=m.CLICK_PARAM_NAME,v=m.CLICK_VALUE_CLOSE,O=m.CLICK_VALUE_OK,P=d.MODES.EMAIL_FORM,S=n(140).selectMode;function sendWhiteEmailMetrika(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.paramName,n=e.value,r.next=3,l({context:f,fn:f.params},[y,t,n]);case 3:case"end":return r.stop()}},r)}function popupOpenedMetrikaSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(sendWhiteEmailMetrika,{paramName:_,value:h});case 2:case"end":return e.stop()}},o)}function popupClosedMetrikaSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(S);case 2:if(e.sent!==P){e.next=6;break}return e.next=6,l(sendWhiteEmailMetrika,{paramName:E,value:v});case 6:case"end":return e.stop()}},a)}function submitEmailMetrikaSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(sendWhiteEmailMetrika,{paramName:E,value:O});case 2:case"end":return e.stop()}},i)}function changeEmailSuccessWhiteModeMetrikaSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(sendWhiteEmailMetrika,{paramName:_,value:g});case 2:case"end":return e.stop()}},c)}function changeEmailSuccessNormalModeMetrikaSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(sendWhiteEmailMetrika,{paramName:_,value:b});case 2:case"end":return e.stop()}},s)}e.exports={popupOpenedMetrikaSaga:popupOpenedMetrikaSaga,popupClosedMetrikaSaga:popupClosedMetrikaSaga,changeEmailSuccessWhiteModeMetrikaSaga:changeEmailSuccessWhiteModeMetrikaSaga,changeEmailSuccessNormalModeMetrikaSaga:changeEmailSuccessNormalModeMetrikaSaga,submitEmailMetrikaSaga:submitEmailMetrikaSaga}},,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(89).UI_LIST_STATUS,o=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e,payload:n,meta:{listId:t}}}},a=o("ui-lists/ADD_LIST"),i=o("ui-lists/UPDATE_LIST"),c=o("ui-lists/PATCH_LIST"),s=o("ui-lists/DELETE_LIST"),u=o("ui-lists/DELETE_LIST_KEYS");e.exports={UI_LISTS_ADD_LIST:"ui-lists/ADD_LIST",addList:a,UI_LISTS_UPDATE_LIST:"ui-lists/UPDATE_LIST",updateList:i,UI_LISTS_PATCH_LIST:"ui-lists/PATCH_LIST",patchList:c,UI_LISTS_DELETE_LIST:"ui-lists/DELETE_LIST",deleteList:s,clearListItems:function(e){return u(e,{fields:["items"]})},UI_LISTS_CLEAR_LIST_FIELDS:"ui-lists/DELETE_LIST_KEYS",clearListFields:u,fetchListStart:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).pagination;return c(e,{pagination:_objectSpread({},void 0===t?{}:t,{status:r.pending})})},fetchListFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.items,o=void 0===n?[]:n,a=t.pagination;return c(e,{items:o,pagination:_objectSpread({},void 0===a?{}:a,{status:r.loaded})})},fetchListFailed:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).error;return c(e,{pagination:{status:r.failed,error:t}})}}},function(e,t,n){e.exports={root:"_3Qi5nUVVfVWVeHbT2yFjyB",icon:"_2wLmUnIdNnZQvIjGX2qS8O",vkontakte:"XWvRU_KkYMxToAVruwMn- _2wLmUnIdNnZQvIjGX2qS8O",facebook:"_153OOQx5g8lcE-Wire7CwV _2wLmUnIdNnZQvIjGX2qS8O",twitter:"_3i7jf4qh59_WZ9En3rprbm _2wLmUnIdNnZQvIjGX2qS8O",youtube:"buIEK2mrYYnd_vCt7Ax3n _2wLmUnIdNnZQvIjGX2qS8O",telegram:"_5t_uf5ZO7a9YsjdSqGJcE _2wLmUnIdNnZQvIjGX2qS8O",instagram:"_1rPqC3of5hFGd_6Lu1D57F _2wLmUnIdNnZQvIjGX2qS8O"}},function(e,t,n){"use strict";var r,o,a;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(1049),c={news:"news",interview:"interview",article:"article",photostory:"photostory",video:"video",podcast:"podcast",game:"game"},s={news:c.news,interview:c.interview,article:c.article,photostory:c.photostory,video:c.video,podcast:c.podcast,game:c.game,events:c.photostory},u=[c.news,c.article,c.video,c.game,c.podcast],l=(_defineProperty(r={},c.news,["Новость","Новости","Новостей","Новости"]),_defineProperty(r,c.interview,["Интервью","Интервью","Интервью","Интервью"]),_defineProperty(r,c.article,["Статья","Статьи","Статей","Статьи"]),_defineProperty(r,c.photostory,["Видео","Видео","Видео","Видео"]),_defineProperty(r,c.video,["Видео","Видео","Видео","Видео"]),_defineProperty(r,c.podcast,["Подкаст","Подкаста","Подкастов","Подкасты"]),_defineProperty(r,c.game,["Тест","Теста","Тестов","Тесты"]),r),p={twitter:"twitter",facebook:"facebook",instagram:"instagram",youtube:"youtube",vimeo:"vimeo",vkontakte:"vkontakte",new_york_times:"new_york_times",yandex_music:"yandex_music",simplecast:"simplecast",reddit:"reddit",telegram:"telegram",waterfall:"waterfall",common:"common",quiz:"quiz"},f=(_defineProperty(o={},p.twitter,"Twitter"),_defineProperty(o,p.facebook,"Facebook"),_defineProperty(o,p.instagram,"Instagram"),_defineProperty(o,p.youtube,"Youtube"),_defineProperty(o,p.vimeo,"Vimeo"),_defineProperty(o,p.vkontakte,"Vkontakte"),_defineProperty(o,p.new_york_times,"New york times"),_defineProperty(o,p.yandex_music,"Yandex music"),_defineProperty(o,p.simplecast,"Simplecast"),_defineProperty(o,p.reddit,"Reddit"),_defineProperty(o,p.telegram,"Telegram"),_defineProperty(o,p.waterfall,"Waterfall"),_defineProperty(o,p.common,"Общий"),_defineProperty(o,p.quiz,"Игротесты"),o),d=[p.quiz],m={person:"person",film:"film"},y=(_defineProperty(a={},m.person,"name"),_defineProperty(a,m.film,"film"),a),_=i(y);e.exports={POST_TYPES:c,TYPES_TITLES:l,POST_READ_ALSO_CHUNK:4,NOT_COMMENTABLE_TITLE:"Комментарии к этому материалу отключены",PAGE_SECTIONS_ID:{COMMENTS:"comments",COMMENT:"comment"},LEGACY_PAGE_SECTIONS_ID:{COMMENTS:"comm0",COMMENT:"comm"},PREVIEW_MODE_SLUG:"preview",PARTNER_TEXT:"При поддержке",EMBED_TYPES:p,EMBED_LABELS:f,POST_TYPES_NAVIGATION_LIST:u,POST_TYPES_BACKEND_MAPPING:s,TRUSTED_EMBED:d,ENTITY_TYPES_WITH_POSTS:m,ENTITY_TYPES_WITH_POSTS_SLUGS:y,ENTITY_TYPES_WITH_POSTS_BY_SLUG:_}},,function(e,t,n){e.exports=n(4).lock("passport-connector".concat("-partial-component"))},,function(e,t,n){"use strict";n.r(t);var r,o=n(334),a=(n(1021),n(241)),i=n(559),c=n(25),s=function(e){return function(t){return function(n){return n.error&&e.getState().common.debug&&console.error(n.error),t(n)}}},u=function(){return function(e){return function(t){return!!t&&e(t)}}},l=n(560);n.n(l)()({titleFormatter:function(e,t,n){var r=e.meta?" (".concat(e.meta.status,")"):"";return"action @ ".concat(e.type).concat(r," ").concat(n.toFixed(2),"ms")},collapsed:!0});!function(e){e.done="done",e.fail="fail",e.pending="pending"}(r||(r={}));var p=function(){return function(e){return function(t){var n=t.meta;if((null===n||void 0===n?void 0:n.status)&&!(n.status in r))throw new Error("Not a valid meta status ".concat(n.status));return e(t)}}},f=n(211),d=n(16),m=n.n(d);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var y=new(function(){function Requester(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Requester)}var e,t,n;return e=Requester,(t=[{key:"get",value:function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){var t,n,r,o=arguments;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:{},n=t.params,a.next=3,m.a.get(e,{query:n});case 3:return r=a.sent,a.abrupt("return",{data:r});case 5:case"end":return a.stop()}},_callee)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}()}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Requester}()),_=n(471),h=n(136),g=n(469),b=n(225),E=n(210),v=n(1),O=n(9),P=n(214),S=n(44),T=n.n(S),k=n(19),C=regeneratorRuntime.mark(sendAnalyticsSaga);function sendAnalyticsSaga(e){var t,n,r,o,a,i,c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.event,r=t.zones,s.next=4,Object(v.select)(k.selectOttSubscription);case 4:return o=s.sent,s.next=7,Object(v.select)(k.getUserId);case 7:return a=s.sent,i=Object(O.buildParams)({event:n,zones:r,ottSubscription:o,userId:a}),c=Object(O.buildTargetName)({zones:r,event:n}),s.next=12,Object(v.call)([T.a,"reachGoal"],"analytics",c,i);case 12:case"end":return s.stop()}},C)}var w=n(26),I=regeneratorRuntime.mark(sendParamsSaga);function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function sendParamsSaga(e){var t,n,r,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.zones,r=t.event.rootLevel,i.next=4,Object(v.select)(w.getOriginalUrl);case 4:return o=i.sent,a=n.reduce(function(e,t){var n=t.zoneName,r=t.data,o=r&&r.id||n;return e.push(String(o)),e},[]),i.next=8,Object(v.call)([T.a,"params"],[r].concat(_toConsumableArray(a),[o]));case 8:case"end":return i.stop()}},I)}var A=regeneratorRuntime.mark(handleAnalyticsSaga),x=regeneratorRuntime.mark(handleMetrikaSagaWatcher);function handleAnalyticsSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload.event,n.t0=t.eventName,n.next=n.t0===O.ANALYTICS_EVENTS_NAMES.sendParams?4:7;break;case 4:return n.next=6,Object(v.call)(sendParamsSaga,e);case 6:return n.abrupt("return");case 7:return n.next=9,Object(v.call)(sendAnalyticsSaga,e);case 9:return n.abrupt("return");case 10:case"end":return n.stop()}},A)}function handleMetrikaSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.takeEvery)(P.a.handleAnalyticsEffect,handleAnalyticsSaga);case 2:case"end":return e.stop()}},x)}var R=[handleMetrikaSagaWatcher],N=n(168),j=n(33),D=n(83),M=n.n(D),L=n(14);Object(L.default)("ui-configurator/ADD_FEATURING");var F,U,W,B=M()({enabled:!1,list:[]},(W=function(e,t){return t.payload},(U="ui-configurator/ADD_FEATURING")in(F={})?Object.defineProperty(F,U,{value:W,enumerable:!0,configurable:!0,writable:!0}):F[U]=W,F)),G=Object(j.combineReducers)({featuring:B});var H=function(){return{id:N.a,reducerMap:(e={},t=N.b,n=G,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)};var e,t,n},Y=n(483),K=n.n(Y),z=n(486),V=function(){return[{id:"root",sagas:[K.a],reducerMap:z.reducerMap},Object(g.getMainPageModule)(),Object(b.a)(),Object(E.getSessionModule)(),[{id:"analytics",sagas:R}],H()]};function create_toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var q=[u,p,o.a,Object(c.createRequestMiddleware)({requester:m.a}),s];var X=function(e){return a.createStore.apply(void 0,[{initialState:e,extensions:[{middleware:q},Object(i.getSagaExtension)((t={requester:m.a},n=h.HEADER_DATA_PROVIDER_ID,r=new _.HeaderDataProvider({requester:y}),n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),{middleware:[function(){return function(e){return function(t){if(!t.meta||t.meta.actionType!==f.a.effect)return e(t)}}}]}]}].concat(create_toConsumableArray(V())));var t,n,r},Q={createStoreWithMiddleware:function(e){return this._store=X(e),this._store},createStore:function(e){var t;return this._store=(t=e,a.createStore.apply(void 0,[{initialState:t}].concat(create_toConsumableArray(V())))),this._store},getStore:function(){return this._store},getModel:function(e,t){return function(e,t,n){var r;try{r=e.getState().models["".concat(t,"s")][n]}catch(e){}if(!r)throw new Error("Cannot find ".concat(t,"s with id ").concat(n," in state.models"));return r}(this._store,e,t)}};t.default=Q},function(e,t,n){function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(23).newContext,o=n(1039),a=r(),i=function(e,t){return function(n,r){return e(void 0===r?t():r,n)}};a.extend("$patch",function(e,t){return a(t,Object.entries(e).reduce(function(e,n){var r,o=_slicedToArray(n,2),a=o[0],i=o[1],c=t[a];return r=c===Object(c)?Array.isArray(c)?"$push":"$merge":"$set",e[a]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,i),e},{}))}),a.extend("$deepMerge",function(e,t){return o(t,e)}),a.extend("$autoCreateObject",i(a,function(){return{}})),e.exports={update:a,createAutoCreateItemCommand:i}},,function(e,t,n){"use strict";n.r(t),t.default=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];var a=e.apply(null,r);return void 0===a?t:a}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(6).createSelector,o=n(53),a=n(15),i=n(58).SUBSCRIPTION,c=n(593).USER_SUBSCRIPTION,s=n(19).getOttIntegration,u=n(314).template,l=function(e){return o(e,"YYYY-MM-DDTHH:mm:ss").format("D MMMM YYYY")},p=function(e){return o(e,"YYYY-MM-DDTHH:mm:ss").isValid()},f=function(e){return function(t){return t.common.bunker[e]}},d=f(c.ROOT),m=f(c.CANCEL_MODAL),y=f(c.CANCELED_MODAL),_=f(c.CONFIRM_MODAL),h=f(c.CONFIRM_SWITCH_BACK_MODAL),g=f(c.SWITCHED_BACK_MODAL),b=r([s,d],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(t,"".concat(e.subscription,".").concat(function(e){return e.nonAutoRenewable?"nonAutoRenewable":e.finished?"finished":e.trial?"trial":"active"}(e)),{})}),E=r([d],function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).defaultPrices}),v=r([s,E],function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{title:e.title,price:e.priceDetails&&e.priceDetails.value||e.price||t[e.subscription],trialEndDate:l(e.trialEndDate),nextChargeDate:l(e.nextChargeDate),subscriptionEndDate:l(e.subscriptionEndDate)}}),O=r([b,v],function(e,t){return Object.entries(e).reduce(function(e,n){var r=_slicedToArray(n,2),o=r[0],a=r[1];return e[o]=u(a,t),e},{})}),P=r([function(e){return a(e,"userSubscription.availableSubscriptions",[])},s,d,E],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e.map(function(e){var o=e.billingProductId,a=e.name,i=e.priceDetails,c=e.offerText,s=e.offerSubtext,l="".concat(a," ").concat(c);s&&(l+=", ".concat(s));var p=t&&t.finished&&o===t.billingProductId,f=n[e.subscription]||{};return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{text:l,note:u(f.note||"",{price:i.value||r[e.subscription]}),buttonText:p?"Возобновить":"Оформить"})})}),S=r([O,m],function(e,t){return{title:e.title,description:e.description,cancelLink:t.cancelLink,manualCancelDescription:t.manualCancelDescription,manualCancelPhone:t.manualCancelPhone}}),T=r([_,s],function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{title:e.title,listTitle:e.listTitle,items:t.type===i.YA_PREMIUM?e.premiumItems:e.plusItems,cancelButton:e.cancelButton,confirmButton:e.confirmButton}}),k=r([v,y,s],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{title:t.title,description:p(n.subscriptionEndDate)?u(t.description,e):u(t.descriptionWithoutSubscriptionEndDate,e),closeButton:t.closeButton}}),C=r(h,function(e){return{title:e.title,listTitle:e.listTitle,items:e.items||[],cancelButton:e.cancelButton,confirmButton:e.confirmButton}}),w=r([v,g,s],function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{title:t.title,description:p(n.subscriptionEndDate)?u(t.description,e):u(t.descriptionWithoutSubscriptionEndDate,e),closeButton:t.closeButton}}),I=r(s,function(e){return Boolean(e&&e.switchBackAvailable)}),A=r(s,function(e){return e&&e.billingProductId?e.billingProductId:null});e.exports={getCurrentSubscriptionText:O,isUserSubscriptionLoading:function(e){return a(e,"userSubscription.isLoading")},getAvailableSubscriptionsWithTexts:P,getCancelModalText:S,getConfirmCancelModalText:T,getCanceledModalText:k,selectConfirmSwitchBackModalText:C,selectSwitchBackedModalText:w,selectIsSwitchBackAvailable:I,selectBillingProductId:A}},function(e,t,n){var r=n(243).YA_NAMESPACE;e.exports={RUM_PATH:"".concat(r,".Rum"),ID_DELIMITER:".",PLACE_TOP_ID:"77",PLACE_RIGHT_ID:"1203",PLACE_POPUP_ID:"1544",PLACE_MIDDLE_ID:"2028",PLACE_DYNAMIC_START_ID:85,PLACE_DYNAMIC_END_ID:134,PLACE_P1_ID:"86",PLACE_P2_ID:"87",PLACE_P3_ID:"88",PLACE_P4_ID:"89",PLACE_P5_ID:"90",RENDER_START_ID:"1724",RENDER_SUCCESS_ID:"2046",RENDER_FAILURE_ID:"1030",DESTROY_ID:"2452",BANNER_SPECIAL_ID:"1253",BANNER_PROMO_ID:"714",BANNER_ONLINE_ID:"1273",BANNER_CINEMA_ID:"36",BANNER_PERSON_ID:"154",BANNER_PROMO_HEADER_ID:"3096",TOUCH_MAIN_UNDER_TRAILERS_BLOCK:"touch.main.under_trailers",TOUCH_MEDIA_MAIN_BEFORE_LIST:"touch.media_main.before_list",TOUCH_MEDIA_POST_UNDER_FOOTER:"touch.media_post.under_footer",TOUCH_SELECTIONS_IN_LIST:"touch.selections.in_list",DESKTOP_MEDIA_MAIN_SIDEBAR_BANNER:"desktop.media_main.sidebar",DESKTOP_MEDIA_POST_UNDER_SIDEBAR:"desktop.media_post.under_sidebar"}},function(e,t){e.exports={MODAL_TYPES:{PASSPORT_CONNECTOR:"passport-connector",REG_SUGGEST:"reg-suggest",WATCH_ONLINE_PAYMENT_FORM:"WATCH_ONLINE_PAYMENT_FORM",USER_SUBSCRIPTION_CANCEL:"USER_SUBSCRIPTION_CANCEL",USER_SUBSCRIPTION_CONFIRM_CANCEL:"USER_SUBSCRIPTION_CONFIRM_CANCEL",USER_SUBSCRIPTION_CANCELED:"USER_SUBSCRIPTION_CANCELED",USER_SUBSCRIPTION_CONFIRM_SWITCH_BACK:"USER_SUBSCRIPTION_CONFIRM_SWITCH_BACK",USER_SUBSCRIPTION_SWITCHED_BACK:"USER_SUBSCRIPTION_SWITCHED_BACK",USER_SUBSCRIPTION_AVAILABLE_LIST:"USER_SUBSCRIPTION_AVAILABLE_LIST",MDA_DOMIK:"mda-domik"}}},,,,function(e,t){e.exports={DRAGON_SESSION_STORAGE_KEY:"dragon_session",DRAGON_DAY_SESSION_STORAGE_KEY:"dragon_day_session",DRAGON_ID:"DRAGON",DRAGON_STATUS:{ENABLED:"enabled",DISABLED:"disabled"},DRAGON_BUNKER_NODE_PATH:"specials.dragon",DRAGON_BUNKER_DEFAULT:{enabled:!1,sessionExpired:1800,daySessionExpired:86400,shadowMaxViewsPerSession:1,shadowMaxViewsPerDaySession:3,useVideoAsPossible:!0,buttonText:"",linkHref:"",validPathnames:[]},DRAGON_STORAGE_KEY:"dragon",DRAGON_ANIMATION_STAGES:{SHADOW:"shadow",FURY:"fury"},DRAGON_THEMES:{DAY:"day",NIGHT:"night"},DRAGON_ANIMATION_TYPES:{VIDEO:"video",SPRITE:"sprite"}}},,function(e,t,n){"use strict";e.exports={SELECTION_UPDATE_PAGE:"watchOnline/SELECTION_UPDATE_PAGE",updateSelectionPage:function(e){return{type:"watchOnline/SELECTION_UPDATE_PAGE",payload:e}},SELECTION_LOAD_NEXT_PAGE:"watchOnline/SELECTION_LOAD_NEXT_PAGE",loadNextPage:function(e){return{type:"watchOnline/SELECTION_LOAD_NEXT_PAGE",payload:{selectionId:e.selectionId,page:e.page}}},SHOW_PAYMENT_FORM_EFFECT:"watchOnline/SHOW_PAYMENT_FORM_EFFECT",showPaymentFormEffect:function(e){return{type:"watchOnline/SHOW_PAYMENT_FORM_EFFECT",payload:e}},SHOW_RESUME_FORM_EFFECT:"watchOnline/SHOW_RESUME_FORM_EFFECT",showResumeFormEffect:function(e){return{type:"watchOnline/SHOW_RESUME_FORM_EFFECT",payload:e}},LOAD_MAIN_PAGE_SLIDER_DATA_EFFECT:"watch-online/LOAD_MAIN_PAGE_SLIDER_DATA_EFFECT",loadMainPageSliderDataEffect:function(){return{type:"watch-online/LOAD_MAIN_PAGE_SLIDER_DATA_EFFECT"}},LOAD_CONTINUE_WATCHING_DATA_EFFECT:"watch-online/LOAD_CONTINUE_WATCHING_DATA_EFFECT",loadContinueWatchingDataEffect:function(){return{type:"watch-online/LOAD_CONTINUE_WATCHING_DATA_EFFECT"}}}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0).Component,o=n(961),a=function(e){function Universe(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Universe),(t=_possibleConstructorReturn(this,_getPrototypeOf(Universe).call(this,e))).getModel=t.props.getModel,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Universe,o(r)),Universe}();e.exports=a},function(e,t){e.exports={INIT_EFFECT:"code/INIT_EFFECT",initEffect:function(){return{type:"code/INIT_EFFECT"}},AUTH_EFFECT:"code/AUTH_EFFECT",authEffect:function(){return{type:"code/AUTH_EFFECT"}},CODE_INPUT_EFFECT:"code/CODE_INPUT_EFFECT",codeInputEffect:function(){return{type:"code/CODE_INPUT_EFFECT"}},APPLY_AUTH_CODE_EFFECT:"code/APPLY_AUTH_CODE_EFFECT",applyAuthCodeEffect:function(e){return{type:"code/APPLY_AUTH_CODE_EFFECT",payload:{code:e.code}}},CHECK_DEVICE_LIMIT_EFFECT:"code/CHECK_DEVICE_LIMIT_EFFECT",checkDeviceLimitEffect:function(){return{type:"code/CHECK_DEVICE_LIMIT_EFFECT"}},UPDATE:"code/UPDATE",update:function(e){return{type:"code/UPDATE",payload:e}}}},function(e,t,n){"use strict";e.exports={cancel:function(e){return{type:"commentForm/CANCEL",payload:{id:e.parentId,draftId:e.draftId}}},update:function(e){return{type:"commentForm/UPDATE",payload:e}},replyTo:function(e){return{type:"commentForm/REPLY_TO_COMMENT",payload:{id:e.parentId,draftId:e.draftId}}},submit:function(e){return{type:"commentForm/SUBMIT",payload:{entityId:e.entityId,entityType:e.entityType,value:e.value,parentId:e.parentId,draftId:e.draftId}}},createDraft:function(e){return{type:"commentForm/CREATE_DRAFT",payload:{id:e,data:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}}}},updateDraft:function(e,t){return{type:"commentForm/UPDATE_DRAFT",payload:{id:e,data:t}}},deleteDraft:function(e){return{type:"commentForm/DELETE_DRAFT",payload:{id:e}}},saveToDraft:function(e,t){return{type:"commentForm/SAVE_TO_DRAFT",payload:{id:e,data:t}}},COMMENT_FORM_UPDATE:"commentForm/UPDATE",COMMENT_FORM_REPLY_TO_COMMENT:"commentForm/REPLY_TO_COMMENT",COMMENT_FORM_CANCEL:"commentForm/CANCEL",COMMENT_FORM_SUBMIT:"commentForm/SUBMIT",COMMENT_FORM_UPDATE_DRAFT:"commentForm/UPDATE_DRAFT",COMMENT_FORM_DELETE_DRAFT:"commentForm/DELETE_DRAFT",COMMENT_FORM_CREATE_DRAFT:"commentForm/CREATE_DRAFT",COMMENT_FORM_SAVE_TO_DRAFT:"commentForm/SAVE_TO_DRAFT"}},function(e,t){e.exports={getFilm:function(e){return{type:"film/GET",payload:{id:e}}},updateFilm:function(e,t){return{type:"film/UPDATE",payload:{id:e,data:t}}},createFilm:function(e,t){return{type:"film/CREATE",payload:{id:e,data:t}}},updateFilms:function(e){return{type:"film/MERGE",payload:{data:e}}},GET_FILM:"film/GET",UPDATE_FILM:"film/UPDATE",CREATE_FILM:"film/CREATE",UPDATE_FILMS:"film/MERGE"}},,function(e,t,n){var r=n(416).showNotification;e.exports={showNotification:function(e){var t=e.text,o=e.title;n(104).default.getStore().dispatch(r({text:t,title:o}))},showError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Попробуйте позже, пожалуйста",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Произошла ошибка";n(104).default.getStore().dispatch(r({text:e,title:t}))}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(727),o=n(728),a=n(729);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},function(e,t,n){var r=n(14).default,o=n(315),a=o.specialProjectsModelsItemUpdate,i=o.specialProjectsUserDataItemUpdate,c=n(114).DRAGON_ID,s=r("dragon/INIT_EFFECT"),u=r("dragon/SHADOW_VIEWED_EFFECT"),l=r("dragon/FURY_VIEWED_EFFECT"),p=r("dragon/METRIKA_SHOW_EFFECT"),f=r("dragon/METRIKA_CLICK_EFFECT"),d=r("dragon/CLOSE_EFFECT");e.exports={DRAGON_INIT_EFFECT:"dragon/INIT_EFFECT",dragonInitEffect:s,DRAGON_SHADOW_VIEWED_EFFECT:"dragon/SHADOW_VIEWED_EFFECT",dragonShadowViewedEffect:u,DRAGON_METRIKA_SHOW_EFFECT:"dragon/METRIKA_SHOW_EFFECT",dragonMetrikaShowEffect:p,DRAGON_METRIKA_CLICK_EFFECT:"dragon/METRIKA_CLICK_EFFECT",dragonMetrikaClickEffect:f,DRAGON_CLOSE_EFFECT:"dragon/CLOSE_EFFECT",dragonCloseEffect:d,dragonModelUpdate:function(e){return a(c,e)},dragonUserDataUpdate:function(e){return i(c,e)},DRAGON_FURY_VIEWED_EFFECT:"dragon/FURY_VIEWED_EFFECT",dragonFuryViewedEffect:l}},,,function(e,t,n){var r=n(4).lock("partial-component-layout"),o=n(2),a=n(0),i=n(3);n(1979);var c=function(e){var t=e.children,n=e.className;return a.createElement("div",{className:o(r(),n)},t)};c.propTypes={children:i.node,className:i.string},e.exports=c},,function(e,t,n){"use strict";var r,o;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){e.Film="film",e.Person="person"}(r||(r={})),n.d(t,"e",function(){return a}),n.d(t,"a",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u});var a="navigation-history",i={NAVIGATION_HISTORY:"/api/navigation-history/"},c="navigation-history.items",s=(_defineProperty(o={},r.Film,"/film"),_defineProperty(o,r.Person,"/name"),o),u=8},function(e,t,n){e.exports={root:"_2DQPwwTk5JF_5-s7iTs-Y3",rootWithBranding:"_1IR-zcyj3c4lnpyMirRYVE _2DQPwwTk5JF_5-s7iTs-Y3"}},function(e,t,n){e.exports={root:"_1hmha-8X-VFkc3zMyW4j-M",groupsContainer:"_2K71wLuPeudEwNz1TZRlYi",group:"bECmFlBkmGoLEDNWZE58m",item:"_2fK5t6kGUN4748aCdd9FCR",showMoreButton:"_2epSSo0fPybEFDm8rFc_sz"}},function(e,t,n){e.exports={title:"_23NhxxXRQISbMcHJkDhY5B",titleDark:"_392xrAPV4cQ1XjUhjUlCyC _23NhxxXRQISbMcHJkDhY5B",subtitle:"_3eW7j0AzBwG6RJcNlycniM",subtitleDark:"_3Z0mViswuVD828yzyAjEVw _3eW7j0AzBwG6RJcNlycniM",icon:"_2E7nFbjym2L8tu1DwvGjRo"}},function(e,t,n){e.exports={title:"_1HrLg6jiw1tGP9Bl9NtYR9",items:"Gd3AUd5E-v2sba6gvwlnU",item:"_3n_j6c902qikgQsh-bKsmF",controlButton:"_1DA6iJKfTzFSkS9_8fTRkB",controlButtonDark:"_1kU02OFPUOxurwDjYK6rDP _1DA6iJKfTzFSkS9_8fTRkB",controlButtonLight:"_3NkUdZVpRNP-lLQghqWQzf _1DA6iJKfTzFSkS9_8fTRkB"}},,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(57),o=n(806),a=n(811),i=n(202);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({reducer:o},a,{},r,{},i)},function(e,t,n){"use strict";n.r(t);var r,o,a,i,c=n(0),s=n.n(c),u=n(5),l=n(7);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p,f,d,m=(_defineProperty(r={},l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.miniSerial,l.TV_SERIES_SUGGEST_TYPES.mini),_defineProperty(r,l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.serial,l.TV_SERIES_SUGGEST_TYPES.serial),_defineProperty(r,l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.tvShowNoTop,l.TV_SERIES_SUGGEST_TYPES.tvShow),_defineProperty(r,l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.tvShow,l.TV_SERIES_SUGGEST_TYPES.tvShow),_defineProperty(r,l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.videoNoTop,l.TV_SERIES_SUGGEST_TYPES.video),_defineProperty(r,l.EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES.video,l.TV_SERIES_SUGGEST_TYPES.video),r),y=(_defineProperty(o={},l.SUGGEST_ITEMS_GROUPS_IDS.mostMatching,"Возможно, вы искали"),_defineProperty(o,l.SUGGEST_ITEMS_GROUPS_IDS.films,"Фильмы"),_defineProperty(o,l.SUGGEST_ITEMS_GROUPS_IDS.person,"Персоны"),_defineProperty(o,l.SUGGEST_ITEMS_GROUPS_IDS.cinemas,"Кинотеатры"),o),_=(_defineProperty(a={},l.TV_SERIES_SUGGEST_TYPES.mini,"мини-сериал"),_defineProperty(a,l.TV_SERIES_SUGGEST_TYPES.serial,"сериал"),_defineProperty(a,l.TV_SERIES_SUGGEST_TYPES.tvShow,"тв"),_defineProperty(a,l.TV_SERIES_SUGGEST_TYPES.video,"видео"),a),h=2,g=90,b=(_defineProperty(i={},l.SUGGEST_ITEM_TYPE.film,l.SUGGEST_ITEMS_GROUPS_IDS.films),_defineProperty(i,l.SUGGEST_ITEM_TYPE.person,l.SUGGEST_ITEMS_GROUPS_IDS.person),_defineProperty(i,l.SUGGEST_ITEM_TYPE.cinema,l.SUGGEST_ITEMS_GROUPS_IDS.cinemas),_defineProperty(i,l.SUGGEST_ITEM_TYPE.tvSeries,l.SUGGEST_ITEMS_GROUPS_IDS.films),i);!function(e){e.dark="dark",e.light="light"}(p||(p={})),function(e){e.dark="dark",e.light="light"}(f||(f={})),function(e){e.unknown="unknown",e.positive="positive",e.negative="negative",e.neutral="neutral"}(d||(d={}));var E,v;!function(e){e.suggest="suggest",e.config="config"}(E||(E={})),function(e){e.notLoaded="notLoaded",e.loaded="loaded",e.pending="pending",e.failed="failed"}(v||(v={}));var O;!function(e){e[e.enter=13]="enter",e[e.left=37]="left",e[e.up=38]="up",e[e.right=39]="right",e[e.down=40]="down",e[e.esc=27]="esc",e[e.tab=9]="tab"}(O||(O={}));var P,S="headerDataProvider",T=n(33),k=n(90);!function(e){e.initEffect="kinopoisk-header/INIT_EFFECT",e.updateConfig="kinopoisk-header/UPDATE_CONFIG",e.updateSuggest="kinopoisk-header/UPDATE_SUGGEST",e.suggestQueryChangeEffect="kinopoisk-header/SUGGEST_QUERY_CHANGE_EFFECT",e.sendMetrikaEffect="kinopoisk-header/SEND_METRIKA_EFFECT"}(P||(P={}));var C=Object(k.a)(P.initEffect),w=Object(k.a)(P.updateConfig),I=Object(k.a)(P.suggestQueryChangeEffect),A=Object(k.a)(P.updateSuggest);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function suggest_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=function(){return{items:[],query:""}},R=Object(k.b)({items:[],query:""},function(e){return e.addCase(A,function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){suggest_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{},t.payload)})});function config_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function config_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?config_ownKeys(Object(n),!0).forEach(function(t){config_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):config_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function config_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N,j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return config_objectSpread({fetchStatus:v.notLoaded},e)},D=Object(k.b)(j(),function(e){return e.addCase(w,function(e,t){return config_objectSpread({},e,{},t.payload)})});function reducer_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var M=Object(T.combineReducers)((reducer_defineProperty(N={},E.config,D),reducer_defineProperty(N,E.suggest,R),N)),L=n(1),F=n(6),U=n(20),W=function(e){return e.header},B=function(e){return W(e)[E.config]},G=Object(F.createSelector)(B,function(e){return e.fetchStatus}),H=Object(F.createSelector)(B,function(e){return e.logo}),Y=Object(F.createSelector)(B,function(e){return e.featuredMenu}),K=Object(F.createSelector)(B,function(e){return e.navigationMenu}),z=Object(F.createSelector)(B,function(e){return e.searchForm}),V=Object(F.createSelector)(G,function(e){return e===v.loaded}),q=function(e){return W(e)[E.suggest]},X=Object(F.createSelector)(q,function(e){return e.items}),Q=Object(F.createSelector)(q,function(e){return e.query}),Z=Object(F.createSelector)(Q,function(e){return"".concat(U.b.getUrl(U.a.SearchPage),"?").concat("kp_query","=").concat(e)}),$=Object(F.createSelector)(X,function(e){return Boolean(e.length)}),J=Object(F.createSelector)(B,function(e){return e.branding}),ee=Object(F.createSelector)(J,function(e){return Boolean(e)}),te=Object(F.createSelector)(B,function(e){return e.burger}),ne=Object(F.createSelector)(K,function(e){return Boolean(e)}),re=regeneratorRuntime.mark(getHeaderService);function getHeaderService(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(L.getContext)(S);case 2:if(e=t.sent){t.next=5;break}throw new Error("HeaderService is not provided");case 5:return t.abrupt("return",e);case 6:case"end":return t.stop()}},re)}var oe=regeneratorRuntime.mark(fetchConfig);function sagas_config_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sagas_config_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sagas_config_ownKeys(Object(n),!0).forEach(function(t){sagas_config_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sagas_config_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sagas_config_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fetchConfig(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(L.select)(V);case 2:if(!n.sent){n.next=5;break}return n.abrupt("return");case 5:return n.next=7,Object(L.call)(getHeaderService);case 7:return e=n.sent,n.prev=8,n.next=11,Object(L.put)(w({fetchStatus:v.pending}));case 11:return n.next=13,Object(L.call)([e,e.getConfig]);case 13:return t=n.sent,n.next=16,Object(L.put)(w(sagas_config_objectSpread({},t,{fetchStatus:v.loaded})));case 16:n.next=22;break;case 18:return n.prev=18,n.t0=n.catch(8),n.next=22,Object(L.put)(w({fetchStatus:v.failed}));case 22:case"end":return n.stop()}},oe,null,[[8,18]])}var ae=regeneratorRuntime.mark(suggestQueryChangeSaga),ie=regeneratorRuntime.mark(suggestQueryChangeSagaWatcher);function suggestQueryChangeSaga(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(L.delay)(g);case 2:if(!((t=e.payload.value).length<h)){o.next=7;break}return o.next=6,Object(L.put)(A({query:t,items:[]}));case 6:return o.abrupt("return");case 7:return o.next=9,Object(L.call)(getHeaderService);case 9:return n=o.sent,o.prev=10,o.next=13,Object(L.call)([n,n.getSuggestItems],{query:t});case 13:return r=o.sent,o.next=16,Object(L.put)(A({query:t,items:r}));case 16:o.next=20;break;case 18:o.prev=18,o.t0=o.catch(10);case 20:case"end":return o.stop()}},ae,null,[[10,18]])}function suggestQueryChangeSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.takeLatest)(I.type,suggestQueryChangeSaga);case 2:case"end":return e.stop()}},ie)}var ce=regeneratorRuntime.mark(initSaga),se=regeneratorRuntime.mark(initSagaWatcher);function initSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.fork)(fetchConfig);case 2:case"end":return e.stop()}},ce)}function initSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(L.take)(C.type);case 2:return e.next=4,Object(L.call)(initSaga);case 4:case"end":return e.stop()}},se)}var ue=[initSagaWatcher,suggestQueryChangeSagaWatcher];var le,pe=function(){return{id:"header",reducerMap:(e={},t="header",n=M,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e),sagas:ue,initialActions:[C()]};var e,t,n},fe=n(11),de=n(9);!function(e){e.header="header",e.logo="headerLogo",e.burger="headerBurger",e.featuredMenu="headerFeaturedMenu",e.featuredMenuItem="headerFeaturedMenuItem",e.navigationMenuGroup="headerNavigationMenuGroup",e.navigationMenu="headerNavigationMenu",e.navigationMenuItem="headerNavigationMenuItem",e.navigationMenuMoreItemButton="headerNavigationMenuMoreItemButton",e.searchForm="headerSearchForm",e.searchFormSubmitButton="headerSearchFormSubmitButton",e.suggest="headerSuggest",e.suggestGroup="headerSuggestGroup",e.suggestItem="headerSuggestItem",e.suggestShowMoreButton="headerSuggestShowMoreButton"}(le||(le={}));var me="report-header-burger-click",ye="report-header-logo-click",_e="report-header-featured-menu-item-click",he="report-header-navigation-menu-item-click",ge="report-header-navigation-menu-more-item-button-click",be="report-header-suggest-item-click",Ee="report-header-search-form-submit-button-click",ve="report-header-suggest-show-more-button-click",Oe=n(2),Pe=n.n(Oe),Se=n(75),Te=n(13);function hooks_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hooks_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ke=function(e){var t=s.a.useMemo(function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hooks_ownKeys(Object(n),!0).forEach(function(t){hooks_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hooks_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({rootLevel:"desktop_header_click"},e)},[e]);return Object(de.useSendParams)(t)},Ce=n(69),we=n.n(Ce);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Ie=function(e){var t=e.className,n=e.x1,r=e.x2,o=e.alt,a=_objectWithoutProperties(e,["className","x1","x2","alt"]),i=s.a.useMemo(function(){return{src:n,srcSet:r&&"".concat(n," 1x, ").concat(r," 2x")}},[n,r]);return s.a.createElement("img",_extends({},a,{className:t,alt:o},i))},Ae=n(216),xe=n.n(Ae);function component_extends(){return(component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Re=function(e){var t=e.className,n=e.title,r=e.url,o=e.iconSrcSet,a=e.iconHoverSrcSet,i=e.target,c=e.onClick,u=e.setElementRef;return s.a.createElement("a",{ref:u,className:Pe()(xe.a.root,t),href:r,target:i,onClick:c},a&&s.a.createElement(Ie,component_extends({"aria-label":"presentation",className:xe.a.iconHover},a)),o&&s.a.createElement(Ie,component_extends({"aria-label":"presentation",className:xe.a.icon},o)),n)},Ne={onClick:we.a};Re.defaultProps=Ne;var je=Re;function analytics_extends(){return(analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var De=Object(c.memo)(Object(fe.d)(le.featuredMenuItem,function(e){var t=e.id,n=e.title,r=e.position;return{id:t,url:e.url,title:n,position:r}})(function(e){var t=e.onClick,n=analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useAnalyticsClick)(_e),o=ke(),a=Object(Te.a)([t,r,o]);return s.a.createElement(je,analytics_extends({},n,{onClick:a}))})),Me={},Le=function(e){var t=e.customType,n=t&&Me[t]?Me[t]:De;return s.a.createElement(n,e)},Fe=n(336),Ue=n.n(Fe);function featured_menu_component_extends(){return(featured_menu_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var We=function(e){var t=e.className,n=e.items,r=e.setElementRef;return s.a.createElement("nav",{ref:r,className:Pe()(Ue.a.root,t,"kinopoisk-header-featured-menu")},n.map(function(e,t){return s.a.createElement(Le,featured_menu_component_extends({key:e.id,className:Pe()(Ue.a.item,"kinopoisk-header-featured-menu__item")},e,{position:t+1}))}))};We.defaultProps={items:[]};var Be=We;function featured_menu_analytics_extends(){return(featured_menu_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ge=Object(fe.d)(le.featuredMenu)(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(Be,featured_menu_analytics_extends({},e,{setElementRef:t}))});function container_extends(){return(container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var He=Object(u.connect)(function(e){return{config:Y(e)}})(function(e){var t=e.config,n=container_objectWithoutProperties(e,["config"]);return t?s.a.createElement(Ge,container_extends({},n,t)):null}),Ye=n(475),Ke=n.n(Ye),ze=function(e){var t=e.className,n=e.id,r=e.children,o=e.setElementRef,a=s.a.useMemo(function(){return y[n]},[n]);return s.a.createElement("div",{ref:o,className:Pe()(t,"kinopoisk-header-suggest-group")},a&&s.a.createElement("h3",{className:Pe()(Ke.a.title,"kinopoisk-header-suggest-group__title")},a),r)};function suggest_group_analytics_extends(){return(suggest_group_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ve=Object(fe.d)(le.suggestGroup,function(e){var t=e.id;return{id:t,position:e.position,title:y[t]}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(ze,suggest_group_analytics_extends({},e,{setElementRef:t}))}),qe=function(e){return e?e>=7?d.positive:e<5?d.negative:d.neutral:d.unknown},Xe=n(170),Qe=n.n(Xe),Ze=function(e){var t=e.className,n=e.value,r=s.a.useMemo(function(){return qe(n)},[n]),o=s.a.useMemo(function(){return n?n.toFixed(1):"—"},[n]),a=s.a.useMemo(function(){switch(r){case d.negative:return Qe.a.rootNegative;case d.neutral:return Qe.a.rootNeutral;case d.positive:return Qe.a.rootPositive;default:return Qe.a.root}},[r]);return s.a.createElement("div",{className:Pe()(a,t)},o)},$e=n(86),Je=n.n($e);function suggest_item_component_extends(){return(suggest_item_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var et=function(e){var t=e.className,n=e.imgSrcSet,r=e.title,o=e.subtitle,a=e.sidebar,i=e.url,c=e.imagePlaceholder,u=e.isActive,l=e.setElementRef,p=e.onClick;return s.a.createElement("a",{ref:l,href:i,className:Pe()(u?Je.a.rootActive:Je.a.root,t,"kinopoisk-header-suggest-item"),onClick:p},s.a.createElement("div",{className:Pe()(Je.a.mainContainer,"kinopoisk-header-suggest-item__main-container")},s.a.createElement("div",{className:Je.a.imgContainer},n?s.a.createElement(Ie,suggest_item_component_extends({},n,{alt:r,className:Pe()(Je.a.img,"kinopoisk-header-suggest-item__img")})):c),s.a.createElement("div",{className:"kinopoisk-header-suggest-item__title-container"},s.a.createElement("h4",{className:Pe()(Je.a.title,"kinopoisk-header-suggest-item__title"),dangerouslySetInnerHTML:{__html:r}}),o&&s.a.createElement("span",{className:Pe()(Je.a.subtitle,"kinopoisk-header-suggest-item__subtitle"),dangerouslySetInnerHTML:{__html:o}}))),a&&s.a.createElement("div",{className:Pe()(Je.a.sidebarContainer,"kinopoisk-header-suggest-item__sidebar-container")},a))};et.defaultProps={imagePlaceholder:null,isActive:!1};var tt=et,nt=n(476),rt=n.n(nt);function film_component_extends(){return(film_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ot=function(e){var t=e.rating,n=e.url,r=e.title,o=e.originalTitle,a=e.imgSrcSet,i=e.year,c=component_objectWithoutProperties(e,["rating","url","title","originalTitle","imgSrcSet","year"]),u=s.a.useMemo(function(){return[o,i].filter(Boolean).join(", ")},[o,i]);return s.a.createElement(tt,film_component_extends({},c,{url:n,title:r,subtitle:u,imgSrcSet:a,sidebar:s.a.createElement(Ze,{value:t}),imagePlaceholder:s.a.createElement("span",{className:rt.a.imgPlaceholder})}))};function film_analytics_extends(){return(film_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var at=Object(fe.d)(le.suggestItem,function(e){var t=e.id,n=e.title,r=e.position;return{id:t,type:e.type,title:n,position:r,rating:e.rating}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef,n=Object(de.useAnalyticsClick)(be);return s.a.createElement(ot,film_analytics_extends({},e,{setElementRef:t,onClick:n}))}),it=n(477),ct=n.n(it);function person_component_extends(){return(person_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function person_component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var st=function(e){var t=e.name,n=e.originalName,r=e.birthYear,o=e.url,a=person_component_objectWithoutProperties(e,["name","originalName","birthYear","url"]),i=s.a.useMemo(function(){return[n,r].filter(Boolean).join(", ")},[n,r]);return s.a.createElement(tt,person_component_extends({},a,{title:t,subtitle:i,url:o,imagePlaceholder:s.a.createElement("span",{className:ct.a.imgPlaceholder})}))};function person_analytics_extends(){return(person_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ut=Object(fe.d)(le.suggestItem,function(e){var t=e.id,n=e.name;return{id:t,position:e.position,type:e.type,title:n}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef,n=Object(de.useAnalyticsClick)(be);return s.a.createElement(st,person_analytics_extends({},e,{setElementRef:t,onClick:n}))}),lt=n(478),pt=n.n(lt);function tv_series_component_extends(){return(tv_series_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tv_series_component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ft=function(e){var t=e.title,n=e.originalTitle,r=e.yearsRange,o=e.rating,a=e.url,i=e.seriesType,c=tv_series_component_objectWithoutProperties(e,["title","originalTitle","yearsRange","rating","url","seriesType"]),u=s.a.useMemo(function(){return[n,_[i],r].filter(Boolean).join(", ")},[n,i,r]);return s.a.createElement(tt,tv_series_component_extends({},c,{url:a,title:t,subtitle:u,imagePlaceholder:s.a.createElement("span",{className:pt.a.imgPlaceholder}),sidebar:s.a.createElement(Ze,{value:o})}))};function tv_series_analytics_extends(){return(tv_series_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var dt=Object(fe.d)(le.suggestItem,function(e){var t=e.id,n=e.title,r=e.position;return{id:t,type:e.type,title:n,position:r,rating:e.rating}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef,n=Object(de.useAnalyticsClick)(be);return s.a.createElement(ft,tv_series_analytics_extends({},e,{setElementRef:t,onClick:n}))}),mt=n(479),yt=n.n(mt);function cinema_component_extends(){return(cinema_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cinema_component_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _t=function(e){var t=e.name,n=e.cityName,r=cinema_component_objectWithoutProperties(e,["name","cityName"]);return s.a.createElement(tt,cinema_component_extends({},r,{title:t,subtitle:n,imagePlaceholder:s.a.createElement("span",{className:yt.a.imgPlaceholder})}))};function cinema_analytics_extends(){return(cinema_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ht,gt=Object(fe.d)(le.suggestItem,function(e){return{id:e.id,title:e.name,position:e.position,type:e.type}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef,n=Object(de.useAnalyticsClick)(be);return s.a.createElement(_t,cinema_analytics_extends({},e,{setElementRef:t,onClick:n}))});function container_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var bt=(container_defineProperty(ht={},l.SUGGEST_ITEM_TYPE.film,at),container_defineProperty(ht,l.SUGGEST_ITEM_TYPE.person,ut),container_defineProperty(ht,l.SUGGEST_ITEM_TYPE.tvSeries,dt),container_defineProperty(ht,l.SUGGEST_ITEM_TYPE.cinema,gt),ht),Et=Object(c.memo)(function(e){var t=e.type,n=bt[t];return n?s.a.createElement(n,e):null}),vt=function(e){return e.ranking>0?l.SUGGEST_ITEMS_GROUPS_IDS.mostMatching:b[e.type]};function use_active_item_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function use_active_item_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_active_item_ownKeys(Object(n),!0).forEach(function(t){use_active_item_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_active_item_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function use_active_item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ot=function(e){return{maxIndex:e.length-1,activeItemIndex:-1}},Pt=function(e){var t=e.items,n=e.onActiveItemChanged,r=_slicedToArray(s.a.useState(function(){return Ot(t)}),2),o=r[0].activeItemIndex,a=r[1],i=t[o]||null;Object(Te.b)(function(){a(Ot(t))},[t]),Object(Te.b)(function(){n(i)},[i]);var c=s.a.useCallback(function(){a(function(e){return use_active_item_objectSpread({},e,{activeItemIndex:e.activeItemIndex>e.maxIndex?0:e.activeItemIndex+1})})},[]),u=s.a.useCallback(function(){a(function(e){return use_active_item_objectSpread({},e,{activeItemIndex:e.activeItemIndex<0?e.maxIndex:e.activeItemIndex-1})})},[]);return{activeItemIndex:o,handleSetActiveItem:s.a.useCallback(function(e){var t=Number(e);a(function(e){return use_active_item_objectSpread({},e,{activeItemIndex:Number.isNaN(t)?-1:t})})},[]),handleUnsetActiveItem:s.a.useCallback(function(){a(function(e){return use_active_item_objectSpread({},e,{activeItemIndex:-1})})},[]),handleNextActiveItem:c,handlePrevActiveItem:u}},St=function(e){var t=e.items,n=e.getGroupId;return s.a.useMemo(function(){return t.reduce(function(e,t,r){var o=n(t);e.groupsMap[o]||(e.groupsMap[o]=[],e.groupsList.push(o));var a={item:t,index:r};return e.groupsMap[o].push(a),e},{groupsList:[],groupsMap:{}})},[t,n])},Tt=function(e){var t=e.onEsc,n=e.onUp,r=e.onDown,o=e.onTab,a=s.a.useRef({});Object(Te.b)(function(){a.current={onDown:r,onEsc:t,onTab:o,onUp:n}},[r,t,o,n]),s.a.useEffect(function(){var e=function(e){var t;switch(e.keyCode){case O.esc:t=a.current.onEsc;break;case O.up:t=a.current.onUp;break;case O.down:t=a.current.onDown;break;case O.tab:t=a.current.onTab}t&&t(e)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}},[])},kt=function(e){var t=e.handleNextActiveItem,n=e.handlePrevActiveItem,r=s.a.useCallback(function(e){e.preventDefault(),e.shiftKey?n():t()},[t,n]),o=s.a.useCallback(function(e){e.preventDefault(),n()},[n]),a=s.a.useCallback(function(e){e.preventDefault(),t()},[t]);Tt({onUp:o,onDown:a,onTab:r})},Ct=n(480),wt=n.n(Ct),It=function(e){var t=e.className,n=e.url,r=e.children,o=e.onClick,a=e.setElementRef;return s.a.createElement("a",{ref:a,className:Pe()(wt.a.root,t),href:n,onClick:o},r)};function show_more_button_analytics_extends(){return(show_more_button_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function show_more_button_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var At=Object(fe.d)(le.suggestShowMoreButton)(function(e){var t=e.onClick,n=show_more_button_analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useVisibilitySensor)().setElementRef,o=Object(de.useAnalyticsClick)(ve),a=Object(Te.a)([t,o]);return s.a.createElement(It,show_more_button_analytics_extends({},n,{setElementRef:r,onClick:a}))}),xt=n(131),Rt=n.n(xt);function suggest_component_extends(){return(suggest_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Nt=function(e){var t=e.className,n=e.showMoreUrl,r=e.showMoreTitle,o=e.items,a=e.onActiveItemChanged,i=e.setElementRef,c=St({items:o,getGroupId:vt}),u=c.groupsList,l=c.groupsMap,p=Pt({items:o,onActiveItemChanged:a}),f=p.activeItemIndex,d=p.handleSetActiveItem,m=p.handleUnsetActiveItem,y=p.handleNextActiveItem,_=p.handlePrevActiveItem,h=s.a.useCallback(function(e){var t=e.currentTarget.dataset.index;d(t)},[d]);return kt({handleNextActiveItem:y,handlePrevActiveItem:_}),s.a.createElement("div",{ref:i,className:Pe()(Rt.a.root,t)},s.a.createElement("div",{className:Pe()(Rt.a.groupsContainer,"kinopoisk-header-suggest__groups-container")},Boolean(u.length)&&u.map(function(e,t){return s.a.createElement(Ve,{key:e,className:Rt.a.group,id:e,position:t+1},l[e].map(function(t){var n=t.index,r=t.item;return s.a.createElement("div",{key:"".concat(e).concat(r.id),"data-index":n,onMouseEnter:h,onMouseLeave:m},s.a.createElement(Et,suggest_component_extends({className:Rt.a.item,isActive:n===f,position:n+1},r)))}))})),n&&s.a.createElement(At,{className:Rt.a.showMoreButton,url:n},r))},jt={showMoreTitle:"Все результаты",onActiveItemChanged:we.a};Nt.defaultProps=jt;var Dt=Nt;function suggest_analytics_extends(){return(suggest_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Mt=Object(fe.d)(le.suggest,function(e){return{searchQuery:e.searchQuery}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(Dt,suggest_analytics_extends({},e,{setElementRef:t}))});function suggest_container_extends(){return(suggest_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function suggest_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Lt=Object(u.connect)(function(e){return{searchQuery:Q(e),items:X(e),showMoreUrl:Z(e)}})(function(e){var t=e.items,n=e.showMoreUrl,r=e.searchQuery,o=suggest_container_objectWithoutProperties(e,["items","showMoreUrl","searchQuery"]);return t.length?s.a.createElement(Mt,suggest_container_extends({},o,{items:t,searchQuery:r,showMoreUrl:n})):null}),Ft=function(e){var t=e.elementRef,n=e.eventType,r=e.callback,o=s.a.useRef(r);Object(Te.b)(function(){o.current=r},[r]),s.a.useEffect(function(){var e=function(e){!(e.target instanceof Element)||t.current&&t.current.contains(e.target)||o.current(e)};return window.addEventListener(n,e),function(){window.removeEventListener(n,e)}},[])},Ut=["input","select","button","textarea"];function use_form_state_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Wt=function(e){var t=e.onSearchQueryChange,n=use_form_state_slicedToArray(s.a.useState(""),2),r=n[0],o=n[1],a=s.a.useRef(null),i=s.a.useMemo(function(){return U.b.getUrl(U.a.SearchPage)},[]);Object(Te.b)(function(){t({value:r})},[r,t]);var c=s.a.useCallback(function(e){o(e.target.value)},[]),u=s.a.useCallback(function(e){e.preventDefault()},[]),l=s.a.useCallback(function(){r&&r.length||(window.location.href=U.b.getUrl(U.a.Chance))},[r]),p=s.a.useCallback(function(e){a.current=e},[]),f=s.a.useCallback(function(e){a.current&&(e.preventDefault(),window.location.href=a.current.url)},[]);return{searchQuery:r,setSearchQuery:o,formActionUrl:i,handleSubmit:f,handleChangeInput:c,handleInvalidInput:u,handleSearchButtonClick:l,handleChangeSelectedItem:p}},Bt=function(e){var t=e.inputRef,n=e.setSearchQuery,r=e.initialSearchQuery;Object(Te.b)(function(){var e,o=null===(e=t.current)||void 0===e?void 0:e.value;n(o||r)},[r])};function use_elements_state_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function use_elements_state_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_elements_state_ownKeys(Object(n),!0).forEach(function(t){use_elements_state_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_elements_state_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function use_elements_state_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function use_elements_state_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Gt=function(e){var t=e.isSuggestAvailable,n=e.onFocus,r=e.onBlur,o=use_elements_state_slicedToArray(s.a.useState({isInputFocused:!1,isSuggestEnabled:!1}),2),a=o[0],i=o[1],c=s.a.useMemo(function(){return t&&a.isSuggestEnabled},[t,a.isSuggestEnabled]),u=s.a.useCallback(function(){a.isInputFocused&&a.isSuggestEnabled||(i({isInputFocused:!0,isSuggestEnabled:!0}),n())},[n,a]),l=s.a.useCallback(function(){(a.isInputFocused||a.isSuggestEnabled)&&(i({isInputFocused:!1,isSuggestEnabled:!1}),r())},[r,a]),p=s.a.useCallback(function(){i(function(e){return e.isSuggestEnabled?e:use_elements_state_objectSpread({},e,{isSuggestEnabled:!0})})},[]),f=s.a.useCallback(function(){i(function(e){return e.isSuggestEnabled?use_elements_state_objectSpread({},e,{isSuggestEnabled:!1}):e})},[]),d=s.a.useCallback(function(e){e.keyCode===O.esc&&(c?f():l())},[c,l,f]);return{elementsState:a,isSuggestOpen:c,handleFocusForm:u,handleBlurForm:l,handleEnableSuggest:p,handleDisableSuggest:f,handleKeyboardControl:d}},Ht=n(217),Yt=n.n(Ht),Kt=function(e){var t=e.setElementRef,n=e.className,r=e.onClick,o=e.isActive;return s.a.createElement("button",{ref:t,type:"button",className:Pe()(Yt.a.root,n),"aria-label":"submit",onClick:r,tabIndex:-1},s.a.createElement("svg",{className:Pe()(o?Yt.a.iconActive:Yt.a.icon,"search-form-submit-button__icon"),xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},s.a.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.026 10.626L16 14.6 14.6 16l-3.974-3.974a5.5 5.5 0 1 1 1.4-1.4zM7.5 11.1a3.6 3.6 0 1 0 0-7.2 3.6 3.6 0 0 0 0 7.2z"})),"Найти")};Kt.defaultProps={isActive:!1};var zt=Kt;function submit_button_analytics_extends(){return(submit_button_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function submit_button_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Vt=Object(fe.d)(le.searchFormSubmitButton,function(e){return{searchQuery:e.searchQuery}})(function(e){var t=e.onClick,n=submit_button_analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useAnalyticsClick)(Ee),o=Object(Te.a)([t,r]);return s.a.createElement(zt,submit_button_analytics_extends({},n,{onClick:o}))}),qt=n(72),Xt=n.n(qt),Qt=function(e){var t=e.inputRef,n=e.className,r=e.onInvalid,o=e.onChange,a=e.onFocus,i=e.onKeyDown,c=e.onClick,u=e.placeholder,l=e.advancedSearchUrl,p=e.isActive,f=e.value,d=e.onSubmitButtonClick,m=e.inputName;return s.a.createElement("div",{className:Pe()(p?Xt.a.rootActive:Xt.a.root,n)},s.a.createElement("input",{ref:t,onInvalid:r,name:m,onClick:c,onChange:o,onFocus:a,onKeyDown:i,type:"text",className:Pe()(p?Xt.a.inputActive:Xt.a.input,"kinopoisk-header-search-form-input__input"),autoComplete:"off","aria-label":u,placeholder:u,value:f,required:!0}),s.a.createElement("div",{className:Pe()(Xt.a.controlContainer,"kinopoisk-header-search-form-input__control-container")},l&&s.a.createElement("a",{href:l,className:Xt.a.advancedSearch,"aria-label":"advanced-search",tabIndex:-1},s.a.createElement("svg",{className:p?Xt.a.advancedSearchIconActive:Xt.a.advancedSearchIcon,xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 18 18"},s.a.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.995 10.3A2.7 2.7 0 0 1 8.504 12H17v2H8.504a2.7 2.7 0 0 1-5.018 0H1v-2h2.486a2.7 2.7 0 0 1 2.509-1.7zm0 1.7a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm5.997-8.7A2.7 2.7 0 0 1 14.5 5H17v2h-2.5a2.7 2.7 0 0 1-5.017 0H1V5h8.483a2.7 2.7 0 0 1 2.509-1.7zm0 1.7a1 1 0 1 0 0 2 1 1 0 0 0 0-2z"}))),s.a.createElement(Vt,{isActive:p,className:Xt.a.submit,onClick:d,searchQuery:f})))};Qt.defaultProps={value:"",isActive:!1};var Zt=Object(c.memo)(Qt),$t=n(171),Jt=n.n($t),en=function(e){var t=e.className,n=e.placeholder,r=e.advancedSearchUrl,o=e.onFocus,a=e.onBlur,i=e.initialSearchQuery,c=e.inputName,u=e.isSuggestAvailable,l=e.onSearchQueryChange,p=e.autoFocusSearchInput,f=e.setElementRef,d=s.a.useRef(null),m=s.a.useRef(null),y=s.a.useCallback(function(e){d.current=e,f(e)},[f]),_=Gt({isSuggestAvailable:u,onFocus:o,onBlur:a}),h=_.elementsState.isInputFocused,g=_.isSuggestOpen,b=_.handleFocusForm,E=_.handleBlurForm,v=_.handleEnableSuggest,O=_.handleKeyboardControl,P=Wt({onSearchQueryChange:l}),S=P.searchQuery,T=P.setSearchQuery,k=P.formActionUrl,C=P.handleSubmit,w=P.handleChangeInput,I=P.handleInvalidInput,A=P.handleSearchButtonClick,x=P.handleChangeSelectedItem;return Bt({setSearchQuery:T,inputRef:m,initialSearchQuery:i}),function(e){var t=e.autoFocusSearchInput,n=e.inputRef;s.a.useEffect(function(){if(t){var e=document.activeElement;e&&Ut.includes(e.tagName.toLowerCase())||n.current&&n.current.focus()}},[t])}({inputRef:m,autoFocusSearchInput:p}),Ft({eventType:"mousedown",elementRef:d,callback:E}),Object(Te.b)(function(){!h&&m.current&&m.current.blur()},[h]),s.a.createElement("div",{ref:y,className:Pe()(Jt.a.root,t)},s.a.createElement("form",{className:Jt.a.form,action:k,onSubmit:C},s.a.createElement(Zt,{className:Jt.a.searchInputElement,value:S,inputName:c,inputRef:m,isActive:h,onClick:v,onInvalid:I,onChange:w,onFocus:b,onKeyDown:O,advancedSearchUrl:r,placeholder:n,onSubmitButtonClick:A})),g&&s.a.createElement("div",{className:Pe()(Jt.a.suggestContainer,"kinopoisk-header-search-form__suggest-container")},s.a.createElement(Lt,{onActiveItemChanged:x})))},tn={initialSearchQuery:"",isSuggestAvailable:!1,setElementRef:we.a,onFocus:we.a,onBlur:we.a,onSearchQueryChange:we.a,placeholder:"Фильмы, персоны, кинотеатры",inputName:"kp_query",autoFocusSearchInput:!1};en.defaultProps=tn;var nn=en;function search_form_analytics_extends(){return(search_form_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var rn=Object(fe.d)(le.searchForm)(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(nn,search_form_analytics_extends({},e,{setElementRef:t}))});function search_form_container_extends(){return(search_form_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function search_form_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var on=Object(u.connect)(function(e){return{config:z(e),isSuggestAvailable:$(e)}},{onSearchQueryChange:I})(function(e){var t=e.config,n=e.isSuggestAvailable,r=search_form_container_objectWithoutProperties(e,["config","isSuggestAvailable"]);return s.a.createElement(rn,search_form_container_extends({},r,t,{isSuggestAvailable:n}))}),an=n(218),cn=n.n(an);function branding_component_extends(){return(branding_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var sn=function(e){var t=e.className,n=e.imgSrcSet,r=e.backgroundColor,o=e.url,a=e.isExternalUrl,i=s.a.useMemo(function(){return a?"_blank":"_self"},[a]);return s.a.createElement("div",{className:Pe()(cn.a.root,t),style:{backgroundColor:r}},s.a.createElement(Ie,branding_component_extends({},n,{className:cn.a.image})),s.a.createElement("a",{href:o,className:cn.a.link,target:i,"aria-label":"presentation"}))};sn.defaultProps={isExternalUrl:!1};var un=sn;function branding_container_extends(){return(branding_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function branding_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ln=Object(u.connect)(function(e){return{config:J(e)}})(function(e){var t=e.config,n=branding_container_objectWithoutProperties(e,["config"]);return t?s.a.createElement(un,branding_container_extends({},t,n)):null}),pn=n(337),fn=n.n(pn),dn=function(e){var t=e.className,n=e.onClick,r=e.color,o=e.setElementRef;return s.a.createElement("button",{ref:o,className:Pe()(fn.a.root,t),onClick:n,type:"button"},s.a.createElement("span",{className:Pe()(fn.a.icon,"kinopoisk-header-burger__icon"),style:{color:r}}))};function burger_analytics_extends(){return(burger_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function burger_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var mn=Object(fe.d)(le.burger)(function(e){var t=e.onClick,n=burger_analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useVisibilitySensor)().setElementRef,o=Object(de.useAnalyticsClick)(me),a=ke(),i=Object(Te.a)([t,o,a]);return s.a.createElement(dn,burger_analytics_extends({},n,{setElementRef:r,onClick:i}))});function burger_container_extends(){return(burger_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function burger_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var yn=Object(u.connect)(function(e){return{config:te(e)}})(function(e){var t=e.config,n=burger_container_objectWithoutProperties(e,["config"]);return s.a.createElement(mn,burger_container_extends({},t,n))}),_n=n(481),hn=n.n(_n);function use_custom_logo_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var gn=n(338),bn=n.n(gn),En=function(e){var t=e.url,n=e.label,r=e.className,o=e.target,a=e.onClick,i=e.imgSrcSet,c=e.setElementRef,u=s.a.useRef(null),l=function(e){var t=e.imgSrcSet,n=e.imgRef,r=use_custom_logo_slicedToArray(s.a.useState(t||null),2),o=r[0],a=r[1];return s.a.useEffect(function(){if(!o||!n.current)return function(){};var e=n.current,t=function(){a(null)};return e.complete?(e.naturalWidth||t(),function(){}):(e.addEventListener("error",t),function(){e.removeEventListener("error",t)})},[o]),o}({imgSrcSet:i,imgRef:u}),p=s.a.useMemo(function(){return{src:(e=l||{x1:hn.a}).x1,srcSet:e.x2&&"".concat(e.x1," 1x, ").concat(e.x2," 2x")};var e},[l]),f=p.src,d=p.srcSet;return s.a.createElement("a",{ref:c,className:Pe()(bn.a.root,r),onClick:a,href:t,target:o,"aria-label":n},s.a.createElement("img",{ref:u,className:Pe()(bn.a.img,"kinopoisk-header-logo__img"),alt:n,src:f,srcSet:d}))};En.defaultProps={label:"КиноПоиск"};var vn=Object(c.memo)(En);function logo_analytics_extends(){return(logo_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function logo_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var On=Object(fe.d)(le.logo,function(e){return{url:e.url}})(function(e){var t=e.onClick,n=logo_analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useVisibilitySensor)().setElementRef,o=Object(de.useAnalyticsClick)(ye),a=ke(),i=Object(Te.a)([t,o,a]);return s.a.createElement(vn,logo_analytics_extends({},n,{setElementRef:r,onClick:i}))});function logo_container_extends(){return(logo_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function logo_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Pn=function(e){var t=e.config,n=e.url,r=e.isCustomUrlEnabled,o=logo_container_objectWithoutProperties(e,["config","url","isCustomUrlEnabled"]),a=s.a.useMemo(function(){return r&&t?t.url:void 0},[r,t]),i=s.a.useMemo(function(){return a?"_blank":void 0},[a]),c=s.a.useMemo(function(){return a||n},[n,a]);return s.a.createElement(On,logo_container_extends({},t,o,{url:c,target:i}))};Pn.defaultProps={isCustomUrlEnabled:!1,url:"/"};var Sn=Object(u.connect)(function(e){return{config:H(e)}})(Pn),Tn=n(219),kn=n.n(Tn);function imax_item_extends(){return(imax_item_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Cn=Object(c.memo)(function(e){var t=e.className,n=e.title,r=e.url,o=e.target,a=e.iconSrcSet,i=e.theme,c=e.onLinkClick,u=e.setElementRef;return s.a.createElement("div",{className:t},s.a.createElement("a",{ref:u,className:i===f.dark?kn.a.titleDark:kn.a.title,href:r,target:o,onClick:c},s.a.createElement("span",{className:Pe()(kn.a.titleText,"kinopoisk-header-navigation-menu-imax-item__title-text")},n),a&&s.a.createElement(Ie,imax_item_extends({"aria-label":"presentation"},a))))}),wn=n(339),In=n.n(wn);function special_placement_item_extends(){return(special_placement_item_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var An=function(e){var t=e.url,n=e.title,r=e.iconSrcSet,o=e.target,a=e.className,i=e.onLinkClick;return r?s.a.createElement("div",{className:Pe()(In.a.root,a)},s.a.createElement("a",{href:t,target:o,onClick:i},s.a.createElement(Ie,special_placement_item_extends({className:In.a.icon},r,{alt:n})))):null},xn=n(132),Rn=n.n(xn);function navigation_menu_item_component_extends(){return(navigation_menu_item_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Nn=function(e){var t=e.className,n=e.title,r=e.subtitle,o=e.iconSrcSet,a=e.url,i=e.target,c=e.theme,u=e.onLinkClick,l=e.setElementRef;return s.a.createElement("div",{className:Pe()(t,"kinopoisk-header-navigation-item")},s.a.createElement("a",{ref:l,className:c===f.dark?Rn.a.titleDark:Rn.a.title,href:a,target:i,onClick:u},n,o&&s.a.createElement(Ie,navigation_menu_item_component_extends({className:Rn.a.icon,"aria-label":"presentation"},o))),r&&s.a.createElement("span",{className:c===f.dark?Rn.a.subtitleDark:Rn.a.subtitle},r))};Nn.defaultProps={isHighlighted:!1};var jn,Dn=Object(c.memo)(Nn);function navigation_menu_item_container_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Mn=(navigation_menu_item_container_defineProperty(jn={},l.NavigationMenuItemCustomTypes.Imax,Cn),navigation_menu_item_container_defineProperty(jn,l.NavigationMenuItemCustomTypes.SpecialPlacement,An),jn),Ln=function(e){var t=e.customType,n=t&&Mn[t]||Dn;return s.a.createElement(n,e)};function navigation_menu_item_analytics_extends(){return(navigation_menu_item_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function navigation_menu_item_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Fn=Object(c.memo)(Object(fe.d)(le.navigationMenuItem,function(e){var t=e.id,n=e.title,r=e.position;return{id:t,url:e.url,title:n,position:r}})(function(e){var t=e.onLinkClick,n=navigation_menu_item_analytics_objectWithoutProperties(e,["onLinkClick"]),r=ke(),o=Object(de.useAnalyticsClick)(he),a=Object(Te.a)([t,r,o]);return s.a.createElement(Ln,navigation_menu_item_analytics_extends({onLinkClick:a},n))})),Un=n(482),Wn=n.n(Un),Bn=function(e){var t=e.className,n=e.children;return s.a.createElement("h3",{className:Pe()(Wn.a.root,t,"kinopoisk-header-navigation-menu-group-title")},n)};function control_button_analytics_extends(){return(control_button_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function control_button_analytics_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Gn=Object(fe.d)(le.navigationMenuMoreItemButton)(function(e){var t=e.onClick,n=control_button_analytics_objectWithoutProperties(e,["onClick"]),r=Object(de.useAnalyticsClick)(ge),o=Object(Te.a)([t,r]);return s.a.createElement("button",control_button_analytics_extends({},n,{onClick:o,type:"button"}))}),Hn=n(133),Yn=n.n(Hn);function navigation_menu_group_component_extends(){return(navigation_menu_group_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function component_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Kn=function(e){var t=e.className,n=e.title,r=e.nonCollapsedCount,o=e.items,a=e.theme,i=e.setElementRef,c=component_slicedToArray(s.a.useState(!0),2),u=c[0],l=c[1],p=s.a.useCallback(function(){l(function(e){return!e})},[l]),d=s.a.useMemo(function(){return u?o.slice(0,r):o},[u,o,r]),m=s.a.useMemo(function(){var e=o.length-r;return e>0?e:0},[r,o]),y=s.a.useMemo(function(){return Boolean(m)},[m]),_=s.a.useMemo(function(){return u?"Показать еще ".concat(m):"Свернуть"},[u,m]);return s.a.createElement("div",{ref:i,className:t},n&&s.a.createElement(Bn,{className:Yn.a.title},n),s.a.createElement("div",{className:Yn.a.items},d.map(function(e,t){return s.a.createElement(Fn,navigation_menu_group_component_extends({key:e.id||"index-".concat(t),className:Yn.a.item,position:t+1,theme:a},e))})),y&&s.a.createElement(Gn,{className:Pe()(a===f.dark?Yn.a.controlButtonDark:Yn.a.controlButtonLight,"kinopoisk-header-navigation-menu-group__control-button"),onClick:p},_))};Kn.defaultProps={items:[],nonCollapsedCount:4};var zn=Object(c.memo)(Kn);function navigation_menu_group_analytics_extends(){return(navigation_menu_group_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Vn=Object(c.memo)(Object(fe.d)(le.navigationMenuGroup,function(e){return{id:e.id,title:e.title,position:e.position}})(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(zn,navigation_menu_group_analytics_extends({},e,{setElementRef:t}))})),qn=n(340),Xn=n.n(qn);function navigation_menu_component_extends(){return(navigation_menu_component_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Qn=function(e){var t=e.className,n=e.groups,r=e.theme,o=e.setElementRef;return s.a.createElement("div",{ref:o,className:Pe()(Xn.a.root,t,"kinopoisk-header-navigation-menu")},n.map(function(e,t){return s.a.createElement(Vn,navigation_menu_component_extends({key:e.id},e,{position:t,theme:r,className:Xn.a.group}))}))},Zn={groups:[],theme:f.dark};Qn.defaultProps=Zn;var $n=Object(c.memo)(Qn);function navigation_menu_analytics_extends(){return(navigation_menu_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Jn=Object(fe.d)(le.navigationMenu)(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement($n,navigation_menu_analytics_extends({},e,{setElementRef:t}))});function navigation_menu_container_extends(){return(navigation_menu_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function navigation_menu_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var er=Object(u.connect)(function(e){return{config:K(e)}})(function(e){var t=e.config,n=navigation_menu_container_objectWithoutProperties(e,["config"]);return t?s.a.createElement(Jn,navigation_menu_container_extends({},n,t)):null});function use_toggle_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var tr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=use_toggle_slicedToArray(s.a.useState(e),2),n=t[0],r=t[1];return{isEnabled:n,handleEnable:s.a.useCallback(function(){r(!0)},[]),handleDisable:s.a.useCallback(function(){r(!1)},[]),handleToggle:s.a.useCallback(function(){r(function(e){return!e})},[])}},nr=n(73),rr=n.n(nr),or=function(e){var t=e.className,n=e.navigationClassName,r=e.dropdownMenuClassName,o=e.isDropdownMenuAvailable,a=e.navigationMenuTheme,i=e.isCustomLogoUrlEnabled,c=tr(),u=c.isEnabled,l=c.handleToggle;return s.a.createElement("div",{className:Pe()(u?rr.a.rootActive:rr.a.root,t)},s.a.createElement(Sn,{className:rr.a.logo,isCustomUrlEnabled:i}),o&&s.a.createElement("div",{className:n},s.a.createElement(yn,{className:rr.a.burger,onClick:l}),s.a.createElement("div",{className:rr.a.dropdown},s.a.createElement("div",{className:rr.a.dropdownMenuWrapper},s.a.createElement("div",{className:Pe()(a===f.dark?rr.a.dropdownMenuDark:rr.a.dropdownMenuLight,r)},s.a.createElement(er,{className:rr.a.navigationMenu,theme:a}))))))};or.defaultProps={navigationMenuTheme:f.dark};var ar=or,ir=Object(u.connect)(function(e){return{isDropdownMenuAvailable:ne(e)}})(ar),cr=n(32),sr=n.n(cr);function header_component_slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ur=function(e){var t=e.className,n=e.navigationClassName,r=e.userBar,o=e.navigationMenuTheme,a=e.initialSearchQuery,i=e.autoFocusSearchInput,c=e.isBrandingAvailable,u=e.isCustomLogoUrlEnabled,l=e.setElementRef,p=header_component_slicedToArray(s.a.useState(!1),2),f=p[0],d=p[1],m=s.a.useCallback(function(){d(!0)},[]),y=s.a.useCallback(function(){d(!1)},[]);return s.a.createElement("header",{ref:l,className:Pe()(sr.a.root,t)},c&&s.a.createElement(ln,{className:sr.a.branding}),s.a.createElement(Se.GridContainer,{className:c?sr.a.navigationWithBranding:sr.a.navigation},s.a.createElement(Se.GridRow,{className:sr.a.inner},s.a.createElement(Se.GridColumn,{className:sr.a.logoContainer,md:5,lg:6},s.a.createElement(ir,{dropdownMenuClassName:sr.a.dropdownMenu,navigationMenuTheme:o,navigationClassName:n,isCustomLogoUrlEnabled:u})),s.a.createElement(Se.GridColumn,{className:sr.a.mainContainer},s.a.createElement(Se.GridRow,{className:sr.a.mainContainerInner},s.a.createElement(Se.GridColumn,{className:f?sr.a.featureMenuContainerCompact:sr.a.featureMenuContainer},s.a.createElement(He,null)),s.a.createElement(Se.GridColumn,{className:f?sr.a.searchFormContainerWide:sr.a.searchFormContainer,md:7,lg:10},s.a.createElement(on,{className:sr.a.searchForm,onFocus:m,onBlur:y,initialSearchQuery:a,autoFocusSearchInput:i})))),s.a.createElement(Se.GridColumn,{className:sr.a.userContainer,md:3,lg:4},r))))},lr={theme:p.dark,navigationMenuTheme:f.dark,autoFocusSearchInput:!1,isCustomLogoUrlEnabled:!1};ur.defaultProps=lr;var pr=ur;function header_analytics_extends(){return(header_analytics_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fr=Object(c.memo)(Object(fe.d)(le.header)(function(e){var t=Object(de.useVisibilitySensor)().setElementRef;return s.a.createElement(pr,header_analytics_extends({},e,{setElementRef:t}))}));function header_container_extends(){return(header_container_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function header_container_objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var dr=Object(u.connect)(function(e){return{isBrandingAvailable:ee(e)}},{onInit:C})(function(e){var t=e.onInit,n=e.isBrandingAvailable,r=header_container_objectWithoutProperties(e,["onInit","isBrandingAvailable"]);return s.a.useEffect(function(){t()},[t]),s.a.createElement(fr,header_container_extends({},r,{isBrandingAvailable:n}))}),mr=n(213),yr=n.n(mr),_r=n(130),hr=n.n(_r),gr=function(e){var t=e.className,n=e.children,r=Object(u.useSelector)(ee),o=s.a.useCallback(function(e){null!==e&&yr()(e)},[]);return s.a.createElement("div",{ref:o,className:Pe()(r?hr.a.rootWithBranding:hr.a.root,t)},n)},br=n(51),Er=n.n(br);function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var vr=function(e){var t,n,r=e.id,o=e.className,a=(t=o,n=s.a.useRef(null),s.a.useEffect(function(){n.current=t},[t]),n.current),i=s.a.useMemo(function(){var e=document.getElementById(r);return e||(e=document.createElement("div")).setAttribute("id",r),e},[r]);return Object(Te.b)(function(){i&&(a&&function(e,t){var n,r=t.split(" ");(n=e.classList).remove.apply(n,_toConsumableArray(r))}(i,a),function(e,t){var n,r=t.split(" ");(n=e.classList).add.apply(n,_toConsumableArray(r))}(i,o))},[i,o]),i},Or=function(e){var t=e.id,n=e.children,r=e.className,o=Object(u.useSelector)(ee),a=vr({id:t,className:Pe()(o?hr.a.rootWithBranding:hr.a.root,r)});return Object(Te.b)(function(){return a?(document.body.insertAdjacentElement("afterbegin",a),yr()(a),function(){document.body.removeChild(a)}):function(){}},[]),a?Er.a.createPortal(n,a):n};n.d(t,"Header",function(){return dr}),n.d(t,"NavigationMenu",function(){return er}),n.d(t,"StickyContainer",function(){return gr}),n.d(t,"PortalStickyContainer",function(){return Or}),n.d(t,"HEADER_THEMES",function(){return p}),n.d(t,"NAVIGATION_MENU_THEMES",function(){return f}),n.d(t,"RATING_TYPES",function(){return d}),n.d(t,"RATING_POSITIVE_MIN_COUNT",function(){return 7}),n.d(t,"RATING_NEGATIVE_MAX_COUNT",function(){return 5}),n.d(t,"MODULE_ID",function(){return"header"}),n.d(t,"STATE_ROOT_KEY",function(){return"header"}),n.d(t,"HEADER_STATE_KEYS",function(){return E}),n.d(t,"FETCH_STATUSES",function(){return v}),n.d(t,"SEARCH_PAGE_QUERY_PARAMS_NAME",function(){return"kp_query"}),n.d(t,"KEY_CODES",function(){return O}),n.d(t,"HEADER_DATA_PROVIDER_ID",function(){return S}),n.d(t,"TV_SERIES_TYPES_BY_KP1_SERIES_TYPES",function(){return m}),n.d(t,"SUGGEST_GROUPS_TITLES",function(){return y}),n.d(t,"TV_SERIES_SUGGEST_TYPES_TITLES",function(){return _}),n.d(t,"MIN_SUGGEST_VALUE_LENGTH",function(){return h}),n.d(t,"SUGGEST_DEBOUNCE_VALUE",function(){return g}),n.d(t,"SUGGEST_GROUP_ID_BY_SUGGEST_TYPE",function(){return b}),n.d(t,"getHeaderModule",function(){return pe}),n.d(t,"initSaga",function(){return initSaga}),n.d(t,"initSagaWatcher",function(){return initSagaWatcher}),n.d(t,"watchers",function(){return ue}),n.d(t,"ACTIONS_TYPES",function(){return P}),n.d(t,"initEffect",function(){return C}),n.d(t,"updateConfig",function(){return w}),n.d(t,"suggestQueryChangeEffect",function(){return I}),n.d(t,"updateSuggest",function(){return A}),n.d(t,"selectHeaderState",function(){return W}),n.d(t,"selectConfigState",function(){return B}),n.d(t,"selectConfigFetchStatus",function(){return G}),n.d(t,"selectLogoConfig",function(){return H}),n.d(t,"selectFeaturedMenuConfig",function(){return Y}),n.d(t,"selectNavigationMenuConfig",function(){return K}),n.d(t,"selectSearchFormConfig",function(){return z}),n.d(t,"selectIsConfigLoaded",function(){return V}),n.d(t,"selectSuggestState",function(){return q}),n.d(t,"selectSuggestItems",function(){return X}),n.d(t,"selectSuggestQuery",function(){return Q}),n.d(t,"selectSearchPageUrl",function(){return Z}),n.d(t,"selectIsSuggestAvailable",function(){return $}),n.d(t,"selectBrandingConfig",function(){return J}),n.d(t,"selectIsBrandingAvailable",function(){return ee}),n.d(t,"selectBurgerConfig",function(){return te}),n.d(t,"selectIsDropdownMenuAvailable",function(){return ne}),n.d(t,"fetchConfig",function(){return fetchConfig}),n.d(t,"suggestQueryChangeSaga",function(){return suggestQueryChangeSaga}),n.d(t,"suggestQueryChangeSagaWatcher",function(){return suggestQueryChangeSagaWatcher}),n.d(t,"getHeaderService",function(){return getHeaderService}),n.d(t,"getConfigInitialState",function(){return j}),n.d(t,"configReducer",function(){return D}),n.d(t,"getSuggestInitialState",function(){return x}),n.d(t,"suggestReducer",function(){return R})},function(e,t){e.exports={update:function(e){return{type:"metrika/UPDATE",payload:e}},UPDATE:"metrika/UPDATE",sendMetrikaParams:function(e){return{type:"SEND_METRIKA_PARAMS",payload:e}},SEND_METRIKA_PARAMS:"SEND_METRIKA_PARAMS",saveInitialUtmEffect:function(){return{type:"SAVE_INITIAL_UTM_EFFECT"}},SAVE_INITIAL_UTM_EFFECT:"SAVE_INITIAL_UTM_EFFECT"}},function(e,t,n){"use strict";e.exports={LINK_YANDEX_SHOW_MORE:"ykp_popup.post_link",FEATURING:"promo-features-2",LINK_YANDEX_PROMO_CODE:"ykp_popup.promocode",LINK_YANDEX_PROMO_TEXT:"ykp_popup.promotext",MEDIA_CUSTOM_SUPER_BANNER:"media_custom_super_banner",REG_SUGGEST_TOAST_POSTER:"reg-suggest-toast-poster",BASIC_SUBSCRIPTION_HEADER:"watch-online.basic-header",PREMIUM_SUBSCRIPTION_HEADER:"watch-online.premium-header",WATCH_ONLINE_KP_HEADER:"watch-online.kp-header",WATCH_ONLINE_MAIN_PAGE:"watch-online.kp-main-page",HEADER_CUSTOM_NAV_ITEM:"header-custom-nav-item",WHITE_EMAIL_ACTIVE:"email_wl",KINOPOISK_GO_SUBSCRIPTION:{ROOT:"kinopoisk-go-subscription",MODAL_CONTENT_DETAIL:"kinopoisk-go-subscription.modal-content-detail",MODAL_CONTENT_CANCEL:"kinopoisk-go-subscription.modal-content-cancel",MODAL_CONTENT_TERMS_OF_USE:"kinopoisk-go-subscription.modal-content-terms-of-use"},CINEMA_WEEK_REVIEW:"cinema_week"}},function(e,t,n){"use strict";e.exports={loadAccountsRequest:function(){return{type:"sezam/LOAD_ACCOUNTS_REQUEST"}},loadAccountsSuccess:function(e){return{type:"sezam/LOAD_ACCOUNTS_SUCCESS",payload:e}},LOAD_ACCOUNTS_REQUEST:"sezam/LOAD_ACCOUNTS_REQUEST",LOAD_ACCOUNTS_SUCCESS:"sezam/LOAD_ACCOUNTS_SUCCESS"}},function(e,t,n){var r=n(6).createSelector,o=n(19).getIsAuthorized,a=n(175).selectIsWhiteEmailActive,i=n(19).selectIsUnderAbExperiment,c=n(37),s=c.AB_EXPERIMENT,u=s.EXPERIMENT_NAME,l=s.EXPERIMENT_VALUE,p=c.REQUEST_STATUSES,f=function(e){return e.whiteEmailStatus},d=r(f,function(e){return e.shouldConfirm}),m=r(f,function(e){return e.shouldChange}),y=r(f,function(e){return e.email}),_=r(f,function(e){return e.error}),h=r(f,function(e){return e.mode}),g=r(f,function(e){return e.requestStatus}),b=r(g,function(e){return[p.PENDING,p.UPDATING].includes(e)}),E=r(f,function(e){return e.textPreset}),v=r(f,function(e){return e.isWhitelisted}),O=r(o,a,i(u,l),v,function(e,t,n,r){return e&&t&&n&&!r});e.exports={selectWhiteEmailStatusState:f,selectShouldConfirm:d,selectShouldChange:m,selectEmail:y,selectError:_,selectMode:h,selectIsLoading:b,selectTextPreset:E,selectIsWhiteEmailEnable:O,selectIsWhitelisted:v,selectRequestStatus:g}},,,,,,,,,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="modal".concat("-partial-component");n(1153);var o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(490),u=n(1154),l=n(386).ESC,p=function(e){function Modal(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Modal),n=this,(t=!(r=_getPrototypeOf(Modal).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onKeyDown=t._onKeyDown.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Modal,o.Component),t=Modal,(n=[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this._onKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._onKeyDown)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.children,r=e.onClose;return o.createElement(s,{transitionName:"animate",component:"div",transitionAppear:!0},t?o.createElement("div",{className:c(i(),this.props.className)},o.createElement(u,{className:i("overlay")}),o.createElement("div",{className:i("inner"),onClick:r},o.createElement("div",{className:i("content"),onClick:this._onContentClick},n))):null)}},{key:"_onContentClick",value:function(e){e.stopPropagation()}},{key:"_onKeyDown",value:function(e){e.keyCode===l&&this.props.onClose()}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Modal}();p.defaultProps={onClose:function(){}},p.propTypes={isOpen:a.bool,onClose:a.func,className:a.string,children:a.node},e.exports=p},function(e,t,n){"use strict";var r=n(669),o=n(670);e.exports=new o(r)},,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(772),o=n(316),a=n(773);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},function(e,t,n){var r=n(212),o=n(65);e.exports=function(e){var t={},n=function(t){return e[t]};return{getRoute:n,getUrl:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=n(e);if(c)try{t[e]||(t[e]=r.compile(c));var s=o.stringify(i);return"".concat(t[e].call(null,a)).concat(s?"?".concat(s):"")}catch(e){}return""}}}},function(e,t,n){"use strict";e.exports={INIT_EFFECT:"gift/INIT_EFFECT",initEffect:function(){return{type:"gift/INIT_EFFECT"}},APPLY_PROMOCODE_EFFECT:"gift/APPLY_PROMOCODE_EFFECT",applyPromocodeEffect:function(e){return{type:"gift/APPLY_PROMOCODE_EFFECT",payload:{promocode:e.promocode}}},START_TRUST_IFRAME_LISTENER_EFFECT:"gift/START_TRUST_IFRAME_LISTENER_EFFECT",startTrustIframeListenerEffect:function(){return{type:"gift/START_TRUST_IFRAME_LISTENER_EFFECT"}},STOP_TRUST_IFRAME_LISTENER_EFFECT:"gift/STOP_TRUST_IFRAME_LISTENER_EFFECT",stopTrustIframeListenerEffect:function(){return{type:"gift/STOP_TRUST_IFRAME_LISTENER_EFFECT"}},RETRY_PAYMENT_EFFECT:"gift/RETRY_PAYMENT_EFFECT",retryPaymentEffect:function(){return{type:"gift/RETRY_PAYMENT_EFFECT"}},UPDATE:"gift/UPDATE",update:function(e){return{type:"gift/UPDATE",payload:e}}}},function(e,t){var n="Что-то пошло не так, попробуйте ещё раз",r={"code-already-consumed":"Промокод уже был использован","code-expired":"Срок действия промокода истек","code-only-for-new-users":"Промокод только для новых пользователей","code-not-exists":"Такого промокода не существует","code-only-for-web":n,"code-only-for-mobile":n,"code-not-allowed-in-current-region":"Промокод недоступен в данном регионе","user-temporary-banned":"Такого промокода не существует","user-has-temporary-campaign-restrictions":"Промокод недействителен","failed-to-create-payment":n};e.exports={DEFAULT_ERROR:n,EMPTY_PROMOCODE_ERROR:"Вы не ввели промокод",ERRORS:r,PAGES:{LANDING:"landing",PAYMENT_FORM:"paymentForm",SUCCESS:"success"},LOCAL_STORAGE_ITEM_NAME:"gift-page-promocode",PAYMENT_FORM_ERROR_TYPE:{default:"default",not_enough_funds:"not_enough_funds",expired_card:"expired_card",payment_timeout:"payment_timeout",invalid_xrf_token:"invalid_xrf_token",technical_error:"technical_error",timeout:"timeout"}}},function(e,t){e.exports={DEFAULT_ERROR:"Что-то пошло не так",ERRORS:{403:"Была использована авторизация через не привязанный к КиноПоиску аккаунт",404:"Авторизационный код не найден или истек срок действия кода"},PAGES:{empty:"empty",auth:"auth",deviceLimit:"deviceLimit",codeInput:"codeInput",success:"success",serverError:"serverError"},PATHS:{code:"/code/",passportTvCode:"/tvcode/"}}},,function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(44),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"lists";return r.params([t].concat(_toConsumableArray(e)))},a=function(e){var t=e.selectionType,n=void 0===t?"auto":t,r=e.eventType,o=e.event;return["type",n,r].concat(_toConsumableArray(o))};e.exports={sendCommon:function(e){o(a({eventType:"common",event:e}))},sendFilter:function(e){o(a({eventType:"filter",event:e}))},sendClick:function(e){o(a({eventType:"click",event:e}))},sendOnline:function(e){o(a({eventType:"online",event:e}))},sendSort:function(e){o(a({eventType:"sort",event:e}))},sendPaginator:function(e){o(a({eventType:"paginator",event:e}))},sendToWatchClick:function(e){var t=e.operation,n=e.isTouch,r=e.filmId,a=e.hasAuth;o(["await",t,n?"kp_touch":"kp_desktop","lists","common",r,a?"auth_yes":"auth_no"],"user_action_click")}}},function(e,t,n){"use strict";var r=n(16);e.exports={requestAction:function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"get",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return function(i,c){i({type:e,meta:{status:"pending"},payload:{query:n}});var s={};return a.body&&(s.body=a.body),n&&(s.query=n),r[o](t,s).then(function(t){i({type:e,payload:{state:t,query:n},meta:{status:"done"}}),a.onSuccess&&a.onSuccess(c,i)}).catch(function(t){throw i({type:e,error:t,meta:{status:"fail"},payload:{query:n}}),t})}}}},function(e,t,n){var r=n(6).createSelector,o=n(26).getPageState,a=n(315),i=a.selectSpecialProjectsModels,c=a.selectSpecialProjectsUserData,s=n(114),u=s.DRAGON_ID,l=s.DRAGON_BUNKER_NODE_PATH,p=function(e){return e.common.bunker[l]||{}},f=r([i],function(e){return e[u]||{}}),d=r([f],function(e){return Number(e.sessionExpired)||0}),m=r([f],function(e){return Number(e.daySessionExpired)||0}),y=r([c],function(e){return e[u]||{}}),_=r([f],function(e){return Boolean(e.enabled)}),h=r([o,_],function(e,t){return t&&e.specialProject===u}),g=r([y],function(e){return Boolean(e.isClose)}),b=r([y],function(e){return Number(e.sessionShadowViews)||0}),E=r([y],function(e){return Number(e.daySessionShadowViews)||0}),v=r([p],function(e){return Number(e.shadowMaxViewsPerSession)||0}),O=r([p],function(e){return Number(e.shadowMaxViewsPerDaySession)||0});e.exports={selectDragonModel:f,selectDragonUserData:y,selectIsDragonEnable:_,selectIsDragonAvailable:h,selectDragonConfig:p,selectSessionExpired:d,selectDaySessionExpired:m,selectAnimationType:function(e){return y(e).animationType},selectSessionShadowViews:b,selectDaySessionShadowViews:E,selectDragonTheme:function(e){return y(e).dragonTheme},selectAnimationStages:function(e){return y(e).stages},selectSessionShadowMaxViews:v,selectDaySessionShadowMaxViews:O,selectButtonText:function(e){return f(e).buttonText},selectLinkHref:function(e){return f(e).linkHref},selectIsDragonClosed:g,selectVideoStaticPath:function(e){var t=e.common&&e.common.staticPath;return t?"".concat(t,"/dist/dragon/"):null}}},function(e,t,n){var r=n(6),o=r.createSelector,a=r.createStructuredSelector,i=n(249),c=n(47),s=c.selectUiListPagination,u=c.selectUiListMeta,l=c.selectIsUiListAvailable,p=c.selectUiListItems,f=n(152).selectPostsModels,d=n(254),m=d.selectRouteParams,y=d.selectRouteQuery,_=o(s,function(e){return Number(e.page)||1}),h=o(s,function(e){return e.limit||0}),g=o(s,function(e){return e.total||0}),b=function(e,t){var n=s(e,t),r=n.total,o=n.limit;return r&&o?Math.ceil(r/o):0},E=function(e,t){return u(e,t).type},v=function(e,t){return u(e,t).rubricId},O=function(e,t){return u(e,t).entityId},P=function(e,t){return u(e,t).entityType},S=o([_,b],function(e,t){return e<t}),T=a({rubricId:v,type:E,entityId:O,entityType:P}),k=o([l,T,function(e,t){return t}],function(e,t,n){var r=n.rubricId,o=n.type,a=n.entityId,c=n.entityType;return!!e&&i(t,{rubricId:r,type:o,entityId:a,entityType:c})}),C=o([m,y],function(e,t){var n=Number(t.page)||1;return Boolean(!e.type&&1===n)}),w=o([p,f],function(e,t){return e&&e.reduce(function(e,n){var r=t[n];return r&&e.push(r),e},[])});e.exports={selectPostsListPage:_,selectPostsListPagesCount:b,selectPostsListLimit:h,selectPostsListTotal:g,selectPostsListMediaType:E,selectPostsListHasMorePage:S,selectIsMainPageNewsListAvailable:C,selectPostsListRubricId:v,selectIsSamePostsListExist:k,selectPostsListsParams:T,selectPostsListEntityId:O,selectPostsListEntityType:P,selectPostsCollectionItems:w}},function(e,t,n){var r=n(14).default,o=r("media/INIT_MAIN_PAGE_EFFECT"),a=r("media/FETCH_MAIN_PAGE_DATA_EFFECT"),i=r("media/MAIN_PAGE_LOAD_MORE_EFFECT"),c=r("media/INIT_RUBRIC_PAGE_EFFECT"),s=r("media/FETCH_RUBRIC_PAGE_DATA_EFFECT"),u=r("media/RUBRIC_PAGE_LOAD_MORE_EFFECT"),l=r("media/FETCH_POSTS_RUBRICS_EFFECT");e.exports={MEDIA_INIT_MAIN_PAGE_EFFECT:"media/INIT_MAIN_PAGE_EFFECT",initMainPageEffect:o,MEDIA_FETCH_MAIN_PAGE_DATA_EFFECT:"media/FETCH_MAIN_PAGE_DATA_EFFECT",fetchMainPageDataEffect:a,MEDIA_MAIN_PAGE_LOAD_MORE_EFFECT:"media/MAIN_PAGE_LOAD_MORE_EFFECT",mainPageLoadMoreEffect:i,MEDIA_FETCH_RUBRIC_PAGE_DATA_EFFECT:"media/FETCH_RUBRIC_PAGE_DATA_EFFECT",fetchRubricPageDataEffect:s,MEDIA_INIT_RUBRIC_PAGE_EFFECT:"media/INIT_RUBRIC_PAGE_EFFECT",initRubricPageEffect:c,MEDIA_RUBRIC_PAGE_LOAD_MORE_EFFECT:"media/RUBRIC_PAGE_LOAD_MORE_EFFECT",rubricPageLoadMoreEffect:u,MEDIA_FETCH_POSTS_RUBRICS_EFFECT:"media/FETCH_POSTS_RUBRICS_EFFECT",fetchPostsRubricsEffect:l}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=regeneratorRuntime.mark(initPostsList),o=regeneratorRuntime.mark(loadMorePosts),a=n(1),i=a.call,c=a.put,s=a.select,u=n(49)("media:common"),l=n(47),p=l.addList,f=l.clearListItems,d=n(152).fetchPostsCollection,m=n(161),y=m.selectIsSamePostsListExist,_=m.selectPostsListPage,h=m.selectPostsListsParams,g=m.selectPostsListLimit;function initPostsList(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.listId,n=e.rubricId,o=e.type,a=e.title,r.next=3,s(y,{listId:t,rubricId:n,type:o});case 3:if(r.sent){r.next=9;break}return r.next=7,c(p(t,{meta:{title:a,type:o,rubricId:n}}));case 7:r.next=11;break;case 9:return r.next=11,c(f(t));case 11:case"end":return r.stop()}},r)}function loadMorePosts(e){var t,n,r,a,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.listId,n=e.pageBaseUrl,o.next=3,s(g,{listId:t});case 3:return r=o.sent,o.next=6,s(h,{listId:t});case 6:return a=o.sent,o.next=9,s(_,{listId:t});case 9:return o.t0=o.sent,c=o.t0+1,o.prev=11,o.next=14,i(d,_objectSpread({},a,{listId:t,limit:r,page:c}));case 14:o.next=19;break;case 16:o.prev=16,o.t1=o.catch(11),u("loadMorePosts:fetchPostsCollection failed");case 19:window.history.replaceState(null,null,"".concat(n,"?page=").concat(c));case 20:case"end":return o.stop()}},o,null,[[11,16]])}e.exports={loadMorePosts:loadMorePosts,initPostsList:initPostsList}},function(e,t){e.exports={selectKinopoiskGo:function(e){return e.kinopoiskGo}}},,function(e,t,n){var r=n(14).default,o=function(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:e,payload:n,meta:{entityId:t}}}},a=o("entities/ADD_MAP"),i=o("entities/UPDATE_MAP"),c=o("entities/DEEP_UPDATE_MAP"),s=o("entities/PATCH_MAP"),u=o("entities/DELETE_MAP"),l=r("entities/ADD_ENTITIES");e.exports={ENTITIES_ADD_MAP:"entities/ADD_MAP",addMap:a,ENTITY_UPDATE_MAP:"entities/UPDATE_MAP",updateMap:i,ENTITY_DEEP_UPDATE_MAP:"entities/DEEP_UPDATE_MAP",deepUpdateMap:c,ENTITY_PATCH_MAP:"entities/PATCH_MAP",patchMap:s,ENTITY_DELETE_MAP:"entities/DELETE_MAP",deleteMap:u,ADD_ENTITIES:"entities/ADD_ENTITIES",addEntities:l}},function(e,t){e.exports={NON_BREAKING_SPACE:" ",EN_DASH:"–"}},function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r="uiConfigurator",o="uiConfigurator"},,function(e,t,n){e.exports={root:"_2Q2tcfFV9TnKsF7vrUfkDx",rootPositive:"_1sIQdhlE0tz5Klo3-EKoFO _2Q2tcfFV9TnKsF7vrUfkDx",rootNegative:"_1-tvtpK87K7_jAiWyIkncy _2Q2tcfFV9TnKsF7vrUfkDx",rootNeutral:"_2Qs9lh-AH4TCDgiYleoVkv _2Q2tcfFV9TnKsF7vrUfkDx"}},function(e,t,n){e.exports={root:"_2-Y6qxabYBXT4JHoXBlXQB",form:"_2mjheNxE3vNgj0S4jcCihA",suggestContainer:"_3neNTKWmEJtkmJrr1IP3Cc",searchInputElement:"_3kFEMjuOKTNz8pvAYOuEhN"}},function(e,t,n){"use strict";var r=n(15),o=n(6).createSelector,a=n(107).default,i=function(e){return e.entities},c=function(e,t){var n=t.type;return i(e)[n]||{}},s=a(function(e,t){var n=t.type,o=t.id;return r(c(e,{type:n}),"byId.".concat(o))},{}),u=a(function(e,t){var n=t.type,r=t.ids;return(void 0===r?[]:r).map(function(t){return s(e,{type:n,id:t})})}),l=a(function(e,t){var n=t.type,r=t.ids;return(void 0===r?[]:r).reduce(function(t,r){return t[r]=s(e,{type:n,id:r}),t},{})}),p=a(function(e,t){var n=t.type;return c(e,{type:n}).contextData},{}),f=a(function(e,t){var n=t.type;return c(e,{type:n}).userData},{}),d=a(function(e,t){var n=t.type;return c(e,{type:n}).ottData},{}),m=a(function(e,t){var n=t.type;return c(e,{type:n}).afishaData},{});e.exports={selectEntitiesState:i,selectEntityByType:c,selectEntitiesByType:function(e,t){var n=t.type;return r(i(e)[n],"byId",{})},selectEntityIdByType:s,selectEntityIdsByType:u,selectEntityIdsMapByType:l,selectEntityContextData:p,selectEntityUserData:f,selectEntityOttData:d,selectEntityAfishaData:m,createFullEntitySelectorByIdAndType:function(e,t){return o(i,function(n){var r=n[t],o=r.byId,a=void 0===o?{}:o,i=r.userData,c=void 0===i?{}:i,s=r.ottData,u=void 0===s?{}:s,l=r.afishaData,p=void 0===l?{}:l,f=r.contextData,d=void 0===f?{}:f;return{coreData:a[e],userData:c[e],ottData:u[e],afishaData:p[e],contextData:d[e]}})}}},function(e,t,n){"use strict";var r=function(e){return e.models.plainFilms};e.exports={getFilmModels:r,getFilmModel:function(e,t){return r(e)[t]}}},function(e,t,n){"use strict";(function(t){function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=n(355),o=n(181),a=t;a=window;var i={},c=function(){function Request(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Request),this._params=Object.assign({},i,e)}var e,t,n;return e=Request,(t=[{key:"fetch",value:function(e){function fetch(){return e.apply(this,arguments)}return fetch.toString=function(){return e.toString()},fetch}(function(){this._fetch||(this._fetch=fetch);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this._fetch.apply(a,t)})},{key:"_checkDataForCaptcha",value:function(e){return!(!e||"captcha"!==e.type)&&(document.location.href=e.captcha["captcha-page"],!0)}},{key:"del",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.delete.apply(this,t)}},{key:"ask",value:function(e,t,n){var a=this,i={Accept:"application/json","Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"};if("GET"!==e){var c=this.csrfToken;c&&(i["X-Csrf-Token"]=c)}var s=r({},{method:e,headers:i,credentials:"same-origin",cache:"default"},n),u=s.body;u&&(s.body=JSON.stringify(u));var l=s.query,p=_slicedToArray(t.split("?"),2),f=p[0],d=p[1];l=Object.assign({},o.parse(d),l);var m=f;return Object.keys(l).length&&(m+="?".concat(o.stringify(l))),delete s.query,this.fetch(m,s).then(function(e){return((e.headers.get("Content-type")||"").split(",").some(function(e){return-1!==e.indexOf("application/json")})?e.json():e.text()).then(function(t){if(a._checkDataForCaptcha(t),e.ok)return t;var n=new Error(e.statusText);throw n.status=e.status,n.body=t,n})})}},{key:"csrfToken",get:function(){return null}}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Request}();["get","post","put","head","delete","options","trace","copy","lock","mkcol","move","purge","propfind","proppatch","unlock","report","mkactivity","checkout","merge","m-search","notify","subscribe","unsubscribe","patch","search","connect"].forEach(function(e){return c.prototype[e]=function(t,n){return this.ask(e.toUpperCase(),t,n)}}),e.exports=c}).call(this,n(196))},function(e,t,n){"use strict";var r=n(138),o=r.HEADER_CUSTOM_NAV_ITEM,a=r.WHITE_EMAIL_ACTIVE,i=r.CINEMA_WEEK_REVIEW,c=n(6),s=c.createSelector,u=c.createStructuredSelector,l=function(e){return e.common.bunker},p=s(l,function(e){return e[o]||{}}),f=s(p,function(e){return e.enabled||!1}),d=s(p,function(e){return e.iconSrcSet||{}}),m=function(e){return p(e).name},y=function(e){return p(e).link},_=u({isEnabled:f,name:m,link:y,iconSrcSet:d}),h=s(l,function(e){var t=e[a].active;return Boolean(Number(t))}),g=s(l,function(e){return e[i]});e.exports={selectBunkerState:l,selectCustomNavItemIcon:d,selectIsCustomNavItemEnabled:f,selectCustomNavItemName:m,selectCustomNavItemLink:y,selectCustomNavItem:_,selectIsWhiteEmailActive:h,selectCinemaWeekReviewItems:g}},,,,,,,,,,,function(e,t,n){"use strict";e.exports={OPEN_WELCOME_SCREEN_SOFT_MODE_EFFECT:"passport-connector/OPEN_WELCOME_SCREEN_SOFT_MODE_EFFECT",CLOSE_YANDEX_SUGGEST_TOAST_EFFECT:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST_EFFECT",OPEN_YANDEX_SUGGEST_TOAST:"passport-connector/OPEN_YANDEX_SUGGEST_TOAST",CLOSE_YANDEX_SUGGEST_TOAST:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST",OPEN_PASSPORT_CONNECTOR:"passport-connector/OPEN_PASSPORT_CONNECTOR",CLOSE_PASSPORT_CONNECTOR:"passport-connector/CLOSE_PASSPORT_CONNECTOR",openWelcomeScreenSoftModeEffect:function(){return{type:"passport-connector/OPEN_WELCOME_SCREEN_SOFT_MODE_EFFECT"}},closeYandexSuggestEffect:function(){return{type:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST_EFFECT"}},openYandexSuggestToast:function(){return{type:"passport-connector/OPEN_YANDEX_SUGGEST_TOAST"}},closeYandexSuggestToast:function(){return{type:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST"}},openPassportConnector:function(e){return{type:"passport-connector/OPEN_PASSPORT_CONNECTOR",payload:e}},closePassportConnector:function(e){return{type:"passport-connector/CLOSE_PASSPORT_CONNECTOR",payload:e}}}},function(e,t,n){var r=(0,n(14).default)("toaster/HEIGHT_CHANGED");e.exports={OPEN_TOAST:"toaster/open",CLOSE_TOAST:"toaster/close",TOASTER_HEIGHT_CHANGED:"toaster/HEIGHT_CHANGED",openToast:function(e){return{type:"toaster/open",payload:{toastType:e,priority:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}}},closeToast:function(){return{type:"toaster/close"}},toasterHeightChanged:r}},function(e,t,n){var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(100).ENTITY_TYPES_WITH_POSTS,a=(_defineProperty(r={},o.film,"материалы о фильме"),_defineProperty(r,o.person,"материалы о персоне"),r);e.exports={MEDIA_MAIN_PAGE_TITLE:"Медиа",MEDIA_MAIN_PAGE_NAVIGATION_TITLE:"Все материалы",MEDIA_LISTS_IDS:{postsRubrics:"media.posts_rubrics",mainPagePosts:"media.main_page.posts",mainPageNews:"media.main_page.news",rubricPagePosts:"media.rubric_page.posts",entityRelatedPostsPagePosts:"media.entity_related_posts_page.posts",entityPageRelatedPosts:"media.entity_page.posts"},MEDIA_DESKTOP_LIST_PAGE_CHUNK_SIZE:44,MEDIA_DESKTOP_MAIN_PAGE_NEWS_CHUNK_SIZE:8,MEDIA_RUBRIC_PAGE_TITLE:"Рубрики",MEDIA_TOUCH_LIST_PAGE_CHUNK_SIZE:20,MEDIA_TOUCH_MAIN_PAGE_NEWS_CHUNK_SIZE:5,MEDIA_POSTS_RUBRICS_LIST_LIMIT:100,MEDIA_DEFAULT_LIST_PAGE_CHUNK_SIZE:10,MEDIA_LOAD_MORE_BUTTON_TITLE:"Показать еще",MEDIA_TOP_BANNER_CONTAINER_ID:"adfox_153675751216679215",MEDIA_SIDEBAR_BANNER_CONTAINER_ID:"adfox_153675448847676568",MEDIA_ENTITY_WITH_POSTS_META_SUBTITLE:a,MEDIA_ENTITY_RELATED_POSTS_PAGE_META_PATTERNS:{title:"${title} — ${subtitle} — КиноПоиск",description:"${title}. ${subtitle}. Ежедневные обновления, самая свежая и интересная информация из мира кино"},MEDIA_EMPTY_COMMENTS_BUTTON_PLACEHOLDER:"Обсудить",MEDIA_ENTITY_PAGE_POSTS_LIMIT:4}},function(e,t,n){"use strict";n.r(t),n.d(t,"createSelectItemsFromCountries",function(){return s}),n.d(t,"createSelectItemsFromGenres",function(){return u}),n.d(t,"createSelectItemFromYear",function(){return l}),n.d(t,"createSelectItemsFromYears",function(){return p}),n.d(t,"getCurrentFiltersForSelects",function(){return getCurrentFiltersForSelects}),n.d(t,"getYearsFilter",function(){return getYearsFilter}),n.d(t,"getCountryById",function(){return getCountryById}),n.d(t,"getGenreBySlug",function(){return getGenreBySlug}),n.d(t,"getGenreById",function(){return getGenreById}),n.d(t,"prepareItemTitles",function(){return prepareItemTitles}),n.d(t,"spreadSelectionsFilms",function(){return spreadSelectionsFilms});var r=n(17),o=n(484),a=n(70),i=n(167);function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e){var t=e.country,n=e.currentUrlParameters,o=e.isLinked;return{value:t.id,text:t.nameRus,type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{page:null,countryId:t.id})):null,isRouterLink:o}},s=function(e){var t=e.countries,n=e.currentUrlParameters,o=e.isLinked,i=t.filter(function(e){return e.popularity>0}).sort(function(e,t){return t.popularity-e.popularity});return[{value:r.EMPTY_FILTER_VALUE,text:"Все страны",type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{countryId:null,page:null})):null,isRouterLink:o},{text:"Популярные",type:r.SELECT_ITEM_TYPES.groupLabel}].concat(_toConsumableArray(i.map(function(e){return c({country:e,currentUrlParameters:n,isLinked:o})})),[{text:"Все страны",type:r.SELECT_ITEM_TYPES.groupLabel}],_toConsumableArray(t.map(function(e){return c({country:e,currentUrlParameters:n,isLinked:o})})))},u=function(e){var t=e.genres,n=e.currentUrlParameters,o=e.isLinked;return[{value:r.EMPTY_FILTER_VALUE,text:"Все жанры",type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{genreSlug:null})):null,isRouterLink:o}].concat(_toConsumableArray(t.map(function(e){return{value:e.id,text:e.nameRusPlural,type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{page:null,genreSlug:e.nameEng.toLowerCase()})):null,isRouterLink:o}})))},l=function(e){var t=e.yearPair,n=e.currentUrlParameters,o=e.isLinked;return{value:t.join("-"),text:t.join(i.EN_DASH),type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{page:null,years:t})):null,isRouterLink:o}},p=function(e){var t=e.years,n=e.currentUrlParameters,o=e.isLinked,i=t.filter(function(e){return 1===e.length}),c=t.filter(function(e){return 2===e.length});return[{value:r.EMPTY_FILTER_VALUE,text:"Все годы",type:r.SELECT_ITEM_TYPES.textItem,href:o?Object(a.composeSeoSelectionLink)(_objectSpread({},n,{years:null})):null,isRouterLink:o}].concat(_toConsumableArray(i.map(function(e){return l({yearPair:e,currentUrlParameters:n,isLinked:o})})),[{text:"Десятилетиями",type:r.SELECT_ITEM_TYPES.groupLabel}],_toConsumableArray(c.map(function(e){return l({yearPair:e,currentUrlParameters:n,isLinked:o})})))};function getCurrentFiltersForSelects(e){var t;return{genreId:e.genre&&e.genre.id||r.EMPTY_FILTER_VALUE,countryId:e.country&&e.country.id||r.EMPTY_FILTER_VALUE,years:(null===(t=e.years)||void 0===t?void 0:t.length)?e.years.join("-"):r.EMPTY_FILTER_VALUE}}function getYearsFilter(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,a=Object(o.getRangesBetweenPoints)({from:e,to:t,rangeSize:n}),i=Array(r).fill(0).map(function(e,n){return[t-n]});return[].concat(_toConsumableArray(i),_toConsumableArray(a))}function getCountryById(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})||null}function getGenreBySlug(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t)return null;var n=t.toLowerCase();return e.find(function(e){return e.nameEng.toLowerCase()===n})||null}function getGenreById(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}function prepareItemTitles(e){var t=e.russianTitle,n=e.originalTitle,r=e.year,o=e.serialYears,a=(o&&o.start?[o.start,o.end||""].join(i.EN_DASH):"")||r;return t?{title:t,subtitle:[n,a].filter(Boolean).join(", ")}:{title:n,subtitle:a&&String(a)}}function spreadSelectionsFilms(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e.byId[t.coreData.id]=t.coreData,e.ottData[t.coreData.id]=t.ottData||{},e.userData[t.coreData.id]=t.userData||{},e.contextData[t.coreData.id]=t.contextData||{},e.afishaData[t.coreData.id]=t.afishaData||{},e},{byId:{},ottData:{},userData:{},contextData:{},afishaData:{}})}},function(e,t,n){var r=n(17).FILM_FOLDER_OPERATIONS,o=function(e){var t=e.filmId,n=e.folderId,r=e.operation;return{type:"entities/films/SET_FOLDER_EFFECT",payload:{filmId:t,folderId:n,operation:void 0===r?"put":r}}};e.exports={rateFilmEffect:function(e){return{type:"entities/films/RATE_EFFECT",payload:{filmId:e.filmId,rating:e.rating,rollbackRating:e.rollbackRating}}},setFilmFolderEffect:o,addFilmFolderEffect:function(e){var t=e.filmId,n=e.folderId;return o({filmId:t,folderId:n,operation:r.add})},removeFilmFolderEffect:function(e){var t=e.filmId,n=e.folderId;return o({filmId:t,folderId:n,operation:r.remove})},getFilmFoldersEffect:function(e){return{type:"entities/films/GET_FOLDERS_EFFECT",payload:{filmId:e}}},showTrailerEffect:function(e){return{type:"entities/films/SHOW_TRAILER_EFFECT",payload:{filmId:e}}},RATE_FILM_EFFECT:"entities/films/RATE_EFFECT",SET_FILM_FOLDER_EFFECT:"entities/films/SET_FOLDER_EFFECT",GET_FILM_FOLDERS_EFFECT:"entities/films/GET_FOLDERS_EFFECT",SHOW_TRAILER_EFFECT:"entities/films/SHOW_TRAILER_EFFECT"}},function(e,t){e.exports={getPerson:function(e){return{type:"PERSON/GET",payload:{id:e}}},updatePerson:function(e,t){return{type:"PERSON/UPDATE",payload:{id:e,data:t}}},createPerson:function(e,t){return{type:"PERSON/CREATE",payload:{id:e,data:t}}},GET_PERSON:"PERSON/GET",UPDATE_PERSON:"PERSON/UPDATE",CREATE_PERSON:"PERSON/CREATE"}},,,,,,function(e,t,n){"use strict";var r=regeneratorRuntime.mark(linkYandexAccount),o=regeneratorRuntime.mark(linkYandexAccountWatcher),a=n(1),i=a.put,c=a.select,s=a.takeEvery,u=a.cancel,l=n(502),p=n(222).getUserAuth,f=n(35),d=f.LINK_YANDEX_ACCOUNT_EFFECT,m=f.openAuthPopupEffect;function linkYandexAccount(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.retPath,n=l(["link-yandex","retPath"],t,!1),r.next=4,c(p);case 4:if(o=r.sent,o.isAuthorized){r.next=12;break}return r.next=9,i(m({retPath:n}));case 9:return r.next=11,u();case 11:return r.abrupt("return");case 12:case"end":return r.stop()}},r)}function linkYandexAccountWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(d,linkYandexAccount);case 2:case"end":return e.stop()}},o)}e.exports={linkYandexAccount:linkYandexAccount,linkYandexAccountWatcher:linkYandexAccountWatcher}},function(e,t,n){"use strict";var r=n(44);r.sendErrorToMetrika=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,c=n(104).default.getStore();if(!t||/\/client(\.min)?\.js$/.test(t)){var s=i||{message:"No message"},u=c.getState().common.buildNumber,l=location.pathname,p=t;o&&(p+=":".concat(o),a&&(p+=":".concat(a))),r.params(["dev","by_version",u,l,e||s.message,s.stack||p]),r.params(["dev","by_error",e||s.message,l,u,s.stack||p])}},e.exports=r},function(e,t,n){var r=n(15),o=n(109).RUM_PATH;e.exports=function(){return r(window,o)}},function(e,t,n){var r=regeneratorRuntime.mark(saveToSessionStorage),o=regeneratorRuntime.mark(saveToDaySessionStorage),a=regeneratorRuntime.mark(saveToStorage);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=n(532),c=n(1).select,s=n(114),u=s.DRAGON_SESSION_STORAGE_KEY,l=s.DRAGON_DAY_SESSION_STORAGE_KEY,p=s.DRAGON_STORAGE_KEY,f=n(160),d=f.selectSessionExpired,m=f.selectDaySessionExpired,y=function(e){var t=new i;try{var n=t.getItem(e);return n&&JSON.parse(n)||{}}catch(e){return{}}},_=function(e,t,n){var r=new i,o=y(e),a=r.getTimeLeft(e);try{r.setItem(e,JSON.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{},t)),a&&a>0?a:n)}catch(e){}};function saveToSessionStorage(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(d);case 2:return t=n.sent,n.abrupt("return",_(u,e,t));case 4:case"end":return n.stop()}},r)}function saveToDaySessionStorage(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(m);case 2:return t=n.sent,n.abrupt("return",_(l,e,t));case 4:case"end":return n.stop()}},o)}function saveToStorage(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_(p,e));case 1:case"end":return t.stop()}},a)}e.exports={getSessionStorage:function(){return y(u)},saveToSessionStorage:saveToSessionStorage,getDaySessionStorage:function(){return y(l)},saveToDaySessionStorage:saveToDaySessionStorage,getStorage:function(){return y(p)},saveToStorage:saveToStorage}},function(e,t,n){function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(36),o=n(37),a=o.WHITE_EMAIL_STATUS_COOKIE_NAME,i=o.DEFAULT_EMAIL_STATUS_VALUE,c=o.WHITE_EMAIL_STATUS_COOKIE_DELIMITER;e.exports={getCookieWhiteEmailStatus:function(){var e=r.get(a);if(!e)return i;var t=_slicedToArray(e.split(c).map(Number),3);return{isHiddenForHit:!0,actionCount:t[1],expires:t[2]}}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(813),o=n(449),a=n(448),i=n(814),c=n(164);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},a,{},o,{},i,{},c)},function(e,t,n){"use strict";var r=n(14).default,o=r("watch-online-person-slider/LOAD_PERSON_FILMOGRAPHY_EFFECT"),a=r("watch-online-person-slider/FILM_POSTER_CARD_CLICK"),i=r("watch-online-person-slider/ON_SHOW_CAROUSEL_EFFECT");e.exports={LOAD_PERSON_FILMOGRAPHY_EFFECT:"watch-online-person-slider/LOAD_PERSON_FILMOGRAPHY_EFFECT",FILM_POSTER_CARD_CLICK_EFFECT:"watch-online-person-slider/FILM_POSTER_CARD_CLICK",ON_SHOW_CAROUSEL_EFFECT:"watch-online-person-slider/ON_SHOW_CAROUSEL_EFFECT",filmPosterCardClick:a,loadPersonFilmography:o,onShowCarousel:i}},,,,,,function(e,t,n){"use strict";e.exports={setUgcProperty:function(e,t){return{type:"ugc/SET_PROPERTY",payload:{key:e,value:t}}},updateUgcProperties:function(e){return{type:"ugc/UPDATE_PROPERTIES",payload:e}},SET_PROPERTY:"ugc/SET_PROPERTY",UPDATE_PROPERTIES:"ugc/UPDATE_PROPERTIES"}},function(e,t,n){"use strict";n.r(t);var r;!function(e){e.featureToggle="featureToggle"}(r||(r={}));var o,a=n(83),i=n.n(a),c=n(105),s=n(14);!function(e){e.update="session/UPDATE"}(o||(o={}));var u=Object(s.default)(o.update);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l=function(){return _defineProperty({},r.featureToggle,{})},p=i()(l(),_defineProperty({},o.update,function(e,t){var n=t.payload;return Object(c.update)(e,{$merge:n})})),f=function(e){return e.session},d=function(e){return f(e).featureToggle},m=function(e,t){var n=t.featureId;return Boolean(d(e)[n])};n.d(t,"getSessionModule",function(){return y}),n.d(t,"getSessionInitialState",function(){return l}),n.d(t,"sessionReducer",function(){return p}),n.d(t,"ACTIONS_TYPES",function(){return o}),n.d(t,"updateSession",function(){return u}),n.d(t,"selectSessionState",function(){return f}),n.d(t,"selectFeatureToggle",function(){return d}),n.d(t,"selectIsFeatureEnabled",function(){return m});var y=function(){return{id:"session",reducerMap:(e={},t="session",n=p,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e)};var e,t,n}},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.effect="effect"}(r||(r={}))},,function(e,t,n){var r=n(648);e.exports=function(e){r&&r.add(e)}},function(e,t,n){"use strict";var r=n(211);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o;n.d(t,"a",function(){return o}),n.d(t,"b",function(){return i}),function(e){e.sendParamsEffect="analytics/sendParamsEffect",e.handleAnalyticsEffect="analytics/handleAnalyticsEffect"}(o||(o={}));var a,i=(a=o.handleAnalyticsEffect,function(e,t){return{type:a,payload:e,meta:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{actionType:r.a.effect})}})},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(101);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}!function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}}({},window.location,{state:""});var o=Object(r.a)()},function(e,t,n){e.exports={icon:"sTRsldeFbTSJeGqSAMYDY",iconHover:"_2THMsWYpxKO-8oW4L_gmbH sTRsldeFbTSJeGqSAMYDY",root:"_1FIeER0qIr9pwNbRmQJl9j"}},function(e,t,n){e.exports={root:"_2k4Wh6C4VbCSwM4zwFJOWa",icon:"_3RGIG3RTtR4ePysdriByHk",iconActive:"_3XvkefrSFMv2qt0DjS5Vt- _3RGIG3RTtR4ePysdriByHk"}},function(e,t,n){e.exports={root:"_229CoWrF_RtQs5g23j5TqY",image:"_22QIjUEBZISfcK17gQFjHF",link:"aIPx5exRrzW4lVLifFcJB"}},function(e,t,n){e.exports={title:"_2hIOfSszxbPjJu3-UyBWLU",titleDark:"_39ycg6XK1KSgJCcxJlC7Lk _2hIOfSszxbPjJu3-UyBWLU",titleText:"_1kSUtEoEl9Yw_pOQrQCgCp"}},function(e,t,n){var r=n(6).createSelector,o=n(62).selectAuthState,a=n(712).createRequestStatusSelector,i=n(713).RequestStatuses,c=r(o,function(e){return e.mdaSyncStatus}),s=r(c,a(i.error));e.exports={selectMdaSdkSso:function(e){return e.common.mdaSdkSso},selectMdaSdkRoot:function(e){return e.common.mdaSdkRoot},selectYandexPassportUrlPath:function(e){return e.common.yandexPassportUrlPath},selectYandexPassportDeviceUrl:function(e){return e.common.yandexPassportDeviceUrl},selectIsMdaHeaderHintShown:function(e){return e.mda.isHeaderHintShown},selectMdaUserMenuHintMode:function(e){return e.mda.userMenuHintMode},selectDomikLoginCaptcha:function(e){return e.mda.domikLoginCaptcha},selectDomikMode:function(e){return e.mda.domikMode},selectDomikParams:function(e){return e.mda.domikParams},selectIsWebView:function(e){return e.page.isWebview},selectMdaSessionStatus:function(e){return e.auth.mdaSession.status},selectMdaSyncStatus:c,selectIsMdaError:s}},,function(e,t,n){e.exports=n(19)},function(e,t,n){"use strict";e.exports={HEADER_V2_POPUP:"static-pages.header.desktop",SERIAL_TYPES_TITLES:{MINI:"мини-сериал",SERIAL:"сериал",TV_NOTOP:"тв",TV:"тв",V_NOTOP:"видео",V:"видео"},THEMES:{default:"default",light:"light",topline:"topline",toplineLight:"topline-light"}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(435),o=n(500),a=n(731);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{},o,{},r)},function(e,t,n){"use strict";var r=n(136),o=n(6),a=n(74),i=n(26),c=Object(o.createSelector)(i.selectIsHomePage,a.selectIsMobile,function(e,t){return Boolean(e&&!t)}),s=Object(o.createSelector)(i.selectIsHomePage,function(e){return Boolean(e)});n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"c",function(){return s});var u=function(){return[{id:"header-v4"},Object(r.getHeaderModule)()]}},function(e,t,n){var r=function(e){return e.models.basicFilms},o=function(e,t){return r(e)[t]},a=(0,n(6).createSelector)(o,function(e){return e&&e.onlineViewOption});e.exports={getBasicFilmModels:r,getBasicFilmModel:o,selectBasicFilmModelOnlineViewOption:a}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(6).createSelector,o=n(172),a=o.selectEntityUserData,i=o.selectEntityOttData,c=o.selectEntityAfishaData,s=o.selectEntityIdByType,u=n(15),l=n(92).ENTITIES_TYPES,p=function(e,t){return s(e,{type:l.film,id:t})},f=function(e,t){return u(i(e,{type:l.film}),"[".concat(t,"]"),{})},d=r(f,function(e){return e&&e.onlineViewOption});e.exports={selectFilmFolders:function(e,t){return u(a(e,{type:l.film}),"[".concat(t,"].folderIds"),[])},selectFilm:p,selectFilms:function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).reduce(function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,_defineProperty({},n,p(e,n)))},{})},selectFilmUserData:function(e,t){return u(a(e,{type:l.film}),"[".concat(t,"]"),{})},selectFilmOttData:f,selectFilmAfishaData:function(e,t){return u(c(e,{type:l.film}),"[".concat(t,"]"),{})},selectFilmOnlineViewOption:d}},function(e,t,n){"use strict";var r=["Обожаю трейлеры! Папочка холодными вечерами только их и смотрит! Вот, глянь, какой я там классный.","Смотри, смотри, КНОПКА! Вон там, кнопка с надписью СМОТРЕТЬ ТРЕЙЛЕРЫ! Тебе туда!","Я чёт приуныл. Посмотри трейлеры, а я пока себя повеселю… Вот так, да, вот так, хорошо!","Давай хайпанем как с первым и даже лучше!","Трейлерочки, трейлерочки, трейлероченьки мои! *задорно танцует*"];e.exports={DEADPOOL_HISTORY:"deadpool_history",DEADPOOL_DIALOG_CLOSE:"deadpool_dialog_close",DEADPOOL_DIALOG_CURRENT_TEASER_GROUP:"deadpool_dialog_current_teaser_group",DEADPOOL_DIALOG_PREVIOUS_TEASER_GROUP:"deadpool_dialog_previous_teaser_group",BUTTON_BUY_TICKET_LOGIC:{ONCE:3,REPEAT:8},BUTTON_BUY_TICKET_LINK:"/film/dedpul-2-2018-961715/afisha/",BUTTON_BUY_TICKET_TEXT:"Купить билеты",BUTTON_BUY_TICKET_ANSWERS:{ONCE:["Нажми на кнопку, получишь результат - билеты получишь то есть!","Смотри, смотри, КНОПКА! Вон там, кнопка с надписью КУПИТЬ БИЛЕТЫ! Тебе туда!","*делает глазки* А давай встретимся в зале? Ты купишь билет (может даже не один) и сходишь посмотреть на меня в кино!","Я чёт приуныл. Возьми билеты на «Дэдпул 2», а я пока себя повеселю… Вот так, да, вот так, хорошо!","А знаешь что? Я гораздо симпатичнее на большом экране! Проверь лично — купи билеты!"],REPEAT:["Пффф… Я чёт устал, давай в кино просто увидимся","Надоели вопросы, иди уже в кино — купи билеты на КиноПоиске!","И на этом месте я закругляюсь и настоятельно советую прикупить билеты на кино про меня! Видишь кнопку? ЖМИ ЕЁ!"]},BUTTON_TRAILER_LINK:"/film/dedpul-2-2018-961715/video/",BUTTON_TRAILER_TEXT:"Смотреть трейлеры",BUTTON_TRAILER_ANSWERS:{ONCE:r,REPEAT:r},ANSWERS_DONT_UNDERSTAND:["Слушай, я чет не секу в этой теме. Давай ее сменим?","Слушай, я чет не секу в этой теме. Давай ее сменим? Что ты думаешь о чимичанги?","Может, поговорим о чем-то другом?","*зевает* Мне скучно об этом болтать. Давай о жизни?"],EMOJIES_LOVE:["😍","😻","😘","💓","💕","💖","💗","💘","💙","💚","💛","💜","💝","💞","💟","💌","💋"],ANSWERS_LOVE:["Я тоже тебя люблю, юзернейм!","Сердечки! Больше сердечек богу сердечек!","Нет времени на любовь! Ты покупаешь билеты на второй фильм про меня?","Вообще-то я женатый человек, но готов пофлиртовать!","Спорим, если сниму маску, ты влюбишься в меня навсегда?","Всем катанки и пульки в этом чате!","*пишет объявление* Обменяю сердечко на баклажан.","У-у-у! Отлично! Мне пригодится новое сердце, ПОСЛЕ ТОГО КАК ТЫ РАЗОБЬЁШЬ МОЁ СТАРОЕ!","Что ещё есть? Присылай. Больше. БОЛЬШЕ!","Зачем ты присылаешь мне эти чёрно-белые квадратики с вопросами внутри? Что это значит?"],EMOJIES_FWORD:["💩","🖕"],ANSWERS_FWORD:["И чему я тут должен завидовать? Или удивляться? Какие эмоции я должен испытывать?!","Ну, по крайней мере это уже интереснее «Эмоджи фильма».","А эмодзи поджелудочной у тебя случайно нет?","Салатик будешь делать?","Судя по размеру, садовод из тебя так себе.","Знаешь, я предпочитаю клубничку.","Зачем ты присылаешь мне эти чёрно-белые квадратики с вопросами внутри? Что это значит?","Я буду жаловаться! Я директор музея!","У меня есть друг, клоун. Я ему про тебя всё расскажу — и тогда тебя тоже унесёт!","Вот ты лошок — пришёл ругаться с программой!"],ANSWERS_OTHERS:["Ну, по крайней мере это уже интереснее «Эмоджи фильма».","А эмодзи поджелудочной у тебя случайно нет?","Зачем ты присылаешь мне эти чёрно-белые квадратики с вопросами внутри? Что это значит?","Если бы мне за каждый эмодзи давали доллар, я был бы миллионером. Но стойте, я же программа!..","Общаемся пиктограммами? Тогда аист-аист-баклажан-маленькая птичка-голова крокодила-микроволновка-джип.","Дважды два — четыре. Трижды три — девять. Трава зелёная, небо голубое, а ты мне эмодзи шлёшь, какая банальность!","Поэт — Пушкин, фрукт — яблоко, а ты не любишь нестандартные вопросы, предпочитаешь эмодзи.","????? А слова уже кончились?",":love:","Хватит говорить загадками!"],ANSWERS_GREETINGS:["Здравствуй, мой драгоценный юзернейм!","Давай пиши мне уже, мы и так кучу времени на пустяки потратили!","Тебе знакомо слово «эксклюзивный»? Вот это про меня!","Здаров!","Хей-хо! Чё как?","Папочка ждал тебя!","Папочка скучал по тебе!"]}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(822),o=n(825),a=n(452);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},function(e,t,n){var r=n(14).default,o=r("rum/ADV_RENDER_STARTED"),a=r("rum/ADV_RENDERED_SUCCESS"),i=r("rum/ADV_RENDERED_FAILURE"),c=r("rum/ADV_DESTROYED");e.exports={RUM_ADV_RENDER_STARTED_EFFECT:"rum/ADV_RENDER_STARTED",RUM_ADV_RENDERED_SUCCESS:"rum/ADV_RENDERED_SUCCESS",RUM_ADV_RENDERED_FAILURE:"rum/ADV_RENDERED_FAILURE",RUM_ADV_DESTROYED:"rum/ADV_DESTROYED",rumAdvRenderStartedEffect:o,rumAdvRenderedSuccess:a,rumAdvRenderedFailure:i,rumAdvDestroyed:c}},,,,,,,,,,,,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(160),o=n(752),a=n(124);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({watchers:o},r,{},a)},function(e,t,n){"use strict";n.r(t),n.d(t,"KP_MAIN_NAMESPACE",function(){return r}),n.d(t,"YA_NAMESPACE",function(){return o}),n.d(t,"KINOPOISK_MAIN_NAMESPACE",function(){return a}),n.d(t,"WIDGETS_NAMESPACE",function(){return i}),n.d(t,"KP1_NAMESPACE",function(){return c}),n.d(t,"KP1_CONFIG_NAMESPACE",function(){return s});var r="YA.KP",o="Ya",a="".concat(o,".Kinopoisk"),i="".concat(a,".Widgets"),c="KP",s="".concat(c,".config")},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(56),o=n(789),a=n(790),i=n(140);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({watchers:a},r,{},o,{},i)},function(e,t,n){"use strict";e.exports={YANDEX_PLUS_METRIKA_SENT_COOKIE_NAME:"yandex_plus_metrika_cookie",YANDEX_PLUS_METRIKA_SENT_COOKIE_EXPIRATION:1800,HEADER_V2_POPUP_HIDDEN_COOKIE_NAME:"header_v2_popup_hidden",TICKETS_PROMO_POPUP_SHOWN_COOKIE_NAME:"tickets_promo_popup_shown",TICKETS_PROMO_POPUP_GUEST_COOKIE_NAME:"guest_tickets_promo_popup",YANDEX_FORCE_LOGIN_COOKIE_NAME:"yandex_force_login_cookie",YANDEX_FORCE_LOGIN_EXPIRATION:2592e3}},function(e,t){e.exports={RATING_POSITIVE_MIN_COUNT:7,RATING_NEGATIVE_MAX_COUNT:5,EXPECTATION_POSITIVE_MIN_COUNT:70,EXPECTATION_NEGATIVE_MAX_COUNT:50,FILM_SEANCES_MAX_GENRES_COUNT:2,MIN_SUGGEST_VALUE_LENGTH:2,MIN_AFISHA_SUGGEST_VALUE_LENGTH:4,SNIPPETS_PER_PAGE:10,COMMENTS_PER_PAGE:10,WATCH_ONLINE_FILMS_PER_PAGE:15,WATCH_ONLINE_CAROUSEL_CHUNK_SIZE:15,SELECTION_WATCH_ONLINE_FILMS_PER_PAGE:24,FILM_SNIPPET_MAX_COUNTRIES_COUNT:2,FILM_SNIPPET_MAX_GENRES_COUNT:1,AFISHA_FILMS_LIMIT:15}},function(e,t,n){"use strict";var r=n(494),o=n(1051),a=n(53),i=n(159).requestAction,c=n(16),s=n(1052),u=n(396).parseScheduleFiltersForQuery,l=n(48);e.exports={loadSchedule:function(e){var t=e.filmId,n=e.cityId,r=e.page,o=e.date,a=e.query,c=l.url("ab-afisha-film-seances-list",{id:t,cityId:n,date:o}),s=a.search,p=a.daytime,f=a.tags,d=u({search:s,daytime:p,tags:f}),m=Object.assign(a,{page:r,search:d.search,tags:d.tags,daytime:d.daytime});return i("film/LOAD_FILM_SCHEDULE",c,m)},updateScheduleFilters:function(e){return{type:"film/FILTER_FILM_SCHEDULE",payload:{search:e.search,daytime:e.daytime,tags:e.tags}}},filterSchedule:function(e){var t=e.search,n=e.daytime,a=e.tags,c=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit;return function(e,p){var f=p().page,d="film/film-seances-page"===f.name?"ab-afisha-film-seances-list":"ab-afisha-film-seances-map";if(f.isScheduleLoading)return null;var m=l.url(d,{id:f.filmId,cityId:f.cityId,date:f.date}),y=u({search:t,daytime:n,tags:a}),_={page:1,search:y.search,tags:y.tags,daytime:y.daytime,loadingType:"filter",limit:c},h=s(m,!0),g=h.pathname,b=h.query;return r(b)||(_=o({},_,b)),i("film/LOAD_FILM_SCHEDULE",g,_)(e,p)}},scheduleChangeCity:function(e){var t=e.regionId;return function(e,n){var r=n(),o=r.page,i=o.filmId,c=o.date,u=void 0===c?a().format("YYYY-MM-DD"):c,l="film/film-seances-page"===r.page.name?"ab-afisha-film-seances-list":"ab-afisha-film-seances-map",p=s("/ids-exchange/region-to-city/");p.query={routeName:l,regionId:t,filmId:i,date:u},location.assign(p.toString())}},loadFilmScheduleInCinema:function(e,t){return function(n,r){var o=r().page,a=o.filmId,i=o.date,s=o.schedule,u=s.find(function(t){var n=t.cinemaId,r=t.formats;return n===e&&r});if(!e||u)return n({meta:{status:"done"},type:"film/LOAD_FILM_SCHEDULE_IN_CINEMA",payload:{cinemaId:e,schedule:s}}),null;var p=l.url("ab-afisha-film-seances-in-cinema",{id:a,cinemaId:e,regionId:t});return n({meta:{status:"pending"},type:"film/LOAD_FILM_SCHEDULE_IN_CINEMA"}),c.get(p,{query:{date:i}}).then(function(t){var r=t.formats,o=s.map(function(t){var n=t.cinemaId;return n===e?{cinemaId:e,formats:r}:{cinemaId:n}});n({meta:{status:"done"},type:"film/LOAD_FILM_SCHEDULE_IN_CINEMA",payload:{schedule:o,cinemaId:e}})}).catch(function(){n({meta:{status:"fail"},type:"film/LOAD_FILM_SCHEDULE_IN_CINEMA"})})}},unselectCinemaOnMap:function(){return function(e){e({type:"film/UNSELECT_CINEMA_ON_MAP"})}},changeCalendarDate:function(e){document.location=e},filmModelCreate:function(e,t){return{type:"film/MODEL_CREATE",payload:{id:e,data:t}}},LOAD_FILM_SCHEDULE:"film/LOAD_FILM_SCHEDULE",FILTER_FILM_SCHEDULE:"film/FILTER_FILM_SCHEDULE",LOAD_FILM_SCHEDULE_IN_CINEMA:"film/LOAD_FILM_SCHEDULE_IN_CINEMA",UNSELECT_CINEMA_ON_MAP:"film/UNSELECT_CINEMA_ON_MAP",FILM_MODEL_CREATE:"film/MODEL_CREATE"}},function(e,t,n){"use strict";var r=n(53),o=n(16),a=n(159).requestAction,i=n(48),c=n(122),s=function(e,t){return{state:{models:{cinemas:(n={},r=e.id,o=Object.assign({},e,t),r in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,n)}}};var n,r,o};e.exports={toggleFavorite:function(e){var t="cinema/TOGGLE_FAVORITE",n="/cinemas/".concat(e,"/favorite/");return function(r,a){var i=a().models.cinemas[e];if(i.isFavoritePending)return null;r({type:t,meta:{status:"pending"},payload:s(i,{isFavoritePending:!0})});var c=i.isFavorite;return o[c?"delete":"post"](n).then(function(){r({type:t,payload:s(i,{isFavorite:!c,isFavoritePending:!1}),meta:{status:"done"}})}).catch(function(e){throw r({type:t,error:e,payload:s(i,{isFavoritePending:!1}),meta:{status:"fail"}}),e})}},loadSchedule:function(e){var t=e.kp1CinemaId,n=e.page,r=e.cityId,o=e.date,c=i.url("cinema-seances-list",{id:t,cityId:r,date:o});return a("cinema/LOAD_CINEMA_SCHEDULE",c,{page:n})},toggleMapPopup:function(e){return{type:"cinema/TOGGLE_MAP_POPUP",payload:{isOpen:e}}},changeCalendarDate:function(e){return function(t,n){var o=n(),a=o.page,c=a.cityId,s=a.kp1CinemaId,u=r(e).format("YYYY-MM-DD");document.location=i.url("cinema-seances-list",{cityId:c,id:s,date:u||o.page.date})}},updateUserRating:function(e,t,n){var r="/cinemas/".concat(e,"/rating/");return a("cinema/UPDATE_CINEMA_RATING",r,{rating:n,cinemaId:t},"put")},deleteUserRating:function(e,t){var n="/cinemas/".concat(e,"/rating/");return a("cinema/DELETE_CINEMA_RATING",n,{cinemaId:t},"delete")},addComment:function(e,t){if(!t||!t.text||!t.text.trim())return c.showNotification({text:"Пустой отзыв не может быть отправлен"}),{};var n=i.url("cinema-comment",{id:e});return a("cinema/ADD_COMMENT",n,null,"post",{body:{comment:t},onSuccess:function(){c.showNotification({text:"Отзыв добавлен и после модерации будет опубликован на сайте"})}})},updateComment:function(e){return{type:"cinema/UPDATE_COMMENT",payload:{comment:e}}},TOGGLE_FAVORITE:"cinema/TOGGLE_FAVORITE",LOAD_CINEMA_SCHEDULE:"cinema/LOAD_CINEMA_SCHEDULE",TOGGLE_MAP_POPUP:"cinema/TOGGLE_MAP_POPUP",UPDATE_CINEMA_RATING:"cinema/UPDATE_CINEMA_RATING",DELETE_CINEMA_RATING:"cinema/DELETE_CINEMA_RATING",ADD_COMMENT:"cinema/ADD_COMMENT",UPDATE_COMMENT:"cinema/UPDATE_COMMENT"}},,function(e,t){e.exports={FORM:{expanded:"expanded",collapsed:"collapsed"},SIZE:{small:"small",medium:"medium"},COLOR:{default:"default",inverted:"inverted"}}},,,,function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(441),o=n(776),a=n(84),i=n(779);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({watchers:o},r,{},a,{},i)},,,,,,,,,function(e,t){e.exports={USER_TOGGLE_FILM_TO_WATCH:"user/TOGGLE_FILM_TO_WATCH",toggleFilmToWatch:function(e){return{type:"user/TOGGLE_FILM_TO_WATCH",payload:e}},USER_KP_BIND_YANDEX:"user/KP_BIND_YANDEX",setUserKpBindYandex:function(e){return{type:"user/KP_BIND_YANDEX",payload:e}},LOGOUT:"user/LOGOUT",logout:function(e){return{type:"user/LOGOUT",payload:{retPath:e}}}}},function(e,t,n){"use strict";var r=function(e){return e.commentForm};e.exports={getParentId:function(e){return r(e).parentId},getStatus:function(e){return r(e).status},getValue:function(e){return r(e).value},getDraft:function(e,t){return function(e){return r(e).drafts}(e)[t]}}},,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(246).AFISHA_FILMS_LIMIT;e.exports={loadTodayFilmsInCinemaEffect:function(){return{type:"afisha/LOAD_TODAY_FILMS_IN_CINEMA_EFFECT",payload:{limit:r}}},updateTodayFilmsInCinema:function(e){return{type:"afisha/UPDATE_TODAY_FILMS_IN_CINEMA",payload:e}},LOAD_TODAY_FILMS_IN_CINEMA_EFFECT:"afisha/LOAD_TODAY_FILMS_IN_CINEMA_EFFECT",UPDATE_TODAY_FILMS_IN_CINEMA:"afisha/UPDATE_TODAY_FILMS_IN_CINEMA"}},function(e,t){e.exports={MODES:{LOGIN:"login",BIND:"bind",MESSAGE_DONE:"message-done",MESSAGE_ERROR:"message-error",MESSAGE_ACCOUNT_NOT_FOUND:"message-account-not-found",MESSAGE_ACCOUNT_HACKED:"message-account-hacked",RECOVERY:"recovery"},MESSAGE_TYPES:{ALERT:"alert",SUCCESS:"success"}}},function(e,t,n){var r=n(17),o=r.SEO_SELECTIONS_BASE_URL,a=r.EDITORIAL_SELECTIONS_BASE_URL,i=r.BOX_OFFICE_RATING_SELECTIONS_BASE_URL,c=n(153),s={seoPageWithYearRange:"".concat(o,"/:genre([a-zA-Z-]+)?/:yearRange(\\d{4}-\\d{4})?/:country(country-\\d+)?/"),seoPageWithYear:"".concat(o,"/:genre([a-zA-Z-]+)?/:year(\\d{4})?/:country(country-\\d+)?/"),seoFilms:"".concat(o,"/api/films/"),cover:"".concat(o,"/api/cover/"),editorialPage:"".concat(a,"/:slug([a-zA-Z0-9_-]+)/"),editorialFilms:"".concat(a,"/api/films/:slug([a-zA-Z0-9_-]+)/"),boxOfficeRatingPage:"".concat(i,"/:slug([a-zA-Z0-9_-]+)/"),boxOfficeRatingFilms:"".concat(i,"/api/films/:slug([a-zA-Z0-9_-]+)/")};e.exports=c(s)},function(e,t,n){var r=n(14).default,o=r("main-page/TODAY_IN_CINEMA_FILM_CLICK_EFFECT"),a=r("main-page/TODAY_IN_CINEMA_FILM_SHOW_EFFECT");e.exports={MAIN_PAGE_TODAY_IN_CINEMA_FILM_CLICK_EFFECT:"main-page/TODAY_IN_CINEMA_FILM_CLICK_EFFECT",MAIN_PAGE_TODAY_IN_CINEMA_FILM_SHOW_EFFECT:"main-page/TODAY_IN_CINEMA_FILM_SHOW_EFFECT",mainPageTodayInCinemaFilmClickEffect:o,mainPageTodayInCinemaFilmShowEffect:a}},function(e,t,n){function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=n(714),o=n(356).getLogger("SocialBroker"),a=function(){function SocialBroker(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SocialBroker),this.params=e}var e,t,n;return e=SocialBroker,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return SocialBroker.params?(o.warn("SocialBroker: already init."),SocialBroker):(SocialBroker.params=Object.assign(r,e),SocialBroker._instancesByWindow=new Map,window.addEventListener("message",SocialBroker._dispatchMessage),SocialBroker)}},{key:"_dispatchMessage",value:function(e){if(e&&e.data&&"social-broker-response"===e.data.type){var t=SocialBroker._instancesByWindow.get(e.source);t&&t._postMessage(e)}}}],(t=[{key:"_windowPrepareAndOpen",value:function(e){if(!SocialBroker.params)throw new Error("SocialBroker: usage without init.");return this._window&&this._resultResolve({status:"reopen"}),this._windowOpen(e())}},{key:"_socialPostMessage",value:function(e){var t=e.data.data.split("&").reduce(function(e,t){var n=t.split("=");return e[decodeURIComponent(n[0])]=decodeURIComponent(n[1]),e},{});"ok"===t.status?this._resultResolve(t):this._resultReject(t)}},{key:"_passportPostMessage",value:function(){this._resultResolve({status:"ok"})}},{key:"_windowOpen",value:function(e){var t=this,n=e.postMessage,r=void 0===n?function(){}:n,o=e.urlPath,a=e.queryParams,i=void 0===a?{}:a,c=e.featuresParams,s=void 0===c?{}:c,u=e.windowName,l=void 0===u?"_blank":u,p=Object.keys(i).filter(function(e){return i[e]}).map(function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(i[e]))}).join("&"),f=Object.keys(s).map(function(e){return"".concat(e,"=").concat(s[e])}).join(",");this._window=window.open("".concat(o,"?").concat(p),l,f),SocialBroker._instancesByWindow.set(this._window,this),this._postMessage=r,this._supervisorInterval=setInterval(this._supervisor.bind(this),500);var d=new Promise(function(e,n){t._resultResolve=e,t._resultReject=n});return d.finally(function(){return t._windowClose()}),d}},{key:"_supervisor",value:function(){this._window&&this._window.closed&&this._resultResolve({status:"close"})}},{key:"start",value:function(e,t){var n=this;return this._windowPrepareAndOpen(function(){var r=SocialBroker.params.networks[e];if(!r)throw new Error('SocialBroker: network "'.concat(e,'" params not defined'));return{postMessage:n._socialPostMessage.bind(n),urlPath:SocialBroker.params.socialBrokerUrlPath,queryParams:{application:r.app,retpath:"".concat(window.location.origin).concat(SocialBroker.params.receiverPath),consumer:SocialBroker.params.consumer,place:"fragment",display:n.params.display,yandex_token:n.params.yandexToken,scope:(r.scopes||{})[t]},featuresParams:{scrollbars:"yes",resizable:1,menubar:0,toolbar:0,status:0,location:0,directories:0,left:515,top:76,width:r.size[0],height:r.size[1]},windowName:"social_kinopoisk"}})}},{key:"passport",value:function(){var e=this;return this._windowPrepareAndOpen(function(){return{urlPath:"".concat(SocialBroker.params.yandexPassportUrlPath,"auth"),postMessage:e._passportPostMessage.bind(e),queryParams:{origin:SocialBroker.params.consumer,retpath:"".concat(window.location.origin).concat(SocialBroker.params.receiverPath)},windowName:"_blank"}})}},{key:"destroy",value:function(){this._window&&this._resultResolve({status:"close"})}},{key:"_windowClose",value:function(){this._window.close(),clearInterval(this._supervisorInterval),SocialBroker._instancesByWindow.delete(this._window),delete this._window}}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),SocialBroker}();e.exports=a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=n(174),o=function(){function Sezam(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sezam),this.params=e}var e,t,n;return e=Sezam,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Sezam._initDone?(console.warn("Sezam: already init."),Sezam):(Sezam._initDone=!0,Sezam.request=new r,Sezam.params=e,Sezam._initResolve(),Sezam)}},{key:"accounts",value:function(){return Sezam._initPromise.then(function(){return fetch("".concat(Sezam.params.sezamApiUrl,"/accounts"),{credentials:"include"}).then(function(e){return e.json()})})}},{key:"defaultAccount",value:function(){return Sezam.accounts().then(function(e){return e.accounts&&e.accounts.find(function(t){return t.uid===e.default_uid})})}}],(t=null)&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Sezam}();o._initPromise=new Promise(function(e){return o._initResolve=e}),e.exports=o},function(e,t){e.exports={PLATFORMS:{desktop:"desktop",touch:"touch"}}},function(e,t,n){"use strict";e.exports={DETECTED_STATUS:{UNKNOWN:"unknown",BLOCKED:"blocked",UNBLOCKED:"unblocked"}}},function(e,t,n){"use strict";e.exports={antiAdblockUpdate:function(e){return{type:"anti-adblock/ANTI_ADB_UPDATE",payload:e}},ANTI_ADB_UPDATE:"anti-adblock/ANTI_ADB_UPDATE"}},function(e,t){e.exports={template:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.replace(/({{\w+}})/g,function(e){return t&&t[e.replace(/{|}/g,"")]||""})}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(750),o=n(751),a=n(438);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},function(e,t,n){var r=n(123).addModels,o=n(398).MODEL_TYPE;e.exports={addPostsModels:function(e){return r(o,e)}}},function(e,t,n){var r=regeneratorRuntime.mark(fetchPostsRubrics),o=regeneratorRuntime.mark(fetchPostsRubricsSagaWatcher),a=n(49)("media:common"),i=n(1),c=i.takeEvery,s=i.call,u=i.put,l=i.select,p=n(47),f=p.addList,d=p.deleteList,m=n(47).selectIsUiListAvailable,y=n(399).fetchPostRubricsCollection,_=n(188).MEDIA_RUBRIC_PAGE_TITLE,h=n(162).MEDIA_FETCH_POSTS_RUBRICS_EFFECT;function fetchPostsRubrics(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.limit,n=e.listId,r.next=3,l(m,{listId:n});case 3:if(!r.sent){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,u(f(n,{meta:{title:_}}));case 7:return r.prev=7,r.next=10,s(y,{limit:t,listId:n});case 10:r.next=17;break;case 12:return r.prev=12,r.t0=r.catch(7),a("fetchPostsRubrics:fetchPostRubricsCollection failed"),r.next=17,u(d(n));case 17:case"end":return r.stop()}},r,null,[[7,12]])}function fetchPostsRubricsSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(h,regeneratorRuntime.mark(function _callee(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.limit,r=t.listId,o.next=4,s(fetchPostsRubrics,{limit:n,listId:r});case 4:case"end":return o.stop()}},_callee)}));case 2:case"end":return e.stop()}},o)}e.exports={fetchPostsRubrics:fetchPostsRubrics,fetchPostsRubricsSagaWatcher:fetchPostsRubricsSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(fetchEmailStatus);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=n(1),a=o.put,i=o.putResolve,c=o.select,s=o.all,u=n(25).sendRequestEffect,l=n(56),p=l.whiteEmailUpdate,f=l.whiteEmailLoadingFailure,d=n(37),m=d.MODES,y=d.END_POINTS.NODEJS.WHITE_EMAIL_STATUS,_=d.REQUEST_STATUSES,h=n(140),g=h.selectIsWhitelisted,b=h.selectEmail,E=h.selectRequestStatus;function fetchEmailStatus(){var e,t,n,o,l,d;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c(E);case 2:return e=r.sent,r.next=5,s([c(g),c(b)]);case 5:if(t=r.sent,n=_slicedToArray(t,2),o=n[0],l=n[1],e!==_.LOADED){r.next=11;break}return r.abrupt("return",{isWhitelisted:o,email:l});case 11:return r.next=13,a(p({requestStatus:_.PENDING,mode:m.EMAIL_FORM,error:null}));case 13:return r.prev=13,r.next=16,i(u({url:y,method:"get"}));case 16:d=r.sent,o=d.isWhitelisted,l=d.email,r.next=26;break;case 21:return r.prev=21,r.t0=r.catch(13),r.next=25,a(f({error:r.t0}));case 25:throw r.t0;case 26:return r.next=28,a(p({requestStatus:_.LOADED}));case 28:return r.abrupt("return",{isWhitelisted:o,email:l});case 29:case"end":return r.stop()}},r,null,[[13,21]])}e.exports={fetchEmailStatus:fetchEmailStatus}},function(e,t,n){var r=regeneratorRuntime.mark(sendMetrikaShowSubscriptionPanelSaga),o=regeneratorRuntime.mark(sendMetrikaClickInSubscriptionPanelSaga),a=regeneratorRuntime.mark(sendMetrikaClickOnComingSoonFilmSaga),i=regeneratorRuntime.mark(sendMetrikaClickInModalContentSaga),c=regeneratorRuntime.mark(sendMetrikaReachGoalSuccessfulCancelSubscriptionSaga),s=regeneratorRuntime.mark(metrikaKinopoiskGoSubscriptionWatcher),u=n(1),l=u.takeLatest,p=u.select,f=n(202),d=f.selectSubscriptionState,m=f.selectHasSubscriptionOrderIntent,y=n(57),_=y.CLICK_ON_COMING_SOON_FILM_EFFECT,h=y.SUBSCRIPTION_CLICK_ON_BUTTON_EFFECT,g=y.SUBSCRIPTION_CLICK_ON_LINK_EFFECT,b=y.SUBSCRIPTION_APPEAR_ON_SCREEN_EFFECT,E=n(815),v=E.sendShowSubscriptionPanel,O=E.sendClickInSubscriptionPanel,P=E.sendClickOnComingSoonFilm,S=E.sendClickInModalContent,T=E.reachGoalSuccessfulCancelSubscription;function sendMetrikaShowSubscriptionPanelSaga(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(d);case 2:return e=n.sent,n.next=5,p(m);case 5:t=n.sent,v({subscriptionState:e,isOrderSubscription:t});case 7:case"end":return n.stop()}},r)}function sendMetrikaClickInSubscriptionPanelSaga(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(d);case 2:return e=n.sent,n.next=5,p(m);case 5:t=n.sent,O({subscriptionState:e,isOrderSubscription:t});case 7:case"end":return n.stop()}},o)}function sendMetrikaClickOnComingSoonFilmSaga(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(d);case 2:e=t.sent,P({subscriptionState:e});case 4:case"end":return t.stop()}},a)}function sendMetrikaClickInModalContentSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p(d);case 2:t=n.sent,S({subscriptionState:t,nextModalState:e});case 4:case"end":return n.stop()}},i)}function sendMetrikaReachGoalSuccessfulCancelSubscriptionSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T();case 1:case"end":return e.stop()}},c)}function metrikaKinopoiskGoSubscriptionWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(b,sendMetrikaShowSubscriptionPanelSaga);case 2:return e.next=4,l([h,g],sendMetrikaClickInSubscriptionPanelSaga);case 4:return e.next=6,l(_,sendMetrikaClickOnComingSoonFilmSaga);case 6:case"end":return e.stop()}},s)}e.exports={sendMetrikaShowSubscriptionPanelSaga:sendMetrikaShowSubscriptionPanelSaga,sendMetrikaClickInSubscriptionPanelSaga:sendMetrikaClickInSubscriptionPanelSaga,sendMetrikaClickOnComingSoonFilmSaga:sendMetrikaClickOnComingSoonFilmSaga,sendMetrikaClickInModalContentSaga:sendMetrikaClickInModalContentSaga,sendMetrikaReachGoalSuccessfulCancelSubscriptionSaga:sendMetrikaReachGoalSuccessfulCancelSubscriptionSaga,metrikaKinopoiskGoSubscriptionWatcher:metrikaKinopoiskGoSubscriptionWatcher}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(153),o="/api".concat("/kinopoisk-go/"),a={"api-kinopoisk-go-subscription":"".concat(o,"subscription/"),"api-kinopoisk-go-subscription-cancel":"".concat(o,"subscription/:productId/cancel/"),"api-kinopoisk-go-terms-of-use":"".concat(o,"subscription/:productId/terms-of-use/")};e.exports=r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a))},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(sendPersonFilmographyCarouselMetrika),o=regeneratorRuntime.mark(carouselShowMetrika),a=regeneratorRuntime.mark(carouselPosterSnippetClickMetrika),i=n(1).call,c=n(44),s=n(535).METRIKA,u=s.actions,l=s.carouselParamName;function sendPersonFilmographyCarouselMetrika(e){var t,n,o,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.action,n=void 0===t?"show":t,o=e.value,a=e.isTouch,s=void 0!==a&&a?"touch__".concat(u[n]):u[n],r.next=4,i({context:c,fn:c.params},[s,l,o]);case 4:case"end":return r.stop()}},r)}function carouselShowMetrika(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.isTouch,n.next=3,i(sendPersonFilmographyCarouselMetrika,{action:"show",value:"yes",isTouch:t});case 3:case"end":return n.stop()}},o)}function carouselPosterSnippetClickMetrika(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.position,n=e.isTouch,r.next=3,i(sendPersonFilmographyCarouselMetrika,{action:"click",value:{movie_snippet:t},isTouch:n});case 3:case"end":return r.stop()}},a)}e.exports={carouselShowMetrika:carouselShowMetrika,carouselPosterSnippetClickMetrika:carouselPosterSnippetClickMetrika}},,,,,,,,,,,,,,function(e,t,n){e.exports={column:"_2lIaVuplclqoEPxCO_yWsY",md_0:"_2M8Rnr4M9o-o0wchgT0vWm",md_1:"_36Obfi5IpKMXmRpRA5u-oB",md_2:"_3smp0Iw0lB9op1O_U76pA1",md_3:"_17DcArrXrH2f2ra9PrI3ar",md_4:"_1v2CJHVMG9lldseMavnvbV",md_5:"_2czw6lwPQmZgStEP3GCxJZ",md_6:"_1wBAt0F1cv0y-2N8TdPK-c",md_7:"_3ihS6cXBO7LfukVPPVi4qS",md_8:"_1fkmq7JAf4mm2oMjFTaOHq",md_9:"_3o2cGTmz8U4im639TUsnC8",md_10:"_1rXX-R8r33_JYqc4SZRXdO",md_11:"_8TT1qKPJZz9K4rFHMmZlV",md_12:"_3IkqBksydilS37BnBc6LHf",md_13:"mdtHsYA6fBmtJkv4YOmlk",md_14:"_1UqPs1OAtmELuFuM-1acu3",md_15:"_32BB0PaQwTecYjNf7ObKWC",md_16:"gnjVieqv8vc2kF5a9zpkD",md_17:"_39ZrcZTJLI1JzIUUG5VIN3",md_18:"_20Jhj5GObdySiEjs-I6uTL",md_19:"_3Yfyrncy604tkZa-mHrhC1",md_20:"_3e2wEfQuIYXhd6FbXMQ3ED",md_21:"_2AfTN9MFyEozpbXU5DsNBE",md_22:"_1y9LMolPr-78TZ1q0YmtGP",md_23:"_2ezGkEJGbfQmNLSO5eTEZP",md_24:"_1BkSI1i4PWfcjMjOw6sk6A",lg_0:"bztAZ7tSouZPUILIz2aCe",lg_1:"_2qFS00WDaVz-XW-UAReLp",lg_2:"_36BS4_YyDCFX-pSvSB2MBK",lg_3:"_8nG3DDjN0VCm1_LXUs0mh",lg_4:"I1-4ohbJTLbuytXWfUJEX",lg_5:"A0W0_jYr7eaKbik96NYVf",lg_6:"_1BGM8kqEHd4rivG5Pu51he",lg_7:"qc68yU_7J-208Rl6TuPey",lg_8:"_1qaqf4HAvqR9e_WPBZVg2a",lg_9:"SqOr3Ft2xOjT10T64iWAd",lg_10:"f0D6PJOSiE_EWYv0hDw46",lg_11:"_3ouwHW8u6d0b6OvkHOYGgV",lg_12:"_2xdnInVCIdgeoV9kcJtkLI",lg_13:"_3hYog4QlHFgUSC9uc4c8gc",lg_14:"_3ct6uTR93J0XM9GcP-y9D",lg_15:"_3c6ljpO89x6iCqiqJbgXYg",lg_16:"aXSyumFp5008juHauHIbI",lg_17:"_2s_zSNtV0hX1Ff7tZX2X2A",lg_18:"_1knc98SeO0R2XO83mSVtjz",lg_19:"_3IMRIRkn-ON4MQzmynYN6U",lg_20:"_1DuUBcwIWMD5cYBh4Lphsh",lg_21:"_1Fru41ZHaOLJt6xFmlEEbh",lg_22:"_1gPUGvJBKBfzP5_na-8maM",lg_23:"_2rgExxR34P41nVBODmVg4E",lg_24:"HH824UvW923E-k2lGpvev",lg_25:"_2A7vExWGxXKGOf5HX3bsjv",lg_26:"HTIwr4xlSGiKnDW-v19y9",lg_27:"_3MJcL5S-hw-5q7tU54793l",lg_28:"_10L5W1pr_gMfguMjg4WpBJ",lg_29:"_3TKRCQxlkB9ejwNlP2gwcO",lg_30:"_35Qgo7w-NGIla_yii20s1W"}},function(e,t,n){e.exports={root:"_2EqcoXXWgg4Wv1rJ-_kj-L",item:"_3WTxVFjH9fxxWIgEB9cdsG"}},function(e,t,n){e.exports={root:"_5nSQfZvJWBGCNRNZHO6Ut",icon:"gctVKaXXTCFUmn9zTdnQM"}},function(e,t,n){e.exports={root:"_3TFgx-QT-KeGGdHrukd1SY",img:"_3WHbPAlXPdjSimSdgwkCEB"}},function(e,t,n){e.exports={root:"_2dW2WrMhADVBadg3ZE8u0N",icon:"_1v1jw2O293rG31AmRxnm1W"}},function(e,t,n){e.exports={root:"_4uQYOCoqM9zi2ssP_4B3R",group:"_1u-E52NJvu5Itclkd8LT9o",groupControlButton:"la5GxJBOtu0gen5-keK4r"}},function(e,t,n){e.exports=n(344)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(4).lock("spinner"),a=n(2),i=n(117);n(1423);var c=function(e){function Spinner(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Spinner),_possibleConstructorReturn(this,_getPrototypeOf(Spinner).apply(this,arguments))}var t,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Spinner,i),t=Spinner,(n=[{key:"render",value:function(){var e=this.props,t=e.size,n=void 0===t?"s":t,i=e.color,c=void 0===i?"orange":i,s=e.className;return r.createElement("div",{className:a(this.getClassName({size:n,color:c}),s)},r.createElement("div",{className:o("circle")}))}}])&&_defineProperties(t.prototype,n),c&&_defineProperties(t,c),Spinner}();e.exports=c},function(e,t,n){"use strict";var r=n(943),o=n(489);e.exports=r(o)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1332);var r=n(0),o=n(3),a=n(2),i=n(4).lock("image".concat("-partial-component")),c=function(e){function Image(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Image),n=this,(t=!(r=_getPrototypeOf(Image).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={isLazyLoad:t.props.lazyLoadImg||t.props.selfLazyLoad,isLoaded:!t.props.loadWatcher},t._image=null,t._onLoad=t._onLoad.bind(_assertThisInitialized(t)),t._onError=t._onError.bind(_assertThisInitialized(t)),t._onComplete=t._onComplete.bind(_assertThisInitialized(t)),t._addImgRef=t._addImgRef.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Image,r.Component),t=Image,(n=[{key:"componentDidMount",value:function(){this._image&&this._image.complete&&!this.state.isLazyLoad&&this._onComplete(),this.props.selfLazyLoad&&this.lazyLoad()}},{key:"render",value:function(){if(!this.props.x1)return null;var e=this.props,t=e.alt,n=e.title,o=e.itemProp,c=e.lazyLoadImg,s=e.className,u=e.style,l=this.state.isLoaded;return r.createElement("img",_extends({className:a(s,i({loaded:l})),ref:this._addImgRef,onError:this._onError,onLoad:this._onLoad,alt:t,title:n,itemProp:o,"data-lazyload":c,style:u},this._getSrcProps()))}},{key:"_getSrcProps",value:function(){var e=this.props,t=e.x1,n=e.lazyLoadImg,r=this._getSrcSet();return n?{"data-src":t,"data-srcset":r}:{src:t,srcSet:r}}},{key:"lazyLoad",value:function(){this._lazyImage=new window.Image,this._lazyImage.src=this.props.x1||this.props.x2,this._lazyImage.addEventListener("load",this._onComplete)}},{key:"_addImgRef",value:function(e){this._image=e}},{key:"_getSrcSet",value:function(){var e=this.props,t=e.x1,n=e.x2;return n?"".concat(t," 1x, ").concat(n," 2x"):void 0}},{key:"_onComplete",value:function(){this.setState({isLoaded:!0});var e=this.props.onComplete;e&&e()}},{key:"_onLoad",value:function(e){this.state.isLoaded||this._onComplete();var t=this.props.onLoad;t&&t(e)}},{key:"_onError",value:function(e){var t=this.props.onError;t&&t(e)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Image}();c.propTypes={className:o.string,x1:o.string.isRequired,x2:o.string,alt:o.string,title:o.string,itemProp:o.string,onLoad:o.func,onError:o.func,onComplete:o.func,loadWatcher:o.bool,lazyLoadImg:o.bool,style:o.object,selfLazyLoad:o.bool},c.defaultProps={loadWatcher:!1,selfLazyLoad:!1},e.exports=c},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(100),o=r.POST_TYPES,a=r.PREVIEW_MODE_SLUG,i=r.PAGE_SECTIONS_ID,c=r.LEGACY_PAGE_SECTIONS_ID,s=r.ENTITY_TYPES_WITH_POSTS_SLUGS,u=r.ENTITY_TYPES_WITH_POSTS,l=n(153),p=Object.values(o).join("|"),f=[o.news,o.interview,o.article,o.photostory,o.podcast,o.game].join("|"),d=Object.values(s).join("|"),m="".concat("/media/","api/"),y="".concat("/media/",":type(").concat(p,")/:id([\\d]+)/:mode(").concat(a,")?/"),_={post:y,"post-comment":"".concat(y,":sectionId(").concat(i.COMMENT,")/:commentId([\\d]+)/"),"legacy-post-comment":"".concat(y,":sectionId(").concat(c.COMMENT,")/:commentId([\\d]+)/"),"legacy-post-comment-with-slash":"".concat(y,":sectionId(").concat(c.COMMENT,")/:commentId([\\d]+)//")},h={"old-posts":"".concat("/",":type(").concat(p,")/"),posts:"".concat("/media/",":type(").concat(p,")?/")},g={rubric:"".concat("/media/","rubric/:id([\\d]+)/")},b={"old-post-urls":"".concat("/",":type(").concat(p,")/:id([\\d]+)/:path(.*)?/"),"old-posts-urls":"".concat("/",":type(").concat(f,")/"),"old-posts-pagination-urls":"".concat("/",":type(").concat(f,")/perpage/:perpage([\\d]+)?/(page)?/:page([\\d]+)?/")},E={"api-posts":"".concat(m,"posts/"),"api-rubrics":"".concat(m,"rubrics/"),"api-rubric":"".concat(m,"rubric/:id([\\d]+)/")},v={"entity-related-posts":"/:entityTypeSlug(".concat(d,")/:entityId([\\d]+)/media/")},O="/:entityTypeSlug(".concat(s[u.film],")/:slug([\\w-]+)-:entityId([\\d]+)/"),P="".concat(O,"news/"),S="/:entityTypeSlug(".concat(d,")/:entityId([\\d]+)/news/"),T={"old-entity-related-posts":S,"old-entity-related-posts-pagination":"".concat(S).concat("perpage/:perpage([\\d]+)?/(page)?/:page([\\d]+)?/"),"old-film-with-slug-related-posts":P,"old-film-with-slug-related-posts-pagination":"".concat(P).concat("perpage/:perpage([\\d]+)?/(page)?/:page([\\d]+)?/"),"film-with-slug-related-posts":"".concat(O,"media/")};e.exports=l(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},h,{},g,{},_,{},b,{},E,{},v,{},T))},function(e,t,n){"use strict";var r=n(36),o=n(221),a=n(104).default,i=n(884).NOTIFICATION_COOKIE_NAME,c=n(885),s=c.COOKIE_DOMAIN,u=c.COOKIE_USER_SOURCE_NAME,l=c.COOKIE_USER_FROM_LOGIN,p=n(122),f=n(198),d=n(596).winToUtf8,m=n(181),y=n(35).closeAuthPopup,_=function(e,t){return Ya.Kinopoisk.auth[e](t).then(function(t){if(!t||"close"!==t.status)switch(e){case"changePassword":p.showNotification({text:"Пароль изменён"});break;case"changeEmail":p.showNotification({text:["Вам было отправлено письмо на e-mail: ",t.email,". Пожалуйста, подтвердите изменение адреса, ","кликнув по ссылке в этом  письме."].join("")});break;case"changeLogin":case"createLoginPassword":document.location.reload();break;case"login":r.set(l,1,{path:"/"}),document.location.reload();break;case"deleteAccount":document.location="/"}Ya.Kinopoisk.auth.close()})};e.exports={init:function(){if(window.Ya&&window.Ya.Kinopoisk&&window.Ya.Kinopoisk.auth){var e=a.getStore();o(window,"Ya.Kinopoisk.basehost",e.getState().common.kpPlusHost);var t=document.location.hash.substr(1),n=Boolean(e.getState().auth.userId);if(-1!==["createLoginPassword","restorePassword"].indexOf(t)){if(n&&"restorePassword"===t)return void(document.location.href="/");_(t)}var c,l=r.get(i),h=r.get(u);switch(l){case"BAD_RESTORE_PASSWORD_TOKEN":c="Неправильная ссылка. Вероятно, истёк срок её&nbsp;действия. Воспользуйтесь формой восстановления доступа ещё раз.";break;case"DELETED_ACCOUNT":c="Ваш профиль удален";break;case"INCORRECT_TOKEN":c="Неправильная ссылка. Вероятно, истёк срок её&nbsp;действия&nbsp.";break;case"EMAIL_CONFIRMED":c="Адрес электронной почты изменён";break;case"SERVER_ERROR":c="Произошла ошибка. Ещё раз, пожалуйста";break;case"USER_REGISTERED":h&&"native"!==h?f.reachGoal("default","REG_EMAIL_SOCIAL"):f.reachGoal("default","REG_SUCCESS_NATIVE"),c="Спасибо, ваша регистрация подтверждена";break;case"CREATED_LOGIN_PASSWORD":c="Поздравляем, вы&nbsp;только что зарегистрировали логин";break;case"LOGIN_CHANGED":c="Поздравляем, вы&nbsp;только что изменили логин";break;case"PASSWORD_CHANGED":c="Пароль изменён"}Ya.Kinopoisk.auth.on("error",function(){p.showError()}),Ya.Kinopoisk.auth.on("close",function(){e.dispatch(y())});var g=m.parse(d(unescape(document.location.search)));"change-password"===g.action&&Ya.Kinopoisk.auth.changePasswordUnauth(g.userId,g.token,g.from).then(function(e){e&&"close"===e.status||(document.location.href="/",r.set(i,"PASSWORD_CHANGED",{path:"/",domain:s}))}),c&&setTimeout(function(){p.showNotification({text:c})},1e3),r.set(i,0,{expires:-1,path:"/",domain:s})}},login:function(e){return _("login",e)}}},function(e,t){e.exports={type:"adblock-warning",defaultPriority:1,hideCookie:"adblock-warning-toast-hide",hideCookieExpires:10800}},function(e,t,n){"use strict";e.exports={MetrikaClick:n(1339),MetrikaWindowScroll:n(1340),MetrikaRendered:n(1341)}},function(e,t,n){"use strict";n.r(t),n.d(t,"ONLINE_VIEW_OPTIONS_INIT_PAYMENT_BUTTON_EFFECT",function(){return o}),n.d(t,"onlineViewOptionsInitPaymentButtonEffect",function(){return a});var r=n(14),o="online-view-options/INIT_PAYMENT_BUTTON_EFFECT",a=Object(r.default)(o)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0).PureComponent,o=n(961),a=function(e){function UniversePure(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UniversePure),_possibleConstructorReturn(this,_getPrototypeOf(UniversePure).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UniversePure,o(r)),UniversePure}();e.exports=a},function(e,t,n){e.exports={AvatarBrick:n(1387),Avatar:n(965),LinkedAvatars:n(390)}},function(e,t,n){var r=n(0),o=n(102);e.exports=function(){return r.createElement("div",{className:o("footer-help")},r.createElement("a",{href:"https://yandex.ru/support/kinopoisk/settings.html",className:o("help-link"),target:"_blank",rel:"noopener noreferrer"},"Помощь"))}},,function(e,t,n){function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(151),o=n(100).TYPES_TITLES;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,n=e.number,a=t&&o[t];return a?void 0===n?a[3]:r.apply(void 0,[n].concat(_toConsumableArray(a))):""}},,function(e,t,n){"use strict";var r,o,a=!1,i=n(36);r=Number(document.location.search.includes("".concat("_kp_debug","="))),o=Number(i.get("_kp_debug")),r&&i.set("_kp_debug",1),a=a||r||o;var c=function Logger(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Logger),this.namespace=e};["info","log","error","warn","debug"].forEach(function(e){c.prototype[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];a&&(n[0]="[".concat(t,"]: ").concat(n[0]),console[e].apply(console,n))}(e,this.namespace,n)}});var s=new c;s.getLogger=function(e){return new c(e)},e.exports=s},,,,,,,,,,,function(e,t,n){"use strict";e.exports={openModal:function(e){var t=e.name,n=e.props;return function(e,r){var o=r();o.page.isDomikOpened||o.page.isAuthModalOpen||e({type:"modal/OPEN",payload:{name:t,props:n}})}},closeModal:function(){return{type:"modal/CLOSE"}},OPEN_MODAL:"modal/OPEN",CLOSE_MODAL:"modal/CLOSE"}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(203),o=n(828),a=n(829),i=n(451);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({reducer:o},a,{},r,{},i)},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"ACTIONS_TYPES",function(){return o}),n.d(t,"initPartialAppEffect",function(){return a});var r=n(14),o={initPartialAppEffect:"partial-app/INIT_EFFECT"},a=Object(r.default)(o.initPartialAppEffect)},,,,function(e,t,n){var r=n(6).createSelector,o=function(e){return e.toaster},a=r(o,function(e){return e.type||null}),i=r(o,function(e){return e.isOpened||!1}),c=r(o,function(e){return e.toasterHeight});e.exports={selectToastType:a,selectIsToastOpened:i,selectToasterHeight:c}},,function(e,t){e.exports={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27,TAB:9}},function(e,t,n){"use strict";var r=function(e){return e.models.plainPeople};e.exports={getPersonModels:r,getPersonModel:function(e,t){return r(e)[t]}}},function(e,t,n){e.exports=n(863)},function(e,t,n){"use strict";var r=n(6).createSelector,o=n(433).STATUS,a=n(697),i=a.canDelete,c=a.canVote,s=a.canCreate,u=n(587).getPostModel,l=n(19).getUserState,p=function(e){return e.comments},f=function(e){return p(e).models},d=function(e,t){return f(e)[t]},m=function(e){return p(e).pageCommentId},y=function(e){return p(e).pagination},_=function(e,t){return function(e){return p(e).userComplaints}(e)[t]},h=function(e,t){for(var n=e.parentId&&t[e.parentId];n&&n.parentId;)n=t[n.parentId];return n},g=r(f,function(e){return Object.values(e).reduce(function(e,t){return t.status!==o.DELETE&&(e[t.id]=t),e},{})}),b=r(g,function(e){return Object.values(e).reduce(function(t,n){var r=h(n,e);return r&&(t[r.id]||(t[r.id]=[]),t[r.id].push(n)),t},{})}),E=r([r([m,g],function(e,t){return e?t[e]:null}),g],function(e,t){return e?null===e.parentId?e:h(e,t):null}),v=r(E,function(e){return e?e.id:null}),O=r(f,function(e){return Object.values(e).reduce(function(t,n){var r=h(n,e);return r&&(t[r.id]||(t[r.id]=[]),t[r.id].push(n)),t},{})}),P=r(r([function(e){return p(e).list},v,g],function(e,t,n){return e.map(function(e){return n[e]}).filter(function(e){return e&&t!==e.id})}),function(e){return e.filter(function(e){return!e.parentId})}),S=r(r([function(e){return p(e).pinned},v,g],function(e,t,n){return e.map(function(e){return n[e]}).filter(function(e){return e&&t!==e.id})}),function(e){return e.filter(function(e){return!e.parentId})}),T=function(e){return p(e).userVotes},k=r(u,function(e){return!(e||{}).notCommentable}),C=r(d,l,function(e,t){return i(e,t)}),w=r(C,function(e){return e}),I=r(d,l,function(e,t){return c(e,t)}),A=r(d,l,function(e,t){return e.isAcceptsVoting&&t.id!==e.user.id}),x=r(l,function(e){return s(e)}),R=function(e,t){return!Boolean(_(e,t))};e.exports={getCommentsModels:f,getComment:d,getThreadsCollection:P,getHasMoreComment:function(e){return y(e).hasMore},getCommentsState:p,getCommentsPagination:y,getCommentsTotalCount:function(e){return p(e).totalCount},getIsPending:function(e){return Boolean(y(e).isPending)},getCommentChildren:function(e,t){return O(e)[t]||[]},getUserVotes:T,getUserVote:function(e,t){return T(e)[t]},getCommentRating:function(e,t){return d(e,t).rating},getPinnedThreadsCollection:S,getReplyToUser:function(e,t){return d(e,t).user},getIsSubscribed:function(e){return p(e).isSubscribed},getLimit:function(e){return y(e).limit},getOffset:function(e){return y(e).offset},getShowCommentsCountForPost:k,getCanUserDelete:C,getCanUserVote:I,getCanUserCreate:x,getCanUserComplain:R,getIsDeletionAvailable:w,getIsVotingAvailable:A,getIsComplaingAvailable:function(e,t){return R(e,t)},getIsHighlighted:function(e,t){return m(e)===t||p(e).highlighted.includes(t)},getPageThread:E,getCommentActiveChildren:function(e,t){return b(e)[t]||[]},getActiveCommentsModels:g}},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(965),i=n(102),c=n(2),s=function(e){var t,n,o,s=e.leftAvatar,u=e.rightAvatar,l=e.linkSymbol,p=e.className;return r.createElement("div",{className:c(i("avatars-wrapper",{overlaped:Boolean(u&&!l)}),p)},r.createElement(a,s),l&&r.createElement("div",{className:i("link-sign",(t={},n=l,o=!0,n in t?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,t))}),u&&r.createElement(a,u))};s.propTypes={leftAvatar:o.object,rightAvatar:o.object,linkSymbol:o.string,className:o.string},e.exports=s},function(e){e.exports=JSON.parse('{"error.comment.delete.has_children":"Вы не можете удалить комментарий, на который уже ответили.","error.comment.common":"Сожалеем, это действие вам недоступно","error.comment.vote.common":"Кажется, у вас пропал голос. Но не расстраивайтесь! Через некоторое время мы вам его вернём","error.selections.empty_list.heading":"Ничего не найдено","error.selections.empty_list.text":"Попробуйте изменить параметры фильтра","error.selections.server_error.heading":"У нас что-то сломалось","error.selections.server_error.text":"Мы уже решаем проблему. Попробуйте ещё раз позже","error.selections.client_error.heading":"Что-то пошло не так","error.selections.client_error.text":"Проверьте соединение и обновите страницу","selections.list_types.film":"фильм","selections.list_types.serial":"сериал"}')},,function(e,t,n){"use strict";n.r(t),n.d(t,"SORTING_OPTIONS",function(){return r}),n.d(t,"DEFAULT_SORTING_OPTION",function(){return o});var r=[{parameter:"votes",caption:"По количеству оценок",order:"desc"},{parameter:"popularity",caption:"По рейтингу",order:"desc"},{parameter:"year",caption:"По дате выхода",order:"desc"},{parameter:"title",caption:"По названию",order:"asc"}],o=r[0]},function(e,t,n){"use strict";n.r(t),n.d(t,"SORTING_OPTIONS",function(){return r}),n.d(t,"DEFAULT_SORTING_OPTION",function(){return o});var r=[{parameter:null,caption:"По порядку",order:null},{parameter:"votes",caption:"По количеству оценок",order:"desc"},{parameter:"popularity",caption:"По рейтингу",order:"desc"},{parameter:"year",caption:"По дате выхода",order:"desc"},{parameter:"title",caption:"По названию",order:"asc"}],o=r[0]},function(e,t,n){"use strict";var r=n(6).createSelector,o=n(26).getPageState,a=function(e){return o(e).todayFilmsInCinema||[]},i=r(a,function(e){return e.slice(0,5)});e.exports={getFilmsInCinema:a,selectFilmsInCinemaMediaList:i}},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(151),o=n(725),a=n(15),i=n(53),c=n(48),s=n(246),u=s.RATING_POSITIVE_MIN_COUNT,l=s.RATING_NEGATIVE_MAX_COUNT,p=s.EXPECTATION_POSITIVE_MIN_COUNT,f=s.EXPECTATION_NEGATIVE_MAX_COUNT,d=n(582).SCHEDULE_WARNING,m=n(726),y=m.RATING_TYPES,_=m.RATING_SOURCE,h=m.RATING_INCOMING_SOURCE_MAP,g=m.POSSIBLE_CURRENT_RATING,b=n(223).SERIAL_TYPES_TITLES,E=function(e,t,n){for(var r="",o=0;o<t.length;o++)r+=e[o]+t[o];return(r+=e[t.length]).split("\n").map(function(e){return e.replace(/^\s+/gm,"")}).join(n).trim()},v={getRatingType:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isExpectation,n=y.UNKNOWN,r=parseFloat(e);return isNaN(r)?n:n=t?r>=p?y.POSITIVE:r<f?y.NEGATIVE:y.NEUTRAL:r>=u?y.POSITIVE:r<l?y.NEGATIVE:y.NEUTRAL},getFilmRatings:function(e){var t=this,n=(e.currentRating||"").toLowerCase(),r=h.find(function(e){return _slicedToArray(e,1)[0]===n}),o=r&&g.includes(r[1])?r[1]:_.expectations,i={};return h.forEach(function(n){var r=_slicedToArray(n,2),o=r[0],c=r[1];if(!i[c]||a(e,"".concat(o),null)){var s=a(e,"".concat(o,".ready"),!1),u=s?a(e,"".concat(o,".value"),null):null;u=parseFloat(u),s=c===_.expectations?"string"==typeof(u=s&&!isNaN(u)?"".concat(Math.round(u),"&thinsp;%"):null)&&s:"string"==typeof(u=s&&!isNaN(u)?(Math.round(10*u)/10).toFixed(1):null)&&s,i[c]={ready:s,value:u,count:a(e,"".concat(o,".count"),null),type:t.getRatingType(s?u:null)}}}),Object.assign(i,{currentRating:o})},trimmed:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E(e,n,"\n")},getDuration:function(e){var t=Math.floor(e/60),n=Math.floor(t/60),o=t-60*n,a=[];return n&&a.push(r(n,"%d&nbsp;час","%d&nbsp;часа","%d&nbsp;часов")),o&&a.push(r(o,"%d&nbsp;минута","%d&nbsp;минуты","%d&nbsp;минут")),a.join(" ")},parseScheduleFiltersForQuery:function(e){var t=e.daytime,n=e.search,r=e.tags,a={search:n};return t&&t[0]&&t[0].value&&(a.daytime=t[0].value),r&&r[0]&&(a.tags=o(r.map(function(e){return e.value}))),a},getSanitizedAfishaTag:function(e){return e&&/^[0-9a-f]{24}$/.test(e)?e:""},oneline:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return E(e,n," ")},getMovieRelativePath:function(e){var t=e.slug,n=e.filmId;return t?"/film/".concat(t,"-").concat(n,"/"):"/film/".concat(n,"/")},getNoSeancesWarnerType:function(e,t){var n=t.daytime,r=t.search,o=t.tags;return t.isFailedLoadResource?d.failedLoadSchedule:n||r||o?d.noScheduleByFilters:e.dates&&0!==e.dates.length?d.noScheduleByDate:d.noSchedule},getFormatedDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.defaultFormatUtc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=i(e),o=r.isValid()?r:i();return o.isValid()?(o.startOf(n.startOf),o.endOf(n.endOf),o.add(n.add),o.subtract(n.subtract),o.format(t)):null},createScheduleUrl:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.namespace,n=e.date,r=e.scheduleFilters,o=void 0===r?{}:r,a=e.cityId,s=e.filmId,u=e.applyScheduleFilters,l=void 0===u||u,p={cityId:a,id:s,date:i(n).format("YYYY-MM-DD")||n};if(l){var f=v.parseScheduleFiltersForQuery(o),d=f.search,m=f.daytime,y=f.tags;Object.assign(p,{search:d,daytime:m,tags:y})}return c.url(t,p)},normalizeMovieData:function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).currentRating;switch(t){case"touch":var r=parseFloat(a(e,"rating",null)),o=r?"rating":"expectations";n&&(o=n);var i={id:e.filmID||e.id,title:e.nameRU,originalTitle:e.nameEN,poster:{baseUrl:a(e,"posterURL","").split("?")[0]},rating:{value:r,count:parseInt(a(e,"ratingVoteCount",null),10),ready:Boolean(r)},currentRating:o,genres:(e.genre||"").split(", ").map(function(e){return{name:e}})||[]};return Object.assign({},e,i);default:return e}},normalizeSuggestResponse:function(){var e,t=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(n){var r,o,a,i=n.id,c=n.link,s=n.rus,u=n.name,l=n.year;n.is_serial&&n.is_serial.length&&(r=b[n.is_serial.toUpperCase()]||null),n.type&&n.type.length>0&&(e=n.type),c.indexOf("film")>=0?(o=n.is_serial&&n.is_serial.length?"serial":"film",a="/film/".concat(i,"/")):c.indexOf("cinema")>=0?(o="cinema",a="/cinema/".concat(i,"/")):c.indexOf("name")>=0&&(o="name",a="/name/".concat(i,"/"));var p="0"===n.ur_rating?null:n.ur_rating;return{type:e,dataType:o,serialType:r,id:i,link:c,name:s,subname:u,rating:void 0!==n.ur_rating&&{value:p,type:t.getRatingType(p,{isExpectation:!1})},year:l,metrikaUrl:a}})},getRegExpForRewriteUrls:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce(function(e,t){return e.push("(".concat(t.replace(".","\\."),")")),e},[]).join("|");return new RegExp("".concat(e),"i")}};e.exports=v},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(3),i=n.n(a),c=n(972),s=n.n(c);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=function(e){var t=e.film,n=e.ottData,a=e.onlineViewOption,i=void 0===a?{}:a,c=_objectWithoutProperties(e,["film","ottData","onlineViewOption"]),u=Object(r.useMemo)(function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},n)},[t,n]);return o.a.createElement(s.a,_extends({},c,{film:u,watchUrl:t.watchUrl,onlineViewOption:i}))};u.propTypes={film:i.a.shape({id:i.a.number.isRequired,relativeUrl:i.a.string,watchUrl:i.a.string}).isRequired,ottData:i.a.shape({monetizationModels:i.a.arrayOf(i.a.string)}),onlineViewOption:i.a.shape({isAvailableOnline:i.a.bool.isRequired,isPurchased:i.a.bool.isRequired,text:i.a.string,originalOfferText:i.a.string,subscriptionPurchaseTag:i.a.string,subscription:i.a.string,type:i.a.string,rightholderLogoUrl:i.a.string})},t.default=u},function(e,t){e.exports={MODEL_TYPE:"plainPosts",ENTITY_TYPE:"posts",ERRORS_TEXTS:{EMPTY_MOST_COMMENTED_POSTS:"Most commented posts list is empty"}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(783),o=n(443),a=n(784);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a)},,,,,,,,,,,,,,function(e,t,n){"use strict";["log","error","warn","table","group","groupCollapsed","groupEnd"].forEach(function(t){e.exports[t]=function(){if(n(104).default.getStore().getState().common.debug){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];console[t].apply(console,r)}}})},,,function(e,t){var n;e.exports={showNotification:function(e){var t=e.text,r=e.title;return function(e){n&&clearTimeout(n),n=setTimeout(function(){e({type:"notification/HIDE"})},3e3),e({type:"notification/SHOW",payload:{text:t,title:r}})}},hideNotification:function(){return{type:"notification/HIDE"}},SHOW_NOTIFICATION:"notification/SHOW",HIDE_NOTIFICATION:"notification/HIDE"}},function(e,t,n){"use strict";n.d(t,"HeaderDataProvider",function(){return o});var r=n(20);n(418);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})}}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function HeaderDataProvider(e){var t,n,r,o=e.requester;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderDataProvider),r=void 0,(n="requester")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,this.requester=o}var e,t,n;return e=HeaderDataProvider,(t=[{key:"getConfig",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.requester.get(r.b.getUrl(r.a.ApiHeaderConfig));case 2:return e=n.sent,t=e.data,n.abrupt("return",t);case 5:case"end":return n.stop()}},_callee,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getSuggestItems",value:function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.query,a.next=3,this.requester.get(r.b.getUrl(r.a.ApiSuggest),{params:{query:t}});case 3:return n=a.sent,o=n.data,a.abrupt("return",o);case 6:case"end":return a.stop()}},_callee2,this)}));return function(t){return e.apply(this,arguments)}}()}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),HeaderDataProvider}()},function(e,t){},function(e,t,n){"use strict";n.d(t,"SocialNetworks",function(){return a}),n.d(t,"MobileAppsMarkets",function(){return i});var r=n(468);n.d(t,"EXTERNAL_KP1_SUGGEST_ITEM_SERIAL_TYPES",function(){return r.a}),n.d(t,"SUGGEST_ITEMS_GROUPS_IDS",function(){return r.b}),n.d(t,"SUGGEST_ITEM_TYPE",function(){return r.c}),n.d(t,"TV_SERIES_SUGGEST_TYPES",function(){return r.d});var o=n(420);n.d(t,"NavigationMenuItemCustomTypes",function(){return o.a});var a,i;n(421),n(422);!function(e){e.Vkontakte="vkontakte",e.Facebook="facebook",e.Twitter="twitter",e.Telegram="telegram",e.Instagram="instagram",e.Youtube="youtube"}(a||(a={})),function(e){e.AppStore="appStore",e.GooglePlay="googlePlay"}(i||(i={}))},function(e,t,n){"use strict";var r,o;n.d(t,"a",function(){return o}),r||(r={}),function(e){e.Imax="imax",e.Oscar="oscar",e.SpecialPlacement="special-placement"}(o||(o={}))},function(e,t){},function(e,t,n){"use strict";n(423),n(424)},function(e,t){},function(e,t){},function(e,t,n){"use strict";var r=n(426);n.o(r,"ANALYTICS_EVENTS_NAMES")&&n.d(t,"ANALYTICS_EVENTS_NAMES",function(){return r.ANALYTICS_EVENTS_NAMES}),n.o(r,"ANALYTICS_ZONES_NAMES")&&n.d(t,"ANALYTICS_ZONES_NAMES",function(){return r.ANALYTICS_ZONES_NAMES}),n.o(r,"buildParams")&&n.d(t,"buildParams",function(){return r.buildParams}),n.o(r,"buildTargetName")&&n.d(t,"buildTargetName",function(){return r.buildTargetName}),n.o(r,"useAnalyticsClick")&&n.d(t,"useAnalyticsClick",function(){return r.useAnalyticsClick}),n.o(r,"useSendParams")&&n.d(t,"useSendParams",function(){return r.useSendParams}),n.o(r,"useVisibilitySensor")&&n.d(t,"useVisibilitySensor",function(){return r.useVisibilitySensor});var o=n(71);n.d(t,"ANALYTICS_EVENTS_NAMES",function(){return o.b}),n.d(t,"ANALYTICS_ZONES_NAMES",function(){return o.c});var a=n(466);n.d(t,"useAnalyticsClick",function(){return a.a}),n.d(t,"useSendParams",function(){return a.b}),n.d(t,"useVisibilitySensor",function(){return a.c});var i=n(467);n.d(t,"buildParams",function(){return i.a}),n.d(t,"buildTargetName",function(){return i.b})},function(e,t){},function(e,t,n){var r=regeneratorRuntime.mark(featuringMetrikaSaga),o=regeneratorRuntime.mark(todayInCinemaFilmClickSaga),a=regeneratorRuntime.mark(todayInCinemaFilmShowSaga),i=n(1).call,c=n(44),s=n(428),u=s.media,l=s.featuring,p=n(664),f=p.WATCH_IN_CINEMA_POST_TYPE,d=p.FEATURING_TYPE_CLICK,m=p.FEATURING_TYPE_SHOW,y=p.FEATURING_PLACE,_=n(311).PLATFORMS,h=u(c),g=l(c,{platform:_.desktop});function featuringMetrikaSaga(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,n=e.filmId,o=e.position,a=e.isFeatured,r.next=3,i(g,{type:t,isFeatured:a,position:o,filmId:n,place:y});case 3:case"end":return r.stop()}},r)}function todayInCinemaFilmClickSaga(e){var t,n,r,a,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).isTouch,r=t.filmId,a=t.position,c=t.isFeatured,o.next=5,i([h,h.watchInCinemaItemClick],{isTouch:n,postType:f,postId:r,target:a});case 5:return o.next=7,i(featuringMetrikaSaga,{type:d,isFeatured:c,position:a,filmId:r,place:y});case 7:case"end":return o.stop()}},o)}function todayInCinemaFilmShowSaga(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).filmId,r=t.position,o=t.isFeatured,a.next=5,i(featuringMetrikaSaga,{type:m,isFeatured:o,position:r,filmId:n,place:y});case 5:case"end":return a.stop()}},a)}e.exports={todayInCinemaFilmClickSaga:todayInCinemaFilmClickSaga,todayInCinemaFilmShowSaga:todayInCinemaFilmShowSaga,featuringMetrikaSaga:featuringMetrikaSaga}},function(e,t,n){"use strict";e.exports={authParams:n(651),deadpoolDialog:n(652),header:n(653),headerPopup:n(654),watchOnline:n(655),passportConnector:n(656),yandexPlus:n(657),regSuggest:n(658),media:n(659),featuring:n(660),promocode:n(661),code:n(662),mda:n(663),selections:n(158)}},function(e,t,n){"use strict";e.exports={ADMIN_SNIPPET_STATUS:{OPEN:"OPEN",CLOSE:"CLOSE"},ADMIN_SNIPPET_STATUS_STORAGE_KEY:"admin_snippet_status"}},function(e,t){e.exports={CHANGE_BASIC_FILM_MODEL:"basicFilm/CHANGE_MODEL",changeModel:function(e,t){return{type:"basicFilm/CHANGE_MODEL",payload:{id:e,data:t}}}}},function(e,t,n){var r=regeneratorRuntime.mark(waitRumSaga),o=n(1).delay,a=n(199),i=n(684).WAIT_DELAY;function waitRumSaga(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e=a())||!e.makeSubPage){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,o(i);case 6:t.next=0;break;case 8:case"end":return t.stop()}},r)}e.exports=waitRumSaga},function(e,t,n){"use strict";function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function AntiAdblock(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AntiAdblock)}var e,t,n;return e=AntiAdblock,n=[{key:"init",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"kpunk";(function(){var t,r,o=["dGltZQ==","dG9VVENTdHJpbmc=","PTE7IGV4cGlyZXM9","OyBwYXRoPS8=","cmVtb3ZlRXZlbnRMaXN0ZW5lcg==","cmVhZHlTdGF0ZQ==","bG9hZGluZw==","ZG9jdW1lbnRFbGVtZW50","ZG9TY3JvbGw=","RE9NQ29udGVudExvYWRlZA==","YWRkRXZlbnRMaXN0ZW5lcg==","VU5LTk9XTg==","b3Blbg==","Z2V0","c2VuZA==","b25sb2Fk","Z2V0UmVzcG9uc2VIZWFkZXI=","Y29udGVudC1sZW5naHQ=","cmVzcG9uc2VUZXh0","aW5pdA==","b25lcnJvcg==","c3Jj","WERvbWFpblJlcXVlc3Q=","aGFzT3duUHJvcGVydHk=","Y29va2ll","Ymx0c3I=","Y2FsbGJhY2s="];t=o,r=156,function(e){for(;--e;)t.push(t.shift())}(++r);var a=function l(e,t){var n=o[e-=0];void 0===l.uchiZO&&(function(){var e;try{e=Function('return (function() {}.constructor("return this")( ));')()}catch(t){e=window}e.atob||(e.atob=function(e){for(var t,n,r=String(e).replace(/=+$/,""),o=0,a=0,i="";n=r.charAt(a++);~n&&(t=o%4?64*t+n:n,o++%4)?i+=String.fromCharCode(255&t>>(-2*o&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i})}(),l.uicDaN=function(e){for(var t=atob(e),n=[],r=0,o=t.length;r<o;r++)n+="%"+("00"+t.charCodeAt(r).toString(16)).slice(-2);return decodeURIComponent(n)},l.oitOJB={},l.uchiZO=!0);var r=l.oitOJB[e];return void 0===r?(n=l.uicDaN(n),l.oitOJB[e]=n):n=r,n};!function(e,t,r){if(r[a("0x0")]){var o=e[a("0x1")]||e.XMLHttpRequest,i={};for(var c in r)r[a("0x2")](c)&&(i[c]=r[c]);var s=a("0x3"),l="time",p="context";i[s]=i[s]||a("0x4"),i[l]=i[l]||3,i[p]=i[p]||{};var d=i[a("0x5")];i[a("0x5")]=function(e){d&&d(e,123)},function(e){if("complete"===t[a("0xb")]||t[a("0xb")]!==a("0xc")&&!t[a("0xd")][a("0xe")])e();else{var r=a("0xf");t[a("0x10")]&&t.addEventListener(r,function n(){t[a("0xa")](r,n),e()})}}(function(){try{var n=null,c=new o;if(0!==c[a("0xb")])return f();if(c[a("0x12")](a("0x13"),r.src,!0),1!==c[a("0xb")]||c[a("0x14")]!==o.prototype[a("0x14")])return f();c.withCredentials=!0,c[a("0x15")]=function(){try{n&&n();var r=Number(c[a("0x16")](a("0x17"))),o=c[a("0x18")].length;if(!r||r<32e3||r!==o)return f();new Function(c[a("0x18")]).call(i[p]),i[p][a("0x19")](e,t,i)}catch(r){f()}},c[a("0x1a")]=function(){n&&n(),Number(new Date)-s<2e3&&f()};var s=Number(new Date);c.send(),n=function(e,t){var r=u(),o=null;function u(){return Number(new Date)}return function n(){u()-r>=1e4?f():o=setTimeout(function(){n()},100)}(),function(){clearTimeout(o)}}()}catch(s){f()}})}function f(){var e,n;e=Number(new Date),n=new Date(e+36e5*i[a("0x6")])[a("0x7")](),t.cookie=i[s]+a("0x8")+n+a("0x9"),i[a("0x5")]({blocked:!0,blocker:a("0x11")})}}(window,document,{src:"https://static-mon.yandex.net/static/main.js?pid=kinopoisk.ru",callback:AntiAdblock._handleDetect,cookie:e})})()}},{key:"_handleDetect",value:function(e){AntiAdblock._resolveDetectResult(e.blocked&&!e.fakeDetect)}}],(t=null)&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),AntiAdblock}();r.detectResultPromise=new Promise(function(e){return r._resolveDetectResult=e}),e.exports=r},function(e,t){e.exports={STATUS:{DELETE:"delete",NEW:"new"}}},function(e,t){e.exports={ACTIONS:{EDIT:"EDIT",CREATE:"CREATE",DELETE:"DELETE",DELETE_BY_AUTHOR:"DELETE_BY_AUTHOR",VOTE:"VOTE",VIEW_UNPUBLISHED:"VIEW_UNPUBLISHED"}}},function(e,t,n){var r=n(123).addModels,o=n(730).MODEL_TYPE;e.exports={addFilmsModels:function(e){return r(o,e)}}},function(e,t,n){function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=regeneratorRuntime.mark(savePromocode),o=regeneratorRuntime.mark(validatePromocode),a=regeneratorRuntime.mark(applyPromocodeRequest),i=regeneratorRuntime.mark(applyPromocode),c=regeneratorRuntime.mark(applyPromocodeWatcher),s=n(1),u=s.put,l=s.call,p=s.cancel,f=s.select,d=s.takeEvery,m=n(65),y=n(16),_=n(154),h=_.APPLY_PROMOCODE_EFFECT,g=_.update,b=n(155),E=b.DEFAULT_ERROR,v=b.EMPTY_PROMOCODE_ERROR,O=b.LOCAL_STORAGE_ITEM_NAME,P=b.ERRORS,S=b.PAGES,T=n(197).linkYandexAccount,k=n(19),C=k.getIsAuthorized,w=k.getYandexIntegration,I=n(31).promocode,A=n(492).selectInitialUtm,x=n(26).getPageUrl;function savePromocode(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:(t=m.parse(location.search.slice(1))).promocode=e,history.replaceState(null,null,"".concat(location.pathname,"?").concat(m.stringify(t))),localStorage.setItem(O,e);case 4:case"end":return n.stop()}},r)}function validatePromocode(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return t.next=3,u(g({landing:{isLoading:!1,errorText:v}}));case 3:return t.next=5,p();case 5:case"end":return t.stop()}},o)}function applyPromocodeRequest(e){var t,n,r,o,i,c,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,u(g({promocode:e,landing:{isLoading:!0,errorText:""}}));case 2:return a.prev=2,t=window.matchMedia("(min-width: 1024px)").matches?"desktop/form":"mobile/form",a.next=6,f(A);case 6:return n=a.sent,a.next=9,f(x);case 9:return r=a.sent,a.next=12,l([y,y.post],"/gift/apply-promocode/",{query:{templateTag:t,source:"kp"},body:{code:e,utm:n,page:r}});case 12:if(o=a.sent,i=o.status,c=o.reason,s=_objectWithoutProperties(o,["status","reason"]),"SUCCESS"!==i){a.next=23;break}return a.next=19,l(I.subscriptionPurchaseSuccess);case 19:return a.next=21,u(g({page:S.SUCCESS}));case 21:a.next=30;break;case 23:if("PAYMENT_REQUIRED"!==i){a.next=28;break}return a.next=26,u(g({page:S.PAYMENT_FORM,paymentForm:s}));case 26:a.next=30;break;case 28:return a.next=30,u(g({landing:{isLoading:!1,errorText:P[c]||E}}));case 30:a.next=36;break;case 32:return a.prev=32,a.t0=a.catch(2),a.next=36,u(g({landing:{isLoading:!1,errorText:E}}));case 36:case"end":return a.stop()}},a,null,[[2,32]])}function applyPromocode(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.promocode,o.next=3,validatePromocode(t);case 3:return o.next=5,l(I.applyPromocodeButtonClick);case 5:return o.next=7,f(C);case 7:return n=o.sent,o.t0=Boolean,o.next=11,f(w);case 11:if(o.t1=o.sent,r=(0,o.t0)(o.t1),n&&r){o.next=20;break}return o.next=16,l(I.authFormOpen);case 16:return o.next=18,savePromocode(t);case 18:return o.next=20,l(T,{retPath:location.href});case 20:return o.next=22,l(applyPromocodeRequest,t);case 22:case"end":return o.stop()}},i)}function applyPromocodeWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d(h,applyPromocode);case 2:case"end":return e.stop()}},c)}e.exports={savePromocode:savePromocode,validatePromocode:validatePromocode,applyPromocodeRequest:applyPromocodeRequest,applyPromocodeWatcher:applyPromocodeWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(getDeviceLimit),o=regeneratorRuntime.mark(checkDeviceLimit),a=regeneratorRuntime.mark(checkDeviceLimitWatcher),i=n(1),c=i.put,s=i.call,u=i.takeEvery,l=n(16),p=n(118),f=p.CHECK_DEVICE_LIMIT_EFFECT,d=p.update,m=p.codeInputEffect,y=n(156).PAGES;function getDeviceLimit(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s([l,l.get],"/code/device-limit/");case 2:return e=t.sent,t.abrupt("return",e.devicesLimitReached);case 4:case"end":return t.stop()}},r)}function checkDeviceLimit(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d({deviceLimit:{isLoading:!0}}));case 2:return e.prev=2,e.next=5,s(getDeviceLimit);case 5:if(e.sent){e.next=9;break}return e.next=9,c(m());case 9:e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(2),e.next=15,c(d({page:y.serverError}));case 15:return e.next=17,c(d({deviceLimit:{isLoading:!1}}));case 17:case"end":return e.stop()}},o,null,[[2,11]])}function checkDeviceLimitWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(f,checkDeviceLimit);case 2:case"end":return e.stop()}},a)}e.exports={getDeviceLimit:getDeviceLimit,checkDeviceLimit:checkDeviceLimit,checkDeviceLimitWatcher:checkDeviceLimitWatcher}},function(e,t){e.exports={SPECIAL_PROJECTS_MODELS_ITEM_UPDATE:"special_projects/models_item/UPDATE",specialProjectsModelsItemUpdate:function(e,t){return{type:"special_projects/models_item/UPDATE",payload:{id:e,data:t}}},SPECIAL_PROJECTS_USER_DATA_ITEM_UPDATE:"special_projects/user_data_item/UPDATE",specialProjectsUserDataItemUpdate:function(e,t){return{type:"special_projects/user_data_item/UPDATE",payload:{id:e,data:t}}}}},function(e,t,n){var r;e.exports={watchers:(r=n(759),function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(r)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()),init:[n(760)]}},,function(e,t,n){var r=n(107).default,o=r(function(e){return function(e){return e.router}(e).route},{}),a=r(function(e){return o(e).params},{}),i=r(function(e){return o(e).query},{}),c=r(function(e){return o(e).pathname},"");e.exports={selectRoute:o,selectRouteParams:a,selectRouteQuery:i,selectRoutePathname:c}},function(e,t){e.exports={MODEL_TYPE:"plainPostsRubrics"}},function(e,t,n){var r=n(123).addModels,o=n(442).MODEL_TYPE;e.exports={addPostsRubricsModels:function(e){return r(o,e)}}},function(e,t,n){var r=regeneratorRuntime.mark(saveWhiteEmailStatus),o=n(1),a=o.select,i=o.put,c=n(140).selectShouldChange,s=n(56).whiteEmailUpdate,u=n(445).getTextPresetNameWithFallback;function saveWhiteEmailStatus(e){var t,n,o,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.isWhitelisted,n=e.email,o=e.textPreset,r.next=3,a(c);case 3:return l=r.sent,r.next=6,i(s({shouldConfirm:!t,email:n,textPreset:u(o),isWhitelisted:t,shouldChange:t&&l}));case 6:case"end":return r.stop()}},r)}e.exports={saveWhiteEmailStatus:saveWhiteEmailStatus}},function(e,t,n){var r=n(37),o=r.TEXT_PRESETS,a=r.TEXT_PRESETS_NAMES.DEFAULT;e.exports={getTextPresetNameWithFallback:function(e){return o[e]?e:a}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(36),o=n(201).getCookieWhiteEmailStatus,a=n(37),i=a.WHITE_EMAIL_STATUS_COOKIE_MAX_AGE,c=a.WHITE_EMAIL_STATUS_COOKIE_NAME,s=a.WHITE_EMAIL_STATUS_COOKIE_DELIMITER;e.exports={setCookieWhiteEmailStatus:function(e){var t=o(),n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{},e),a=n.isHiddenForHit,u=n.actionCount,l=t.expires||Date.now()+i;r.set(c,[a,u,l].map(Number).join(s),{expires:new Date(l)})}}},function(e,t,n){var r=regeneratorRuntime.mark(changeEmailSaga),o=n(1),a=o.put,i=o.putResolve,c=n(56),s=c.whiteEmailUpdate,u=c.whiteEmailLoadingFailure,l=n(25).sendRequestEffect,p=n(37),f=p.END_POINTS.NODEJS.CHANGE_EMAIL,d=p.LOG_NAMESPACE,m=p.MODES,y=p.REQUEST_STATUSES,_=n(49)(d);function changeEmailSaga(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.newEmail,n=e.retPath,r.next=3,a(s({requestStatus:y.UPDATING}));case 3:return r.prev=3,r.next=6,i(l({url:f,method:"patch",params:{body:{newEmail:t,retPath:n}}}));case 6:return r.next=8,a(s({requestStatus:y.LOADED,mode:m.SUCCESS_MESSAGE}));case 8:r.next=16;break;case 10:return r.prev=10,r.t0=r.catch(3),r.next=14,a(u({error:r.t0}));case 14:throw _("changeEmail:failure",r.t0),r.t0;case 16:case"end":return r.stop()}},r,null,[[3,10]])}e.exports={changeEmailSaga:changeEmailSaga}},function(e,t,n){var r=n(15),o=n(164).selectKinopoiskGo,a=function(e){return r(o(e),"cancel",{})};e.exports={selectCancel:a,selectCancelStatus:function(e){return a(e).status}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(53),o=n(15),a=n(6).createSelector,i=n(138).KINOPOISK_GO_SUBSCRIPTION.ROOT,c=n(175).selectBunkerState,s=n(314).template,u=n(164).selectKinopoiskGo,l=n(27),p=l.STATUSES,f=l.PROLONGATION_STATUSES,d=l.LOAD_DATA_STATUS;r.locale("ru");var m=a(c,function(e){return e[i]||{}}),y=function(e){return o(u(e),"subscription")},_=function(e){return o(y(e),"data",{})},h=function(e){return o(_(e),"status","")},g=function(e){return o(y(e),"status")},b=a(g,function(e){return e===d.pending}),E=a(g,function(e){return e===d.failed}),v=function(e){return o(_(e),"prolongationStatus","")},O=a([h,v,g],function(e,t,n){if(n!==d.loaded)return null;if(e===p.active){if(t===f.enabled)return p.active;if(t===f.disabled_by_user||t===f.disabled_by_kp)return p.active_and_prolongation_disabled}return p[e]||p.unknown}),P=a([m,_],function(e,t){return t.title?"".concat(e.title," &laquo;").concat(t.title,"&raquo"):e.title}),S=a([m,O],function(e,t){return e[t]}),T=a(_,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{nextPaymentDate:e.nextPaymentDate&&r(e.nextPaymentDate).format("DD MMMM YYYY"),prolongationEndDate:e.prolongationEndDate&&r(e.prolongationEndDate).format("DD MMMM"),endDate:e.endDate&&r(e.endDate).format("DD MMMM YYYY")}}),k=a([S,a([S,T],function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).text,t=arguments.length>1?arguments[1]:void 0;return s(e,t)}),P],function(e,t,n){return e&&function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{title:n,contentText:t})}),C=a(_,function(e){return e.productId}),w=a(O,function(e){return e===p.unknown||e===p.inactive});e.exports={selectSubscriptionTemplateParams:T,selectSubscriptionData:_,selectSubscriptionStatus:h,selectSubscriptionProlongationStatus:v,selectSubscriptionState:O,selectSubscriptionContent:S,selectSubscriptionTitle:P,selectSubscription:k,selectHasPendingStatus:b,selectHasFailureStatus:E,selectSubscriptionProductId:C,selectHasSubscriptionOrderIntent:w}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(kinopoiskGoLoadSubscriptionInfo),o=n(1),a=o.put,i=o.putResolve,c=n(25).sendRequestEffect,s=n(57).patchSubscription,u=n(320).getUrl;function kinopoiskGoLoadSubscriptionInfo(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(c({url:u("api-kinopoisk-go-subscription"),method:"get"}));case 2:return e=n.sent,t=e.subscription,n.next=6,a(s({data:t}));case 6:case"end":return n.stop()}},r)}e.exports={kinopoiskGoLoadSubscriptionInfo:kinopoiskGoLoadSubscriptionInfo}},function(e,t,n){"use strict";var r=n(93).selectEntityOttData,o=n(6).createSelector,a=n(93).selectEntityContextData,i=n(15),c=o(a,function(e){return i(e,"name","")});e.exports={selectPersonName:c,selectPersonFilmographyOttData:function(e,t){return i(r(e,{type:"personFilmography"}),"[".concat(t,"]"),{})}}},function(e,t,n){"use strict";var r=n(14).default,o=r("nameplate/SHOW_EFFECT"),a=r("nameplate/CLICK_EFFECT");e.exports={NAMEPLATE_SHOW_EFFECT:"nameplate/SHOW_EFFECT",NAMEPLATE_CLICK_EFFECT:"nameplate/CLICK_EFFECT",showNameplateEffect:o,clickNameplateEffect:a}},function(e,t,n){var r=regeneratorRuntime.mark(applyPage),o=n(1),a=o.put,i=o.select,c=n(158),s=n(50).changeSeoPage,u=n(54).selectSeoPageNumber;function applyPage(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(u);case 2:if((t=r.sent)!==e&&(e||1!==t)){r.next=5;break}return r.abrupt("return");case 5:return n=e||1,c.sendPaginator(["".concat(n)]),r.next=9,a(s(n));case 9:case"end":return r.stop()}},r)}e.exports=applyPage},function(e,t,n){var r=n(172).selectEntityByType;e.exports={selectFolders:function(e){var t=r(e,{type:"folders"}).byId||{};return Object.values(t)}}},function(e,t,n){var r=regeneratorRuntime.mark(applySorting),o=n(1),a=o.put,i=o.select,c=o.call,s=n(158),u=n(50).changeSeoSort,l=n(54).selectSortingParam;function applySorting(e,t){var n,o,p,f;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.defaultSortingOption,o=t.sortingOptions,r.next=3,i(l);case 3:if((p=r.sent)!==e&&(e||p!==n.parameter)){r.next=6;break}return r.abrupt("return");case 6:return f=e?o.find(function(t){return t.parameter===e}):n,r.next=9,c([s,s.sendSort],[f.parameter]);case 9:return r.next=11,a(u(f));case 11:case"end":return r.stop()}},r)}e.exports=applySorting},function(e,t,n){var r=regeneratorRuntime.mark(applyQuickFilters),o=n(1),a=o.put,i=o.select,c=n(1070),s=n(50).changeSeoAppliedQuickFilters,u=n(54).selectAppliedQuickFilters;function applyQuickFilters(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(u);case 2:if(t=r.sent,n=e&&e.split(",")||[],!c(t,n).length!==t.length){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,a(s(n));case 8:case"end":return r.stop()}},r)}e.exports=applyQuickFilters},function(e,t,n){var r=regeneratorRuntime.mark(applyExcludeViewed),o=n(1),a=o.put,i=o.select,c=n(50).changeSeoExcludeViewed,s=n(54).selectExcludeViewed;function applyExcludeViewed(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(s);case 2:if(n.sent!==Boolean(e)){n.next=5;break}return n.abrupt("return");case 5:return t=Boolean(e),n.next=8,a(c(t));case 8:case"end":return n.stop()}},r)}e.exports=applyExcludeViewed},function(e,t,n){"use strict";n.r(t),n.d(t,"SelectionError",function(){return i});var r,o=n(85);function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _wrapNativeSuper(e){var t="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,Wrapper)}function Wrapper(){return _construct(e,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(e.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,e)})(e)}function _construct(e,t,n){return(_construct=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&_setPrototypeOf(o,n.prototype),o}).apply(null,arguments)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=(_defineProperty(r={},o.ERROR_TYPES.emptySelection,{type:o.ERROR_TYPES.emptySelection,heading:"error.selections.empty_list.heading",text:"error.selections.empty_list.text",isRefreshButtonShown:!1}),_defineProperty(r,o.ERROR_TYPES.serverError,{type:o.ERROR_TYPES.serverError,heading:"error.selections.server_error.heading",text:"error.selections.server_error.text",isRefreshButtonShown:!0}),_defineProperty(r,o.ERROR_TYPES.clientError,{type:o.ERROR_TYPES.clientError,heading:"error.selections.client_error.heading",text:"error.selections.client_error.text",isRefreshButtonShown:!0}),r),i=function(e){function SelectionError(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SelectionError),n=this,_defineProperty(_assertThisInitialized(t=!(r=_getPrototypeOf(SelectionError).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"data",void 0),t.data=a[e],t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SelectionError,_wrapNativeSuper(Error)),SelectionError}()},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(23);e.exports={patch:function(e,t){return r(t,Object.entries(e).reduce(function(e,n){var r,o=_slicedToArray(n,2),a=o[0],i=o[1],c=t[a];return r=c===Object(c)?Array.isArray(c)?"$push":"$merge":"$set",e[a]=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},r,i),e},{}))},setDefault:function(e){return function(t,n){return r(n||e.call(),t)}}}},,,,,,,function(e,t,n){"use strict";var r=n(0),o=n.n(r),a=n(11),i=n(13),c=function(e,t){var n=o.a.useRef(t),r=Object(a.c)();return Object(i.b)(function(){n.current=t},[t]),o.a.useCallback(function(){r({eventName:e,eventType:a.a.CLICK,payload:n.current})},[r])},s=n(71);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){var t=Object(a.c)();return o.a.useCallback(function(){t(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({eventType:a.a.CLICK,eventName:s.b.sendParams},e))},[t,e])},l=n(383);function use_visibility_sensor_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function use_visibility_sensor_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var p=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).options,t=void 0===e?{}:e,n=o.a.useRef(!1),r=Object(a.c)(),i=_slicedToArray(Object(l.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?use_visibility_sensor_ownKeys(Object(n),!0).forEach(function(t){use_visibility_sensor_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):use_visibility_sensor_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({triggerOnce:!0},t)),2),c=i[0],u=i[1];return o.a.useEffect(function(){u&&!n.current&&(n.current=!0,r({eventType:a.a.SHOW,eventName:s.b.reportZoneVisible}))},[u,r]),{setElementRef:c}};n.d(t,"a",function(){return c}),n.d(t,"b",function(){return u}),n.d(t,"c",function(){return p})},function(e,t,n){"use strict";var r=n(71),o=function(e){var t=e.zones,n=e.ottSubscription,o=e.userId,a=e.event;return{zones:t,eventName:a.eventName,eventType:a.eventType,eventId:a.eventId,payload:a.payload||r.a,subscriptionType:n||r.a,profileData:o?{uid:o}:r.a}},a=n(561),i=n.n(a),c=function(e){var t=e.zones,n=e.event.eventName,r=t.map(function(e){var t=e.zoneName;return i()(t)}).join("_");return"".concat(r,"_").concat(n)};n.d(t,"a",function(){return o}),n.d(t,"b",function(){return c})},function(e,t,n){"use strict";var r,o,a,i,c;!function(e){e.film="film",e.person="person",e.cinema="cinema",e.tvSeries="tvSeries"}(r||(r={})),function(e){e.mini="mini",e.serial="serial",e.tvShow="tvShow",e.video="video"}(o||(o={})),function(e){e.miniSerial="MINI",e.serial="SERIAL",e.tvShowNoTop="TV_NOTOP",e.tvShow="TV",e.videoNoTop="V_NOTOP",e.video="V"}(a||(a={})),function(e){e.first="first",e.film="film",e.people="people"}(i||(i={})),function(e){e.mostMatching="mostMatching",e.films="films",e.person="person",e.cinemas="cinemas"}(c||(c={})),n.d(t,"c",function(){return r}),n.d(t,"d",function(){return o}),n.d(t,"a",function(){return a}),n.d(t,"b",function(){return c})},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(280),o=n(649);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({watchers:o},r,{getMainPageModule:function(){return{id:"mainPage",reducerMap:_defineProperty({},"mainPage",function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}),sagas:o}},STORE_KEY:"mainPage"})},function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a});var r=n(14),o="navigation-history/LOAD_HISTORY_EFFECT",a=Object(r.default)(o);Object(r.default)("navigation-history/CLEAR_HISTORY_EFFECT")},function(e,t,n){"use strict";var r=n(417);n.o(r,"HeaderDataProvider")&&n.d(t,"HeaderDataProvider",function(){return r.HeaderDataProvider})},function(e,t,n){e.exports={root:"sx8L7QeoloejvxalEqRZS"}},function(e,t,n){e.exports={root:"_2aYjPxLTHRuw_XOKcpqklG"}},function(e,t,n){e.exports={root:"_11SH6Dxak-5SijamlzMDTI"}},function(e,t,n){e.exports={title:"hc5PXVqSoZ8KKdSztQ8R4"}},function(e,t,n){e.exports={imgPlaceholder:"_1QUvw-I_s6jfALEm8Lp1R1"}},function(e,t,n){e.exports={imgPlaceholder:"P6DX6KIL3fZbMct5J5sp7"}},function(e,t,n){e.exports={imgPlaceholder:"_1QgW78JLJM4_2pilC1MGUP"}},function(e,t,n){e.exports={imgPlaceholder:"_31phQ8j3Bd5Ti6jAEl5krS"}},function(e,t,n){e.exports={root:"_2fswl9ZlOBehWbi3qGyBUH"}},function(e,t){e.exports="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='15' viewBox='0 0 120 15'%3E %3Cpath fill='%23FFF' fill-rule='evenodd' d='M5.762 9.016H4.704v5.748H0V0h4.704v5.374H5.86L8.447 0h4.782L9.897 6.91l3.841 7.854H8.564L5.762 9.016zm16.05.354h-.274l-2.978 2.618v2.776h-4.508V2.953h4.508v4.449h.391l2.862-2.52v-1.93h4.507v11.812h-4.507V9.37zm13.641 1.22h-3.057v4.174h-4.508V2.953h4.508v4.016h3.057V2.953h4.508v11.81h-4.508v-4.172zm11.955-7.854c.81 0 1.561.125 2.254.374.692.25 1.29.63 1.793 1.142.503.512.898 1.152 1.186 1.92.287.767.431 1.663.431 2.686 0 1.037-.144 1.94-.431 2.707-.288.768-.683 1.404-1.186 1.91a4.794 4.794 0 0 1-1.783 1.131 6.463 6.463 0 0 1-2.225.374h-.607a6.896 6.896 0 0 1-2.313-.374 4.843 4.843 0 0 1-1.822-1.132c-.51-.505-.908-1.141-1.196-1.909-.287-.768-.431-1.67-.431-2.707 0-1.023.144-1.919.431-2.687.288-.767.683-1.407 1.186-1.919a4.722 4.722 0 0 1 1.793-1.142 6.666 6.666 0 0 1 2.273-.374h.647zm-.255 8.465c.497 0 .899-.2 1.206-.6.307-.4.46-.982.46-1.743 0-.76-.153-1.342-.46-1.742-.307-.4-.71-.6-1.206-.6h-.156c-.523 0-.935.2-1.235.6-.3.4-.45.981-.45 1.742s.15 1.342.45 1.742c.3.4.712.6 1.235.6h.156zM53.993 0h12.543v14.764h-4.704V3.839h-3.135v10.925h-4.704V0zm19.794 2.736c.81 0 1.562.125 2.254.374.693.25 1.29.63 1.793 1.142.503.512.899 1.152 1.186 1.92.288.767.431 1.663.431 2.686 0 1.037-.143 1.94-.43 2.707-.288.768-.684 1.404-1.187 1.91a4.794 4.794 0 0 1-1.783 1.131 6.463 6.463 0 0 1-2.224.374h-.608a6.896 6.896 0 0 1-2.313-.374 4.843 4.843 0 0 1-1.822-1.132c-.51-.505-.908-1.141-1.196-1.909-.287-.768-.43-1.67-.43-2.707 0-1.023.143-1.919.43-2.687.288-.767.683-1.407 1.186-1.919a4.722 4.722 0 0 1 1.793-1.142 6.666 6.666 0 0 1 2.274-.374h.646zm-.254 8.465c.496 0 .898-.2 1.205-.6.307-.4.46-.982.46-1.743 0-.76-.153-1.342-.46-1.742-.307-.4-.709-.6-1.205-.6h-.157c-.523 0-.934.2-1.235.6-.3.4-.45.981-.45 1.742s.15 1.342.45 1.742c.3.4.712.6 1.235.6h.157zm14.796-1.83h-.274l-2.98 2.617v2.776h-4.507V2.953h4.508v4.449h.392l2.861-2.52v-1.93h4.508v11.812h-4.508V9.37zm17.697.098c-.039.97-.209 1.804-.51 2.5-.3.695-.698 1.27-1.195 1.722a4.609 4.609 0 0 1-1.744.994 7.205 7.205 0 0 1-2.175.315h-.608c-.836 0-1.61-.128-2.322-.384a4.963 4.963 0 0 1-1.842-1.151c-.516-.512-.918-1.152-1.206-1.92-.287-.767-.424-1.663-.411-2.687.013-1.023.163-1.919.45-2.687.288-.767.683-1.407 1.186-1.919A4.825 4.825 0 0 1 97.442 3.1a6.511 6.511 0 0 1 2.274-.383h.647c.77 0 1.492.108 2.165.324.673.217 1.261.548 1.764.994.503.447.908 1.001 1.215 1.664.307.663.48 1.434.52 2.313h-4.293c-.065-.499-.245-.873-.539-1.122-.293-.25-.656-.374-1.087-.374h-.177c-.51 0-.914.2-1.215.6-.3.4-.45.981-.45 1.742s.15 1.342.45 1.742c.3.4.706.6 1.215.6h.177c.457 0 .836-.147 1.136-.442.301-.295.47-.725.51-1.29h4.272zm6.41.846h-.824v4.449h-4.508V2.953h4.508v4.134h.843l2.273-4.134h4.684l-3.018 5.492L120 14.764h-5.017l-2.548-4.449z'/%3E %3C/svg%3E"},function(e,t,n){e.exports={root:"_2eDYk2_o6q6EVzacqA1T-5"}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(1),o=r.all,a=r.fork,i=n(666),c=n(676).filmsToWatchWatcher,s=n(681).sezamAccountsWatcher,u=n(682).logoutWatcher,l=n(683).antiAdbWatcher,p=n(685).loadFilmDataWatcher,f=n(686).loadPersonDataWatcher,d=n(687).loginSuggestWatcher,m=n(688).loadTodayFilmsInCinemaWatcher,y=n(689),_=n(705),h=n(710).metrikaWatcher,g=n(197).linkYandexAccountWatcher,b=n(711).mdaWatcher,E=n(716).loadUserWatcher,v=n(717),O=n(723),P=n(736),S=n(741),T=n(745),k=n(242).watchers,C=n(439).watchers,w=n(761)("desktop"),I=n(762),A=n(571).watchers,x=n(244).watchers,R=n(135).watchers,N=n(821),j=n(254).watchers,D=n(229).watchers,M=n(368).watchers,L=n(835).loadHeaderFeaturesWatcher,F=n(836),U=n(841),W=n(595),B=n(849).adfoxDestroyBannerRequestedSagaWatcher,G=n(935).default,H=n(852).watchers,Y=n(934).onlineViewOptionsWatchers,K=[].concat(_toConsumableArray(i),[c,s,p,m,f,d,h,g,b,u,E,l],_toConsumableArray(P),_toConsumableArray(S),_toConsumableArray(y),_toConsumableArray(_),_toConsumableArray(v),_toConsumableArray(O),[L],_toConsumableArray(C),[w],_toConsumableArray(Object.values(U)),_toConsumableArray(W),_toConsumableArray(k),_toConsumableArray(T),_toConsumableArray(I),_toConsumableArray(A),_toConsumableArray(x),[N],_toConsumableArray(R),_toConsumableArray(M),_toConsumableArray(D),[B],_toConsumableArray(j),_toConsumableArray(F),_toConsumableArray(G),_toConsumableArray(H),_toConsumableArray(Y));e.exports=regeneratorRuntime.mark(function rootSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(K.map(a));case 2:case"end":return e.stop()}},rootSaga)})},function(e,t){function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function getRangesIntersection(e,t){return[Math.max(e[0],t[0]),Math.min(e[1],t[1])]}function getAlignedRange(e,t){var n=e-e%t;return[n,n+t-1]}function getAlignedRangesSet(e,t){for(var n=_slicedToArray(e,2),r=n[0],o=n[1],a=[],i=r;i<=o;i+=t)a.push(getAlignedRange(i,t));return a}e.exports={getAlignedRangesSet:getAlignedRangesSet,getRangesIntersection:getRangesIntersection,getRangesBetweenPoints:function(e){var t=e.from,n=e.to,r=e.rangeSize,o=[t,n];return getAlignedRangesSet(o,void 0===r?10:r).map(function(e){return getRangesIntersection(e,o)}).reverse()},isInRange:function(e,t){var n=_slicedToArray(t,2),r=n[0],o=n[1];return e>=r&&e<=o}}},function(e,t){e.exports=function(e,t){return{type:e,payload:t}}},function(e,t,n){"use strict";var r=n(853),o=n(858),a=n(859),i=n(862),c=n(864),s=n(59).reducer,u=n(865),l=n(867),p=n(870),f=n(871),d=n(873),m=n(874),y=n(875),_=n(876),h=n(315).specialProjectsReducer,g=n(877),b=n(878),E=n(879),v=n(880),O=n(881),P=n(536).headerBrandingReducer,S=n(47).reducer;var T={page:r,models:a,backendErrors:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},common:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},csrf:p,abExperiments:i,auth:o,ugc:c,modal:s,comments:u,commentForm:l,user:f,passportConnector:d,mda:m,antiAdblock:y,userSubscription:_,specialProjects:h,toaster:g,selections:b,gift:E,code:v,metrika:O,entities:n(93).reducer,headerBranding:P,uiLists:S,router:n(254).reducer,whiteEmailStatus:n(244).reducer,kinopoiskGo:n(135).reducer};e.exports={reducerMap:T}},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(4).lock("popup-container");n(1159);var i=function(e){var t=e.children,n=e.onClose;return r.createElement("div",{className:a()},r.createElement("div",{className:a("close-button"),onClick:n}),r.createElement("div",{className:a("content")},t))};i.propTypes={children:o.node.isRequired,onClose:o.func.isRequired},e.exports=i},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(2),i=n(4).lock("ui-button"),c=n(1270);n(1305);var s=function(e){function Button(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Button),_possibleConstructorReturn(this,_getPrototypeOf(Button).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Button,r.PureComponent),t=Button,(n=[{key:"render",value:function(){var e,t=this.props,n=t.href,o=t.size,s=t.kind,u=t.children,l=t.isRouterLink,p=t.className,f=t.target,d=t.state;return e=n&&l?c:n?"a":"button",r.createElement(e,_extends({},this.props,{href:n,target:f||"_self",className:a(i({size:o,kind:s,link:Boolean(n)}),p),state:d}),u)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Button}();s.propTypes={href:o.string,className:o.string,onClick:o.func,children:o.node,size:o.oneOf(["xxs","xs","s","m","l","xl","xxl"]),kind:o.oneOf(["primary","secondary","ghost","link"]),disabled:o.bool,target:o.oneOf(["_blank","_self","_parent","_top"]),isRouterLink:o.bool,state:o.object},s.defaultProps={size:"m",kind:"ghost"},e.exports=s},function(e,t,n){var r=n(0).createContext({appTheme:"light"});e.exports=r},function(e,t,n){"use strict";var r=n(1441);e.exports=r.default||r},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(2),i=n(4).lock("circle-arrow-button");n(1425);var c=function(e){function CircleArrowButton(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CircleArrowButton),(t=_possibleConstructorReturn(this,_getPrototypeOf(CircleArrowButton).call(this,e)))._elementRef=r.createRef(),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CircleArrowButton,r.Component),t=CircleArrowButton,(n=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.theme,o=e.animation,c=e.direction,s=e.color,u=e.onClick,l=e.mods,p=void 0===l?{}:l,f=e.className,d=e.iconClassName;return r.createElement("div",{ref:this._elementRef,onClick:u,className:a(i({theme:n,direction:c,animation:o,color:s,touch:p.touch}),f)},r.createElement("span",{className:a(d,i("icon"))}),t&&r.createElement("span",{className:i("text")},t))}},{key:"getElementRef",value:function(){return this._elementRef.current}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CircleArrowButton}();c.propTypes={color:o.oneOf(["white"]),animation:o.oneOf(["slide",!1]),direction:o.oneOf(["left","right"]),theme:o.oneOf(["default","compact"]),text:o.string,onClick:o.func,iconClassName:o.string,className:o.string,mods:o.object},c.defaultProps={animation:"slide",direction:"right",theme:"default",onClick:function(){}},e.exports=c},function(e,t){e.exports={selectInitialUtm:function(e){return e.metrika.initialUtm}}},function(e,t,n){var r=(0,n(14).default)("adfox/ADFOX_DESTROY_BANNER_REQUESTED_EFFECT");e.exports={ADFOX_DESTROY_BANNER_REQUESTED_EFFECT:"adfox/ADFOX_DESTROY_BANNER_REQUESTED_EFFECT",adfoxDestroyBannerRequestedEffect:r}},,function(e,t,n){"use strict";e.exports={ON_ADBLOCK_WARNING_CLOSE_EFFECT:"adblock-warning/ON_CLOSE_TOAST_EFFECT",onAdblockWarningCloseEffect:function(){return{type:"adblock-warning/ON_CLOSE_TOAST_EFFECT"}}}},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(1074),o=n(505),a=n(228),i=a.DEADPOOL_HISTORY,c=a.BUTTON_BUY_TICKET_LOGIC,s=a.BUTTON_BUY_TICKET_ANSWERS,u=a.BUTTON_TRAILER_LOGIC,l=a.BUTTON_TRAILER_ANSWERS,p=a.ANSWERS_DONT_UNDERSTAND,f=a.EMOJIES_LOVE,d=a.ANSWERS_LOVE,m=a.EMOJIES_FWORD,y=a.ANSWERS_FWORD,_=a.ANSWERS_OTHERS,h=a.ANSWERS_GREETINGS,g=function(e){var t=e.messages,n=e.index,r=e.LOGIC,a=e.ANSWERS,i=e.marker;if(r){var c,s="";if(n===r.ONCE&&(s=o(a.ONCE)),n%r.REPEAT||(s=o(a.REPEAT)),s)t.push((_defineProperty(c={author:"alice",text:s},i,!0),_defineProperty(c,"status","done"),c))}};e.exports={getHistory:function(){var e=localStorage&&localStorage.getItem(i);try{e=JSON.parse(e||[])}catch(t){e=[]}return e.length?(e.forEach(function(e){return e.read=!0}),{meta:{status:"done"},type:"deadpool-dialog/get-history",payload:{messages:e}}):{meta:{status:"fail"},type:"deadpool-dialog/get-history"}},sendMessage:function(e,t,n,a){return function(i,h){i({meta:{status:"pending"},type:"deadpool-dialog/send-message",payload:{messages:[{author:"user",text:t,status:"done"},{author:"alice",status:"pending"}]}});var b=[];g({messages:b,index:n,LOGIC:u,ANSWERS:l,marker:"showTrailerButton"}),g({messages:b,index:n,LOGIC:c,ANSWERS:s,marker:"showTicketButton"});var E=t.replace(r(),"").replace(/[^\da-zа-яё]*/gi,"");if(b.length||E||!r().test(t)||(f.includes(t)?b.push({author:"alice",text:o(d),status:"done"}):m.includes(t)?b.push({author:"alice",text:o(y),status:"done"}):b.push({author:"alice",text:o(_),status:"done"})),b.length)return setTimeout(function(){i({meta:{status:"done"},type:"deadpool-dialog/send-message",payload:{messages:b}})},200),null;var v=h().common.env,O=["development","qa"].includes(v)?"/api/deadpool-dialog":"/special/api/ai-dialogs/";return e.get(O,{query:{question:t,voice:"deadpool"}}).then(function(e){var r=e.answer||o(p);a&&i(a({userText:t,aliceText:r,index:n})),i({meta:{status:"done"},type:"deadpool-dialog/send-message",payload:{messages:[{author:"alice",text:r,status:"done"}]}})}).catch(function(){i({meta:{status:"fail"},type:"deadpool-dialog/send-message",payload:{messages:[{author:"alice",text:o(p),status:"done"}]}})})}},sendGreetingMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;return function(t){t({meta:{status:"pending"},type:"deadpool-dialog/send-message",payload:{messages:[{author:"alice",status:"pending"}]}}),setTimeout(function(){t({meta:{status:"done"},type:"deadpool-dialog/send-message",payload:{messages:[{author:"alice",text:o(h),status:"done"}]}})},e)}},DEADPOOL_DIALOG_GET_HISTORY:"deadpool-dialog/get-history",DEADPOOL_DIALOG_SEND_MESSAGE:"deadpool-dialog/send-message"}},function(e,t,n){"use strict";n.r(t),n.d(t,"selectUiListsState",function(){return i}),n.d(t,"selectUiListState",function(){return c}),n.d(t,"selectIsUiListAvailable",function(){return s}),n.d(t,"selectUiListItems",function(){return u}),n.d(t,"selectUiListPagination",function(){return l}),n.d(t,"selectUiListStatus",function(){return p}),n.d(t,"selectUiListMeta",function(){return f}),n.d(t,"selectIsUiListPending",function(){return d}),n.d(t,"selectIsUiListLoaded",function(){return m}),n.d(t,"selectIsUiListFailed",function(){return y}),n.d(t,"selectUiListError",function(){return _}),n.d(t,"selectUiListsErrors",function(){return h}),n.d(t,"selectUiList",function(){return g}),n.d(t,"createChunkedUiListSelector",function(){return b});var r=n(6),o=n(107),a=n(89);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=function(e){return e.uiLists},c=Object(o.default)(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).listId;return t&&i(e)[t]},{}),s=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).listId;return Boolean(t&&i(e)[t])},u=function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).listId;return c(e,{listId:t}).items},l=Object(o.default)(function(e,t){return c(e,t).pagination},{}),p=Object(r.createSelector)(l,function(e){return e.status}),f=Object(o.default)(function(e,t){return c(e,t).meta},{}),d=Object(r.createSelector)(l,function(e){return e.status===a.UI_LIST_STATUS.pending}),m=Object(r.createSelector)(l,function(e){return e.status===a.UI_LIST_STATUS.loaded}),y=Object(r.createSelector)(function(e,t){return l(e,t)},function(e){return e.status===a.UI_LIST_STATUS.failed}),_=Object(r.createSelector)(l,function(e){return e.error}),h=function(e,t){var n=t.listIds;return(void 0===n?[]:n).reduce(function(t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,_defineProperty({},n,_(e,{listId:n})))},{})},g=Object(r.createStructuredSelector)({items:u,meta:f,pagination:l,isAvailable:s,isPending:d,isLoaded:m,isFailed:y,error:_}),b=function(){var e=Object(r.createSelector)([u,function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).limit},function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).offset;return void 0===t?0:t}],function(e,t,n){return e&&e.slice(n,t)});return Object(r.createStructuredSelector)({items:e,meta:f,pagination:l,isAvailable:s,isPending:d})}},function(e,t){e.exports={MAIN_PAGE_MEDIA_BLOCK_MAIN:"mainPage.mediaBlock.main",MAIN_PAGE_MEDIA_BLOCK_WEEK_BEST:"mainPage.mediaBlock.weekBest",MAIN_PAGE_MEDIA_BLOCK_POPULAR_VIDEOS:"mainPage.mediaBlock.popularVideos",MAIN_PAGE_HD_CONTINUE_WATCHING:"mainPage.watchOnHdBlock.continueWatching",MAIN_PAGE_HD_FILMS:"mainPage.watchOnHdBlock.films",TODAY_IN_CINEMA:"main-page.today-in-cinema.films",NEW_TRAILERS:"main-page.new-trailers.trailers",MAIN_PAGE_WEEKEND_BOX_OFFICE_USA:"mainPage.boxOfficeBlock.usa",MAIN_PAGE_WEEKEND_BOX_OFFICE_RUSSIA:"mainPage.boxOfficeBlock.rus",MAIN_PAGE_WEEKEND_BOX_OFFICE_WORLD:"mainPage.boxOfficeBlock.world"}},function(e,t,n){e.exports=n(4).lock("watch-online-film-snippet".concat("-partial-component"))},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(168),a=Object(r.createSelector)(function(e){return e[o.b]},function(e){return e.featuring});n.d(t,"getFilmModels",function(){return i}),n.d(t,"getFilmModel",function(){return c}),n.d(t,"getFeaturedFilms",function(){return s}),n.d(t,"isFilmFeatured",function(){return p}),n.d(t,"selectFeaturedFilm",function(){return f}),n.d(t,"selectHasType",function(){return d});var i=function(e){return e.models.films},c=function(e,t){return i(e)[t]},s=Object(r.createSelector)(a,function(e){var t=e.enabled,n=e.list;return t?n:[]}),u=function(e,t){return t},l=function(e){return function(t){var n=t.id;return e===n}},p=Object(r.createSelector)([s,u],function(e,t){return e.some(l(t))}),f=Object(r.createSelector)([s,u],function(e,t){return e.find(l(t))}),d=Object(r.createSelector)([s,function(e,t){return t}],function(e,t){return e.some(function(e){return e.type===t})})},function(e,t,n){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(1342);e.exports=function(e){var t=function(t){var n=t.film,o=r.useMemo(function(){var e;return[n.year,"string"==typeof n.genres[0]?n.genres[0]:null===(e=n.genres[0])||void 0===e?void 0:e.name].filter(Boolean).join(", ")},[n.year,n.genres]);return r.createElement(e,_extends({caption:o},t))};return t.propTypes={film:o.shape({year:o.oneOfType([o.number,o.string]),genres:o.oneOfType([o.arrayOf(o.string),o.arrayOf(o.shape({id:o.number,name:o.string}))])})},t.displayName="WithCaption(".concat(a(e),")"),t}},function(e,t,n){"use strict";var r=n(28);e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.location.href,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=r.parse(t,!0);delete o.search,e.forEach(function(e){delete o.query[e]});var a=r.format(o);return n&&history.replaceState(history.state,document.title,a),a}},function(e,t,n){"use strict";e.exports=n(150)},function(e,t,n){var r=n(704).isIOS,o=function(e){var t=document.createElement("textarea");t.value=e,t.readOnly=!0,document.body.appendChild(t);try{!function(e){if(r(window.navigator.userAgent)){var t=document.createRange();t.selectNodeContents(e);var n=window.getSelection();n.removeAllRanges(),n.addRange(t),e.setSelectionRange(0,999999)}else e.select()}(t),document.execCommand("copy")}catch(e){}document.body.removeChild(t)};e.exports={copyTextToClipboard:function(e){return window.navigator.clipboard?window.navigator.clipboard.writeText(e):(o(e),Promise.resolve())}}},function(e,t,n){"use strict";var r=n(855);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(e))return e[r(0,e.length)]}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";e.exports={LIST_ID:"watch-online.person.filmography",METRIKA:{actions:{show:"blocks_person_show",click:"blocks_person_click"},carouselParamName:"online_carousel"}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(882),o=n(883);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{},r)},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),i=n(11),c=n(214);t.default=Object(a.connect)(null,{onAnalyticsEvent:c.b})(function(e){var t=e.children,n=e.onAnalyticsEvent,r=o.a.useCallback(function(e,t){n({event:e,zones:t.slice().reverse()})},[n]);return o.a.createElement(i.b,{onAnalyticsEvent:r},t)})},,,,,,,,,function(e,t,n){"use strict";var r=n(943),o=n(1143);e.exports=r(o)},function(e,t,n){var r=n(4),o=n(2),a=n(0),i=n(3);n(1186);var c="kinopoisk-go-modal-layout".concat("-partial-component"),s=r.lock(c),u=function(e){var t=e.body,n=e.bodyClassName,r=e.footer,i=e.footerClassName;return a.createElement(a.Fragment,null,t&&a.createElement("div",{className:o(s("body"),n)},t),r&&a.createElement("footer",{className:o(s("footer"),i)},r))};u.propTypes={body:i.node,bodyClassName:i.string,footer:i.node,footerClassName:i.string},e.exports=u},function(e,t,n){var r=n(5).connect,o=n(385),a=n(567),i=n(343),c=n(944),s=n(35),u=s.openAuthPopupEffect,l=s.logoutEffect,p=n(61).mdaAccountRecoveryEffect,f=n(31).header,d=n(186).openPassportConnector,m=n(62).selectCurrentSezamAccount,y=n(220).selectMdaUserMenuHintMode,_=n(19),h=_.getCurrentUserModel,g=_.hasPremiumStatus;e.exports=o(i,a,r(function(e){return{appWidth:e.page.appWidth,hasPremium:g(e),mdaUserMenuHintMode:y(e),passportPlusProfileUrl:e.common.passportPlusProfileUrl,currentSezamAccount:m(e),user:h(e)||{},yandexLinkMenuItemVisible:e.common.yandexLinkMenuItemVisible}},{loginClickMetrika:f.loginClick.bind(f),logoutEffect:l,mdaAccountRecoveryEffect:p,openAuthPopupEffect:u,openPassportConnector:d,userProfileClickMetrika:f.userProfileClick.bind(f)}))(c)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0);e.exports=function(e){return function(t){function ErrorCatcher(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ErrorCatcher);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,t=!(r=(e=_getPrototypeOf(ErrorCatcher)).call.apply(e,[this].concat(s)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i={error:null,errorInfo:null},(a="state")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var n,o,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ErrorCatcher,r.Component),n=ErrorCatcher,(o=[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t}),"object"===_typeof(window)&&"object"===_typeof(window.Sentry)&&window.Sentry.captureException(e,{extra:{reactErrorInfo:t}})}},{key:"render",value:function(){return this.state.error?null:r.createElement(e,this.props)}}])&&_defineProperties(n.prototype,o),a&&_defineProperties(n,a),ErrorCatcher}()}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(161),o=n(162),a=n(780);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{},r,{},o)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(4).lock("foxad"),a=n(2),i=n(5).connect,c=n(3),s=n(230),u=s.rumAdvRenderStartedEffect,l=s.rumAdvRenderedSuccess,p=s.rumAdvRenderedFailure,f=s.rumAdvDestroyed,d=n(1374);n(1375);var m=function(e){function Adfox(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Adfox),(t=_possibleConstructorReturn(this,_getPrototypeOf(Adfox).call(this,e))).bannerRef=r.createRef(),t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Adfox,d),t=Adfox,(n=[{key:"componentDidMount",value:function(){this._updateBanner()}},{key:"_updateBanner",value:function(){var e=this,t=this.state.containerId,n=this.props,r=n.ADFOX_OWNER_ID,o=n.params,a=n.onRender,i=n.onError,c=n.onStub,s=n.rumPlaceId,u=n.rumBannerId,l=n.rumOnRenderStart,p=n.rumOnRenderSuccess,f=n.rumOnRenderFailure;s&&l({placeId:s,bannerId:u}),window.adfoxAsyncParams=window.adfoxAsyncParams||[],window.adfoxAsyncParams.push({element:this.bannerRef.current,params:o,ownerId:r,onRender:function(){a&&a(e.bannerRef.current),s&&p({placeId:s,bannerId:u}),window.advCallbacks||(window.advCallbacks={});var n=window.advCallbacks[t];n&&n.onRender?n.onRender():window.advCallbacks[t]={isRendered:!0}},onStub:function(){c&&c(),window.advCallbacks||(window.advCallbacks={});var e=window.advCallbacks[t];e&&e.onStub?e.onStub():window.advCallbacks[t]={isRendered:!1,isError:!1}},onError:function(e){i&&i(e),s&&f({placeId:s,bannerId:u}),window.advCallbacks||(window.advCallbacks={});var n=window.advCallbacks[t];n&&n.onError?n.onError():window.advCallbacks[t]={isRendered:!1,isError:!0}}})}},{key:"componentDidUpdate",value:function(){this._updateBanner()}},{key:"componentWillUnmount",value:function(){_get(_getPrototypeOf(Adfox.prototype),"componentWillUnmount",this).call(this);var e=this.props,t=e.rumPlaceId,n=e.rumOnDestroy,r=e.rumBannerId;t&&n({placeId:t,bannerId:r})}},{key:"render",value:function(){return r.createElement("div",{className:a(o({theme:this.props.theme}),this.props.className)},r.createElement("div",{ref:this.bannerRef,className:o("container")}))}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),Adfox}();m.defaultProps=Object.assign({theme:"default",ADFOX_OWNER_ID:251518,name:"adfox"},d.defaultProps),m.contextTypes={scriptNonce:c.string},m.propTypes=Object.assign({className:c.string,params:c.object.isRequired,theme:c.string,ADFOX_OWNER_ID:c.number.isRequired,onRender:c.func,onError:c.func,onStub:c.func,rumPlaceId:c.string,rumBannerId:c.string,rumOnRenderStart:c.func.isRequired,rumOnRenderSuccess:c.func.isRequired,rumOnRenderFailure:c.func.isRequired,rumOnDestroy:c.func.isRequired},d.propTypes),e.exports=i(null,{rumOnRenderStart:u,rumOnRenderSuccess:l,rumOnRenderFailure:p,rumOnDestroy:f})(m)},function(e,t,n){e.exports=n(1333)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(3),o=n(0),a=n(4).lock("more-carousel-snippet"),i=n(2),c=n(491),s=n(117);n(1427);var u=function(e){function MoreCarouselSnippet(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MoreCarouselSnippet),_possibleConstructorReturn(this,_getPrototypeOf(MoreCarouselSnippet).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MoreCarouselSnippet,s),t=MoreCarouselSnippet,(n=[{key:"render",value:function(){var e=this.props,t=e.url,n=e.text,r=e.onClick,s=e.mods,u=e.color,l=e.target,p=e.arrowButtonClassName,f=t?"a":"div";return o.createElement("div",{className:this.getClassName(),onClick:r},o.createElement(f,{href:t,className:a("inner"),target:l},o.createElement("div",{className:a("inner-content")},o.createElement(c,{className:i(a("button"),p),text:n,animation:!1,mods:s,color:u}))))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),MoreCarouselSnippet}();u.propTypes={url:r.string.isRequired,color:r.oneOf(["white"]),onClick:r.func,target:r.oneOf(["_blank","_self","_parent","_top"])},u.defaultProps={url:r.string.isRequired,onClick:function(){}},e.exports=u},function(e,t){e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.maximumFractionDigits,r=void 0===n?2:n,o=t.minimumFractionDigits,a=t.fractionDelimiter,i=void 0===a?",":a,c=Number(e);return isNaN(c)?e:c.toLocaleString("en-US",{maximumFractionDigits:r,minimumFractionDigits:o}).replace(/,/g," ").replace(".",i)}},,function(e,t){var n=function(e){return e.gift.paymentForm};e.exports={selectPage:function(e){return e.gift.page},selectLandingData:function(e){return e.gift.landing},selectPaymentFormData:n,selectSuccessData:function(e){return e.gift.success},selectOrderId:function(e){return n(e).orderId},selectPromocode:function(e){return e.gift.promocode}}},,function(e,t,n){"use strict";e.exports={OWNER_ID:251518,PREFIX:"foxad",CONTROLLER_PATH:"Ya.adfoxCode"}},function(e,t){e.exports={showTrailerEffect:function(e){return{type:"trailer/SHOW",payload:{trailerId:e.trailerId,filmId:e.filmId}}},SHOW_TRAILER_EFFECT:"trailer/SHOW"}},function(e,t){e.exports={MIN_RATING_FOR_COLLAPSED:-10,COMMENTS_CHUNK_SIZE:200,VOTE_TYPES:{LIKE:"like",DISLIKE:"dislike"},SCROLL_TO_OFFSET:-18}},function(e,t){e.exports={SCHEDULE_WARNING:{noSchedule:"no_schedule",noScheduleByDate:"no_schedule_by_date",failedLoadSchedule:"failed_load_schedule",noScheduleByFilters:"no_schedule_by_filters"}}},function(e,t){var n,r,o;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a={item:"item",group:"group"},i=(_defineProperty(n={},a.item,{availableOnline:"available_online",kinopoiskWithAmediatekaSubscription:"kinopoisk_with_amediateka_subscription",kinopoiskSubscription:"kinopoisk_subscription",yandexPlusSubscription:"yandex_plus_subscription",russian:"russian",foreign:"foreign",highRated:"high_rated",films:"films",serials:"serials",userAvailable:"user_available"}),_defineProperty(n,a.group,{onlines:"onlines"}),n),c=i[a.item],s=i[a.group];e.exports={order:[{type:a.group,key:s.onlines,items:[c.availableOnline,c.kinopoiskWithAmediatekaSubscription,c.kinopoiskSubscription,c.yandexPlusSubscription]},{type:a.item,key:c.films},{type:a.item,key:c.serials},{type:a.item,key:c.highRated},{type:a.item,key:c.russian},{type:a.item,key:c.foreign}],names:(o={},_defineProperty(o,a.item,(r={},_defineProperty(r,c.films,"Фильмы"),_defineProperty(r,c.serials,"Сериалы"),_defineProperty(r,c.russian,"Российские"),_defineProperty(r,c.yandexPlusSubscription,"По подписке Яндекс.Плюс"),_defineProperty(r,c.highRated,"С высоким рейтингом"),_defineProperty(r,c.foreign,"Зарубежные"),_defineProperty(r,c.availableOnline,"Все"),_defineProperty(r,c.kinopoiskWithAmediatekaSubscription,"По подписке КиноПоиск+Амедиатека"),_defineProperty(r,c.kinopoiskSubscription,"По подписке КиноПоиск"),_defineProperty(r,c.userAvailable,"Доступные мне"),r)),_defineProperty(o,a.group,_defineProperty({},s.onlines,"Смотреть онлайн")),o),types:a,keys:i,itemKeys:c,groupKeys:s}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=function(e){function DeadpoolDialogRenderWrapper(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogRenderWrapper),_possibleConstructorReturn(this,_getPrototypeOf(DeadpoolDialogRenderWrapper).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogRenderWrapper,r.Component),t=DeadpoolDialogRenderWrapper,(n=[{key:"componentDidMount",value:function(){this.context.dispatch&&this.props.didMountMetrikaAction&&this.context.dispatch(this.props.didMountMetrikaAction())}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.props.children)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),DeadpoolDialogRenderWrapper}();a.propTypes={didMountMetrikaAction:o.func,children:o.node},a.contextTypes={dispatch:o.func},e.exports=a},function(e,t,n){var r=n(0),o=n(3),a=n(2),i=n(4).lock("nameplate-base"),c=n(250),s=c.FORM,u=c.SIZE;n(1359);var l=function(e){var t=e.className,n=e.text,o=e.icon,c=e.form,s=e.size;return r.createElement("div",{className:i({form:c,size:s})},r.createElement("div",{className:a(i("label",{placeholder:!0}),t)},r.createElement("span",{className:a(i("text"),t)},n)),r.createElement("div",{className:a(i("label",{visible:!0}),t)},r.createElement("span",{className:a(i("text"),t)},n)),o&&r.createElement("div",{className:a(i("icon"),t)},o))};l.propTypes={className:o.string,form:o.oneOf(Object.values(s)).isRequired,size:o.oneOf(Object.values(u)).isRequired,icon:o.node,text:o.string},e.exports=l},function(e,t){e.exports={VALID:"valid",INVALID:"invalid",NOT_VALIDATED:"notValidated",QUERY_PARAMS:{LINK_YANDEX:"link-yandex",SRC:"src",TID:"tid",REG:"reg",AUTH_YANDEX:"auth-yandex",RET_PATH:"retPath",WELCOME_SCREEN:"welcome-screen",THANK_YOU_UI:"t-y-u"},THANK_YOU_UI_MODES:{DEFAULT:"default",CODE:"code"}}},function(e,t,n){"use strict";var r=n(6).createSelector,o=n(592),a=o.WEB_VIEW_ALLOWED_BODY_COMPONENT_TYPES,i=o.ALLOWED_BODY_COMPONENT_TYPES,c=n(698).canEdit,s=n(19).getUserState,u=function(e){return e.models.plainPosts},l=function(e,t){return u(e)[t]},p=function(e){return e.page.postId},f=r([function(e){return e.page.pinnedPosts},u],function(e,t){return e.map(function(e){return t[e]})}),d=r([function(e){return e.page.readAlsoPosts},u],function(e,t){return e.map(function(e){return t[e]})}),m=r(function(e){return l(e,p(e))},function(e){return e.url}),y=r(l,s,function(e,t){return c(e,t)});e.exports={getPostModels:u,getPostModel:l,getPinnedPosts:f,getReadAlsoPosts:d,getPagePostId:p,getPagePostUrl:m,getIsAdministrationAvailable:y,selectAllowedBodyComponentsTypes:function(e){return e.page.isWebview?a:i}}},function(e,t,n){"use strict";var r={},o=2,a=!1;function onScroll(e){var t=e.currentPage,n=void 0===t?1:t,a=e.disableScroll,i=void 0!==a&&a;document.documentElement.scrollHeight-2*window.innerHeight>window.pageYOffset||n+1!==o||i||(o++,Object.keys(r).forEach(function(e){(0,r[e])()}))}e.exports={onReachBottom:function(e,t){var n=Math.random();return r[n]=e,function(e){var t=Object.keys(r).length;a&&!t?(window.removeEventListener("scroll",function(){return onScroll(e)}),a=!1):!a&&t&&(window.addEventListener("scroll",function(){return onScroll(e)}),a=!0)}(t),function(){delete r[n]}},onPaginationChanged:function(e){var t=e.currentPage;o=t+1}}},,,,function(e,t){var n;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={INNER_HTML:"InnerHtml",IMAGE:"Image",FACT:"Fact",TRAILER:"Trailer",FILM_OBJECT_CARD:"FilmObjectCard",PERSON_OBJECT_CARD:"PersonObjectCard",EMBED:"Embed",SETKA_INNER_HTML:"SetkaInnerHtml"},o=Object.values(r).reduce(function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,_defineProperty({},t,!0))},{}),a=(_defineProperty(n={},r.INNER_HTML,!0),_defineProperty(n,r.SETKA_INNER_HTML,!0),_defineProperty(n,r.IMAGE,!0),_defineProperty(n,r.FACT,!0),_defineProperty(n,r.TRAILER,!0),_defineProperty(n,r.EMBED,!0),n);e.exports={BODY_COMPONENT_TYPES:r,WEB_VIEW_ALLOWED_BODY_COMPONENT_TYPES:a,ALLOWED_BODY_COMPONENT_TYPES:o}},function(e,t,n){"use strict";e.exports={YA_PLUS_SUBSCRIPTION_PROMO:"yandex-plus.subscription-promo.desktop",PREMIUM_SUBSCRIPTION_PROMO:"premium.watch-films.desktop",USER_SUBSCRIPTION:{ROOT:"user-subscription",CANCEL_MODAL:"user-subscription.cancel-modal",CANCELED_MODAL:"user-subscription.canceled-modal",CONFIRM_MODAL:"user-subscription.confirm-modal",CONFIRM_SWITCH_BACK_MODAL:"user-subscription.confirm-switch-back-modal",SWITCHED_BACK_MODAL:"user-subscription.switched-back-modal"},WATCH_ONLINE_SLIDER_BUNKER_ITEMS:"watch-online.slider-bunker-items.desktop",WATCH_ONLINE_LIST_PAGE_BUNKER_ITEMS:"watch-online.list-page-bunker-items.desktop",WATCH_ONLINE_A_CHANNELS:"watch-online.a-channels",GIFT_PAGE:"gift-page",PROMO_LOGO:"promo-logo"}},,function(e,t,n){function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=regeneratorRuntime.mark(rateFilm),o=regeneratorRuntime.mark(rateFilmRollback),a=regeneratorRuntime.mark(rateFilmRequest),i=regeneratorRuntime.mark(rateFilmWatcher),c=regeneratorRuntime.mark(setFilmFolder),s=regeneratorRuntime.mark(setFilmFolderRollback),u=regeneratorRuntime.mark(setFilmFolderRequest),l=regeneratorRuntime.mark(setFilmFolderWatcher),p=regeneratorRuntime.mark(getFilmFoldersWatcher);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=n(1),d=f.put,m=f.putResolve,y=f.call,_=f.takeEvery,h=f.select,g=n(29).takeOptimistic,b=n(29).authRequired,E=n(122),v=n(227),O=v.selectFilmFolders,P=v.selectFilmUserData,S=n(454).selectFolders,T=n(17),k=T.FILM_FOLDER_OPERATIONS,C=T.FILM_FOLDER_ROLLBACKS,w=T.WATCHLIST_FOLDER,I=n(25).sendRequestEffect,A=n(190),x=A.RATE_FILM_EFFECT,R=A.SET_FILM_FOLDER_EFFECT,N=A.GET_FILM_FOLDERS_EFFECT,j=n(92).ENTITIES_TYPES,D=n(93).patchMap,M="Что-то пошло не так, попробуйте снова",L=200;function rateFilm(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,y(b);case 3:return n=t.filmId,o=t.rating,r.next=6,h(P,n);case 6:return a=r.sent,i={},i=o>0?{rating:t.rating,isWatched:!0,isPlannedToWatch:!1}:0===o?{rating:0,isWatched:!0,isPlannedToWatch:!1}:{rating:null,isWatched:!1},r.next=11,d(D(j.film,{userData:_defineProperty({},n,_objectSpread({},a,{},i))}));case 11:case"end":return r.stop()}},r)}function rateFilmRollback(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.rollbackRating,r=t.filmId,o.next=4,y([E,E.showNotification],{text:M});case 4:return o.next=6,y(rateFilm,{payload:{rating:n,filmId:r}});case 6:case"end":return o.stop()}},o)}function rateFilmRequest(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,n=t.filmId,r=t.rating,o.next=3,m(I({url:"/entities/film/".concat(n,"/rate/"),method:"post",params:{body:{rating:r}}}));case 3:case"end":return o.stop()}},a)}function rateFilmWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(L,"filmId",x,rateFilm,rateFilmRequest,rateFilmRollback);case 2:case"end":return e.stop()}},i)}function setFilmFolder(e){var t,n,r,o,a,i,s;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.next=3,y(b);case 3:return n=t.folderId,r=t.operation,o=t.filmId,c.next=6,h(O,o);case 6:return a=c.sent,c.next=9,h(P,o);case 9:i=c.sent,s={},c.t0=r,c.next=c.t0===k.add?14:c.t0===k.remove?18:22;break;case 14:return n===w&&(s.isPlannedToWatch=!0),s.folderIds=[].concat(_toConsumableArray(a),[n]),s.isInFolders=!0,c.abrupt("break",23);case 18:return s.folderIds=a.filter(function(e,t){return a.indexOf(n)!==t}),n===w&&(s.isPlannedToWatch=!1),s.folderIds.length||(s.isInFolders=!1),c.abrupt("break",23);case 22:return c.abrupt("return");case 23:return c.next=25,d(D(j.film,{userData:_defineProperty({},o,_objectSpread({},i,{},s))}));case 25:case"end":return c.stop()}},c)}function setFilmFolderRollback(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.operation,r.next=4,y([E,E.showNotification],{text:M});case 4:return r.next=6,y(setFilmFolder,{payload:_objectSpread({},t,{operation:C[n]})});case 6:case"end":return r.stop()}},s)}function setFilmFolderRequest(e){var t,n,r,o,a,i,c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.filmId,r=t.folderId,o=t.operation,s.next=3,m(I({url:"/entities/film/".concat(n,"/set-folder/"),method:"post",params:{body:{filmId:n,folderId:r,operation:o}}}));case 3:return s.next=5,h(S);case 5:if(a=s.sent,i=a.find(function(e){return e.id===r}),c=i&&"«".concat(i.name,"»"),o!==k.add){s.next=13;break}return s.next=11,y([E,E.showNotification],{text:"Фильм добавлен в папку ".concat(c)});case 11:s.next=16;break;case 13:if(o!==k.remove){s.next=16;break}return s.next=16,y([E,E.showNotification],{text:"Фильм удалён из папки ".concat(c)});case 16:case"end":return s.stop()}},u)}function setFilmFolderWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(L,"filmId",R,setFilmFolder,setFilmFolderRequest,setFilmFolderRollback);case 2:case"end":return e.stop()}},l)}function getFilmFoldersWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(N,regeneratorRuntime.mark(function getFilmFoldersSaga(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload.filmId,o.next=3,y(b);case 3:return o.next=5,h(function(e){return P(e,t)});case 5:return n=o.sent,o.prev=6,o.next=9,m(I({url:"/entities/film/".concat(t,"/get-folders/"),method:"get"}));case 9:return r=o.sent,o.next=12,d(D(j.film,{userData:_defineProperty({},t,_objectSpread({},n,{folderIds:r.map(function(e){return e.id})}))}));case 12:o.next=17;break;case 14:return o.prev=14,o.t0=o.catch(6),o.abrupt("return");case 17:case"end":return o.stop()}},getFilmFoldersSaga,null,[[6,14]])}));case 2:case"end":return e.stop()}},p)}e.exports=[rateFilmWatcher,setFilmFolderWatcher,getFilmFoldersWatcher]},function(e,t,n){"use strict";var r=n(53),o=n(886);e.exports={getFormatedDate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.defaultFormatUtc,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r(e),a=o.isValid()?o:r();return a.isValid()?(a.startOf(n.startOf),a.endOf(n.endOf),a.add(n.add),a.subtract(n.subtract),a.format(t)):null},winToUtf8:function(e){for(var t,n="",r=unescape("%u0402%u0403%u201A%u0453%u201E%u2026%u2020%u2021%u20AC%u2030%u0409%u2039%u040A%u040C%u040B%u040F%u0452%u2018%u2019%u201C%u201D%u2022%u2013%u2014%u0000%u2122%u0459%u203A%u045A%u045C%u045B%u045F%u00A0%u040E%u045E%u0408%u00A4%u0490%u00A6%u00A7%u0401%u00A9%u0404%u00AB%u00AC%u00AD%u00AE%u0407%u00B0%u00B1%u0406%u0456%u0491%u00B5%u00B6%u00B7%u0451%u2116%u0454%u00BB%u0458%u0405%u0455%u0457"),o=0;o<e.length;o++)n+=(t=e.charCodeAt(o))>=192&&t<=255?String.fromCharCode(t-192+1040):t>=128&&t<=191?r.charAt(t-128):String.fromCharCode(t);return n},trimmed:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,n,"\n")},oneline:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return o(e,n," ")}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(650),o=n(665);e.exports=[r,o]},function(e,t,n){var r=regeneratorRuntime.mark(todayInCinemaFilmClickWatcher),o=n(1).takeLatest,a=n(280).MAIN_PAGE_TODAY_IN_CINEMA_FILM_CLICK_EFFECT,i=n(427).todayInCinemaFilmClickSaga;function todayInCinemaFilmClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a,i);case 2:case"end":return e.stop()}},r)}e.exports=todayInCinemaFilmClickWatcher},function(e,t,n){"use strict";e.exports=function(e){return function(t,n){var r=t.counterNames,o=void 0===r?["kp1"]:r,a=t.device,i=void 0===a?"":a,c=n.userSource,s=n.userId,u=["auth","logged-in"];if(s){u.push("yes");var l=c||"native";"native"===l?u.push("native","yes"):u.push("social",l),u.push(i,s)}else u.push("no");o.forEach(function(t){return e.params(t,u)})}}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(e,t){var n=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"touch"===t&&e.params("kp1",["special_deadpool"].concat(_toConsumableArray(n))),e.params(["special_deadpool"].concat(_toConsumableArray(n)))},r=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").toLowerCase().replace(/\?$/gi,"").replace(/[\s]{2,}/gi," ").trim()};return{dialogMessages:function(e){var t=e.userText,o=void 0===t?"":t,a=e.aliceText,i=void 0===a?"":a,c=e.index;n(["dialog_log",r(i),r(o),c])},teaserShow:function(){n(["teaser_show"])},dialogShow:function(){n(["dialog_show"])},ticketButtonShow:function(){n(["ticket_button_show"])},ticketButtonClick:function(){n(["ticket_button_click"])},trailerButtonShow:function(){n(["trailer_button_show"])},trailerButtonClick:function(){n(["trailer_button_click"])}}}},function(e,t,n){"use strict";e.exports=function(e){return{_getSpecifiedPageParam:function(){var t=e.getPathTemplate();if("/"===t)return"blocks_main_click";if("film/id"===t)return"blocks_film_click";return["film/id/afisha/city/id","map/city/id/film/id","map/film/id"].includes(t)?"blocks_afisha_click":null},_getHeaderParams:function(){return[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desktop_header_click","header"]},_headerLinkClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).headerFresh,o=void 0!==r&&r,a=this._getSpecifiedPageParam();a&&e.params(this._getHeaderParams(a).concat(t,o?e.getPathTemplate():[],n)),e.params(this._getHeaderParams().concat(t,e.getPathTemplate(),n))},menuClick:function(e){this._headerLinkClick(["main_menu"].concat(e))},freshMenuClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;this._headerLinkClick(["main_menu"].concat(e),t,{headerFresh:!0})},searchStart:function(e,t){this._suggestParams(["kp1_suggest","search_start",e],{theme:t})},suggestSelect:function(e){var t=e.metrikaRequestId,n=e.value,r=e.itemIndex,o=e.item,a=e.time,i=e.theme;this._suggestParams(["kp1_suggest","suggest_click",t,n,n.length,r,o.id,o.dataType,o.metrikaUrl,a],{theme:i})},_suggestParams:function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).theme;n&&t.push(n),e.params(t)},searchButtonClick:function(e){var t=e.metrikaRequestId,n=e.value,r=e.theme;this._suggestParams(["kp1_suggest","button_click",t,n,n.length],{theme:r})},promolinkClick:function(){this._headerLinkClick("chance")},advancedSearchClick:function(){this._headerLinkClick("advanced_search")},whatLookingForClick:function(){this._headerLinkClick("top")},loginClick:function(){this._headerLinkClick(["no_login","login"])},joinClick:function(){this._headerLinkClick(["no_login","join"])},registrationClick:function(){this._headerLinkClick(["no_login","register"])},myKpClick:function(){this._headerLinkClick(["login","my_kp"])},profileClick:function(){this._headerLinkClick(["login","profile"])},logoutClick:function(){this._headerLinkClick(["login","logout"])},messagesClick:function(){this._headerLinkClick(["login","messages"])},logoClick:function(){this._headerLinkClick("logo")},chartClick:function(){this._headerLinkClick("chart")},userProfileClick:function(e){this._headerLinkClick(["login","profile"].concat(e))}}}},function(e,t,n){"use strict";e.exports=function(e){return{_getBaseParam:function(){return"desktop_header_explanation"},_iconParams:function(t){var n=this._getBaseParam();e.params([n,"spark"].concat(t))},_popupParams:function(t){var n=this._getBaseParam();e.params([n,"popup"].concat(t))},iconShow:function(){this._iconParams("show")},iconClick:function(){this._iconParams("click")},popupShow:function(){this._popupParams("show")},popupLinkClick:function(){this._popupParams("click_link")},popupButtonClick:function(){this._popupParams("click_button")}}}},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=n(36),o=n(64).COOKIE_USER_SOURCE_NAME;e.exports=function(e,t){var n=t.authParamsMetrika;return{pageGoal:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n({counterNames:[void 0,"ott"],device:"kp1"},{userSource:r.get(o),userId:e.userId})},onlineSelectionShow:function(t){var n=t.category,r=t.selectionIndex,o=t.selectionId,a=t.selectionTitle;e.params(["OnlineSelectionShow",n,a,o,r]),e.params("ott",["А:SelectionShow",n,a,o,r])},onlineSelectionItemClick:function(t){var n=t.category,r=t.selectionTitle,o=t.selectionId,a=t.selectionIndex,i=t.filmId,c=t.filmIndex;e.params(["OnlineSelectionItemClick",n,i,c,r,o,a]),e.params("ott",["А:SelectionItemClick",n,i,c,r,o,a])},tryPlusClick:function(){e.reachGoal("ott","SUBSCRIPTION_LANDING_CLICK")},purchaseStart:function(t){e.reachGoal("ott",t?"PURCHASE_CLICK_AUTH_YES":"PURCHASE_CLICK_AUTH_NO"),e.reachGoal("ott","PURCHASE_CLICK")},purchaseComplete:function(t){var n=t.fromBlock,r=t.positionNumber,o=t.purchaseId,a=t.monetizationModel,i=t.userId,c=t.selectionIndex,s=t.selectionTitle,u=t.selectionId;e.reachGoal("ott","PURCHASE_COMPLETE");var l=["P:PayComplete",n,o,a,i];c&&"none"!==c&&(l.push(c),l.push(s),l.push(u),l.push(r)),e.params("ott",l)},tryPremiumButtonRendered:function(){e.params("ott",["try_subscription","show","kinopoisk_subscription","premium"])},tryPremiumButtonClick:function(){e.params("ott",["try_subscription","click","kinopoisk_subscription","premium"])},filmToWatchButtonClick:function(t){var n=t.isToWatch,r=t.isTouch,o=t.filmId,a=t.originalUrl,i=void 0===a?"":a,c=t.blockName,s=void 0===c?"common":c,u=_slicedToArray(i.split("/"),2)[1],l=["user_action_click","await",n?"remove":"add",r?"kp_touch":"kp_desktop",u,s,o];r?e.params("kp1",l):e.params(l)},sliderExtraItemClick:function(){},purchaseBasicSubscriptionFromLandingStart:function(){e.reachGoal("ott","SUBSCRIPTION_BUTTON_CLICK_LANDING_BASIC")},purchaseBasicSubscriptionFromProfileStart:function(){e.reachGoal("ott","SUBSCRIPTION_BUTTON_CLICK_PROFILE_BASIC")},purchaseBasicSubscriptionComplete:function(){e.reachGoal("ott","SUBSCRIPTION_PURCHASE_SUCCESS_BASIC")},purchaseResumptionClick:function(){e.reachGoal("default","SUBSCRIPTION_RESUMPTION_CLICK")},purchaseResumptionSuccess:function(){e.reachGoal("default","SUBSCRIPTION_RESUMPTION_SUCCESS")}}}},function(e,t){function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(e,t){var n=function(n){var r="account_link_popup";t?e.params("kp1",[r].concat(_toConsumableArray(n))):e.params([r].concat(_toConsumableArray(n)))};return{notNowButtonClick:function(){n(["not_now_click"])},formShown:function(e){n(["show",e])},formClosed:function(e){n(["close",e])},yandexAuthorized:function(e){n(["passport_authorized",e?"yes":"no"])},hasEmailOnReg:function(e){n(["registration_has_email",Boolean(e)?"yes":"no"])},loginViaYandexButtonClick:function(){n(["login_via_yandex_click"])},registerViaYandexButtonClick:function(){n(["register_via_yandex_click"])},registerViaYandexError:function(){n(["register_via_yandex_backend_error"])},loginViaYandexError:function(){n(["login_via_yandex_backend_error"])},loginOtherWayClick:function(){n(["login_other_way_click"])},yandexAuthButtonClick:function(){n(["yandex_auth_button_click"])},yandexAuthBackendError:function(){n(["passport_backend_error"])},rebindButtonClick:function(){n(["rebind_button_click"])},leaveUnbindedClick:function(){n(["leave_unbinded_button_click"])},supportTicketCreatedOkButtonClick:function(){n(["support_ticket_created_ok_button_click"])}}}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(36),o=n(310),a=n(245),i=a.YANDEX_PLUS_METRIKA_SENT_COOKIE_EXPIRATION,c=a.YANDEX_PLUS_METRIKA_SENT_COOKIE_NAME;e.exports=function(e,t,n){var a="".concat(c).concat(n?"__ott":""),s=function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auth_yandex";n?e.params("ott",[o].concat(_toConsumableArray(r))):t?e.params("kp1",[o].concat(_toConsumableArray(r))):e.params([o].concat(_toConsumableArray(r)))},u=function(e,t,n){var r=[];return e?r.push("kp_auth",e):r.push("no_kp_auth"),t?(r.push("ya_auth",t),n?r.push("plus_enabled"):r.push("plus_disabled")):r.push("no_ya_auth"),r};return{sendForumDataMetrika:function(e){var t=e&&e.integrations&&e.integrations.find(function(e){return"yandex"===e.service});s(u(e&&e.id,t&&t.uid,t&&t.subscription),"forum_data")},sendPlusMetrika:function(e){r.get(a)||o.defaultAccount().then(function(t){s(u(e,t&&t.uid,t&&t.attributes.has_plus)),r.set(a,!0,{expires:i})})}}}},function(e,t){function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(e,t){var n=function(n){var r="plus_enable";t?e.params("kp1",[r].concat(_toConsumableArray(n))):e.params([r].concat(_toConsumableArray(n)))},r=function(e,t,r){var o=[];return t?(o.push("yes"),o.push(t)):o.push("no"),n(["show",e,"logged_in"].concat(o,["page",r]))},o=function(e,t){return n(["click",e,t])};return{popupShown:function(e,t){return r("popup",e,t)},boxShown:function(e,t){return r("bottom_box",e,t)},popupLinkButton:function(){return o("popup","link_button")},popupLaterButton:function(){return o("popup","later_button")},popupCloseClick:function(){return o("popup","close_click")},boxCloseClick:function(){return o("bottom_box","close_click")},boxClick:function(){return o("bottom_box","box_click")}}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r={TRAILER:"trailer",TICKETS:"tickets",TOGGLE_WATCH:"await",WATCH_ONLINE:"watch_online",GO_TO_FILM_PAGE:"go_to_film_page"},o={SUBSCRIBE:"subscribe_to_actor",GO_TO_ACTOR_PAGE:"go_to_actor_page"},a="see_also",i="main_today";e.exports=function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(arguments.length>1?arguments[1]:void 0)?e.params("kp1",t):e.params(t)},n=function(e){return e?"auth_yes":"auth_no"},c=function(e){return e?"kp_touch":"kp_desktop"},s=function(e){return e?"title":"poster"},u=function(e){var n=e.blockName,r=e.cardIndex,o=e.postId,a=e.postType,i=e.isTouch,s=["media_card_click",n,r,c(i),a,o];t(s,i)},l=function(e){var n=e.blockName,r=e.cardsCount,o=e.isTouch,a=["media_card_show",n,r,c(o)];t(a,o)};return{filmObjectCardToWatchButtonClick:function(e){var o=e.isToWatch,a=e.isTouch,i=e.postType,s=e.filmId,u=e.isAuthorized,l=["user_action_click",r.TOGGLE_WATCH,o?"remove":"add",c(a),i,"object_card_film",s,n(u)];t(l,a)},filmObjectCardWatchOnlineButtonClick:function(e){var o=e.isTouch,a=e.postType,i=e.filmId,s=e.isAuthorized,u=["user_action_click",r.WATCH_ONLINE,"common",c(o),a,"object_card_film",i,n(s)];t(u,o)},filmObjectCardTicketsButtonClick:function(e){var o=e.isTouch,a=e.postType,i=e.filmId,s=e.isAuthorized,u=["user_action_click",r.TICKETS,"common",c(o),a,"object_card_film",i,n(s)];t(u,o)},filmObjectCardTrailerButtonClick:function(e){var o=e.isTouch,a=e.postType,i=e.filmId,s=e.isAuthorized,u=["user_action_click",r.TRAILER,"common",c(o),a,"object_card_film",i,n(s)];t(u,o)},filmObjectCardShow:function(e){var o=e.isTouch,a=e.hasOnline,i=e.hasTrailer,s=e.hasTickets,u=e.postType,l=e.filmId,p=e.isAuthorized,f=["user_action_show",[r.TOGGLE_WATCH,a&&r.WATCH_ONLINE,s&&r.TICKETS,i&&r.TRAILER].filter(Boolean).join(","),"common",c(o),u,"object_card_film",l,n(p)];t(f,o)},filmObjectGoToFilmPage:function(e){var o=e.isTouch,a=e.isTitle,i=e.postType,u=e.filmId,l=e.isAuthorized,p=["user_action_click",r.GO_TO_FILM_PAGE,s(a),c(o),i,"object_card_film",u,n(l)];t(p,o)},personObjectCardShow:function(e){var r=e.isTouch,a=e.postType,i=e.personId,s=e.isAuthorized,u=["user_action_show",[o.SUBSCRIBE].filter(Boolean).join(","),"common",c(r),a,"object_card_name",i,n(s)];t(u,r)},personObjectCardSubscribeButtonClick:function(e){var r=e.isTouch,a=e.postType,i=e.personId,s=e.isAuthorized,u=["user_action_click",o.SUBSCRIBE,"common",c(r),a,"object_card_name",i,n(s)];t(u,r)},personObjectGoToActorPage:function(e){var r=e.isTouch,a=e.isTitle,i=e.postType,u=e.personId,l=e.isAuthorized,p=["user_action_click",o.GO_TO_ACTOR_PAGE,s(a),c(r),i,"object_card_name",u,n(l)];t(p,r)},postViewed:function(e){var n=e.id,r=e.type,o=e.subtype,a=e.time,i=e.isTouch,c=["editorial_scroll","text",r,o,n,(a/1e3).toFixed(2)];t(c,i)},seeAlsoPostCardClick:function(e){return u(_objectSpread({},e,{blockName:a}))},seeAlsoPostCardShow:function(e){return l(_objectSpread({},e,{blockName:a}))},mainTodayPostCardClick:function(e){return u(_objectSpread({},e,{blockName:i}))},mainTodayPostCardShow:function(e){return l(_objectSpread({},e,{blockName:i}))},watchInCinemaShow:function(e){var n=e.isTouch,r=e.postType,o=e.filmsIds,a=void 0===o?[]:o,i=["now_in_cinema_card_show",c(n),r,a.length];t(i,n)},watchInCinemaItemClick:function(e){var n=e.isTouch,r=e.postType,o=e.postId,a=e.target,i=["now_in_cinema_card_click",c(n),r,a,o];t(i,n)}}}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(311).PLATFORMS,o=[1,2,3];e.exports=function(e,t){var n=t.platform;return function(t){var a=t.isFeatured,i=t.type,c=t.position,s=t.filmId,u=t.place;return o.includes(c)?function(t){var o="featuring";switch(n){case r.touch:e.params("kp1",[o,n].concat(_toConsumableArray(t)));break;case r.desktop:e.params([o,n].concat(_toConsumableArray(t)))}}([a?"on":"off",i,c,s,u]):null}}},function(e,t,n){"use strict";e.exports=function(e){return{applyPromocodeButtonClick:function(){e.reachGoal("promocode","ACTIVATE_BUTTON_CLICK")},authFormOpen:function(){e.reachGoal("promocode","AUTH_FORM_OPEN")},authSuccess:function(){e.reachGoal("promocode","AUTH_LOGIN_SUCCESS")},trustFormOpen:function(){e.reachGoal("promocode","TRUST_FORM_OPEN")},trustFormLinkSuccess:function(){e.reachGoal("promocode","CARD_LINK_SUCCESS")},subscriptionPurchaseSuccess:function(){e.reachGoal("promocode","SUBSCRIPTION_PURCHASE_SUCCESS")}}}},function(e,t){e.exports=function(e){return{visitPageNotAuth:function(){e.reachGoal("ott-smarttv","SMART_DEVICE_AUTH_NO")},visitPageAuth:function(){e.reachGoal("ott-smarttv","SMART_DEVICE_AUTH_YES")},authClick:function(){e.reachGoal("ott-smarttv","SMART_AUTH")},codeSent:function(){e.reachGoal("ott-smarttv","SMART_CODE")},success:function(){e.reachGoal("ott-smarttv","SMART_SUCCESS")},codeLinked:function(t,n){e.params("ott-smarttv",["A:CodeLinked",t,n])}}}},function(e,t){function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}e.exports=function(e,t){var n=function(n){var r="post_acc_link";t?e.params("kp1",[r].concat(_toConsumableArray(n))):e.params([r].concat(_toConsumableArray(n)))};return{recoveryUiMain:function(){n(["main"])},recoveryUiRebind:function(){n(["rebind"])},recoveryUiConfirm:function(){n(["confirm"])},recoveryUiSuccess:function(){n(["success"])},recoveryUiError:function(){n(["error"])}}}},function(e,t){e.exports={WATCH_IN_CINEMA_POST_TYPE:"/",FEATURING_TYPE_CLICK:"filmClick",FEATURING_TYPE_SHOW:"show",FEATURING_PLACE:"home_today"}},function(e,t,n){var r=regeneratorRuntime.mark(todayInCinemaFilmShowWatcher),o=n(1).takeLatest,a=n(280).MAIN_PAGE_TODAY_IN_CINEMA_FILM_SHOW_EFFECT,i=n(427).todayInCinemaFilmShowSaga;function todayInCinemaFilmShowWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(a,i);case 2:case"end":return e.stop()}},r)}e.exports=todayInCinemaFilmShowWatcher},function(e,t,n){var r=n(667).watchOnlinePaymentFormWatcher,o=n(671).watchOnlineSelectionPageWatcher,a=n(672),i=a.loadMainPageWatchOnlineSlider,c=a.loadContinueWatchingData;e.exports=[r,o,i,c]},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=regeneratorRuntime.mark(paymentForm),o=regeneratorRuntime.mark(watchOnlinePaymentFormWatcher),a=n(1),i=a.put,c=a.race,s=a.call,u=a.fork,l=a.take,p=a.takeEvery,f=n(139).LOAD_ACCOUNTS_SUCCESS,d=n(116),m=d.SHOW_PAYMENT_FORM_EFFECT,y=d.SHOW_RESUME_FORM_EFFECT,_=n(110).MODAL_TYPES.WATCH_ONLINE_PAYMENT_FORM,h=n(59).openModal,g=n(197).linkYandexAccount,b=n(150);function paymentForm(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.type,n=e.payload,r.next=3,s(g,{retPath:location.href});case 3:return o=t===y,r.next=6,i(h({name:_,props:{paymentData:n,onWidgetCreate:o?b.paymentResumeEmbed:b.paymentEmbed}}));case 6:case"end":return r.stop()}},r)}function watchOnlinePaymentFormWatcher(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c([l(f),l([m,y])]);case 2:if(e=r.sent,t=_slicedToArray(e,2),!(n=t[1])){r.next=10;break}return r.next=8,l(f);case 8:return r.next=10,u(paymentForm,n);case 10:return r.next=12,p([m,y],paymentForm);case 12:case"end":return r.stop()}},o)}e.exports={watchOnlinePaymentFormWatcher:watchOnlinePaymentFormWatcher}},function(e,t,n){"use strict";var r=n(23),o=n(367),a=o.OPEN_MODAL,i=o.CLOSE_MODAL;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n=t.payload,o=n.name,c=n.props;return r(e,{$set:{props:void 0===c?{}:c,name:o,isOpen:!0}});case i:return r(e,{$set:{props:{},name:null,isOpen:!1}});default:return e}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(28).format,o=n(58),a=o.MONETIZATION_MODELS,i=o.SELECTION_TYPES,c=o.SERVICE_ID,s=o.CATEGORIES_SLUGS;e.exports={serviceId:c,routeBuilder:{baseTitle:"КиноПоиск HD",baseUrl:"watch",routes:{index:{title:function(e,t){return e.getCategory(t).linkTitle},url:function(e,t){return"/".concat(e.baseUrl,"/").concat(t?"".concat(t.toLowerCase(),"/"):"")},route:function(e){var t=e.categoriesSlugs.join("|").toLowerCase();return["/".concat(e.baseUrl,"/:").concat(e.routeCategorySlugParam,"(").concat(t,")")]},hdUrl:function(e,t){return r(t)}},film:{url:function(e,t){return"/film/".concat(t,"/watch/")},route:function(){var e=":id([\\d]+)",t=":slug([\\w-]+)";return["/film/".concat(e,"/watch/"),"/film/".concat(e,"/watch/:season([\\d]+)/:episode([\\d]+)"),"/film/".concat(t,"-").concat(e,"/watch/"),"/film/".concat(t,"-").concat(e,"/watch/:season([\\d]+)/:episode([\\d]+)")]},hdUrl:function(e,t){return r(t)}},purchases:{title:"Мои покупки",url:function(e){return"/".concat(e.baseUrl,"/purchases/")},route:function(e){return["/".concat(e.baseUrl,"/purchases/")]},hdUrl:function(e,t){return r(_objectSpread({},t,{pathname:"/purchases"}))}},"subscription-promo":{title:'Подписка "Промо"',url:function(e){return"/".concat(e.baseUrl,"/subscription/promo/")},route:function(e){return["/".concat(e.baseUrl,"/subscription/promo/")]},hdUrl:function(e,t){return r(t)}},"subscription-basic":{title:'Подписка "КиноПоиск"',url:function(e){return"/".concat(e.baseUrl,"/subscription/kinopoisk/")},route:function(e){return["/".concat(e.baseUrl,"/subscription/kinopoisk/")]},hdUrl:function(e,t){return r(t)}},"subscription-premium":{title:'Подписка "Амедиатека"',url:function(e){return"/".concat(e.baseUrl,"/subscription/premium/")},route:function(e){return["/".concat(e.baseUrl,"/subscription/premium/")]},hdUrl:function(e,t){return r(t)}},"subscription-a-channels":{title:'Каналы Амедиатеки"',url:function(e){return"/".concat(e.baseUrl,"/subscription/a-channels/")},route:function(e){return["/".concat(e.baseUrl,"/subscription/a-channels/")]}},selection:{title:function(e){return e.baseTitle},url:function(e,t){return"/".concat(e.baseUrl,"/selection/").concat(t,"/")},route:function(e){return["/".concat(e.baseUrl,"/selection/:selectionId(\\w+)/")]},hdUrl:function(e,t){return r(t)}},"selection-xhr":{url:function(e){return"/".concat(e.baseUrl,"/selection-xhr")},route:function(e){return["/".concat(e.baseUrl,"/selection-xhr")]},hdUrl:function(e,t){return r(t)}},"master-playlists-xhr":{url:function(e){return"/".concat(e.baseUrl,"/master-playlists-xhr")},route:function(e){return["/".concat(e.baseUrl,"/master-playlists-xhr")]}},support:{url:"https://yandex.ru/support/kinopoisk/feedback.html#feedback",route:function(e){return[e.getRouteUrl("support")]}},supertrio:{url:function(){return"/supertrio/"},route:function(){return["/supertrio/"]},hdUrl:function(e,t){return r(_objectSpread({},t,{pathname:"/supertrio"}))}}}},categories:[{slug:s.SUBSCRIPTION,title:"Онлайн",linkTitle:"Моё кино",fromBlock:"subscription",enabled:!0},{slug:s.FILMS,title:"Онлайн",linkTitle:"Магазин",fromBlock:"films",enabled:!0},{slug:s.SERIES,title:"Онлайн",linkTitle:"Сериалы",enabled:!1}],selectionTypes:[{id:i.BASIC,slug:"SELECTION"},{id:i.SLIDER,slug:"FEATURE"},{id:i.PERSONAL,slug:"MYKP"},{id:i.MULTISELECTION,slug:"MULTISELECTION"}],validMonetizationModels:[a.AVOD,a.TVOD,a.EST,a.SVOD],widgetUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"//".concat(e,"/v1/kp/").concat(r({query:t}))},hdPaymentUrl:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r({protocol:"https",hostname:e,pathname:"/special/payment",query:t})}}},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=n(28).parse,o=n(53),a=n(151).noun,i=n(1041),c=n(58),s=c.CATEGORIES_SLUGS,u=c.PURCHASES_GROUPS_ID,l=c.PURCHASES_GROUPS_TITLE,p=c.PURCHASES_SLUG,f=c.MONETIZATION_MODELS,d=function(){function WatchOnlineService(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlineService),this._config=e,this.paymentResumeEmbed=this.paymentResumeEmbed.bind(this),this.paymentEmbed=this.paymentEmbed.bind(this)}var e,t,n;return e=WatchOnlineService,(t=[{key:"getCategorySlugFromRouteParams",value:function(e){if(!e[this.routeCategorySlugParam])throw new Error("Invalid route params.");return e[this.routeCategorySlugParam].toUpperCase()}},{key:"getSelectionTypeSlug",value:function(e){var t=this.selectionTypes.find(function(t){return t.id===e});if(!t)throw new Error('SelectionType "'.concat(e,'" not found.'));return t.slug}},{key:"getSelectionType",value:function(e){var t=this.selectionTypes.find(function(t){return t.slug===e});if(!t)throw new Error('SelectionType "'.concat(e,'" not found.'));return t}},{key:"getRoute",value:function(e){for(var t=this.routes[e].route,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,[this].concat(r)):t}},{key:"getRouteUrl",value:function(e){for(var t=this.routes[e].url,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,[this].concat(r)):t}},{key:"getRouteHdUrl",value:function(e){for(var t=this.routes[e].hdUrl,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,[this].concat(r)):t}},{key:"getRouteTitle",value:function(e){for(var t=this.routes[e].title,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return"function"==typeof t?t.apply(void 0,[this].concat(r)):t}},{key:"getCategory",value:function(e){var t=this.categories.find(function(t){return t.slug===e});if(!t)throw new Error('Category "'.concat(e,'" not found.'));return t}},{key:"getCategoryTitle",value:function(e){return this.getCategory(e).title}},{key:"getCategorySelectionIds",value:function(e){return this.getCategory(e).selectionIds}},{key:"isCategoryEnabled",value:function(e){return this.getCategory(e).enabled}},{key:"isValidMonetizationModels",value:function(e){var t=this;return e.some(function(e){return t.validMonetizationModels.includes(e)})}},{key:"getOttWidget",value:function(){return window.Ya=window.Ya||{},window.Ya.OTT=window.Ya.OTT||{},window.Ya.OTT.Widget=window.Ya.OTT.Widget||{},window.Ya.OTT.Widget}},{key:"widgetOpen",value:function(e){window.Ya&&window.Ya.Kinopoisk&&window.Ya.Kinopoisk.Widgets&&window.Ya.Kinopoisk.Widgets.ott&&"function"==typeof window.Ya.Kinopoisk.Widgets.ott.open&&window.Ya.Kinopoisk.Widgets.ott.open({filmId:e,from:"kp"})}},{key:"widgetEmbed",value:function(e,t){var n=this.getOttWidget();"function"==typeof n.embed?n.embed(e,t):n.onInit=this.widgetEmbed.bind(this,e,t)}},{key:"paymentEmbed",value:function(e,t){var n=this.getOttWidget();"function"==typeof n.paymentEmbed?n.paymentEmbed(e,t):n.onInit=this.paymentEmbed.bind(this,e,t)}},{key:"paymentResumeEmbed",value:function(e,t){var n=this.getOttWidget();"function"==typeof n.paymentResumeEmbed?n.paymentResumeEmbed(e,t):n.onInit=this.paymentResumeEmbed.bind(this,e,t)}},{key:"getPurchasesGroupsByCreatedDate",value:function(e){var t=o(),n={};return e.forEach(function(e){if(e.createdDate){var r,a=o(e.createdDate);if(t.isSame(a,"month"))r=u.SAME_MONTH;else if(t.isSame(a,"year")){var i=t.month()-a.month();r=i<=3?u.LAST_THREE_MONTH:i<=6?u.LAST_SIX_MONTH:u.SAME_YEAR}else r=a.year();n[r]||(n[r]={id:r,title:l[r]||r,purchases:[]}),n[r].purchases.push(e)}}),i(n)}},{key:"getWidgetParams",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.season,a=n.episode,i=t.from_block;if(!i)if(e){var c=r(e);/\.?kinopoisk\.ru$/.test(c.hostname)||(i="external")}else i="direct";return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{source:"qa_serp"===t.from?"qa_serp":t.source,from:"kp",from_block:i,referrer_category:e&&this.getReferrerCategory(e)||s.FILMS,season:o||"",episode:o&&a||""})}},{key:"getPurchaseStatusText",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t.hoursToStartWatching){var n=t.hoursToStartWatching,r=t.daysToStartWatching?t.daysToStartWatching:Math.floor(t.hoursToStartWatching/24);e=n>24?"".concat(r," ").concat(a(r,"день","дня","дней"),", чтобы начать просмотр"):"".concat(n," ").concat(a(n,"час","часа","часов"),", чтобы начать просмотр")}else if(t.hoursToEndWatching){var o=t.hoursToEndWatching;e="".concat(o," ").concat(a(o,"час","часа","часов"),", чтобы завершить просмотр")}return e}},{key:"getReferrerCategory",value:function(e){var t=r(e),n=t.hostname,o=t.pathname;if(!/\.kinopoisk\.ru$/.test(n))return null;for(var a=0,i=Object.values(s);a<i.length;a++){var c=i[a];if(o===this.getRouteUrl("index",c))return c}return o===this.getRouteUrl("purchases")?p:null}},{key:"getHeaderImagesFilmId",value:function(e){var t=e.querySource,n=e.referer,r=e.filmId,o=e.defaultFilmId,a=new RegExp(/kinopoisk_watch_(\d+)/),i=_slicedToArray(((Array.isArray(t)?t.find(function(e){return e.match(a)}):t)||"").match(a)||[],2)[1],c=_slicedToArray((n||"").match(/\/film\/(?:[\w-]+-)?(\d+)\/watch/)||[],2)[1];return r||i||c||o}},{key:"isFilmAvailableBySvodType",value:function(e,t){var n=(e.purchaseOptions||[]).find(function(e){return e.monetizationModel===f.SVOD})||{};return(Array.isArray(n.subscriptions)?n.subscriptions:[]).includes(t)}},{key:"serviceId",get:function(){return this._config.serviceId}},{key:"categories",get:function(){return this._config.categories}},{key:"categoriesSlugs",get:function(){return this.categories.map(function(e){return e.slug})}},{key:"selectionTypes",get:function(){return this._config.selectionTypes}},{key:"routeBuilder",get:function(){return this._config.routeBuilder}},{key:"routes",get:function(){return this.routeBuilder.routes}},{key:"widgetUrl",get:function(){return this._config.widgetUrl}},{key:"hdPaymentUrl",get:function(){return this._config.hdPaymentUrl}},{key:"routeCategorySlugParam",get:function(){return"categorySlug"}},{key:"route",get:function(){var e=this.categoriesSlugs.join("|").toLowerCase();return"".concat(this.link,":").concat(this.routeCategorySlugParam,"(").concat(e,")")}},{key:"baseUrl",get:function(){return"".concat(this.routeBuilder.baseUrl)}},{key:"baseTitle",get:function(){return this.routeBuilder.baseTitle}},{key:"validMonetizationModels",get:function(){return this._config.validMonetizationModels||[]}}])&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),WatchOnlineService}();e.exports=d},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(selectionPageLoader),o=regeneratorRuntime.mark(watchOnlineSelectionPageWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var a=n(1),i=a.put,c=a.call,s=a.takeEvery,u=n(530),l=n(120).updateFilms,p=n(16),f=n(503),d=n(116),m=d.SELECTION_LOAD_NEXT_PAGE,y=d.updateSelectionPage,_=n(91).updatePagePagination,h=function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.selectionId,n=e.page,r.next=3,p.get(f.getRouteUrl("selection-xhr"),{query:{selectionId:t,page:n}});case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_callee)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}();function selectionPageLoader(e){var t,n,o,a,s,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.selectionId,o=t.page,r.next=3,i(y({isLoading:!0}));case 3:return r.prev=3,r.next=6,c(h,{selectionId:n,page:o});case 6:return a=r.sent,s=a.films,p=a.hasMore,r.next=11,i(l(u(s,"id")));case 11:return r.next=13,i(_({currentPage:o,hasMore:p}));case 13:return r.next=15,i(y({filmsIds:s.map(function(e){return e.id}),isLoading:!1}));case 15:r.next=23;break;case 17:return r.prev=17,r.t0=r.catch(3),r.next=21,i(y({isLoading:!1}));case 21:return r.next=23,i(_({hasMore:!1}));case 23:case"end":return r.stop()}},r,null,[[3,17]])}function watchOnlineSelectionPageWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(m,selectionPageLoader);case 2:case"end":return e.stop()}},o)}e.exports={watchOnlineSelectionPageWatcher:watchOnlineSelectionPageWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(loadMainPageWatchOnlineSlider),o=regeneratorRuntime.mark(loadContinueWatchingData),a=n(1),i=a.takeEvery,c=a.call,s=a.putResolve,u=n(116),l=u.LOAD_MAIN_PAGE_SLIDER_DATA_EFFECT,p=u.LOAD_CONTINUE_WATCHING_DATA_EFFECT,f=n(673),d=f.startCollectionLoading,m=f.finishCollectionLoading,y=f.failCollectionLoading,_=n(92).ENTITIES_TYPES,h=n(79).HD_FILM_ENTITY_TYPE,g=n(498),b=g.MAIN_PAGE_HD_CONTINUE_WATCHING,E=g.MAIN_PAGE_HD_FILMS,v=n(88),O=n(25).sendRequestEffect;function loadMainPageWatchOnlineSlider(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(d,{uiListId:E});case 2:return t.prev=2,t.next=5,s(O({url:"/api/hd/showcase-items",method:"get"}));case 5:if((e=t.sent).list){t.next=8;break}throw new Error("Empty list fetched");case 8:return t.next=10,c(m,{map:e.map,list:e.list,uiListId:E,entityType:_.film});case 10:t.next=16;break;case 12:return t.prev=12,t.t0=t.catch(2),t.next=16,c(y,{uiListId:E});case 16:case"end":return t.stop()}},_callee,null,[[2,12]])}));case 2:case"end":return e.stop()}},r)}function loadContinueWatchingData(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,regeneratorRuntime.mark(function _callee2(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(d,{uiListId:b});case 2:return n.prev=2,n.next=5,s(O({url:"/api/hd/continue-watching",method:"get"}));case 5:return e=n.sent,t=v(e,{idFieldName:"filmId"}),n.next=9,c(m,{map:{byId:t.map},list:t.list,uiListId:b,entityType:h});case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(2),n.next=15,c(y,{uiListId:b});case 15:case"end":return n.stop()}},_callee2,null,[[2,11]])}));case 2:case"end":return e.stop()}},o)}e.exports={loadMainPageWatchOnlineSlider:loadMainPageWatchOnlineSlider,loadContinueWatchingData:loadContinueWatchingData}},function(e,t,n){var r=regeneratorRuntime.mark(startCollectionLoading),o=regeneratorRuntime.mark(finishCollectionLoading),a=regeneratorRuntime.mark(failCollectionLoading),i=n(1).put,c=n(166).deepUpdateMap,s=n(98),u=s.fetchListFinish,l=s.fetchListStart,p=s.fetchListFailed;function startCollectionLoading(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.pagination,n=e.uiListId,r.next=3,i(l(n,{pagination:t}));case 3:case"end":return r.stop()}},r)}function finishCollectionLoading(e){var t,n,r,a,s;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.map,n=e.list,r=e.pagination,a=e.entityType,s=e.uiListId,o.next=3,i(c(a,t));case 3:return o.next=5,i(u(s,{items:n,pagination:r}));case 5:case"end":return o.stop()}},o)}function failCollectionLoading(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.uiListId,n.next=3,i(p(t));case 3:case"end":return n.stop()}},a)}e.exports={finishCollectionLoading:finishCollectionLoading,startCollectionLoading:startCollectionLoading,failCollectionLoading:failCollectionLoading}},function(e,t,n){"use strict";var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o={DEFAULT:"default",EXPERIMENT:"experiment"},a=(_defineProperty(r={},o.DEFAULT,"control"),_defineProperty(r,o.EXPERIMENT,"experiment"),r);e.exports={EXPERIMENT_VALUES:o,EXPERIMENT_URL_QUERY_KEY:"experiments",EXPERIMENT_URL_QUERY_VALUE:a}},function(e,t,n){"use strict";e.exports={NOW_IN_CINEMA_BLOCK_NAME:"now_in_cinema_card",WATCH_ON_KP_BLOCK_NAME:"watch_on_kp_card"}},function(e,t,n){var r=regeneratorRuntime.mark(filmsToWatch),o=regeneratorRuntime.mark(filmsToWatchWatcher),a=n(1),i=a.put,c=a.call,s=a.take,u=a.cancel,l=a.fork,p=a.select,f=a.delay,d=n(16),m=n(48),y=n(122).showNotification,_=n(35).openAuthPopupEffect,h=n(430).changeModel,g=n(120).updateFilm,b=n(263).USER_TOGGLE_FILM_TO_WATCH,E=n(222).getUserAuth,v=n(226).getBasicFilmModel,O=n(173).getFilmModel,P=function(e){return d.post(m.url("user-me-films-to-watch"),{body:{filmId:e}})},S=function(e){return d.delete(m.url("user-me-films-to-watch",{filmId:e}))};function filmsToWatch(e,t){var n,o,a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n=Boolean(e.isToWatch),r.next=3,p(v,e.id);case 3:return o=r.sent,r.next=6,p(O,e.id);case 6:if(a=r.sent,!o){r.next=10;break}return r.next=10,i(h(e.id,{isToWatch:!n}));case 10:if(!a){r.next=13;break}return r.next=13,i(g(e.id,{isToWatch:!n}));case 13:return r.next=15,f(200);case 15:if(r.prev=15,!n){r.next=22;break}return r.next=19,c(S,e.id);case 19:r.t0=r.sent,r.next=25;break;case 22:return r.next=24,c(P,e.id);case 24:r.t0=r.sent;case 25:if(!(s=r.t0).msg){r.next=29;break}return r.next=29,c(y,{text:s.msg});case 29:if(s.success){r.next=31;break}throw s;case 31:r.next=41;break;case 33:if(r.prev=33,r.t1=r.catch(15),!o){r.next=38;break}return r.next=38,i(h(e.id,{isToWatch:t.isToWatch}));case 38:if(!a){r.next=41;break}return r.next=41,i(g(e.id,{isToWatch:t.isToWatch}));case 41:case"end":return r.stop()}},r,null,[[15,33]])}function filmsToWatchWatcher(){var e,t,n,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t={};case 1:return o.next=4,s(b);case 4:return n=o.sent,r=n.payload,o.next=8,p(E);case 8:if(a=o.sent,a.isAuthorized){o.next=14;break}return o.next=13,i(_());case 13:return o.abrupt("continue",1);case 14:if(!e||t.id!==r.id){o.next=19;break}return o.next=17,u(e);case 17:o.next=20;break;case 19:t=r;case 20:return o.next=22,l(filmsToWatch,r,t);case 22:e=o.sent,o.next=1;break;case 25:case"end":return o.stop()}},o)}e.exports={filmsToWatchWatcher:filmsToWatchWatcher,filmsToWatch:filmsToWatch,filmsToWatchCreateRequest:P,filmsToWatchDeleteRequest:S}},,,,,function(e,t,n){"use strict";var r=regeneratorRuntime.mark(sezamAccountsWatcher),o=n(1),a=o.put,i=o.call,c=o.take,s=n(139),u=s.LOAD_ACCOUNTS_REQUEST,l=s.loadAccountsSuccess,p=n(310);function sezamAccountsWatcher(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(u);case 2:return t.prev=2,t.next=5,i(p.accounts);case 5:return e=t.sent,t.next=8,a(l(e));case 8:t.next=12;break;case 10:t.prev=10,t.t0=t.catch(2);case 12:case"end":return t.stop()}},r,null,[[2,10]])}e.exports={sezamAccountsWatcher:sezamAccountsWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(logoutWatcher),o=n(174),a=n(1),i=a.take,c=a.apply,s=n(263).LOGOUT,u=new o;function logoutWatcher(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,i(s);case 2:return e=n.sent,t=e.payload.retPath,n.next=6,c(u,u.get,["/logout/"]);case 6:window.location.replace(t);case 7:case"end":return n.stop()}},r)}e.exports={logoutWatcher:logoutWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(antiAdbWatcher),o=n(1),a=o.call,i=o.put,c=o.select,s=o.fork,u=n(199),l=n(431),p=n(74).selectRumId,f=n(432),d=n(312).DETECTED_STATUS,m=n(313).antiAdblockUpdate;function antiAdbWatcher(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=!1,n.prev=1,n.next=4,f.detectResultPromise;case 4:e=n.sent,n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:return n.next=11,c(p);case 11:if(t=n.sent,!e||!t){n.next=15;break}return n.next=15,s(regeneratorRuntime.mark(function _callee(){var e;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,a(l);case 2:return e=u(),n.next=5,a([e,e.sendTimeMark],t,e.getTime(),!1,{"-blocker":1});case 5:case"end":return n.stop()}},_callee)}));case 15:return n.next=17,i(m({detectStatus:e?d.BLOCKED:d.UNBLOCKED}));case 17:case"end":return n.stop()}},r,null,[[1,7]])}e.exports={antiAdbWatcher:antiAdbWatcher}},function(e,t){e.exports={WAIT_DELAY:50}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(loadFilm),o=regeneratorRuntime.mark(loadFilmDataWatcher),a=n(1),i=a.put,c=a.takeEvery,s=n(120),u=s.createFilm,l=s.GET_FILM,p=n(16),f=n(48);function loadFilm(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload.id){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,p.get(f.url("film-object-card",{id:t}));case 6:return n=r.sent,r.next=9,i(u(t,n));case 9:r.next=13;break;case 11:r.prev=11,r.t0=r.catch(3);case 13:case"end":return r.stop()}},r,null,[[3,11]])}function loadFilmDataWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(l,loadFilm);case 2:case"end":return e.stop()}},o)}e.exports={loadFilmDataWatcher:loadFilmDataWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(loadPerson),o=regeneratorRuntime.mark(loadPersonDataWatcher),a=n(1),i=a.put,c=a.takeEvery,s=n(191),u=s.createPerson,l=s.GET_PERSON,p=n(16),f=n(48);function loadPerson(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload.id){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,r.next=6,p.get(f.url("person-object-card",{id:t}));case 6:return n=r.sent,r.next=9,i(u(t,n));case 9:r.next=13;break;case 11:r.prev=11,r.t0=r.catch(3);case 13:case"end":return r.stop()}},r,null,[[3,11]])}function loadPersonDataWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(l,loadPerson);case 2:case"end":return e.stop()}},o)}e.exports={loadPersonDataWatcher:loadPersonDataWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(loginSuggestWatcher),o=n(174),a=n(36),i=n(1),c=i.apply,s=i.take,u=i.select,l=i.put,p=i.all,f=n(139).LOAD_ACCOUNTS_SUCCESS,d=n(64),m=d.OPEN_AUTH_POPUP_EFFECT,y=d.LOAD_USER,_=n(19).getUserAuth,h=n(62).getSezamDefaultAccount,g=n(74).getIsPartialComponent,b=n(61).MDA_UPDATE_EXPERIMENT_IS_ACTIVE,E=n(137).sendMetrikaParams,v=n(245),O=v.YANDEX_FORCE_LOGIN_COOKIE_NAME,P=v.YANDEX_FORCE_LOGIN_EXPIRATION,S=new o;function loginSuggestWatcher(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(b);case 2:return n.next=4,u(_);case 4:return e=n.sent,n.next=7,u(g);case 7:if(!n.sent){n.next=16;break}return n.next=11,p([s(f),s(function(e){return e.type===y&&"done"===e.meta.status})]);case 11:return n.next=13,u(_);case 13:e=n.sent,n.next=18;break;case 16:return n.next=18,s(f);case 18:if(!e.isAuthorized){n.next=20;break}return n.abrupt("return");case 20:return n.next=22,u(h);case 22:if((t=n.sent)&&t.uid){n.next=25;break}return n.abrupt("return");case 25:return n.next=27,c(S,S.post,["/user/id-by-yandex-id/",{body:{yandexUid:t.uid}}]);case 27:if(n.sent.success){n.next=30;break}return n.abrupt("return");case 30:if(a.get(O)){n.next=36;break}return n.next=33,l({type:m,payload:{}});case 33:return n.next=35,l(E(["ykp_link","login_suggest","auto_show"]));case 35:a.set(O,!0,{expires:P});case 36:case"end":return n.stop()}},r)}e.exports={loginSuggestWatcher:loginSuggestWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(loadTodayFilmsInCinemaWatcher),o=n(1),a=o.put,i=o.call,c=o.take,s=o.select,u=n(277),l=u.LOAD_TODAY_FILMS_IN_CINEMA_EFFECT,p=u.updateTodayFilmsInCinema,f=n(120).updateFilms,d=n(16),m=n(173).getFilmModels,y=n(395).getFilmsInCinema,_=n(53);function loadTodayFilmsInCinemaWatcher(){var e,t,n,o,u,h,g,b,E;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c(l);case 2:return e=r.sent,t=e.payload.limit,r.prev=4,n=_().format("YYYY-MM-DD"),r.next=8,i([d,d.get],"/api/afisha/films/?date=".concat(n,"&limit=").concat(t));case 8:return o=r.sent,r.next=11,s(m);case 11:return u=r.sent,r.next=14,s(y);case 14:return h=r.sent,g=o.items.reduce(function(e,t){return h.includes(t.id)||e.list.push(t.id),u[t.id]||(e.models[t.id]=t),e},{list:[],models:{}}),b=g.list,E=g.models,r.next=18,a(f(E));case 18:return r.next=20,a(p(b));case 20:r.next=24;break;case 22:r.prev=22,r.t0=r.catch(4);case 24:case"end":return r.stop()}},r,null,[[4,22]])}e.exports={loadTodayFilmsInCinemaWatcher:loadTodayFilmsInCinemaWatcher}},function(e,t,n){"use strict";var r=n(690).flashHighlightWatcher,o=n(695).toggleHighlightWatcher,a=n(696),i=a.loadNextPageSagaWatcher,c=a.initPageSagaWatcher,s=n(699).voteSagaWatcher,u=n(700).toggleSubscribeWatcher,l=n(701).deleteSagaWatcher,p=n(702).complainSagaWatcher,f=n(703).copyDeepLinkSagaWatcher;e.exports=[i,s,c,l,r,u,p,o,f]},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(flashHighlight),o=regeneratorRuntime.mark(flashHighlightWatcher),a=n(1),i=a.put,c=a.delay,s=n(29).takeAwaitUniq,u=n(55),l=u.commentsHighlightCreate,p=u.commentsHighlightDelete,f=u.COMMENTS_FLASH_HIGHLIGHT_EFFECT;function flashHighlight(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.commentId,o=t.ms,r.next=4,i(l(n));case 4:return r.next=6,c(o);case 6:return r.next=8,i(p(n));case 8:case"end":return r.stop()}},r)}function flashHighlightWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("commentId",f,flashHighlight);case 2:case"end":return e.stop()}},o)}e.exports={flashHighlightWatcher:flashHighlightWatcher}},function(e,t,n){var r=n(1),o=r.take,a=r.fork;e.exports=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return a(regeneratorRuntime.mark(function _callee(){var n,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:n=null;case 1:return c.next=4,o(e);case 4:if(i=c.sent,!n||!n.isRunning()){c.next=7;break}return c.abrupt("continue",1);case 7:return c.next=9,a.apply(void 0,[t].concat(r,[i]));case 9:n=c.sent,c.next=1;break;case 12:case"end":return c.stop()}},_callee)}))}},function(e,t,n){var r=n(106).buffers,o=n(1),a=o.call,i=o.fork,c=o.take,s=o.join,u=o.delay;e.exports=function(e,t,n,o,l,p){for(var f=arguments.length,d=new Array(f>6?f-6:0),m=6;m<f;m++)d[m-6]=arguments[m];return i(regeneratorRuntime.mark(function _callee2(){var f,m,y;return regeneratorRuntime.wrap(function(_){for(;;)switch(_.prev=_.next){case 0:f={},m="function"==typeof t?t:function(e){return e.payload[t]},y=regeneratorRuntime.mark(function _loop(){var t,y,_,h;return regeneratorRuntime.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return g.next=2,c(n);case 2:return t=g.sent,y=m(t),g.next=6,i.apply(void 0,[o].concat(d,[t]));case 6:if(_=g.sent,f[y]||(f[y]={}),(h=f[y]).rollbacks?h.rollbacks.isEmpty()&&h.rollbacks.put(t):h.rollbacks=r.sliding(1),h.queue){g.next=16;break}return h.queue=r.sliding(1),g.next=14,i(regeneratorRuntime.mark(function _callee(){var n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,s(_);case 3:n=t;case 4:if(!n){o.next=21;break}return r=h.rollbacks.take()||t,o.prev=6,o.next=9,a.apply(void 0,[l].concat(d,[r,n]));case 9:return o.next=11,u(e);case 11:o.next=18;break;case 13:return o.prev=13,o.t0=o.catch(6),o.next=17,a.apply(void 0,[p].concat(d,[r,o.t0,n]));case 17:h.rollbacks.put(r);case 18:n=h.queue.take(),o.next=4;break;case 21:return o.prev=21,delete f[y],o.finish(21);case 24:case"end":return o.stop()}},_callee,null,[[0,,21,24],[6,13]])}));case 14:g.next=17;break;case 16:h.queue.put(t);case 17:case"end":return g.stop()}},_loop)});case 3:return _.delegateYield(y(),"t0",5);case 5:_.next=3;break;case 7:case"end":return _.stop()}},_callee2)}))}},function(e,t,n){var r=n(1),o=r.take,a=r.fork;e.exports=function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),c=3;c<r;c++)i[c-3]=arguments[c];return a(regeneratorRuntime.mark(function _callee(){var r,c,s,u;return regeneratorRuntime.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:r={},c="function"==typeof e?e:function(t){return t.payload[e]};case 2:return l.next=5,o(t);case 5:if(s=l.sent,u=c(s),!r[u]||!r[u].isRunning()){l.next=9;break}return l.abrupt("continue",2);case 9:return l.next=11,a.apply(void 0,[n].concat(i,[s]));case 11:r[u]=l.sent,l.next=2;break;case 14:case"end":return l.stop()}},_callee)}))}},function(e,t,n){var r=regeneratorRuntime.mark(authRequired),o=n(1),a=o.put,i=o.select,c=o.cancel,s=n(19).getUserAuth,u=n(61).openAuthPopupEffect;function authRequired(){var e,t,n,o,l=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},t=e.showPopup,n=void 0===t||t,r.next=3,i(s);case 3:if(o=r.sent,o.isAuthorized){r.next=11;break}if(!n){r.next=9;break}return r.next=9,a(u());case 9:return r.next=11,c();case 11:case"end":return r.stop()}},r)}e.exports={authRequired:authRequired}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(toggleHighlight),o=regeneratorRuntime.mark(toggleHighlightWatcher),a=n(1),i=a.takeEvery,c=a.put,s=n(55),u=s.COMMENTS_TOGGLE_HIGHLIGHT_EFFECT,l=s.commentsHighlightCreate,p=s.commentsHighlightDelete;function toggleHighlight(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.commentId,o=t.isHighlighted,r.next=4,c(o?l(n):p(n));case 4:case"end":return r.stop()}},r)}function toggleHighlightWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u,toggleHighlight);case 2:case"end":return e.stop()}},o)}e.exports={toggleHighlightWatcher:toggleHighlightWatcher}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=regeneratorRuntime.mark(prepareLoadCommentsResponse),o=regeneratorRuntime.mark(addLocationQueryString),a=regeneratorRuntime.mark(loadComments),i=regeneratorRuntime.mark(loadNextPageSaga),c=regeneratorRuntime.mark(loadNextPageSagaWatcher),s=regeneratorRuntime.mark(initPageSagaWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var u=n(181),l=n(1),p=l.put,f=l.select,d=l.take,m=l.call,y=l.fork,_=n(29).takeAwait,h=n(389),g=h.getCommentsModels,b=h.getCommentsPagination,E=n(55),v=E.update,O=E.commentsPaginationUpdate,P=E.COMMENTS_LOAD_NEXT_PAGE_EFFECT,S=n(55).COMMENTS_INIT_PAGE_EFFECT,T=n(16),k=n(48),C=function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.entityId,n=e.entityType,r=e.limit,o=e.offset,a.next=3,T.get(k.url("comments",{entityId:t,entityType:n}),{query:{limit:r,offset:o}});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},_callee)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}();function prepareLoadCommentsResponse(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.comments,n=e.pagination,o=n.total,a=n.hasMore,r.next=3,f(g);case 3:return i=r.sent,r.abrupt("return",t.reduce(function(e,t){return i[t.id]||(e.models[t.id]=t,e.list.push(t.id)),e},{models:{},list:[],pagination:{hasMore:a},totalCount:o}));case 5:case"end":return r.stop()}},r)}function addLocationQueryString(e){var t,n,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=e.offset,n=e.limit,(r=Math.ceil(t/n)+1)&&window.history&&(a=u.stringify(_objectSpread({},u.parse(window.location.search),{commentsPage:r})),window.history.replaceState(null,null,"".concat(window.location.pathname,"?").concat(a)));case 3:case"end":return o.stop()}},o)}function loadComments(e){var t,n,r,o,i,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.entityId,n=e.entityType,r=e.offset,o=e.limit,a.prev=1,a.next=4,m(C,{entityId:t,entityType:n,offset:r,limit:o});case 4:return i=a.sent,a.next=7,prepareLoadCommentsResponse(i);case 7:return c=a.sent,a.next=10,p(v(c));case 10:a.next=14;break;case 12:a.prev=12,a.t0=a.catch(1);case 14:case"end":return a.stop()}},a,null,[[1,12]])}function loadNextPageSaga(e){var t,n,r,o,a,c,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.entityId,r=t.entityType,i.next=4,f(b);case 4:return o=i.sent,a=o.limit,c=o.offset,s=c+a,i.next=10,y(addLocationQueryString,{offset:s,limit:a});case 10:return i.next=12,p(O({isPending:!0}));case 12:return i.next=14,m(loadComments,{entityId:n,entityType:r,limit:a,offset:s});case 14:return i.next=16,p(O({isPending:!1,offset:s}));case 16:case"end":return i.stop()}},i)}function loadNextPageSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(P,loadNextPageSaga);case 2:case"end":return e.stop()}},c)}function initPageSagaWatcher(){var e,t,n,r,o,a,i;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,d(S);case 2:return e=c.sent,t=e.payload,n=t.entityId,r=t.entityType,c.next=8,f(b);case 8:return o=c.sent,a=o.limit,i=o.offset,c.next=13,p(O({isPending:!0}));case 13:return c.next=15,m(loadComments,{entityId:n,entityType:r,limit:a+i,offset:0});case 15:return c.next=17,p(O({isPending:!1}));case 17:case"end":return c.stop()}},s)}e.exports={loadNextPageSagaWatcher:loadNextPageSagaWatcher,initPageSagaWatcher:initPageSagaWatcher}},function(e,t,n){"use strict";var r=n(434).ACTIONS,o=function(e){return e.permissions&&e.permissions.comments||[]};e.exports={canDelete:function(e,t){return e.deletableByAuthor&&t.id===e.user.id&&o(t).includes(r.DELETE_BY_AUTHOR)||o(t).includes(r.DELETE)},canVote:function(e,t){return t.id!==e.user.id&&!0===e.isAcceptsVoting&&o(t).includes(r.VOTE)},canCreate:function(e){return o(e).includes(r.CREATE)}}},function(e,t,n){var r=n(434).ACTIONS,o=function(e){return e.permissions&&e.permissions.posts||[]};e.exports={canEdit:function(e,t){return o(t).includes(r.EDIT)},canViewUnpublished:function(e,t){return o(t).includes(r.VIEW_UNPUBLISHED)}}},function(e,t,n){var r=regeneratorRuntime.mark(voteUpdateStore),o=regeneratorRuntime.mark(voteSaga),a=regeneratorRuntime.mark(voteRequestSaga),i=regeneratorRuntime.mark(voteRollbackSaga),c=regeneratorRuntime.mark(voteSagaWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})}}var s=n(1),u=s.put,l=s.call,p=n(29).takeOptimistic,f=n(581).VOTE_TYPES,d=n(55),m=d.commentsModelsUpdate,y=d.updateUserVote,_=d.deleteUserVote,h=d.COMMENTS_VOTE_COMMENT,g=n(16),b=n(48),E=n(29).authRequired,v=function(e){var t=e.payload,n=t.currentUserVote,r=t.currentRating;switch(n){case f.LIKE:return r-1;case f.DISLIKE:return r+1;default:return r}},O=function(e){var t=e.payload,n=t.type,r=v({payload:t});switch(n){case f.LIKE:return r+1;case f.DISLIKE:return r-1;default:return r}},P=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.entityId,n=e.entityType,r=e.commentId,o=e.type,a.next=3,g.post(b.url("comments-votes",{entityId:t,entityType:n,commentId:r}),{body:{type:o}});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.entityId,n=e.entityType,o.next=3,g.get(b.url("comments-votes",{entityId:t,entityType:n}));case 3:return r=o.sent,o.abrupt("return",r.reduce(function(e,t){var n=t.commentId,r=t.type;return e[n]=r,e},{}));case 5:case"end":return o.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.entityId,n=e.entityType,r=e.commentId,o=e.type,a.next=3,g.put(b.url("comments-votes",{entityId:t,entityType:n,commentId:r}),{body:{type:o}});case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},_callee3)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee4(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.entityId,n=e.entityType,r=e.commentId,o.next=3,g.delete(b.url("comments-votes",{entityId:t,entityType:n,commentId:r}));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},_callee4)}));return function(t){return e.apply(this,arguments)}}();function voteUpdateStore(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.commentId,n=e.type,o=e.rating,r.next=3,u(m(t,{rating:o}));case 3:return r.next=5,u(n?y(t,n):_(t));case 5:case"end":return r.stop()}},r)}function voteSaga(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.payload,o.next=3,l(E);case 3:return n=t.commentId,r=t.type,o.next=6,l(voteUpdateStore,{commentId:n,type:r,rating:O({payload:t})});case 6:case"end":return o.stop()}},o)}function voteRequestSaga(e,t){var n,r,o,i,c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=e.payload,r=t.payload,a.next=4,l(E);case 4:if(o=r.entityId,i=r.entityType,c=r.commentId,s=r.type,u=n.currentUserVote,!s){a.next=19;break}if(!u){a.next=13;break}return a.next=10,T({entityId:o,entityType:i,commentId:c,type:s});case 10:a.t0=a.sent,a.next=16;break;case 13:return a.next=15,P({entityId:o,entityType:i,commentId:c,type:s});case 15:a.t0=a.sent;case 16:return a.abrupt("return",a.t0);case 19:return a.next=21,k({entityId:o,entityType:i,commentId:c,type:s});case 21:return a.abrupt("return",a.sent);case 22:case"end":return a.stop()}},a)}function voteRollbackSaga(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.commentId,r=t.currentRating,o=t.currentUserVote,a.next=4,l(voteUpdateStore,{commentId:n,type:o,rating:r});case 4:case"end":return a.stop()}},i)}function voteSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(200,"commentId",h,voteSaga,voteRequestSaga,voteRollbackSaga);case 2:case"end":return e.stop()}},c)}e.exports={voteSagaWatcher:voteSagaWatcher,caclInitialRating:v,calcRating:O,voteUpdateStore:voteUpdateStore,voteRequestSaga:voteRequestSaga,voteSaga:voteSaga,voteRollbackSaga:voteRollbackSaga,getRequest:S}},function(e,t,n){var r=regeneratorRuntime.mark(toggleSaga),o=regeneratorRuntime.mark(toggleRequestSaga),a=regeneratorRuntime.mark(toggleRollbackSaga),i=regeneratorRuntime.mark(toggleSubscribeWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})}}var c=n(1),s=c.put,u=c.call,l=n(29).takeOptimistic,p=n(55),f=p.update,d=p.COMMENTS_TOGGLE_SUBSCRIBE,m=n(16),y=n(48),_=n(29).authRequired,h=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.entityId,n=e.entityType,r.next=3,m.post(y.url("comments-subscribe",{entityId:t,entityType:n}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.entityId,n=e.entityType,r.next=3,m.get(y.url("comments-subscribe",{entityId:t,entityType:n}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee3(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.entityId,n=e.entityType,r.next=3,m.delete(y.url("comments-subscribe",{entityId:t,entityType:n}));case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},_callee3)}));return function(t){return e.apply(this,arguments)}}();function toggleSaga(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,u(_);case 3:return n=t.isSubscribed,r.next=6,s(f({isSubscribed:!Boolean(n)}));case 6:case"end":return r.stop()}},r)}function toggleRequestSaga(e,t){var n,r,a,i,c,s,l;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(n=e.payload,r=t.payload,a=r.entityId,i=r.entityType,c=r.isSubscribed,s=!Boolean(c),l=Boolean(n.isSubscribed),s!==l){o.next=7;break}return o.abrupt("return");case 7:if(!s){o.next=12;break}return o.next=10,u(h,{entityId:a,entityType:i});case 10:o.next=14;break;case 12:return o.next=14,u(b,{entityId:a,entityType:i});case 14:case"end":return o.stop()}},o)}function toggleRollbackSaga(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.isSubscribed,r.next=4,s(f({isSubscribed:Boolean(n)}));case 4:case"end":return r.stop()}},a)}function toggleSubscribeWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(200,function(e){var t=e.payload;return"".concat(t.entityType).concat(t.id)},d,toggleSaga,toggleRequestSaga,toggleRollbackSaga);case 2:case"end":return e.stop()}},i)}e.exports={toggleSubscribeWatcher:toggleSubscribeWatcher,getRequest:g}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(deleteSaga),o=regeneratorRuntime.mark(deleteSagaWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}var a=n(1),i=a.put,c=a.select,s=a.call,u=n(29).takeAwaitUniq,l=n(389).getComment,p=n(55),f=p.commentsModelsUpdate,d=p.COMMENTS_MODELS_DELETE_EFFECT,m=n(433).STATUS,y=n(16),_=n(48),h=function(){var e,t=(e=regeneratorRuntime.mark(function _callee(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.entityId,n=e.entityType,r=e.commentId,o.next=3,y.delete(_.url("comments",{entityId:t,entityType:n,commentId:r}));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},_callee)}),function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})});return function(e){return t.apply(this,arguments)}}();function deleteSaga(e){var t,n,o,a,u,p;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.commentId,o=t.entityId,a=t.entityType,r.next=4,c(l,n);case 4:return u=r.sent,p=u.status,r.next=8,i(f(n,{status:m.DELETE}));case 8:return r.prev=8,r.next=11,s(h,{entityId:o,entityType:a,commentId:n});case 11:r.next=17;break;case 13:return r.prev=13,r.t0=r.catch(8),r.next=17,i(f(n,{status:p}));case 17:case"end":return r.stop()}},r,null,[[8,13]])}function deleteSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("commentId",d,deleteSaga);case 2:case"end":return e.stop()}},o)}e.exports={deleteSagaWatcher:deleteSagaWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(complainSaga),o=regeneratorRuntime.mark(complainSagaWatcher);function asyncGeneratorStep(e,t,n,r,o,a,i){try{var c=e[a](i),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,o)}function _asyncToGenerator(e){return function(){var t=this,n=arguments;return new Promise(function(r,o){var a=e.apply(t,n);function _next(e){asyncGeneratorStep(a,r,o,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(a,r,o,_next,_throw,"throw",e)}_next(void 0)})}}var a=n(530),i=n(1),c=i.put,s=i.call,u=n(29).takeAwaitUniq,l=n(55),p=l.commentsUserComplaintsCreate,f=l.COMMENTS_USER_COMPLAINTS_CREATE_EFFECT,d=n(16),m=n(48),y=n(29).authRequired,_=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.entityId,n=e.entityType,o.next=3,d.get(m.url("comments-complaints",{entityId:t,entityType:n}));case 3:return r=o.sent,o.abrupt("return",a(r,"commentId"));case 5:case"end":return o.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.entityId,n=e.entityType,r=e.commentId,o.next=3,d.post(m.url("comments-complaints",{entityId:t,entityType:n,commentId:r}));case 3:return o.abrupt("return",o.sent);case 4:case"end":return o.stop()}},_callee2)}));return function(t){return e.apply(this,arguments)}}();function complainSaga(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,s(y);case 3:if(window.confirm("Вы действительно хотите пожаловаться на этот комментарий?")){r.next=5;break}return r.abrupt("return");case 5:return n=t.commentId,o=t.entityId,a=t.entityType,r.prev=6,r.next=9,s(h,{entityId:o,entityType:a,commentId:n});case 9:return i=r.sent,r.next=12,c(p(i));case 12:r.next=16;break;case 14:r.prev=14,r.t0=r.catch(6);case 16:case"end":return r.stop()}},r,null,[[6,14]])}function complainSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u("commentId",f,complainSaga);case 2:case"end":return e.stop()}},o)}e.exports={complainSagaWatcher:complainSagaWatcher,getRequest:_}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(copyDeepLinkSaga),o=regeneratorRuntime.mark(copyDeepLinkSagaWatcher),a=n(1),i=a.takeEvery,c=a.select,s=n(100).PAGE_SECTIONS_ID,u=n(55).COMMENTS_COPY_DEEP_LINK_EFFECT,l=n(26).getAppUrl,p=n(504).copyTextToClipboard;function copyDeepLinkSaga(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.commentId,o=t.entityBasePath,r.next=4,c(l);case 4:a=r.sent,i="".concat(a).concat(o,"comment/").concat(n,"/#").concat(s.COMMENT,"-").concat(n),p(i);case 7:case"end":return r.stop()}},r)}function copyDeepLinkSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u,copyDeepLinkSaga);case 2:case"end":return e.stop()}},o)}e.exports={copyDeepLinkSagaWatcher:copyDeepLinkSagaWatcher}},function(e,t){var n=function(e){return Boolean(e.match(/ipad|iphone/i))},r=function(e){return Boolean(e.match(/android/i))};e.exports={isIOS:n,isAndroid:r,detectedOS:function(e){return n(e)?"ios":r(e)?"android":""}}},function(e,t,n){"use strict";var r=n(706).replyToWatcher,o=n(707).cancelWatcher,a=n(708).submitWatcher,i=n(709).saveToDraftWatcher;e.exports=[r,o,a,i]},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(replyTo),o=regeneratorRuntime.mark(replyToWatcher),a=n(1),i=a.put,c=a.select,s=a.throttle,u=n(119),l=u.update,p=u.createDraft,f=u.COMMENT_FORM_REPLY_TO_COMMENT,d=n(264).getDraft,m=n(29).authRequired;function replyTo(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,m();case 3:return n=t.id,o=t.draftId,r.next=6,c(d,o);case 6:return a=r.sent,r.next=9,i(l({parentId:n}));case 9:if(a){r.next=12;break}return r.next=12,i(p(o));case 12:case"end":return r.stop()}},r)}function replyToWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(500,f,replyTo);case 2:case"end":return e.stop()}},o)}e.exports={replyToWatcher:replyToWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(cancel),o=regeneratorRuntime.mark(cancelWatcher),a=n(1),i=a.put,c=a.takeEvery,s=n(119),u=s.update,l=s.deleteDraft,p=s.COMMENT_FORM_CANCEL;function cancel(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.draftId,r.next=4,i(l(n));case 4:return r.next=6,i(u({parentId:null}));case 6:case"end":return r.stop()}},r)}function cancelWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(p,cancel);case 2:case"end":return e.stop()}},o)}e.exports={cancelWatcher:cancelWatcher}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=regeneratorRuntime.mark(submitRequest),o=regeneratorRuntime.mark(submit),a=regeneratorRuntime.mark(submitWatcher),i=n(1),c=i.put,s=i.select,u=n(264).getDraft,l=n(29).takeAwaitUniq,p=n(55),f=p.update,d=p.flashHighlightEffect,m=n(119),y=m.update,_=m.updateDraft,h=m.deleteDraft,g=m.COMMENT_FORM_SUBMIT,b=n(16),E=n(48),v=n(29).authRequired;function submitRequest(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.entityId,o=t.entityType,a=t.value,i=t.parentId,r.next=4,b.post(E.url("comments",{entityId:n,entityType:o}),{body:{value:a,parentId:i}});case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}},r)}function submit(e){var t,n,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,v();case 2:return t=e.payload,n=t.draftId,o.next=6,s(u,n);case 6:return r=o.sent,o.next=9,c(_(n,{isPending:!0}));case 9:return o.prev=9,o.next=12,submitRequest(e);case 12:return a=o.sent,o.next=15,c(f(_defineProperty({models:_defineProperty({},a.id,_objectSpread({},a,{isHighlighted:!0}))},a.parentId?"list":"pinned",[a.id])));case 15:return o.next=17,c(d({commentId:a.id}));case 17:return o.next=19,c(y({parentId:null}));case 19:return o.next=21,c(h(n));case 21:o.next=27;break;case 23:return o.prev=23,o.t0=o.catch(9),o.next=27,c(_(n,_objectSpread({},r,{isPending:!1})));case 27:case"end":return o.stop()}},o,null,[[9,23]])}function submitWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("draftId",g,submit);case 2:case"end":return e.stop()}},a)}e.exports={submitWatcher:submitWatcher,submitRequest:submitRequest}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(saveToDraft),o=regeneratorRuntime.mark(saveToDraftWatcher),a=n(1),i=a.put,c=a.select,s=a.takeEvery,u=n(119),l=u.updateDraft,p=u.COMMENT_FORM_SAVE_TO_DRAFT,f=n(264).getDraft;function saveToDraft(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.id,o=t.data,r.next=4,c(f,n);case 4:if(!(a=r.sent)||a.isPending){r.next=8;break}return r.next=8,i(l(n,o));case 8:case"end":return r.stop()}},r)}function saveToDraftWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p,saveToDraft);case 2:case"end":return e.stop()}},o)}e.exports={saveToDraftWatcher:saveToDraftWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(metrikaWatcher),o=n(1).take,a=n(137).SEND_METRIKA_PARAMS,i=n(198);function metrikaWatcher(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,o(a);case 3:e=t.sent,i.params(e.payload),t.next=0;break;case 7:case"end":return t.stop()}},r)}e.exports={metrikaWatcher:metrikaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(buildRetPathToLocation),o=regeneratorRuntime.mark(buildPassportLoginUrl),a=regeneratorRuntime.mark(buildPassportLogoutUrl),i=regeneratorRuntime.mark(buildPassportLogoutMultiAccountUrl),c=regeneratorRuntime.mark(buildPassportChangeMultiAccountUrl),s=regeneratorRuntime.mark(buildPassportAddMultiAccountUrl),u=regeneratorRuntime.mark(mdaInitSdkAndSync),l=regeneratorRuntime.mark(mdaAccountRecoveryEffectWatcher),p=regeneratorRuntime.mark(mdaDomikBindYandexAccountEffectWatcher),f=regeneratorRuntime.mark(mdaDomikCloseWatcher),d=regeneratorRuntime.mark(mdaDomikGeneralErrorMessage),m=regeneratorRuntime.mark(mdaDomikHackedErrorMessage),y=regeneratorRuntime.mark(mdaDomikGeneralSuccessMessage),_=regeneratorRuntime.mark(mdaSocialLoginEffectWatcher),h=regeneratorRuntime.mark(mdaRemindPasswordEffectWatcher),g=regeneratorRuntime.mark(mdaLoginEffectWatcher),b=regeneratorRuntime.mark(loginResponseRecoveryOrRebindFlow),E=regeneratorRuntime.mark(mdaCaptchaRefreshWatcher),v=regeneratorRuntime.mark(openAuthPopupEffectWatcher),O=regeneratorRuntime.mark(mdaLogoutEffectWatcher),P=regeneratorRuntime.mark(mdaRouteChangeEffectWatcher),S=regeneratorRuntime.mark(mdaCloseHeaderHintWatcher),T=regeneratorRuntime.mark(mdaLogoutMultiAccountAccountEffectWatcher),k=regeneratorRuntime.mark(mdaChangeMultiAccountAccountEffectWatcher),C=regeneratorRuntime.mark(mdaAddMultiAccountAccountEffectWatcher),w=regeneratorRuntime.mark(mdaWatcher),I=n(1),A=I.takeEvery,x=I.takeLatest,R=I.select,N=I.put,j=I.fork,D=I.take,M=I.call,L=I.actionChannel,F=I.delay,U=n(106).buffers,W=n(220),B=W.selectMdaSdkSso,G=W.selectMdaSdkRoot,H=W.selectYandexPassportUrlPath,Y=W.selectIsWebView,K=W.selectMdaSessionStatus,z=W.selectIsMdaError,V=n(36),q=n(49)("mda:common"),X=n(28),Q=n(970),Z=n(16),$=n(19).getIsAuthorized,J=n(74).getIsPartialComponent,ee=(n(80).LOAD_HEADER_FEATURES,n(35)),te=ee.openAuthPopupEffect,ne=ee.LOAD_USER,re=n(64),oe=re.COOKIE_DOMAIN,ae=re.MDA_EXPERIMENT_ENABLED_COOKIE_NAME,ie=re.OPEN_AUTH_POPUP_EFFECT,ce=re.LOGOUT_EFFECT,se=re.MDA_USER_HINT_CLOSED_COOKIE_NAME,ue=re.MDA_RELOADED_PAGE_AFTER_LOGIN,le=re.MDA_RELOADED_PAGE_AFTER_LOGIN_EXPIRES,pe=re.MDA_EXPERIMENT_COOKIE_EXPIRES,fe=re.MDA_USER_MENU_HINT_MODES,de=re.LOGOUT_MULTI_ACCOUNT_EFFECT,me=re.CHANGE_MULTI_ACCOUNT_EFFECT,ye=re.ADD_MULTI_ACCOUNT_EFFECT,_e=n(139).LOAD_ACCOUNTS_SUCCESS,he=n(61),ge=he.MDA_ROUTE_CHANGE_EFFECT,be=he.MDA_INIT_EFFECT,Ee=he.MDA_ACCOUNT_RECOVERY_EFFECT,ve=he.MDA_CLOSE_HEADER_HINT_EFFECT,Oe=he.updateMdaDomikLoginCaptcha,Pe=he.updateMdaDomikMode,Se=he.MDA_LOGIN_EFFECT,Te=he.MDA_REMIND_PASSWORD_EFFECT,ke=he.MDA_SOCIAL_LOGIN_EFFECT,Ce=he.MDA_CAPTCHA_REFRESH_EFFECT,we=he.MDA_DOMIK_CLOSE_EFFECT,Ie=he.MDA_DOMIK_BIND_YANDEX_ACCOUNT_EFFECT,Ae=he.MDA_DOMIK_DONE_EFFECT,xe=he.updateMdaHeaderHintShown,Re=he.updateMdaUserMenuHintMode,Ne=n(62).getSezamDefaultAccount,je=n(19).getUserId,De=n(59),Me=De.openModal,Le=De.closeModal,Fe=n(110).MODAL_TYPES.MDA_DOMIK,Ue=n(278).MODES,We=n(281),Be=n(715).MdaPushReasons,Ge=n(31).mdaMetrika;function buildRetPathToLocation(e,t){var n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R(G);case 2:return n=r.sent,r.next=5,R(K);case 5:return o=r.sent,a="".concat(window.location.origin,"/api/profile-pending/?retpath=").concat(encodeURIComponent(e)),r.abrupt("return",X.format({protocol:"https",host:n,pathname:"push",query:{retpath:a,uuid:Q(),reason:t,"session-status":o||""}}));case 8:case"end":return r.stop()}},r)}function buildPassportLoginUrl(){var e,t,n,r,a,i=arguments;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:{},t=e.retPath,n=void 0===t?window.location.href:t,o.next=3,R(H);case 3:return r=o.sent,o.next=6,buildRetPathToLocation(n,Be.login);case 6:return a=o.sent,o.abrupt("return","".concat(r,"auth?origin=kinopoisk&retpath=").concat(encodeURIComponent(a)));case 8:case"end":return o.stop()}},o)}function buildPassportLogoutUrl(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(H);case 2:return e=n.sent,n.next=5,buildRetPathToLocation(window.location.href,Be.logout);case 5:return t=n.sent,n.abrupt("return","".concat(e,"passport?mode=logout&yu=").concat(encodeURIComponent(V.get("yandexuid")),"&retpath=").concat(encodeURIComponent(t)));case 7:case"end":return n.stop()}},a)}function buildPassportLogoutMultiAccountUrl(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R(H);case 2:return t=r.sent,r.next=5,buildRetPathToLocation(window.location.href,Be.logoutMultiAuth);case 5:return n=r.sent,r.abrupt("return","".concat(t,"passport?mode=embeddedauth&yu=").concat(encodeURIComponent(V.get("yandexuid")),"&action=logout&uid=").concat(e,"&retpath=").concat(encodeURIComponent(n)));case 7:case"end":return r.stop()}},i)}function buildPassportChangeMultiAccountUrl(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,R(H);case 2:return t=r.sent,r.next=5,buildRetPathToLocation(window.location.href,Be.changeMultiAuth);case 5:return n=r.sent,r.abrupt("return","".concat(t,"passport?mode=embeddedauth&yu=").concat(encodeURIComponent(V.get("yandexuid")),"&action=change_default&uid=").concat(e,"&retpath=").concat(encodeURIComponent(n)));case 7:case"end":return r.stop()}},c)}function buildPassportAddMultiAccountUrl(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,R(H);case 2:return e=n.sent,n.next=5,buildRetPathToLocation(window.location.href,Be.addMultiAuth);case 5:return t=n.sent,n.abrupt("return","".concat(e,"auth/add?mode=add-user&retpath=").concat(encodeURIComponent(t)));case 7:case"end":return n.stop()}},s)}function initMdaSdkAndSyncCookiesPromise(e){var t=e.mdaSdkSso,n=e.mdaSdkRoot;return new Promise(function(e){q("MDA-SDK init start"),window.MDA2.init({sso:t,root:n,listener:function(t){return e(t)},uuid:Q()}),window.MDA2.sync()}).then(function(e){return q("MDA-SDK init finish"),e})}function mdaInitSdkAndSync(){var e,t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,R(B);case 2:return e=a.sent,a.next=5,R(G);case 5:return t=a.sent,a.next=8,R(K);case 8:return n=a.sent,a.next=11,R(z);case 11:return r=a.sent,a.next=14,initMdaSdkAndSyncCookiesPromise({mdaSdkSso:e,mdaSdkRoot:t}).catch(function(e){q("MDA init or sync error:",e)});case 14:if(!(o=a.sent)||"blocked"!==o.status||!n||window.location.search.includes("sso_failed")||window.location.hash.includes("sso_failed")||r||["VALID","NO_AUTH","INVALID","DISABLED"].includes(n)){a.next=25;break}return q("MDA statuses of sync and session:",status,n),a.next=19,F(500);case 19:return a.t0=window.location,a.next=22,buildRetPathToLocation(window.location.href,Be.blockedStatus);case 22:return a.t1=a.sent,a.t0.replace.call(a.t0,a.t1),a.abrupt("return");case 25:case"end":return a.stop()}},u)}function mdaAccountRecoveryEffectWatcher(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(Ee,U.expanding());case 2:return e=t.sent,t.next=5,D(_e);case 5:return t.next=7,x(e,regeneratorRuntime.mark(function _callee(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(mdaLoginEffectWatcher);case 2:return e.next=4,j(mdaRemindPasswordEffectWatcher);case 4:return e.next=6,j(mdaSocialLoginEffectWatcher);case 6:return e.next=8,j(mdaCaptchaRefreshWatcher);case 8:return e.next=10,j(mdaDomikCloseWatcher);case 10:return e.next=12,N(Oe());case 12:return e.next=14,N(Pe({mode:Ue.LOGIN}));case 14:return e.next=16,N(Me({name:Fe}));case 16:return e.next=18,N(xe(!1));case 18:return e.next=20,M(Ge.recoveryUiMain);case 20:case"end":return e.stop()}},_callee)}));case 7:case"end":return t.stop()}},l)}function mdaDomikBindYandexAccountEffectWatcher(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x(Ie,regeneratorRuntime.mark(function _callee2(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Z.post("/api/yandex-connection/",{body:{sessionId:e}});case 3:t.next=11;break;case 5:return t.prev=5,t.t0=t.catch(0),q("MDA bind yandex error:",t.t0),t.next=10,M(mdaDomikGeneralErrorMessage,Ue.MESSAGE_ERROR);case 10:return t.abrupt("return");case 11:return t.next=13,M(mdaDomikGeneralSuccessMessage);case 13:case"end":return t.stop()}},_callee2,null,[[0,5]])}));case 2:case"end":return t.stop()}},p)}function mdaDomikCloseWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(we,regeneratorRuntime.mark(function _callee3(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Le(Fe));case 2:case"end":return e.stop()}},_callee3)}));case 2:case"end":return e.stop()}},f)}function mdaDomikGeneralErrorMessage(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Ae,regeneratorRuntime.mark(function _callee4(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Oe());case 2:return e.next=4,N(Pe({mode:Ue.LOGIN}));case 4:case"end":return e.stop()}},_callee4)}));case 2:case"end":return e.stop()}},_callee5)}));case 2:return t.next=4,N(Pe({mode:e}));case 4:return t.next=6,M(Ge.recoveryUiError);case 6:case"end":return t.stop()}},d)}function mdaDomikHackedErrorMessage(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.name,n=e.email,r.next=3,j(regeneratorRuntime.mark(function _callee7(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Ae,regeneratorRuntime.mark(function _callee6(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Le(Fe));case 2:case"end":return e.stop()}},_callee6)}));case 2:case"end":return e.stop()}},_callee7)}));case 3:return r.next=5,N(Pe({mode:Ue.MESSAGE_ACCOUNT_HACKED,params:{name:t,email:n}}));case 5:return r.next=7,M(Ge.recoveryUiError);case 7:case"end":return r.stop()}},m)}function mdaDomikGeneralSuccessMessage(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(regeneratorRuntime.mark(function _callee9(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Ae,regeneratorRuntime.mark(function _callee8(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(Le(Fe));case 2:window.location.assign("/mykp/");case 3:case"end":return e.stop()}},_callee8)}));case 2:case"end":return e.stop()}},_callee9)}));case 2:return e.next=4,N(Pe({mode:Ue.MESSAGE_DONE}));case 4:return V.set(se,"1",{expires:pe}),e.next=7,M(Ge.recoveryUiSuccess);case 7:case"end":return e.stop()}},y)}function mdaSocialLoginEffectWatcher(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new We,t.next=3,x(ke,regeneratorRuntime.mark(function _callee10(t){var n,r,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=t.payload.socialNetwork,i.prev=1,i.next=4,e.start(n);case 4:return r=i.sent,o=r.task_id,i.next=8,Z.post("/api/social-login-request/",{body:{taskId:o}});case 8:return a=i.sent,i.next=11,M(loginResponseRecoveryOrRebindFlow,a);case 11:i.next=18;break;case 13:return i.prev=13,i.t0=i.catch(1),q("MDA recovery social login error:",i.t0),i.next=18,M(mdaDomikGeneralErrorMessage,Ue.MESSAGE_ERROR);case 18:case"end":return i.stop()}},_callee10,null,[[1,13]])}));case 3:case"end":return t.stop()}},_)}function mdaRemindPasswordEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Te,regeneratorRuntime.mark(function _callee11(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.Ya.Kinopoisk.auth.restorePassword(),e.next=3,N(Le(Fe));case 3:case"end":return e.stop()}},_callee11)}));case 2:case"end":return e.stop()}},h)}function mdaLoginEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Se,regeneratorRuntime.mark(function _callee12(e){var t,n,r,o,a,i,c;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t=e.payload,n=t.login,r=t.password,o=t.trackId,a=t.captchaKey,i=t.captchaAnswer,s.prev=1,s.next=4,Z.post("/api/login-request/",{body:{login:n,password:r,trackId:o,captchaKey:a,captchaAnswer:i}});case 4:return c=s.sent,s.next=7,M(loginResponseRecoveryOrRebindFlow,c);case 7:s.next=14;break;case 9:return s.prev=9,s.t0=s.catch(1),q("MDA recovery login error:",s.t0),s.next=14,M(mdaDomikGeneralErrorMessage,Ue.MESSAGE_ERROR);case 14:case"end":return s.stop()}},_callee12,null,[[1,9]])}));case 2:case"end":return e.stop()}},g)}function loginResponseRecoveryOrRebindFlow(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!["not-registered","invalid-login"].includes(e.type)){o.next=6;break}return o.next=3,M(mdaDomikGeneralErrorMessage,Ue.MESSAGE_ACCOUNT_NOT_FOUND);case 3:return o.abrupt("return");case 6:if(!["hacked-no-email","unconfirmed","no-email"].includes(e.type)){o.next=12;break}return o.next=9,M(mdaDomikGeneralErrorMessage,Ue.MESSAGE_ERROR);case 9:return o.abrupt("return");case 12:if("hacked"!==e.type){o.next=16;break}return o.next=15,M(mdaDomikHackedErrorMessage,{name:e.displayName,email:e.email});case 15:return o.abrupt("return");case 16:if(!e.sessionKey){o.next=58;break}return o.next=19,Z.post("/api/social-accounts-request/yandex/",{body:{sessionKey:e.sessionKey}});case 19:return t=o.sent,o.next=22,R(Ne);case 22:if(o.t0=o.sent,o.t0){o.next=25;break}o.t0={};case 25:return n=o.t0,q("MDA recovery binded account:",t),q("MDA recovery sezam account:",n),o.next=30,j(mdaDomikBindYandexAccountEffectWatcher,e.sessionKey);case 30:if(t){o.next=36;break}return o.next=33,N(Pe({mode:Ue.RECOVERY,params:{kpAccountName:e.user.displayName,kpAccountEmail:e.user.email,kpAccountImageUrl:e.user.image&&e.user.image.baseUrl,kpAccountLink:"/user/".concat(e.user.id,"/go"),yandexAccountName:n.displayName&&n.displayName.name,yandexAccountEmail:n.defaultEmail,yandexAccountImageUrl:n.imageUrl&&n.imageUrl.x1,yandexAccountLink:"https://passport.yandex.ru/profile"}}));case 33:return o.next=35,M(Ge.recoveryUiConfirm);case 35:return o.abrupt("return");case 36:if(t.id!==n.uid){o.next=40;break}return o.next=39,M(mdaDomikGeneralSuccessMessage);case 39:return o.abrupt("return");case 40:return o.t1=N,o.t2=Pe,o.t3=Ue.BIND,o.t4=t.name,o.t5=n.displayName&&n.displayName.name,o.t6=n.defaultEmail,o.t7=n.imageUrl&&n.imageUrl.x1,o.next=49,buildPassportLoginUrl();case 49:return o.t8=o.sent,o.t9={firstAccountName:o.t4,secondAccountName:o.t5,secondAccountEmail:o.t6,secondAccountImageUrl:o.t7,reloginLink:o.t8},o.t10={mode:o.t3,params:o.t9},o.t11=(0,o.t2)(o.t10),o.next=55,(0,o.t1)(o.t11);case 55:return o.next=57,M(Ge.recoveryUiRebind);case 57:return o.abrupt("return");case 58:if(!e.captcha){o.next=62;break}return r=e.captcha,o.next=62,N(Oe({trackId:r.trackId,captchaKey:r.captchaKey,imageUrl:r.imageUrl}));case 62:case"end":return o.stop()}},b)}function mdaCaptchaRefreshWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(Ce,regeneratorRuntime.mark(function _callee13(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,Z.post("/api/captcha-request/",{body:{trackId:t}});case 3:return n=r.sent,r.next=6,N(Oe(n));case 6:case"end":return r.stop()}},_callee13)}));case 2:case"end":return e.stop()}},E)}function openAuthPopupEffectWatcher(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L(ie,U.expanding());case 2:return e=t.sent,t.next=5,x(e,regeneratorRuntime.mark(function _callee14(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).retPath,r.t0=window.location,r.next=6,buildPassportLoginUrl({retPath:n});case 6:r.t1=r.sent,r.t0.assign.call(r.t0,r.t1);case 8:case"end":return r.stop()}},_callee14)}));case 5:case"end":return t.stop()}},v)}function mdaLogoutEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(ce,regeneratorRuntime.mark(function _callee15(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=window.location,e.next=3,buildPassportLogoutUrl();case 3:e.t1=e.sent,e.t0.assign.call(e.t0,e.t1);case 5:case"end":return e.stop()}},_callee15)}));case 2:case"end":return e.stop()}},O)}function mdaRouteChangeEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(ge,regeneratorRuntime.mark(function _callee16(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("#login"!==window.location.hash){e.next=4;break}return window.location.hash="",e.next=4,N(te());case 4:case"end":return e.stop()}},_callee16)}));case 2:case"end":return e.stop()}},P)}function mdaCloseHeaderHintWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x(ve,regeneratorRuntime.mark(function _callee17(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(xe(!1));case 2:return V.set(se,"1",{expires:pe}),e.next=5,N(Re(fe.connectAnother));case 5:case"end":return e.stop()}},_callee17)}));case 2:case"end":return e.stop()}},S)}function mdaLogoutMultiAccountAccountEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(de,regeneratorRuntime.mark(function _callee18(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.t0=window.location,n.next=4,buildPassportLogoutMultiAccountUrl(t);case 4:n.t1=n.sent,n.t0.assign.call(n.t0,n.t1);case 6:case"end":return n.stop()}},_callee18)}));case 2:case"end":return e.stop()}},T)}function mdaChangeMultiAccountAccountEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(me,regeneratorRuntime.mark(function _callee19(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.t0=window.location,n.next=4,buildPassportChangeMultiAccountUrl(t);case 4:n.t1=n.sent,n.t0.assign.call(n.t0,n.t1);case 6:case"end":return n.stop()}},_callee19)}));case 2:case"end":return e.stop()}},k)}function mdaAddMultiAccountAccountEffectWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(ye,regeneratorRuntime.mark(function _callee20(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=window.location,e.next=3,buildPassportAddMultiAccountUrl();case 3:e.t1=e.sent,e.t0.assign.call(e.t0,e.t1);case 5:case"end":return e.stop()}},_callee20)}));case 2:case"end":return e.stop()}},C)}function mdaWatcher(){var e,t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,R(Y);case 2:if(!o.sent){o.next=4;break}return o.abrupt("return");case 4:return V.set(ae,"1",{expires:pe,domain:oe}),o.next=7,L(function(e){return ne.includes(e.type)&&"done"===e.meta.status},U.expanding());case 7:return e=o.sent,o.next=10,D(be);case 10:return o.next=12,j(mdaAccountRecoveryEffectWatcher);case 12:return o.next=14,j(mdaCloseHeaderHintWatcher);case 14:return o.next=16,j(mdaRouteChangeEffectWatcher);case 16:return o.next=18,j(openAuthPopupEffectWatcher);case 18:return o.next=20,j(mdaLogoutEffectWatcher);case 20:return o.next=22,j(mdaLogoutMultiAccountAccountEffectWatcher);case 22:return o.next=24,j(mdaChangeMultiAccountAccountEffectWatcher);case 24:return o.next=26,j(mdaAddMultiAccountAccountEffectWatcher);case 26:return o.next=28,R(J);case 28:if(!o.sent){o.next=31;break}return o.next=31,D(e);case 31:return o.next=33,M(mdaInitSdkAndSync);case 33:return o.prev=33,o.next=36,Z.post("/api/profile/");case 36:return t=o.sent,o.next=39,R(je);case 39:if(n=o.sent,!(r=t&&t.kp1UserId)&&!n||r===n||V.get(ue)){o.next=49;break}return q("Profiles is not synced:",n,t),V.set(ue,"1",{expires:le}),o.next=46,F(500);case 46:window.location.reload(),o.next=50;break;case 49:q("Profiles is synced:",n,t);case 50:o.next=55;break;case 52:o.prev=52,o.t0=o.catch(33),q("Create profile from MDA error:",o.t0);case 55:return o.next=57,R($);case 57:if(!o.sent){o.next=67;break}if(V.get(se)){o.next=65;break}return o.next=61,N(xe(!1));case 61:return o.next=63,N(Re(fe.recover));case 63:o.next=67;break;case 65:return o.next=67,N(Re(fe.connectAnother));case 67:case"end":return o.stop()}},w,null,[[33,52]])}e.exports={mdaWatcher:mdaWatcher}},function(e,t,n){"use strict";function createRequestStatusSelector(e){return function(t){return t===e}}n.r(t),n.d(t,"createRequestStatusSelector",function(){return createRequestStatusSelector})},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"RequestStatuses",function(){return r}),function(e){e.idle="idle",e.pending="pending",e.loaded="loaded",e.error="error"}(r||(r={}))},function(e,t){e.exports={receiverPath:"/social-broker/response-receiver/",socialBrokerUrlPath:null,yandexPassportUrlPath:null,consumer:"kinopoisk",networks:{vkontakte:{app:"vkontakte-kinopoisk",size:[680,460],scopes:{share:"wall,offline"}},facebook:{app:"facebook-kinopoisk",size:[650,340],scopes:{share:"publish_actions"}},twitter:{app:"twitter-kinopoisk",size:[650,736],scopes:{share:"write"}},odnoklassniki:{app:"odnoklassniki-kinopoisk",size:[715,400]},google:{app:"google-kinopoisk",size:[430,690]},mailru:{app:"mailru-kinopoisk",size:[448,380]},yandex:{app:"yandex-kinopoisk",size:[650,600]}}}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"MdaPushReasons",function(){return r}),function(e){e.blockedStatus="blocked-status",e.login="login",e.logout="logout",e.addMultiAuth="add-multi-auth",e.logoutMultiAuth="logout-multi-auth",e.changeMultiAuth="change-multi-auth"}(r||(r={}))},function(e,t,n){var r=regeneratorRuntime.mark(loadUserWatcher),o=n(1),a=o.put,i=o.take,c=n(35),s=c.LOAD_USER_EFFECT,u=c.LOAD_USER,l=c.loadUser,p=n(210).updateSession,f=function(e){var t=e.type,n=e.meta;return t===u&&"done"===(void 0===n?{}:n).status};function loadUserWatcher(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(s);case 2:return r.next=4,a(l());case 4:return r.next=6,i(f);case 6:if(e=r.sent,t=e.payload.state,!(n=void 0===t?{}:t).session){r.next=12;break}return r.next=12,a(p(n.session));case 12:case"end":return r.stop()}},r)}e.exports={loadUserWatcher:loadUserWatcher}},function(e,t,n){"use strict";var r=n(718).changeSectionSagaWatcher,o=n(719).scrollToSagaWatcher,a=n(720).reloadSagaWatcher,i=n(721).setOriginalUrlSagaWatcher,c=n(722),s=c.openAdminSnippetSagaWatcher,u=c.closeAdminSnippetSagaWatcher,l=c.restoreAdminSnippetSagaWatcher;e.exports=[a,r,o,s,u,l,i]},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(changeSectionSaga),o=regeneratorRuntime.mark(changeSectionSagaWatcher),a=n(1).takeEvery,i=n(63).PAGE_CHANGE_SECTION_EFFECT;function changeSectionSaga(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=e.payload,n=t.sectionId,window.location.hash="#".concat(n);case 3:case"end":return r.stop()}},r)}function changeSectionSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i,changeSectionSaga);case 2:case"end":return e.stop()}},o)}e.exports={changeSectionSagaWatcher:changeSectionSagaWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(scrollToSaga),o=regeneratorRuntime.mark(scrollToSagaWatcher),a=n(1),i=a.takeEvery,c=a.select,s=n(26).getScrollToOffset,u=n(63).PAGE_SCROLL_TO_EFFECT;function scrollToSaga(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.top,o=t.behavior,r.next=4,c(s);case 4:a=r.sent,i=window.pageYOffset||document.documentElement.scrollTop,window.scroll({top:n+i+a,behavior:o});case 7:case"end":return r.stop()}},r)}function scrollToSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u,scrollToSaga);case 2:case"end":return e.stop()}},o)}e.exports={scrollToSagaWatcher:scrollToSagaWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(reloadSaga),o=regeneratorRuntime.mark(reloadSagaWatcher),a=n(1).takeEvery,i=n(63).PAGE_RELOAD;function reloadSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:location.reload();case 1:case"end":return e.stop()}},r)}function reloadSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(i,reloadSaga);case 2:case"end":return e.stop()}},o)}e.exports={reloadSagaWatcher:reloadSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(setOriginalUrlSaga),o=regeneratorRuntime.mark(setOriginalUrlSagaWatcher),a=n(1),i=a.take,c=a.call,s=a.put,u=n(63),l=u.PAGE_SET_ORIGINAL_URL_EFFECT,p=u.pageUpdate;function setOriginalUrlSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p({originalUrl:"".concat(window.location.pathname).concat(window.location.search)}));case 2:case"end":return e.stop()}},r)}function setOriginalUrlSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l);case 2:return e.next=4,c(setOriginalUrlSaga);case 4:case"end":return e.stop()}},o)}e.exports={setOriginalUrlSagaWatcher:setOriginalUrlSagaWatcher}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(toggleAdminSnippetStatusSaga),o=regeneratorRuntime.mark(openAdminSnippetSagaWatcher),a=regeneratorRuntime.mark(closeAdminSnippetSagaWatcher),i=regeneratorRuntime.mark(restoreAdminSnippetSaga),c=regeneratorRuntime.mark(restoreAdminSnippetSagaWatcher),s=n(1),u=s.takeEvery,l=s.put,p=s.call,f=n(63),d=f.PAGE_OPEN_ADMIN_SNIPPET_EFFECT,m=f.PAGE_CLOSE_ADMIN_SNIPPET_EFFECT,y=f.PAGE_RESTORE_ADMIN_SNIPPET_EFFECT,_=f.pageUpdate,h=n(429),g=h.ADMIN_SNIPPET_STATUS,b=h.ADMIN_SNIPPET_STATUS_STORAGE_KEY,E=function(e){try{localStorage.setItem(b,e)}catch(e){}};function toggleAdminSnippetStatusSaga(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l(_({adminSnippetStatus:e}));case 2:return t.next=4,p(E,e);case 4:case"end":return t.stop()}},r)}function openAdminSnippetSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(d,toggleAdminSnippetStatusSaga,g.OPEN);case 2:case"end":return e.stop()}},o)}function closeAdminSnippetSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(m,toggleAdminSnippetStatusSaga,g.CLOSE);case 2:case"end":return e.stop()}},a)}function restoreAdminSnippetSaga(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e=localStorage.getItem(b),!Object.values(g).includes(e)){t.next=5;break}return t.next=5,l(_({adminSnippetStatus:e}));case 5:t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}},i,null,[[0,7]])}function restoreAdminSnippetSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(y,restoreAdminSnippetSaga);case 2:case"end":return e.stop()}},c)}e.exports={openAdminSnippetSagaWatcher:openAdminSnippetSagaWatcher,closeAdminSnippetSagaWatcher:closeAdminSnippetSagaWatcher,restoreAdminSnippetSagaWatcher:restoreAdminSnippetSagaWatcher}},function(e,t,n){"use strict";var r=n(724).showSagaWatcher,o=n(735).hideSagaEffect;e.exports=[r,o]},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(getFilmModel),o=regeneratorRuntime.mark(getPersonModel),a=regeneratorRuntime.mark(getModel),i=regeneratorRuntime.mark(showSaga),c=regeneratorRuntime.mark(showSagaWatcher),s=n(1),u=s.takeLatest,l=s.select,p=s.call,f=s.put,d=s.race,m=s.take,y=n(91),_=y.showPreviewCard,h=y.PAGE_SHOW_PREVIEW_CARD_EFFECT,g=y.PAGE_HIDE_PREVIEW_CARD_EFFECT,b=n(247).filmModelCreate,E=n(191).createPerson,v=n(224).getFilmModel,O=n(387).getPersonModel,P=n(48),S=n(16),T=function(e){return S.get(P.url("api-tooltip-film",{id:e}))};function getFilmModel(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,l(v,e);case 2:if(!(t=r.sent)){r.next=5;break}return r.abrupt("return",t);case 5:return r.prev=5,r.next=8,p(T,e);case 8:return n=r.sent,o=n.film,r.next=12,f(b(o.id,o));case 12:return r.abrupt("return",o);case 15:return r.prev=15,r.t0=r.catch(5),r.abrupt("return",null);case 18:case"end":return r.stop()}},r,null,[[5,15]])}var k=function(e){return S.get(P.url("api-tooltip-person",{id:e}))};function getPersonModel(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l(O,e);case 2:if(!(t=o.sent)){o.next=5;break}return o.abrupt("return",t);case 5:return o.prev=5,o.next=8,p(k,e);case 8:return n=o.sent,r=n.person,o.next=12,f(E(r.id,r));case 12:return o.abrupt("return",r);case 15:return o.prev=15,o.t0=o.catch(5),o.abrupt("return",null);case 18:case"end":return o.stop()}},o,null,[[5,15]])}function getModel(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:t=e.payload,n=t.id,r=t.type,o.t0=r,o.next="film"===o.t0?5:"name"===o.t0?8:11;break;case 5:return o.next=7,p(getFilmModel,n);case 7:return o.abrupt("return",o.sent);case 8:return o.next=10,p(getPersonModel,n);case 10:return o.abrupt("return",o.sent);case 11:return o.abrupt("return",null);case 12:case"end":return o.stop()}},a)}function showSaga(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.id,r=t.type,a.next=4,d({model:p(getModel,{payload:t}),hideEffect:m(g)});case 4:if(o=a.sent,!o.model){a.next=9;break}return a.next=9,f(_({id:n,type:r}));case 9:case"end":return a.stop()}},i)}function showSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(h,showSaga);case 2:case"end":return e.stop()}},c)}e.exports={showSagaWatcher:showSagaWatcher}},,function(e,t,n){"use strict";var r={kinopoisk:"kp",imdb:"imdb",expectations:"expectations"};e.exports={RATING_TYPES:{UNKNOWN:"unknown",POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral"},RATING_SOURCE:r,RATING_INCOMING_SOURCE_MAP:[["rating",r.kinopoisk],["kp",r.kinopoisk],["kinopoisk",r.kinopoisk],["expectations",r.expectations],["imdb",r.imdb]],POSSIBLE_CURRENT_RATING:[r.kinopoisk,r.expectations]}},function(e,t,n){function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(105).update;e.exports={addModelsReducerHandler:function(e,t){var n=t.payload,o=t.meta.modelsType;return r(e,_defineProperty({},o,{$autoCreateObject:{$merge:n}}))},updateModelReducerHandler:function(e,t){var n=t.payload,o=n.modelType,a=n.data;return r(e,_defineProperty({},o,{$merge:a}))}}},function(e,t){var n=function(e){return e.models};e.exports={selectModelsState:n,selectModels:function(e,t){return n(e)[t]||{}}}},function(e,t){var n,r=(n="models/ADD_MODELS",function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{type:n,payload:t,meta:{modelsType:e}}});e.exports={MODELS_ADD_MODELS:"models/ADD_MODELS",addModels:r,UPDATE_MODEL:"models/UPDATE_MODEL",updateModel:function(e,t){return{type:"models/UPDATE_MODEL",payload:{modelType:e,data:t}}}}},function(e,t,n){"use strict";n.r(t),n.d(t,"MODEL_TYPE",function(){return r});var r="plainFilms"},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(732);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r)},function(e,t,n){var r=regeneratorRuntime.mark(requestComingFilms),o=regeneratorRuntime.mark(fetchComingSoonFilmsCollectionSaga),a=n(1),i=a.put,c=a.putResolve,s=a.call,u=n(25).sendRequestEffect,l=n(88),p=n(435).addFilmsModels,f=n(47),d=f.fetchListStart,m=f.fetchListFinish,y=f.fetchListFailed;function requestComingFilms(){var e,t,n,o,a,i,s,p,f,d,m=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=m.length>0&&void 0!==m[0]?m[0]:{},t=e.limit,n=e.offset,o=e.releasedBefore,r.next=3,c(u({url:"/api/films/coming-soon/",method:"get",params:{query:{offset:n,limit:t,releasedBefore:o}}}));case 3:return a=r.sent,i=a.items,s=a.pagination,p=l(i),f=p.map,d=p.list,r.abrupt("return",{map:f,list:d,pagination:s});case 8:case"end":return r.stop()}},r)}function fetchComingSoonFilmsCollectionSaga(){var e,t,n,r,a,c,u,l,f,_,h=arguments;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:{},t=e.limit,n=e.offset,r=void 0===n?0:n,a=e.releasedBefore,c=e.listId,o.next=3,i(d(c,{pagination:{limit:t,offset:r}}));case 3:return o.prev=3,o.next=6,s(requestComingFilms,{limit:t,offset:r,releasedBefore:a});case 6:return u=o.sent,l=u.map,f=u.list,_=u.pagination,o.next=10,i(p(l));case 10:return o.next=12,i(m(c,{items:f,pagination:_}));case 12:return o.abrupt("return",u);case 15:return o.prev=15,o.t0=o.catch(3),o.next=19,i(y(c));case 19:throw o.t0;case 20:case"end":return o.stop()}},o,null,[[3,15]])}e.exports={requestComingFilms:requestComingFilms,fetchComingSoonFilmsCollectionSaga:fetchComingSoonFilmsCollectionSaga}},function(e,t,n){var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(105).update,a=n(83),i=n(98),c=i.UI_LISTS_ADD_LIST,s=i.UI_LISTS_UPDATE_LIST,u=i.UI_LISTS_PATCH_LIST,l=i.UI_LISTS_DELETE_LIST,p=i.UI_LISTS_CLEAR_LIST_FIELDS,f=function(e,t,n){var r=t.payload,a=t.meta.listId;return o(e,_defineProperty({},a,{$autoCreateObject:_defineProperty({},n,r)}))},d=a({},(_defineProperty(r={},c,function(e,t){return f(e,t,"$set")}),_defineProperty(r,s,function(e,t){return f(e,t,"$merge")}),_defineProperty(r,u,function(e,t){return f(e,t,"$patch")}),_defineProperty(r,p,function(e,t){var n=t.meta,r=t.payload.fields,a=n.listId;return o(e,_defineProperty({},a,{$autoCreateObject:{$unset:r}}))}),_defineProperty(r,l,function(e,t){var n=t.meta.listId;return o(e,{$unset:[n]})}),r));e.exports={reducer:d}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(1),o=r.put,a=r.call,i=n(89).UI_LIST_STATUS,c=n(98).patchList;e.exports={createFetchPageWithUiListSaga:function(e){return regeneratorRuntime.mark(function _callee(t){var n,r,s,u,l,p,f,d;return regeneratorRuntime.wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return n=t.limit,r=void 0===n?0:n,s=t.listId,u=Number(t.page)||1,l=(u-1)*r,m.next=5,o(c(s,{pagination:{limit:r,offset:l,page:u,status:i.pending}}));case 5:return m.prev=5,m.next=8,a(e,_objectSpread({},t,{offset:l,limit:r,page:u}));case 8:return p=m.sent,f=p.list,d=p.pagination,m.next=12,o(c(s,{items:f,pagination:_objectSpread({},d,{status:i.loaded})}));case 12:return m.abrupt("return",p);case 15:return m.prev=15,m.t0=m.catch(5),m.next=19,o(c(s,{pagination:{status:i.failed}}));case 19:throw m.t0;case 20:case"end":return m.stop()}},_callee,null,[[5,15]])})}}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(hideSaga),o=regeneratorRuntime.mark(hideSagaEffect),a=n(1),i=a.put,c=a.takeEvery,s=a.select,u=n(26).getPreviewCard,l=n(91),p=l.hidePreviewCard,f=l.PAGE_HIDE_PREVIEW_CARD_EFFECT;function hideSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u);case 2:if(!e.sent){e.next=6;break}return e.next=6,i(p());case 6:case"end":return e.stop()}},r)}function hideSagaEffect(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(f,hideSaga);case 2:case"end":return e.stop()}},o)}e.exports={hideSagaEffect:hideSagaEffect}},function(e,t,n){var r=n(737).userSubscriptionWatcher,o=n(738).cancelSubscriptionWatcher,a=n(739).switchCancellationTypeSagaWatcher,i=n(740).switchBackSubscriptionWatcher;e.exports=[r,o,a,i]},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(subscriptionsListLoader),o=regeneratorRuntime.mark(userSubscriptionWatcher),a=n(1),i=a.put,c=a.select,s=a.call,u=a.take,l=a.all,p=n(19).getOttIntegration,f=n(35).LOAD_USER,d=n(16),m=n(78),y=m.LOAD_AVAILABLE_LIST_EFFECT,_=m.update;function subscriptionsListLoader(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(_({isLoading:!0}));case 2:return t.next=4,c(p);case 4:if(!t.sent){t.next=9;break}return t.next=8,i(_({isLoading:!1}));case 8:return t.abrupt("return");case 9:return t.prev=9,t.next=12,s([d,d.get],"/user/subscriptions/");case 12:return e=t.sent,t.next=15,i(_({isLoading:!1,availableSubscriptions:e}));case 15:t.next=21;break;case 17:return t.prev=17,t.t0=t.catch(9),t.next=21,i(_({isLoading:!1,error:t.t0}));case 21:case"end":return t.stop()}},r,null,[[9,17]])}function userSubscriptionWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,l([u(y),u(function(e){var t=e.type,n=e.meta;return t===f&&"done"===(void 0===n?{}:n).status})]);case 3:return e.next=5,s(subscriptionsListLoader);case 5:e.next=0;break;case 7:case"end":return e.stop()}},o)}e.exports={userSubscriptionWatcher:userSubscriptionWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(cancelSubscriptionEffect),o=regeneratorRuntime.mark(cancelSubscriptionWatcher),a=n(1),i=a.put,c=a.call,s=a.takeEvery,u=n(16),l=n(78).CANCEL_SUBSCRIPTION_EFFECT,p=n(59).openModal,f=n(80).loadHeaderFeatures,d=n(78).loadAvailableSubscriptionsListEffect,m=n(110).MODAL_TYPES;function cancelSubscriptionEffect(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c([u,u.delete],"/user/subscriptions/");case 3:return e.next=5,i(p({name:m.USER_SUBSCRIPTION_CANCELED}));case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:return e.next=11,i(d());case 11:return e.next=13,i(f());case 13:case"end":return e.stop()}},r,null,[[0,7]])}function cancelSubscriptionWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l,cancelSubscriptionEffect);case 2:case"end":return e.stop()}},o)}e.exports={cancelSubscriptionWatcher:cancelSubscriptionWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(switchCancellationTypeSaga),o=regeneratorRuntime.mark(switchCancellationTypeSagaWatcher),a=n(1),i=a.takeEvery,c=a.put,s=a.select,u=n(78).SWITCH_CANCELLATION_TYPE_EFFECT,l=n(59).openModal,p=n(110).MODAL_TYPES,f=n(108).selectIsSwitchBackAvailable;function switchCancellationTypeSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(f);case 2:if(!e.sent){e.next=8;break}return e.next=6,c(l({name:p.USER_SUBSCRIPTION_CONFIRM_SWITCH_BACK}));case 6:e.next=10;break;case 8:return e.next=10,c(l({name:p.USER_SUBSCRIPTION_CONFIRM_CANCEL}));case 10:case"end":return e.stop()}},r)}function switchCancellationTypeSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u,switchCancellationTypeSaga);case 2:case"end":return e.stop()}},o)}e.exports={switchCancellationTypeSagaWatcher:switchCancellationTypeSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(switchBackSubscription),o=regeneratorRuntime.mark(switchBackSubscriptionWatcher),a=n(1),i=a.put,c=a.select,s=a.putResolve,u=n(29).takeAwait,l=n(25).sendRequestEffect,p=n(78).SWITCH_BACK_SUBSCRIPTION_EFFECT,f=n(59).openModal,d=n(80).loadHeaderFeatures,m=n(78).loadAvailableSubscriptionsListEffect,y=n(110).MODAL_TYPES,_=n(108),h=_.selectIsSwitchBackAvailable,g=_.selectBillingProductId;function switchBackSubscription(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c(h);case 2:return e=n.sent,n.next=5,c(g);case 5:if(t=n.sent,e&&t){n.next=8;break}return n.abrupt("return");case 8:return n.prev=8,n.next=11,s(l({url:"/user/subscriptions/switched/",method:"delete",params:{query:{billingProductId:t}}}));case 11:return n.next=13,i(f({name:y.USER_SUBSCRIPTION_SWITCHED_BACK}));case 13:n.next=17;break;case 15:n.prev=15,n.t0=n.catch(8);case 17:return n.next=19,i(m());case 19:return n.next=21,i(d());case 21:case"end":return n.stop()}},r,null,[[8,15]])}function switchBackSubscriptionWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p,switchBackSubscription);case 2:case"end":return e.stop()}},o)}e.exports={switchBackSubscriptionWatcher:switchBackSubscriptionWatcher}},function(e,t,n){var r=n(742).initWatcher,o=n(436).applyPromocodeWatcher,a=n(743).trustIframeWatcher,i=n(744).retryPaymentWatcher;e.exports=[r,o,a,i]},function(e,t,n){var r=regeneratorRuntime.mark(updateInitialPromocode),o=regeneratorRuntime.mark(continueApplyingAfterAuthorization),a=regeneratorRuntime.mark(init),i=regeneratorRuntime.mark(initWatcher),c=n(1),s=c.put,u=c.call,l=c.select,p=c.takeEvery,f=n(65),d=n(154),m=d.INIT_EFFECT,y=d.update,_=d.applyPromocodeEffect,h=n(155).LOCAL_STORAGE_ITEM_NAME,g=n(222).getIsAuthorized,b=n(31).promocode;function updateInitialPromocode(){var e,t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=localStorage.getItem(h),t=f.parse(location.search.slice(1)),n=t.promocode,o=e||n||"",r.next=5,s(y({landing:{initialPromocode:o}}));case 5:case"end":return r.stop()}},r)}function continueApplyingAfterAuthorization(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(g);case 2:if(e=n.sent,t=localStorage.getItem(h),localStorage.removeItem(h),!e||!t){n.next=10;break}return n.next=8,u(b.authSuccess);case 8:return n.next=10,s(_({promocode:t}));case 10:case"end":return n.stop()}},o)}function init(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,updateInitialPromocode();case 2:return e.next=4,continueApplyingAfterAuthorization();case 4:case"end":return e.stop()}},a)}function initWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(m,init);case 2:case"end":return e.stop()}},i)}e.exports={updateInitialPromocode:updateInitialPromocode,continueApplyingAfterAuthorization:continueApplyingAfterAuthorization,initWatcher:initWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(closeWatcher),o=regeneratorRuntime.mark(handlePaymentStatus),a=regeneratorRuntime.mark(getNextChargeDate),i=regeneratorRuntime.mark(trustIframePostMessageListener),c=regeneratorRuntime.mark(trustIframeWatcher),s=n(49),u=n(1),l=u.put,p=u.call,f=u.fork,d=u.take,m=u.takeLatest,y=u.delay,_=n(106).eventChannel,h=n(53),g=n(154),b=g.START_TRUST_IFRAME_LISTENER_EFFECT,E=g.STOP_TRUST_IFRAME_LISTENER_EFFECT,v=g.update,O=n(155),P=O.PAGES,S=O.PAYMENT_FORM_ERROR_TYPE,T=n(16),k=n(31).promocode,C=s("kp-front:trust:log"),w=s("kp-front:trust:debug");function createPostMessageChannel(){return _(function(e){var t=function(t){return e(t)};return window.addEventListener("message",t),w("post message channel started"),function(){window.removeEventListener("message",t),w("post message channel closed")}})}function closeWatcher(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d(E);case 2:e.close();case 3:case"end":return t.stop()}},r)}function handlePaymentStatus(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=e.value,r.t0=t,r.next="ready"===r.t0?4:"wait_for_notification"===r.t0?7:10;break;case 4:return r.next=6,l(v({paymentForm:{isLoading:!1}}));case 6:return r.abrupt("break",15);case 7:return r.next=9,l(v({paymentForm:{isLoading:!0}}));case 9:return r.abrupt("break",15);case 10:if(!(n=S[t])){r.next=14;break}return r.next=14,l(v({paymentForm:{isLoading:!1,errorType:n}}));case 14:return r.abrupt("break",15);case 15:case"end":return r.stop()}},o)}function getNextChargeDate(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e=h().add(1,"month").format(),t=3;case 2:if(!(t>0)){r.next=19;break}return r.prev=3,r.next=6,p([T,T.get],"/user/subscription/extended/");case 6:if(!(n=r.sent).nextChargeDate){r.next=10;break}return e=n.nextChargeDate,r.abrupt("break",19);case 10:r.next=14;break;case 12:r.prev=12,r.t0=r.catch(3);case 14:return r.next=16,y(1e3);case 16:t--,r.next=2;break;case 19:return r.abrupt("return",e);case 20:case"end":return r.stop()}},a,null,[[3,12]])}function trustIframePostMessageListener(){var e,t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,p(createPostMessageChannel);case 2:return e=o.sent,o.next=5,f(closeWatcher,e);case 5:return o.next=7,l(v({paymentForm:{isLoading:!0,errorType:null}}));case 7:return o.next=9,p(k.trustFormOpen);case 9:return o.next=12,d(e);case 12:t=o.sent,n=t.data,C("event",n),o.t0=n.type,o.next="on_resize"===o.t0?18:"payment-status"===o.t0?21:"payment-unknown-failure"===o.t0?24:"payment-update-failure"===o.t0?24:"payment-check-failure"===o.t0?24:"payment-timeout"===o.t0?27:"payment-complete"===o.t0?30:40;break;case 18:return o.next=20,l(v({paymentForm:{height:n.data.height}}));case 20:return o.abrupt("break",41);case 21:return o.next=23,p(handlePaymentStatus,n.data);case 23:return o.abrupt("break",41);case 24:return o.next=26,l(v({paymentForm:{isLoading:!1,errorType:S.default}}));case 26:return o.abrupt("break",41);case 27:return o.next=29,l(v({paymentForm:{isLoading:!1,errorType:S.timeout}}));case 29:return o.abrupt("break",41);case 30:return o.next=32,p(k.trustFormLinkSuccess);case 32:return o.next=34,p(k.subscriptionPurchaseSuccess);case 34:return o.next=36,p(getNextChargeDate);case 36:return r=o.sent,o.next=39,l(v({success:{nextChargeDate:r},page:P.SUCCESS}));case 39:case 40:return o.abrupt("break",41);case 41:o.next=9;break;case 43:case"end":return o.stop()}},i)}function trustIframeWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(b,trustIframePostMessageListener);case 2:case"end":return e.stop()}},c)}e.exports={trustIframePostMessageListener:trustIframePostMessageListener,trustIframeWatcher:trustIframeWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(retryPayment),o=regeneratorRuntime.mark(retryPaymentWatcher),a=n(1),i=a.put,c=a.call,s=a.takeEvery,u=a.select,l=n(154),p=l.RETRY_PAYMENT_EFFECT,f=l.update,d=n(577).selectPromocode,m=n(436).applyPromocodeRequest,y=n(155).PAGES;function retryPayment(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(f({page:y.PAYMENT_FORM,paymentForm:{isLoading:!0,errorType:null}}));case 2:return t.next=4,u(d);case 4:return e=t.sent,t.next=7,c(m,e);case 7:case"end":return t.stop()}},r)}function retryPaymentWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p,retryPayment);case 2:case"end":return e.stop()}},o)}e.exports={retryPayment:retryPayment,retryPaymentWatcher:retryPaymentWatcher}},function(e,t,n){var r=n(746).initWatcher,o=n(747).authWatcher,a=n(748).applyAuthCodeWatcher,i=n(437).checkDeviceLimitWatcher,c=n(749).selectCodeInputPageWatcher;e.exports=[r,o,a,i,c]},function(e,t,n){var r=regeneratorRuntime.mark(init),o=regeneratorRuntime.mark(initWatcher),a=n(1),i=a.put,c=a.call,s=a.select,u=a.takeEvery,l=n(156).PAGES,p=n(118),f=p.INIT_EFFECT,d=p.update,m=p.codeInputEffect,y=n(19),_=y.getIsAuthorized,h=y.getYandexIntegration,g=n(31).code,b=n(437).getDeviceLimit;function init(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(_);case 2:return e=n.sent,n.t0=Boolean,n.next=6,s(h);case 6:if(n.t1=n.sent,t=(0,n.t0)(n.t1),e&&t){n.next=15;break}return n.next=11,i(d({page:l.auth}));case 11:return n.next=13,c(g.visitPageNotAuth);case 13:n.next=33;break;case 15:return n.prev=15,n.next=18,c(b);case 18:if(!n.sent){n.next=23;break}return n.next=21,i(d({page:l.deviceLimit}));case 21:n.next=27;break;case 23:return n.next=25,i(m());case 25:return n.next=27,c(g.visitPageAuth);case 27:n.next=33;break;case 29:return n.prev=29,n.t2=n.catch(15),n.next=33,i(d({page:l.serverError}));case 33:case"end":return n.stop()}},r,null,[[15,29]])}function initWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(f,init);case 2:case"end":return e.stop()}},o)}e.exports={init:init,initWatcher:initWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(auth),o=regeneratorRuntime.mark(authWatcher),a=n(1),i=a.put,c=a.call,s=a.takeEvery,u=n(118),l=u.AUTH_EFFECT,p=u.codeInputEffect,f=n(197).linkYandexAccount,d=n(31).code;function auth(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d.authClick);case 2:return e.next=4,c(f,{retPath:location.href});case 4:return e.next=6,i(p());case 6:case"end":return e.stop()}},r)}function authWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(l,auth);case 2:case"end":return e.stop()}},o)}e.exports={auth:auth,authWatcher:authWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(applyAuthCode),o=regeneratorRuntime.mark(applyAuthCodeWatcher),a=n(1),i=a.put,c=a.select,s=a.call,u=a.takeEvery,l=n(16),p=n(118),f=p.APPLY_AUTH_CODE_EFFECT,d=p.update,m=n(156),y=m.DEFAULT_ERROR,_=m.ERRORS,h=m.PAGES,g=n(31).code,b=n(19).getUserId;function applyAuthCode(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.code,r.next=3,i(d({codeInput:{isLoading:!0,errorText:""}}));case 3:return r.next=5,s(g.codeSent);case 5:return r.prev=5,r.next=8,s([l,l.put],"/code/apply-auth-code/",{body:{code:t}});case 8:return r.next=10,i(d({page:h.success}));case 10:return r.next=12,s(g.success);case 12:return r.next=14,c(b);case 14:return n=r.sent,r.next=17,s(g.codeLinked,t,n);case 17:r.next=23;break;case 19:return r.prev=19,r.t0=r.catch(5),r.next=23,i(d({codeInput:{isLoading:!1,errorText:_[r.t0.status]||y}}));case 23:case"end":return r.stop()}},r,null,[[5,19]])}function applyAuthCodeWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(f,applyAuthCode);case 2:case"end":return e.stop()}},o)}e.exports={applyAuthCode:applyAuthCode,applyAuthCodeWatcher:applyAuthCodeWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(selectCodeInputPage),o=regeneratorRuntime.mark(selectCodeInputPageWatcher),a=n(1),i=a.put,c=a.takeEvery,s=a.select,u=n(220).selectYandexPassportDeviceUrl,l=n(26).getOriginalUrl,p=n(118),f=p.CODE_INPUT_EFFECT,d=p.update,m=n(156),y=m.PAGES,_=m.PATHS;function selectCodeInputPage(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s(l);case 2:if(t.sent!==_.passportTvCode){t.next=12;break}return t.next=6,i(d({page:y.emtpty}));case 6:return t.next=8,s(u);case 8:e=t.sent,window.location.replace(e),t.next=14;break;case 12:return t.next=14,i(d({page:y.codeInput}));case 14:case"end":return t.stop()}},r)}function selectCodeInputPageWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(f,selectCodeInputPage);case 2:case"end":return e.stop()}},o)}e.exports={selectCodeInputPage:selectCodeInputPage,selectCodeInputPageWatcher:selectCodeInputPageWatcher}},function(e,t,n){function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23),o=n(438),a=o.SPECIAL_PROJECTS_MODELS_ITEM_UPDATE,i=o.SPECIAL_PROJECTS_USER_DATA_ITEM_UPDATE,c=function(){return{models:{},userData:{}}};e.exports={getSpecialProjectsInitialState:c,specialProjectsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{models:{},userData:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n=t.payload,o=n.id,c=n.data;return r(e,{models:_defineProperty({},o,_defineProperty({},e.models[o]?"$merge":"$set",c))});case i:var s=t.payload,u=s.id,l=s.data;return r(e,{userData:_defineProperty({},u,_defineProperty({},e.userData[u]?"$merge":"$set",l))});default:return e}}}},function(e,t){var n=function(e){return e.specialProjects};e.exports={getSpecialProjectsState:n,selectSpecialProjectsModels:function(e){return n(e).models},selectSpecialProjectsUserData:function(e){return n(e).userData}}},function(e,t,n){var r=n(753).dragonInitSagaWatcher,o=n(755).dragonShadowViewedSagaWatcher,a=n(756).dragonFuryViewedSagaWatcher,i=n(757).dragonMetrikaSagaWatcher,c=n(758).dragonCloseSagaWatcher;e.exports=[r,o,a,i,c]},function(e,t,n){var r=regeneratorRuntime.mark(getAvailabilityStatusForPathname),o=regeneratorRuntime.mark(getStatus),a=regeneratorRuntime.mark(initData),i=regeneratorRuntime.mark(initConfig),c=regeneratorRuntime.mark(dragonInitSagaWatcher),s=n(1),u=s.take,l=s.call,p=s.select,f=s.put,d=s.cancel,m=n(63).pageUpdate,y=n(124),_=y.DRAGON_INIT_EFFECT,h=y.dragonModelUpdate,g=y.dragonUserDataUpdate,b=n(160),E=b.selectDragonModel,v=b.selectDragonConfig,O=b.selectSessionShadowMaxViews,P=b.selectDaySessionShadowMaxViews,S=b.selectVideoStaticPath,T=n(114),k=T.DRAGON_ANIMATION_TYPES,C=T.DRAGON_STATUS,w=T.DRAGON_ID,I=T.DRAGON_ANIMATION_STAGES,A=T.DRAGON_THEMES,x=n(200),R=x.getSessionStorage,N=x.getDaySessionStorage,j=x.getStorage,D=n(754).isVideoTypeSupported;function getAvailabilityStatusForPathname(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,p(E);case 2:return t=r.sent,n=t.validPathnames,o=void 0===n?[]:n,r.abrupt("return",o.some(function(t){return new RegExp(t).test(e)}));case 6:case"end":return r.stop()}},r)}function getStatus(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(getAvailabilityStatusForPathname,window.location.pathname);case 2:if(!e.sent){e.next=6;break}return e.abrupt("return",C.ENABLED);case 6:return e.abrupt("return",C.DISABLED);case 7:case"end":return e.stop()}},o)}function initData(){var e,t,n,r,o,i,c,s,u,d,y,_,h,b,v,T,C,x,M,L;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p(E);case 2:return e=a.sent,t=e.useVideoAsPossible,a.next=6,p(O);case 6:return n=a.sent,a.next=9,p(P);case 9:return r=a.sent,a.next=12,p(S);case 12:if(o=a.sent,a.t0=o&&t,!a.t0){a.next=18;break}return a.next=17,l(D,"webm");case 17:a.t0=a.sent;case 18:return i=a.t0,a.next=21,l(j);case 21:return c=a.sent,s=c.lastDragonTheme,a.next=25,l(R);case 25:return u=a.sent,d=u.shadowViews,y=void 0===d?0:d,_=u.isClose,h=void 0!==_&&_,a.next=32,l(N);case 32:return b=a.sent,v=b.shadowViews,T=void 0===v?0:v,C=y<n&&T<r,x=Object.values(I),M=C?x:x.filter(function(e){return e!==I.SHADOW}),L=Object.values(A).find(function(e){return e!==s}),a.next=41,f(g({sessionShadowViews:y,daySessionShadowViews:T,dragonTheme:L,stages:M,isClose:h,animationType:i?k.VIDEO:k.SPRITE}));case 41:return a.next=43,f(m({specialProject:w}));case 43:case"end":return a.stop()}},a)}function initConfig(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p(v);case 2:if((e=t.sent)&&e.enabled){t.next=6;break}return t.next=6,d();case 6:return t.next=8,f(h(e));case 8:case"end":return t.stop()}},i)}function dragonInitSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(_);case 2:return e.next=4,l(initConfig);case 4:return e.next=6,l(getStatus);case 6:if(e.sent!==C.ENABLED){e.next=10;break}return e.next=10,l(initData);case 10:case"end":return e.stop()}},c)}e.exports={dragonInitSagaWatcher:dragonInitSagaWatcher}},function(e,t){e.exports={isVideoTypeSupported:function(e){return"probably"===document.createElement("video").canPlayType({ogg:'video/ogg; codecs="theora"',h264:'video/mp4; codecs="avc1.42E01E"',webm:'video/webm; codecs="vp8, vorbis"',vp9:'video/webm; codecs="vp9"',hls:'application/x-mpegURL; codecs="avc1.42E01E"'}[e]||e)}}},function(e,t,n){var r=regeneratorRuntime.mark(dragonShadowViewedSaga),o=regeneratorRuntime.mark(dragonShadowViewedSagaWatcher),a=n(1),i=a.call,c=a.put,s=a.select,u=a.takeEvery,l=n(124),p=l.DRAGON_SHADOW_VIEWED_EFFECT,f=l.dragonUserDataUpdate,d=n(200),m=d.saveToSessionStorage,y=d.saveToDaySessionStorage,_=n(160),h=_.selectSessionShadowViews,g=_.selectDaySessionShadowViews;function dragonShadowViewedSaga(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s(h);case 2:return e=n.sent,n.next=5,s(g);case 5:return t=n.sent,n.next=8,c(f({sessionShadowViews:e+1,daySessionShadowViews:t+1}));case 8:return n.next=10,i(m,{shadowViews:e+1});case 10:return n.next=12,i(y,{shadowViews:t+1});case 12:case"end":return n.stop()}},r)}function dragonShadowViewedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(p,dragonShadowViewedSaga);case 2:case"end":return e.stop()}},o)}e.exports={dragonShadowViewedSagaWatcher:dragonShadowViewedSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(dragonFuryViewedSaga),o=regeneratorRuntime.mark(dragonFuryViewedSagaWatcher),a=n(1),i=a.call,c=a.select,s=a.takeEvery,u=n(124).DRAGON_FURY_VIEWED_EFFECT,l=n(200).saveToStorage,p=n(160).selectDragonTheme;function dragonFuryViewedSaga(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c(p);case 2:return e=t.sent,t.next=5,i(l,{lastDragonTheme:e});case 5:case"end":return t.stop()}},r)}function dragonFuryViewedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(u,dragonFuryViewedSaga);case 2:case"end":return e.stop()}},o)}e.exports={dragonFuryViewedSagaWatcher:dragonFuryViewedSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(animationShowGoalSaga),o=regeneratorRuntime.mark(dragonClickGoalSaga),a=regeneratorRuntime.mark(dragonMetrikaSagaWatcher),i=n(1),c=i.fork,s=i.take,u=n(44),l=n(124),p=l.DRAGON_METRIKA_SHOW_EFFECT,f=l.DRAGON_METRIKA_CLICK_EFFECT;function animationShowGoalSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(p);case 2:u.reachGoal("default","dragon_3_show");case 3:case"end":return e.stop()}},r)}function dragonClickGoalSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(f);case 2:u.reachGoal("default","dragon_3_click");case 3:case"end":return e.stop()}},o)}function dragonMetrikaSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(animationShowGoalSaga);case 2:return e.next=4,c(dragonClickGoalSaga);case 4:case"end":return e.stop()}},a)}e.exports={dragonMetrikaSagaWatcher:dragonMetrikaSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(dragonCloseSaga),o=regeneratorRuntime.mark(dragonCloseSagaWatcher),a=n(1),i=a.takeEvery,c=a.put,s=a.call,u=n(124),l=u.DRAGON_CLOSE_EFFECT,p=u.dragonUserDataUpdate,f=n(200).saveToSessionStorage;function dragonCloseSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(p({isClose:!0}));case 2:return e.next=4,s(f,{isClose:!0});case 4:case"end":return e.stop()}},r)}function dragonCloseSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,dragonCloseSaga);case 2:case"end":return e.stop()}},o)}e.exports={dragonCloseSagaWatcher:dragonCloseSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(onAdblockWarningClose),o=n(1).take,a=n(36),i=n(495).ON_ADBLOCK_WARNING_CLOSE_EFFECT,c=n(347),s=c.hideCookie,u=c.hideCookieExpires;function onAdblockWarningClose(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o(i);case 2:a.set(s,1,{expires:u});case 3:case"end":return e.stop()}},r)}e.exports=[onAdblockWarningClose]},function(e,t,n){var r=regeneratorRuntime.mark(initAdblockWarning),o=n(1).take,a=n(312).DETECTED_STATUS,i=n(313).ANTI_ADB_UPDATE,c=n(36),s=n(347),u=s.type,l=s.defaultPriority,p=s.hideCookie;function initAdblockWarning(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("touch"!==e){t.next=2;break}return t.abrupt("return",null);case 2:if(!c.get(p)){t.next=4;break}return t.abrupt("return",null);case 4:return t.next=6,o(i);case 6:if(t.sent.payload.detectStatus===a.BLOCKED){t.next=9;break}return t.abrupt("return",null);case 9:return t.abrupt("return",{type:u,priority:l});case 10:case"end":return t.stop()}},r)}e.exports=initAdblockWarning},function(e,t,n){var r=n(1),o=r.all,a=r.call,i=r.put,c=n(439).init,s=n(187).openToast;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"desktop";return regeneratorRuntime.mark(function toasterPrioritizer(){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!location.search.includes("welcome-screen=1")){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,o(c.map(function(t){return a(t,e)}));case 4:if(t=r.sent,n=t.filter(Boolean).sort(function(e,t){return t.priority-e.priority}).shift()){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,i(s(n.type,n.priority));case 10:case"end":return r.stop()}},toasterPrioritizer)})}},function(e,t,n){var r=n(763).initialUtmWatcher;e.exports=[r]},function(e,t,n){var r=regeneratorRuntime.mark(initialUtmWatcher);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var o=n(65),a=n(1),i=a.take,c=a.put,s=n(532),u=n(1053),l=n(1067),p=n(1068),f=n(1069),d=n(137),m=d.update,y=d.SAVE_INITIAL_UTM_EFFECT,_="initial-utm",h=1800,g=u(o.stringify,f,l(function(e){return _slicedToArray(e,1)[0].startsWith("utm_")}),p,o.parse);function initialUtmWatcher(){var e,t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,i(y);case 2:if(void 0!==window.localStorage){r.next=4;break}return r.abrupt("return");case 4:if(e=new s,t=Boolean(e.getItem(_)),n=/https:\/\/([^/?%]*\.)?kinopoisk\.ru/.test(document.referrer),t||n||e.setItem(_,g(location.search.substring(1)),h),t&&e.updateExpiration(_,h),!(o=e.getItem(_))){r.next=13;break}return r.next=13,c(m({initialUtm:o}));case 13:case"end":return r.stop()}},r)}e.exports={initialUtmWatcher:initialUtmWatcher}},,,,,,,,,function(e,t,n){var r=n(123).selectModels,o=n(398).MODEL_TYPE,a=function(e){return r(e,o)};e.exports={selectPostsModels:a,selectPostsModelById:function(e,t){return a(e)[t]||null}}},function(e,t,n){var r=regeneratorRuntime.mark(requestPostsDataSaga),o=n(1),a=o.put,i=o.putResolve,c=o.call,s=n(25).sendRequestEffect,u=n(47).createFetchPageWithUiListSaga,l=n(88),p=n(316).addPostsModels,f=n(774),d=f.requestEntityRelatedPostsData,m=f.fetchEntityRelatedPostsCollectionSaga;function requestPostsDataSaga(){var e,t,n,o,a,c,u,p,f,d,m,y=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=y.length>0&&void 0!==y[0]?y[0]:{},t=e.offset,n=e.limit,o=e.type,a=e.rubricId,r.next=3,i(s({url:"/media/api/posts/",method:"get",params:{query:{offset:t,limit:n,type:o,rubric_id:a}}}));case 3:return c=r.sent,u=c.items,p=c.pagination,f=l(u),d=f.map,m=f.list,r.abrupt("return",{map:d,list:m,pagination:p});case 8:case"end":return r.stop()}},r)}var y=u(regeneratorRuntime.mark(function _callee(e){var t,n,r,o,i,s;return regeneratorRuntime.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return t=e.limit,n=e.offset,r=e.type,o=e.rubricId,u.next=3,c(requestPostsDataSaga,{limit:t,offset:n,type:r,rubricId:o});case 3:return i=u.sent,s=i.map,u.next=7,a(p(s));case 7:return u.abrupt("return",i);case 8:case"end":return u.stop()}},_callee)}));e.exports={requestPostsDataSaga:requestPostsDataSaga,fetchPostsCollection:y,requestEntityRelatedPostsData:d,fetchEntityRelatedPostsCollectionSaga:m}},function(e,t,n){var r=regeneratorRuntime.mark(requestEntityRelatedPostsData),o=regeneratorRuntime.mark(fetchEntityRelatedPostsModels),a=n(1),i=a.put,c=a.call,s=a.putResolve,u=n(25).sendRequestEffect,l=n(88),p=n(47).createFetchPageWithUiListSaga,f=n(775),d=n(316).addPostsModels;function requestEntityRelatedPostsData(){var e,t,n,o,a,i,c,p,d,m,y,_=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:{},t=e.offset,n=e.limit,o=e.entityType,a=e.entityId,r.next=3,s(u({url:f.getUrl("api-entity-related-posts",{entityType:o,entityId:a}),method:"get",params:{query:{offset:t,limit:n}}}));case 3:return i=r.sent,c=i.items,p=i.pagination,d=l(c),m=d.map,y=d.list,r.abrupt("return",{map:m,list:y,pagination:p});case 8:case"end":return r.stop()}},r)}function fetchEntityRelatedPostsModels(e){var t,n,r,a,s,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.limit,n=e.offset,r=e.entityType,a=e.entityId,o.next=3,c(requestEntityRelatedPostsData,{limit:t,offset:n,entityType:r,entityId:a});case 3:return s=o.sent,u=s.map,o.next=7,i(d(u));case 7:return o.abrupt("return",s);case 8:case"end":return o.stop()}},o)}var m=p(fetchEntityRelatedPostsModels);e.exports={requestEntityRelatedPostsData:requestEntityRelatedPostsData,fetchEntityRelatedPostsModels:fetchEntityRelatedPostsModels,fetchEntityRelatedPostsCollectionSaga:m}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(100).ENTITY_TYPES_WITH_POSTS,o=n(153),a=Object.values(r).join("|"),i={"api-entity-related-posts":"/api/:entityType(".concat(a,")/:entityId([\\d]+)/posts/")};e.exports=o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},i))},function(e,t,n){var r=n(777).changeRouteSagaWatcher,o=n(778),a=o.historyPushWatcher,i=o.historyReplaceWatcher;e.exports=[a,i,r]},function(e,t,n){var r=regeneratorRuntime.mark(changeRouteSaga),o=regeneratorRuntime.mark(changeRouteSagaWatcher),a=n(28),i=n(1),c=i.takeLatest,s=i.put,u=i.call,l=i.select,p=n(84).ROUTER_CHANGE_ROUTE_EFFECT,f=n(84).update,d=n(441).selectRoute,m=n(44);function changeRouteSaga(e){var t,n,o,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,r.next=3,l(d);case 3:return n=r.sent,o=a.format({pathname:t.pathname,query:t.query}),i=a.format({pathname:n.pathname,query:n.query}),r.next=8,u([m,m.hit],o,{referer:i});case 8:return r.next=10,s(f({route:t}));case 10:case"end":return r.stop()}},r)}function changeRouteSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(p,changeRouteSaga);case 2:case"end":return e.stop()}},o)}e.exports={changeRouteSaga:changeRouteSaga,changeRouteSagaWatcher:changeRouteSagaWatcher}},function(e,t,n){"use strict";n.r(t),n.d(t,"historyPushWatcher",function(){return historyPushWatcher}),n.d(t,"historyReplaceWatcher",function(){return historyReplaceWatcher});var r=n(1),o=n(215),a=n(84),i=regeneratorRuntime.mark(historyPushSaga),c=regeneratorRuntime.mark(historyReplaceSaga),s=regeneratorRuntime.mark(historyPushWatcher),u=regeneratorRuntime.mark(historyReplaceWatcher);function historyPushSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,o.a.push(t);case 2:case"end":return n.stop()}},i)}function historyReplaceSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,o.a.replace(t);case 2:case"end":return n.stop()}},c)}function historyPushWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.takeLatest)(a.HISTORY_PUSH_EFFECT,historyPushSaga);case 2:case"end":return e.stop()}},s)}function historyReplaceWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.takeLatest)(a.HISTORY_REPLACE_EFFECT,historyReplaceSaga);case 2:case"end":return e.stop()}},u)}},function(e,t,n){var r,o,a,i=n(105).update,c=n(83),s=n(84).ROUTER_UPDATE,u=function(){return{route:{}}},l=c({route:{}},(a=function(e,t){var n=t.payload;return i(e,{$merge:n})},(o=s)in(r={})?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,r));e.exports={reducer:l,getInitialState:u}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(781),o=n(787),a=n(317),i=n(163),c=[r.initMainPageSagaWatcher,r.fetchMainPageDataSagaWatcher,o.initRubricPageSagaWatcher,o.fetchRubricPageDataSagaWatcher,a.fetchPostsRubricsSagaWatcher];e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},o,{},a,{},i,{watchers:c})},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=regeneratorRuntime.mark(fetchMainPageDataSaga),o=regeneratorRuntime.mark(fetchMainPageDataSagaWatcher),a=regeneratorRuntime.mark(mainPageLoadMorePosts),i=regeneratorRuntime.mark(initMainPageSaga),c=regeneratorRuntime.mark(initMainPageSagaWatcher),s=n(1),u=s.takeLatest,l=s.fork,p=s.call,f=s.select,d=s.put,m=n(29).takeAwait,y=n(345),_=n(63).pageUpdate,h=n(782).getPageTitle,g=n(163).loadMorePosts,b=n(161).selectPostsListMediaType,E=n(161).selectIsMainPageNewsListAvailable,v=n(162),O=v.MEDIA_INIT_MAIN_PAGE_EFFECT,P=v.MEDIA_FETCH_MAIN_PAGE_DATA_EFFECT,S=n(162).MEDIA_MAIN_PAGE_LOAD_MORE_EFFECT,T=n(317).fetchPostsRubrics,k=n(785),C=n(786);function fetchMainPageDataSaga(e){var t,n,o,a,i,c,s,u,p,m;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.rubricsListId,o=t.rubricsListLimit,a=t.newsListId,i=t.newsLimit,c=t.postsListId,s=t.postsLimit,u=t.route,p=u.params,m=u.query,r.next=3,l(k.fetchPostsList,{listId:c,limit:s,type:p.type,page:m.page});case 3:return r.next=5,f(E);case 5:if(!r.sent){r.next=8;break}return r.next=8,l(C.fetchNewsList,{listId:a,limit:i});case 8:return r.next=10,l(T,{listId:n,limit:o});case 10:return r.next=12,d(_({title:h({type:p.type})}));case 12:case"end":return r.stop()}},r)}function fetchMainPageDataSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(P,fetchMainPageDataSaga);case 2:case"end":return e.stop()}},o)}function mainPageLoadMorePosts(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.postsListId,a.next=4,f(b,{listId:n});case 4:return r=a.sent,o=y.getUrl("posts",{type:r}),a.next=8,p(g,{listId:n,pageBaseUrl:o});case 8:case"end":return a.stop()}},a)}function initMainPageSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(S,mainPageLoadMorePosts);case 2:case"end":return e.stop()}},i)}function initMainPageSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(O,initMainPageSaga);case 2:case"end":return e.stop()}},c)}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({fetchMainPageDataSagaWatcher:fetchMainPageDataSagaWatcher,initMainPageSagaWatcher:initMainPageSagaWatcher},k,{},C)},function(e,t,n){var r=n(100).POST_TYPES,o=n(188).MEDIA_MAIN_PAGE_TITLE,a=n(354);e.exports={getPageTitle:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;switch(e){case r.news:return"Последние новости кино на КиноПоиске";default:var t=a({type:e})||o;return"".concat(t," на КиноПоиске")}},getPageDescription:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).type;switch(e){case r.news:return"Последние новости кино на КиноПоиске. Ежедневные обновления, самая свежая и интересная информация из мира кино: статьи о звездах, интервью, репортажи, обзоры премьер и кассовых сборов";default:var t=a({type:e})||o;return"".concat(t," на КиноПоиске. Самая свежая и интересная информация из мира кино: новости, статьи о звездах, интервью, репортажи, обзоры премьер и кассовых сборов.")}}}},function(e,t,n){var r=n(123).selectModels,o=n(442).MODEL_TYPE,a=function(e){return r(e,o)};e.exports={selectPostsRubricsModels:a,selectPostsRubricsModelById:function(e,t){return a(e)[t]||null}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=regeneratorRuntime.mark(requestPostsRubricsDataSaga),o=regeneratorRuntime.mark(fetchPostRubricsCollection),a=regeneratorRuntime.mark(requestPostsRubricDataSaga),i=regeneratorRuntime.mark(fetchPostRubric),c=n(1),s=c.put,u=c.putResolve,l=c.call,p=n(25).sendRequestEffect,f=n(47).patchList,d=n(89).UI_LIST_STATUS,m=n(88),y=n(443).addPostsRubricsModels;function requestPostsRubricsDataSaga(){var e,t,n,o,a,i,c,s,l,f=arguments;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return e=f.length>0&&void 0!==f[0]?f[0]:{},t=e.offset,n=e.limit,r.next=3,u(p({url:"/media/api/rubrics/",method:"get",params:{query:{offset:t,limit:n}}}));case 3:return o=r.sent,a=o.items,i=o.pagination,c=m(a),s=c.map,l=c.list,r.abrupt("return",{map:s,list:l,pagination:i});case 8:case"end":return r.stop()}},r)}function fetchPostRubricsCollection(){var e,t,n,r,a,i,c,u,p,m,_=arguments;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e=_.length>0&&void 0!==_[0]?_[0]:{},t=e.page,n=void 0===t?1:t,r=e.limit,a=e.listId,i=(n-1)*r,o.next=4,s(f(a,{pagination:{limit:r,offset:i,page:Number(n),status:d.pending}}));case 4:return o.prev=4,o.next=7,l(requestPostsRubricsDataSaga,{limit:r,offset:i});case 7:return c=o.sent,u=c.map,p=c.list,m=c.pagination,o.next=13,s(y(u));case 13:return o.next=15,s(f(a,{items:p,pagination:_objectSpread({},m,{status:d.loaded})}));case 15:o.next=22;break;case 17:return o.prev=17,o.t0=o.catch(4),o.next=21,s(f(a,{pagination:{status:d.failed}}));case 21:throw o.t0;case 22:case"end":return o.stop()}},o,null,[[4,17]])}function requestPostsRubricDataSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u(p({url:"/media/api/rubric/".concat(e,"/"),method:"get"}));case 2:return t=n.sent,n.abrupt("return",t);case 4:case"end":return n.stop()}},a)}function fetchPostRubric(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l(requestPostsRubricDataSaga,e);case 2:return t=n.sent,n.next=5,s(y(_defineProperty({},t.id,t)));case 5:return n.abrupt("return",t);case 6:case"end":return n.stop()}},i)}e.exports={requestPostsRubricsDataSaga:requestPostsRubricsDataSaga,fetchPostRubricsCollection:fetchPostRubricsCollection,requestPostsRubricDataSaga:requestPostsRubricDataSaga,fetchPostRubric:fetchPostRubric}},function(e,t,n){var r=regeneratorRuntime.mark(fetchPostsList),o=n(1).call,a=n(49)("media:common"),i=n(152).fetchPostsCollection,c=n(188).MEDIA_MAIN_PAGE_TITLE,s=n(163).initPostsList;function fetchPostsList(e){var t,n,u,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.listId,n=e.limit,u=e.type,l=e.page,r.next=3,o(s,{listId:t,type:u,title:c});case 3:return r.prev=3,r.next=6,o(i,{limit:n,listId:t,type:u,page:Number(l)||1});case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),a("fetchPostsList:fetchPostsCollection failed");case 11:case"end":return r.stop()}},r,null,[[3,8]])}e.exports={fetchPostsList:fetchPostsList}},function(e,t,n){var r=regeneratorRuntime.mark(fetchNewsList),o=n(49)("media:common"),a=n(1).call,i=n(100).POST_TYPES,c=n(152).fetchPostsCollection,s=n(354),u=n(163).initPostsList;function fetchNewsList(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.listId,n=e.limit,r.next=3,a(u,{listId:t,type:i.news,title:s({type:i.news})});case 3:return r.prev=3,r.next=6,a(c,{listId:t,limit:n,type:i.news});case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(3),o("fetchNewsList:fetchPostsCollection failed");case 11:case"end":return r.stop()}},r,null,[[3,8]])}e.exports={fetchNewsList:fetchNewsList}},function(e,t,n){var r=regeneratorRuntime.mark(getRubricById),o=regeneratorRuntime.mark(fetchRubricPagePosts),a=regeneratorRuntime.mark(fetchRubricPageDataSaga),i=regeneratorRuntime.mark(fetchRubricPageDataSagaWatcher),c=regeneratorRuntime.mark(initRubricPageSaga),s=regeneratorRuntime.mark(initRubricPageSagaWatcher),u=n(49)("media:common"),l=n(1),p=l.takeLatest,f=l.call,d=l.select,m=l.fork,y=l.put,_=n(29).takeAwait,h=n(345),g=n(152).fetchPostsCollection,b=n(47).patchList,E=n(63).pageUpdate,v=n(399),O=v.fetchPostRubric,P=v.selectPostsRubricsModelById,S=n(162),T=S.MEDIA_FETCH_RUBRIC_PAGE_DATA_EFFECT,k=S.MEDIA_RUBRIC_PAGE_LOAD_MORE_EFFECT,C=S.MEDIA_INIT_RUBRIC_PAGE_EFFECT,w=n(161).selectPostsListRubricId,I=n(163),A=I.initPostsList,x=I.loadMorePosts,R=n(317).fetchPostsRubrics,N=n(788).getPageTitle;function getRubricById(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d(P,e);case 2:if(!(t=n.sent)){n.next=5;break}return n.abrupt("return",t);case 5:return n.prev=5,n.next=8,f(O,e);case 8:return n.abrupt("return",n.sent);case 11:return n.prev=11,n.t0=n.catch(5),u("getRubricById:fetchPostRubric failed"),n.abrupt("return",{});case 15:case"end":return n.stop()}},r,null,[[5,11]])}function fetchRubricPagePosts(e){var t,n,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.listId,n=e.rubricId,r=e.page,a=e.limit,o.next=3,f(A,{listId:t,rubricId:n});case 3:return o.next=5,m(regeneratorRuntime.mark(function _callee(){var e,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,f(getRubricById,n);case 2:return e=o.sent,r=e.title,o.next=6,y(b(t,{meta:{title:r}}));case 6:case"end":return o.stop()}},_callee)}));case 5:return o.prev=5,o.next=8,f(g,{limit:a,listId:t,rubricId:n,page:Number(r)||1});case 8:o.next=13;break;case 10:o.prev=10,o.t0=o.catch(5),u("fetchRubricPageDataSaga:fetchPostsCollection failed");case 13:case"end":return o.stop()}},o,null,[[5,10]])}function fetchRubricPageDataSaga(e){var t,n,r,o,i,c,s,u;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.listId,r=t.limit,o=t.route,i=o.params.id,c=o.query,s=t.rubricsListId,u=t.rubricsListLimit,a.next=4,m(fetchRubricPagePosts,{listId:n,rubricId:i,limit:r,page:c.page});case 4:return a.next=6,m(R,{listId:s,limit:u});case 6:return a.next=8,y(E({title:N()}));case 8:case"end":return a.stop()}},a)}function fetchRubricPageDataSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(T,fetchRubricPageDataSaga);case 2:case"end":return e.stop()}},i)}function initRubricPageSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_(k,regeneratorRuntime.mark(function _callee2(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,n=t.postsListId,a.next=4,d(w,{listId:n});case 4:return r=a.sent,o=h.getUrl("rubric",{id:r}),a.next=8,f(x,{listId:n,pageBaseUrl:o});case 8:case"end":return a.stop()}},_callee2)}));case 2:case"end":return e.stop()}},c)}function initRubricPageSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(C,initRubricPageSaga);case 2:case"end":return e.stop()}},s)}e.exports={fetchRubricPageDataSagaWatcher:fetchRubricPageDataSagaWatcher,initRubricPageSagaWatcher:initRubricPageSagaWatcher,getRubricById:getRubricById,fetchRubricPageDataSaga:fetchRubricPageDataSaga}},function(e,t,n){var r=n(188).MEDIA_MAIN_PAGE_TITLE;e.exports={getPageTitle:function(){return"".concat(r," на КиноПоиске")},getPageDescription:function(){return"".concat(r," на КиноПоиске. Самая свежая и интересная информация из мира кино: новости, статьи о звездах, интервью, репортажи, обзоры премьер и кассовых сборов.")}}},function(e,t,n){var r;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(105).update,a=n(83),i=n(56),c=i.WHITE_EMAIL_ERROR_CLEARED,s=i.WHITE_EMAIL_UPDATE,u=i.WHITE_EMAIL_LOADING_FAILURE,l=n(37),p=l.MODES,f=l.ERROR_TEXT_400,d=l.ERROR_TEXT_500,m=l.REQUEST_STATUSES,y=a({shouldConfirm:!1,email:"",error:null,mode:p.EMAIL_FORM,textPreset:"",isWhitelisted:!1,shouldChange:!1,requestStatus:m.IDLE},(_defineProperty(r={},u,function(e,t){var n=t.payload.error;return _objectSpread({},e,{requestStatus:m.ERROR,error:n.status>=500?new Error(d):new Error(f)})}),_defineProperty(r,c,function(e){return _objectSpread({},e,{error:null})}),_defineProperty(r,s,function(e,t){var n=t.payload;return o(e,{$merge:n})}),r));e.exports={reducer:y}},function(e,t,n){var r=n(791),o=r.authorityActionSagaWatcher,a=r.hasWatchedSagaWatcher,i=r.rateFilmSagaWatcher,c=r.setFilmFolderSagaWatcher,s=r.mediaAuthorityActionsSagaWatcher,u=r.commentsToggleSubscribeSagaWatcher,l=n(792).confirmRequestedSagaWatcher,p=n(793).confirmPopupClosedSagaWatcher,f=n(794).changePopupClosedSagaWatcher,d=n(795).setEmailWhiteSagaWatcher,m=n(796).logoutSagaWatcher,y=n(798).emailChangedWhiteModeSagaWatcher,_=n(799).emailChangedNormalModeSagaWatcher,h=n(800).changeEmailRequestedSagaWatcher;e.exports=[o,a,i,c,s,u,l,p,f,d,m,y,_,h]},function(e,t,n){var r=regeneratorRuntime.mark(authorityActionSaga),o=regeneratorRuntime.mark(authorityActionSagaWatcher),a=regeneratorRuntime.mark(hasWatchedSagaWatcher),i=regeneratorRuntime.mark(rateFilmSagaWatcher),c=regeneratorRuntime.mark(setFilmFolderSagaWatcher),s=regeneratorRuntime.mark(commentsToggleSubscribeSagaWatcher),u=regeneratorRuntime.mark(mediaAuthorityActionsSagaWatcher),l=n(1),p=l.takeLatest,f=l.call,d=l.select,m=l.put,y=n(318).fetchEmailStatus,_=n(201).getCookieWhiteEmailStatus,h=n(140).selectIsWhiteEmailEnable,g=n(61),b=g.MDA_AUTHORITY_ACTION_EFFECT,E=g.mdaAuthorityActionEffect,v=n(37),O=v.WHITE_EMAIL_MAX_ACTION_COUNT,P=v.LOG_NAMESPACE,S=v.TEXT_PRESETS_NAMES,T=n(49)(P),k=n(50).ON_HAS_WATCHED_EFFECT,C=n(190),w=C.RATE_FILM_EFFECT,I=C.SET_FILM_FOLDER_EFFECT,A=n(119).COMMENT_FORM_SUBMIT,x=n(55),R=x.COMMENTS_UPDATE_USER_VOTE,N=x.COMMENTS_TOGGLE_SUBSCRIBE,j=n(444).saveWhiteEmailStatus,D=n(96).popupOpenedMetrikaSaga;function authorityActionSaga(e){var t,n,o,a,i,c,s,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).textPreset,r.next=5,f(_);case 5:return o=r.sent,a=o.actionCount,r.next=9,d(h);case 9:if(i=r.sent,!(a>=O||!i)){r.next=13;break}return r.abrupt("return");case 13:return r.prev=13,r.next=16,f(y);case 16:return c=r.sent,s=c.isWhitelisted,u=c.email,r.next=21,f(j,{isWhitelisted:s,email:u,textPreset:n});case 21:if(s){r.next=24;break}return r.next=24,f(D);case 24:r.next=29;break;case 26:r.prev=26,r.t0=r.catch(13),T("emailConfirm:failure",r.t0);case 29:case"end":return r.stop()}},r,null,[[13,26]])}function authorityActionSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(b,authorityActionSaga);case 2:case"end":return e.stop()}},o)}function hasWatchedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(k,regeneratorRuntime.mark(function _callee(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("add"!==e.payload.operation){t.next=4;break}return t.next=4,m(E());case 4:case"end":return t.stop()}},_callee)}));case 2:case"end":return e.stop()}},a)}function rateFilmSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(w,regeneratorRuntime.mark(function _callee2(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.payload.rating>0)){t.next=4;break}return t.next=4,m(E({textPreset:S.MARK}));case 4:case"end":return t.stop()}},_callee2)}));case 2:case"end":return e.stop()}},i)}function setFilmFolderSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(I,regeneratorRuntime.mark(function _callee3(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("add"!==e.payload.operation){t.next=4;break}return t.next=4,m(E({textPreset:S.FOLDER}));case 4:case"end":return t.stop()}},_callee3)}));case 2:case"end":return e.stop()}},c)}function commentsToggleSubscribeSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(N,regeneratorRuntime.mark(function _callee4(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.payload.isSubscribed){t.next=4;break}return t.next=4,m(E());case 4:case"end":return t.stop()}},_callee4)}));case 2:case"end":return e.stop()}},s)}function mediaAuthorityActionsSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p([A,R],regeneratorRuntime.mark(function _callee5(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(E());case 2:case"end":return e.stop()}},_callee5)}));case 2:case"end":return e.stop()}},u)}e.exports={authorityActionSagaWatcher:authorityActionSagaWatcher,hasWatchedSagaWatcher:hasWatchedSagaWatcher,rateFilmSagaWatcher:rateFilmSagaWatcher,setFilmFolderSagaWatcher:setFilmFolderSagaWatcher,mediaAuthorityActionsSagaWatcher:mediaAuthorityActionsSagaWatcher,commentsToggleSubscribeSagaWatcher:commentsToggleSubscribeSagaWatcher,authorityActionSaga:authorityActionSaga}},function(e,t,n){var r=regeneratorRuntime.mark(confirmRequestedSaga),o=regeneratorRuntime.mark(confirmRequestedSagaWatcher),a=n(1),i=a.takeLatest,c=a.call,s=n(318).fetchEmailStatus,u=n(56).WHITE_EMAIL_CONFIRM_REQUESTED_EFFECT,l=n(201).getCookieWhiteEmailStatus,p=n(446).setCookieWhiteEmailStatus,f=n(37),d=f.LOG_NAMESPACE,m=f.TEXT_PRESETS_NAMES,y=n(49)(d),_=n(444).saveWhiteEmailStatus,h=n(96).popupOpenedMetrikaSaga;function confirmRequestedSaga(){var e,t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c(l);case 2:if(e=r.sent,!e.isHiddenForHit){r.next=6;break}return r.abrupt("return");case 6:return r.prev=6,r.next=9,c(s);case 9:return t=r.sent,n=t.isWhitelisted,o=t.email,r.next=14,c(_,{isWhitelisted:n,email:o,textPreset:m.DEFAULT});case 14:if(!n){r.next=19;break}return r.next=17,c(p,{isHiddenForHit:!0});case 17:r.next=21;break;case 19:return r.next=21,c(h);case 21:r.next=26;break;case 23:r.prev=23,r.t0=r.catch(6),y("emailConfirm:failure",r.t0);case 26:case"end":return r.stop()}},r,null,[[6,23]])}function confirmRequestedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(u,confirmRequestedSaga);case 2:case"end":return e.stop()}},o)}e.exports={confirmRequestedSagaWatcher:confirmRequestedSagaWatcher,confirmRequestedSaga:confirmRequestedSaga}},function(e,t,n){var r=regeneratorRuntime.mark(confirmPopupClosedSaga),o=regeneratorRuntime.mark(confirmPopupClosedSagaWatcher),a=n(1),i=a.takeEvery,c=a.put,s=a.call,u=n(56),l=u.WHITE_EMAIL_CONFIRM_POPUP_CLOSED_EFFECT,p=u.whiteEmailUpdate,f=n(201).getCookieWhiteEmailStatus,d=n(446).setCookieWhiteEmailStatus,m=n(96).popupClosedMetrikaSaga;function confirmPopupClosedSaga(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e=f(),t=e.actionCount,n.next=3,s(m);case 3:return d({isHiddenForHit:!0,actionCount:t+1}),n.next=6,c(p({shouldConfirm:!1}));case 6:case"end":return n.stop()}},r)}function confirmPopupClosedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,confirmPopupClosedSaga);case 2:case"end":return e.stop()}},o)}e.exports={confirmPopupClosedSagaWatcher:confirmPopupClosedSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(changePopupClosedSaga),o=regeneratorRuntime.mark(changePopupClosedSagaWatcher),a=n(1),i=a.takeEvery,c=a.put,s=a.call,u=n(56),l=u.CHANGE_EMAIL_POPUP_CLOSED_EFFECT,p=u.whiteEmailUpdate,f=n(96).popupClosedMetrikaSaga;function changePopupClosedSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(f);case 2:return e.next=4,c(p({shouldChange:!1}));case 4:case"end":return e.stop()}},r)}function changePopupClosedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,changePopupClosedSaga);case 2:case"end":return e.stop()}},o)}e.exports={changePopupClosedSagaWatcher:changePopupClosedSagaWatcher,changePopupClosedSaga:changePopupClosedSaga}},function(e,t,n){var r=regeneratorRuntime.mark(setEmailWhiteSaga),o=regeneratorRuntime.mark(setEmailWhiteSagaWatcher),a=n(1),i=a.takeLatest,c=a.put,s=a.putResolve,u=a.call,l=n(56),p=l.WHITE_EMAIL_SET_EMAIL_WHITE_EFFECT,f=l.whiteEmailUpdate,d=l.whiteEmailLoadingFailure,m=n(25).sendRequestEffect,y=n(37),_=y.END_POINTS.NODEJS.SET_EMAIL_WHITE,h=y.LOG_NAMESPACE,g=y.REQUEST_STATUSES,b=n(49)(h),E=n(96).submitEmailMetrikaSaga;function setEmailWhiteSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u(E);case 2:return e.next=4,c(f({requestStatus:g.PENDING}));case 4:return e.prev=4,e.next=7,s(m({url:_,method:"patch"}));case 7:return e.next=9,c(f({requestStatus:g.LOADED,shouldConfirm:!1,isWhitelisted:!0}));case 9:e.next=16;break;case 11:return e.prev=11,e.t0=e.catch(4),e.next=15,c(d({error:e.t0}));case 15:b("setEmailWhite:failure",e.t0);case 16:case"end":return e.stop()}},r,null,[[4,11]])}function setEmailWhiteSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,setEmailWhiteSaga);case 2:case"end":return e.stop()}},o)}e.exports={setEmailWhiteSagaWatcher:setEmailWhiteSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(logoutSaga),o=regeneratorRuntime.mark(logoutSagaWatcher),a=n(64).LOGOUT_EFFECT,i=n(1).takeEvery,c=n(797).removeCookieWhiteEmailStatus;function logoutSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c();case 1:case"end":return e.stop()}},r)}function logoutSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(a,logoutSaga);case 2:case"end":return e.stop()}},o)}e.exports={logoutSagaWatcher:logoutSagaWatcher}},function(e,t,n){var r=n(36),o=n(37).WHITE_EMAIL_STATUS_COOKIE_NAME;e.exports={removeCookieWhiteEmailStatus:function(){r.expire(o)}}},function(e,t,n){var r=regeneratorRuntime.mark(emailChangedWhiteModeSaga),o=regeneratorRuntime.mark(emailChangedWhiteModeSagaWatcher),a=n(1),i=a.call,c=a.takeLatest,s=n(447).changeEmailSaga,u=n(96),l=u.submitEmailMetrikaSaga,p=u.changeEmailSuccessWhiteModeMetrikaSaga,f=n(56).EMAIL_CHANGED_WHITE_MODE_EFFECT;function emailChangedWhiteModeSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,i(l);case 3:return n.prev=3,n.next=6,i(s,t);case 6:return n.next=8,i(p);case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:case"end":return n.stop()}},r,null,[[3,10]])}function emailChangedWhiteModeSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(f,emailChangedWhiteModeSaga);case 2:case"end":return e.stop()}},o)}e.exports={emailChangedWhiteModeSagaWatcher:emailChangedWhiteModeSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(emailChangedNormalModeSaga),o=regeneratorRuntime.mark(emailChangedNormalModeSagaWatcher),a=n(1),i=a.call,c=a.takeLatest,s=n(56).EMAIL_CHANGED_NORMAL_MODE_EFFECT,u=n(96),l=u.submitEmailMetrikaSaga,p=u.changeEmailSuccessNormalModeMetrikaSaga,f=n(447).changeEmailSaga;function emailChangedNormalModeSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,i(l);case 3:return n.prev=3,n.next=6,i(f,t);case 6:return n.next=8,i(p);case 8:n.next=12;break;case 10:n.prev=10,n.t0=n.catch(3);case 12:case"end":return n.stop()}},r,null,[[3,10]])}function emailChangedNormalModeSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(s,emailChangedNormalModeSaga);case 2:case"end":return e.stop()}},o)}e.exports={emailChangedNormalModeSagaWatcher:emailChangedNormalModeSagaWatcher,emailChangedNormalModeSaga:emailChangedNormalModeSaga}},function(e,t,n){var r=regeneratorRuntime.mark(changeEmailRequestedSaga),o=regeneratorRuntime.mark(changeEmailRequestedSagaWatcher),a=n(1),i=a.takeEvery,c=a.put,s=a.call,u=n(56),l=u.CHANGE_EMAIL_REQUESTED_EFFECT,p=u.whiteEmailUpdate,f=n(37),d=f.MODES.EMAIL_FORM,m=f.LOG_NAMESPACE,y=n(445).getTextPresetNameWithFallback,_=n(318).fetchEmailStatus,h=n(49)(m),g=n(96).popupOpenedMetrikaSaga;function changeEmailRequestedSaga(e){var t,n,o,a,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=(t=void 0===t?{}:t).textPreset,r.prev=3,r.next=6,s(_);case 6:return o=r.sent,a=o.isWhitelisted,i=o.email,r.next=11,c(p({shouldChange:!0,shouldConfirm:!1,mode:d,textPreset:y(n),isWhitelisted:a,email:i}));case 11:return r.next=13,s(g);case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(3),h("changeEmailRequested:failure",r.t0);case 18:case"end":return r.stop()}},r,null,[[3,15]])}function changeEmailRequestedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,changeEmailRequestedSaga);case 2:case"end":return e.stop()}},o)}e.exports={changeEmailRequestedSagaWatcher:changeEmailRequestedSagaWatcher,changeEmailRequestedSaga:changeEmailRequestedSaga}},function(e,t,n){var r=n(14).default,o=n(27).KINOPOISK_GO_NAMESPACE,a="".concat(o,"/SHOW_MODAL_CONTENT"),i="".concat(o,"/GO_BACK_MODAL_CONTENT"),c="".concat(o,"/SET_MODAL_CONTENT"),s=r(a),u=r(i),l=r(c);e.exports={SHOW_MODAL_CONTENT:a,GO_BACK_MODAL_CONTENT:i,SET_MODAL_CONTENT:c,showModalContent:s,goBackModalContent:u,setModalContent:l}},function(e,t,n){var r=n(14).default,o=n(27).KINOPOISK_GO_NAMESPACE,a="".concat(o,"/CANCEL_SUBSCRIPTION_EFFECT"),i="".concat(o,"/PATCH_CANCEL"),c="".concat(o,"/UPDATE_CANCEL_STATUS"),s=r(a),u=r(i),l=r(c);e.exports={CANCEL_SUBSCRIPTION_EFFECT:a,PATCH_CANCEL:i,UPDATE_CANCEL_STATUS:c,cancelKinopoiskGoSubscriptionEffect:s,patchCancel:u,updateCancelStatus:l}},function(e,t,n){var r=n(14).default,o=n(27).KINOPOISK_GO_NAMESPACE,a="".concat(o,"/LOAD_SUBSCRIPTION_EFFECT"),i="".concat(o,"/PATCH_SUBSCRIPTION"),c="".concat(o,"/UPDATE_SUBSCRIPTION_STATUS"),s="".concat(o,"/CANCEL_SUBSCRIPTION_EFFECT"),u="".concat(o,"/SUBSCRIPTION_APPEAR_ON_SCREEN_EFFECT"),l="".concat(o,"/SUBSCRIPTION_CLICK_ON_BUTTON_EFFECT"),p="".concat(o,"/SUBSCRIPTION_CLICK_ON_LINK_EFFECT"),f=r(a),d=r(c),m=r(i),y=r(s),_=r(u),h=r(l),g=r(p);e.exports={LOAD_SUBSCRIPTION_EFFECT:a,PATCH_SUBSCRIPTION:i,UPDATE_SUBSCRIPTION_STATUS:c,CANCEL_SUBSCRIPTION_EFFECT:s,SUBSCRIPTION_APPEAR_ON_SCREEN_EFFECT:u,SUBSCRIPTION_CLICK_ON_BUTTON_EFFECT:l,SUBSCRIPTION_CLICK_ON_LINK_EFFECT:p,loadKinopoiskGoSubscriptionEffect:f,updateSubscriptionStatus:d,patchSubscription:m,cancelKinopoiskGoSubscriptionEffect:y,subscriptionAppearOnScreenEffect:_,subscriptionClickOnButtonEffect:h,subscriptionClickOnLinkEffect:g}},function(e,t,n){var r=n(14).default,o=n(27).KINOPOISK_GO_NAMESPACE,a="".concat(o,"/FETCH_COMING_SOON_FILMS_COLLECTION_EFFECT"),i="".concat(o,"/FETCH_TERM_OF_USE_EFFECT"),c="".concat(o,"/UPDATE_TERMS_OF_USE"),s="".concat(o,"/RESET_TERMS_OF_USE"),u=r(c),l=r(s);e.exports={FETCH_COMING_SOON_FILMS_COLLECTION_EFFECT:a,FETCH_TERM_OF_USE_EFFECT:i,UPDATE_TERMS_OF_USE:c,RESET_TERMS_OF_USE:s,fetchComingSoonFilmsCollectionEffect:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.listId,n=e.limit,r=e.offset;return{type:a,payload:{listId:t,limit:n,offset:r}}},fetchTermsOfUseEffect:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).productId;return{type:i,payload:{productId:e}}},updateTermsOfUse:u,resetTermsOfUse:l}},function(e,t,n){var r=n(14).default,o=n(27).KINOPOISK_GO_NAMESPACE,a="".concat(o,"/CLICK_ON_COMING_SOON_FILM_EFFECT"),i=r(a);e.exports={CLICK_ON_COMING_SOON_FILM_EFFECT:a,clickOnComingSoonFilmEffect:i}},function(e,t,n){var r=n(33).combineReducers,o=n(807).modalReducer,a=n(808).cancelReducer,i=n(809).subscriptionReducer,c=n(810).termsOfUseReducer;e.exports=r({modal:o,cancel:a,subscription:i,termsOfUse:c})},function(e,t,n){var r=n(23),o=n(27).MODAL_TYPE_CONTENT_STATES,a=n(57).SET_MODAL_CONTENT,i={content:{state:o.detail}};e.exports={modalReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n=t.payload.name;return r(e,{content:{state:{$set:n}}});default:return e}}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(57),o=r.PATCH_CANCEL,a=r.UPDATE_CANCEL_STATUS,i={data:{},status:null};e.exports={cancelReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,c=void 0===r?{}:r;switch(n){case o:return _objectSpread({},e,{},c);case a:return _objectSpread({},e,{status:c.status});default:return e}}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(57),o=r.PATCH_SUBSCRIPTION,a=r.UPDATE_SUBSCRIPTION_STATUS,i={data:{},status:n(27).LOAD_DATA_STATUS.pending};e.exports={subscriptionReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,c=void 0===r?{}:r;switch(n){case o:return _objectSpread({},e,{},c);case a:return _objectSpread({},e,{status:c.status});default:return e}}}},function(e,t,n){var r;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(23),a=n(83),i=n(57),c=i.UPDATE_TERMS_OF_USE,s=i.RESET_TERMS_OF_USE,u=a({productId:null,conditions:[]},(_defineProperty(r={},c,function(e,t){var n=t.payload;return o(e,{$merge:n})}),_defineProperty(r,s,function(e,t){var n=t.payload;return o(e,{$set:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{productId:null,conditions:[]},{},n)})}),r));e.exports={termsOfUseReducer:u}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(812),o=n(817),a=n(818),i=n(819),c=n(820),s=n(319),u=[r.manageModalContentWatcher,o.kinopoiskGoLoadSubscriptionInfoWatcher,a.fetchComingSoonFilmsSagaWatcher,i.cancelKinopoiskGoSubscriptionWatcher,c.fetchTermsOfUseSagaWatcher,s.metrikaKinopoiskGoSubscriptionWatcher];e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},o,{},r,{},a,{},i,{},c,{},s,{watchers:u})},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(showModalContentSaga),o=regeneratorRuntime.mark(goBackModalContentSaga),a=regeneratorRuntime.mark(manageModalContentWatcher),i=n(1),c=i.takeEvery,s=i.put,u=i.select,l=i.call,p=n(59).CLOSE_MODAL,f=n(27).MODAL_TYPE_CONTENT_STATES,d=f.detail,m=f.termsOfUse,y=f.cancel,_=n(57),h=_.SHOW_MODAL_CONTENT,g=_.GO_BACK_MODAL_CONTENT,b=_.setModalContent,E=n(319).sendMetrikaClickInModalContentSaga,v=n(202).selectModalContentState;function showModalContentSaga(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.name,r.next=3,u(v);case 3:n=r.sent,r.t0=n,r.next=r.t0===d?7:r.t0===y?17:r.t0===m?17:21;break;case 7:r.t1=t,r.next=r.t1===y?10:r.t1===m?10:15;break;case 10:return r.next=12,s(b({name:t}));case 12:return r.next=14,l(E,t);case 14:case 15:return r.abrupt("break",16);case 16:return r.abrupt("break",22);case 17:if(t!==d){r.next=20;break}return r.next=20,s(b({name:d}));case 20:case 21:return r.abrupt("break",22);case 22:case"end":return r.stop()}},r)}function goBackModalContentSaga(){var e;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(v);case 2:e=t.sent,t.t0=e,t.next=t.t0===y?6:t.t0===m?6:9;break;case 6:return t.next=8,s(b({name:d}));case 8:case 9:return t.abrupt("break",10);case 10:case"end":return t.stop()}},o)}function manageModalContentWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(h,showModalContentSaga);case 2:return e.next=4,c([g,p],goBackModalContentSaga);case 4:case"end":return e.stop()}},a)}e.exports={showModalContentSaga:showModalContentSaga,goBackModalContentSaga:goBackModalContentSaga,manageModalContentWatcher:manageModalContentWatcher}},function(e,t,n){function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(15),o=n(151),a=n(6).createSelector,i=n(138).KINOPOISK_GO_SUBSCRIPTION,c=i.MODAL_CONTENT_DETAIL,s=i.MODAL_CONTENT_CANCEL,u=n(175).selectBunkerState,l=n(314).template,p=n(27).STATUSES,f=n(448).selectCancelStatus,d=n(164).selectKinopoiskGo,m=n(449),y=m.selectSubscriptionState,_=m.selectSubscriptionData,h=m.selectSubscriptionTemplateParams,g=a(u,function(e){return e[c]}),b=a(u,function(e){return e[s]}),E=a([y,_,g,h],function(e,t,n,r){var a=n.ticketsInfo,i=r.endDate,c=r.nextPaymentDate,s={ticketsInfo:null,prolongationInfo:null,subTitle:t.title};if(e===p.active||e===p.active_and_prolongation_disabled){var u=t.totalPassCount-t.pastPassCount,f=e===p.active?c:i;if(u){var d=o.apply(void 0,[u].concat(_toConsumableArray(a.remainingTicketsText)));s.ticketsInfo=l(d,{remainingTicketsCount:u,date:f})}else if(e===p.active){var m=o.apply(void 0,[t.totalPassCount].concat(_toConsumableArray(a.ticketsNotAvailableFirst))),y=o.apply(void 0,[t.totalPassCount].concat(_toConsumableArray(a.ticketsNotAvailableSecond))),_={first:m,second:l(y,{date:f,totalPassCount:t.totalPassCount})};s.ticketsInfo="".concat(_.first,"\n").concat(_.second)}else e===p.active_and_prolongation_disabled&&(s.ticketsInfo=o.apply(void 0,[t.totalPassCount].concat(_toConsumableArray(a.ticketsNotAvailableFirst))));e===p.active_and_prolongation_disabled&&(s.prolongationInfo=l(a.prolongationDisabledText,{endDate:i}))}return s}),v=a([g,E,a([g,h,y],function(e,t,n){var r=t.nextPaymentDate;if(n===p.active)return _objectSpread({},e.paymentInfo,{description:l(e.paymentInfo.description,{nextPaymentDate:r})})})],function(e,t,n){var r=e.footer,o=r.support,a=r.termsOfUse,i=_objectWithoutProperties(r,["support","termsOfUse"]),c=o.title,s=o.phone,u=o.email;return _objectSpread({},e,{},t,{paymentInfo:n,footer:_objectSpread({},i,{termsOfUse:a,support:_objectSpread({},_objectWithoutProperties(o,["title","phone","email"]),{title:c,phone:s,email:u,phoneLink:e.footer.support.phone.replace(/\D/g,"")})})})}),O=a([b,_,h,f],function(e,t,n,r){var o=_objectSpread({},e,{status:r,successfulCancel:void 0});return t.endDate&&(o.successfulCancel=_objectSpread({},e.successfulCancel,{description:l(e.successfulCancel.description,{title:t.title,endDate:n.endDate})})),o});e.exports={selectSubscriptionInfo:E,selectModalContentState:function(e){return r(d(e),"modal.content.state")},selectModalContentDetailConfig:v,selectSubscriptionModalContentCancelConfig:O}},function(e,t,n){var r=n(6).createSelector,o=n(15),a=n(175).selectBunkerState,i=n(27).LOAD_DATA_STATUS,c=n(138).KINOPOISK_GO_SUBSCRIPTION,s=n(164).selectKinopoiskGo,u=function(e){return o(s(e),"termsOfUse",{})},l=function(e){return u(e).fetchStatus},p=r(a,function(e){return e&&e[c.MODAL_CONTENT_TERMS_OF_USE]||{}});e.exports={selectTermsOfUseState:u,selectTermsOfUseFetchStatus:l,selectIsTermsOfUsePending:function(e){return l(e)===i.pending},selectTermsOfUseConditions:function(e){return o(u(e),"conditions",[])},selectTermsOfUseLegalUrl:function(e){return u(e).legalUrl},selectTermsOfUseConfig:p}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(44),o=n(816),a=o.GOALS,i=o.ROOT_PARAM,c=o.ACTIONS,s=o.EVENT_TYPES,u=o.BLOCKS,l=o.MODAL_CONTENT_STATES,p=o.SUBSCRIPTION_STATUSES,f=function(e,t){p[e]&&r.params([i.kinopoiskGoDetailsPopup].concat(_toConsumableArray(t),[p[e]]))},d=function(e){var t=e.subscriptionState,n=e.isClick,o=e.isOrderSubscription;r.params([i.kinopoiskGoProfile,n?c.click:c.show,o?s.buy:s.details,p[t]])};e.exports={sendShowSubscriptionPanel:function(e){var t=e.subscriptionState,n=e.isOrderSubscription;d({subscriptionState:t,isClick:!1,isOrderSubscription:n})},sendClickInSubscriptionPanel:function(e){var t=e.subscriptionState,n=e.isOrderSubscription;d({subscriptionState:t,isClick:!0,isOrderSubscription:n})},sendClickOnComingSoonFilm:function(e){var t=e.subscriptionState;f(t,[c.click,u.blockPremieres])},sendClickInModalContent:function(e){var t=e.subscriptionState,n=e.nextModalState;f(t,[c.click,l[n]])},reachGoalSuccessfulCancelSubscription:function(){r.reachGoal("default",a.kinopoiskGoSubscriptionCancelSuccess)}}},function(e,t,n){var r,o;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(27),i=a.STATUSES,c=a.MODAL_TYPE_CONTENT_STATES,s=(_defineProperty(r={},c.termsOfUse,"block_terms_of_use"),_defineProperty(r,c.cancel,"block_cancel_subscription"),r),u=(_defineProperty(o={},i.unknown,"no_subscription"),_defineProperty(o,i.active,"subscription_valid"),_defineProperty(o,i.inactive,"subscription_invalid"),_defineProperty(o,i.inactive_prolongation,"subscription_valid_insufficient_money"),_defineProperty(o,i.active_and_prolongation_disabled,"subscription_finished"),o);e.exports={GOALS:{kinopoiskGoSubscriptionCancelSuccess:"KINOPOISK_GO_SUBSCRIPTION_CANCEL_SUCCESS"},BLOCKS:{blockPremieres:"block_premieres"},ACTIONS:{show:"show",click:"click"},ROOT_PARAM:{kinopoiskGoProfile:"kinopoisk_go_profile",kinopoiskGoDetailsPopup:"kinopoisk_go_details_popup"},EVENT_TYPES:{buy:"buy",details:"details"},SUBSCRIPTION_STATUSES:u,MODAL_CONTENT_STATES:s}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(kinopoiskGoLoadSubscriptionInfoSaga),o=regeneratorRuntime.mark(kinopoiskGoLoadSubscriptionInfoWatcher),a=n(1),i=a.takeLatest,c=a.put,s=a.call,u=n(27).LOAD_DATA_STATUS,l=n(57),p=l.LOAD_SUBSCRIPTION_EFFECT,f=l.updateSubscriptionStatus,d=n(450).kinopoiskGoLoadSubscriptionInfo;function kinopoiskGoLoadSubscriptionInfoSaga(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s(d);case 3:return e.next=5,c(f({status:u.loaded}));case 5:e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(0),e.next=11,c(f({status:u.failed}));case 11:case"end":return e.stop()}},r,null,[[0,7]])}function kinopoiskGoLoadSubscriptionInfoWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,kinopoiskGoLoadSubscriptionInfoSaga);case 2:case"end":return e.stop()}},o)}e.exports={kinopoiskGoLoadSubscriptionInfoWatcher:kinopoiskGoLoadSubscriptionInfoWatcher,kinopoiskGoLoadSubscriptionInfoSaga:kinopoiskGoLoadSubscriptionInfoSaga}},function(e,t,n){var r=regeneratorRuntime.mark(fetchComingSoonFilmsSaga),o=regeneratorRuntime.mark(fetchComingSoonFilmsSagaWatcher),a=n(53),i=n(1),c=i.call,s=i.select,u=i.put,l=n(29).takeAwait,p=n(224).fetchComingSoonFilmsCollectionSaga,f=n(47),d=f.selectIsUiListAvailable,m=f.deleteList,y=f.addList,_=n(27).COMING_SOON_FILMS_MONTHS_COUNT,h=n(57).FETCH_COMING_SOON_FILMS_COLLECTION_EFFECT;function fetchComingSoonFilmsSaga(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.listId,o=t.limit,r.next=4,s(d,{listId:n});case 4:if(!r.sent){r.next=7;break}return r.abrupt("return");case 7:return r.next=9,u(y(n));case 9:return r.prev=9,r.next=12,c(p,{listId:n,limit:o,releasedBefore:a().add(_,"months").format("YYYY-MM-DD")});case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(9),r.next=18,u(m(n));case 18:case"end":return r.stop()}},r,null,[[9,14]])}function fetchComingSoonFilmsSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(h,fetchComingSoonFilmsSaga);case 2:case"end":return e.stop()}},o)}e.exports={fetchComingSoonFilmsSaga:fetchComingSoonFilmsSaga,fetchComingSoonFilmsSagaWatcher:fetchComingSoonFilmsSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(cancelKinopoiskGoSubscriptionSaga),o=regeneratorRuntime.mark(cancelKinopoiskGoSubscriptionWatcher),a=n(1),i=a.takeLatest,c=a.put,s=a.putResolve,u=a.select,l=a.call,p=n(25).sendRequestEffect,f=n(27).LOAD_DATA_STATUS,d=n(202).selectSubscriptionData,m=n(57),y=m.CANCEL_SUBSCRIPTION_EFFECT,_=m.patchCancel,h=m.updateCancelStatus,g=n(450).kinopoiskGoLoadSubscriptionInfo,b=n(319).sendMetrikaReachGoalSuccessfulCancelSubscriptionSaga,E=n(320).getUrl;function cancelKinopoiskGoSubscriptionSaga(){var e,t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,c(h({status:f.pending}));case 2:return r.next=4,u(d);case 4:return e=r.sent,t=e.productId,r.prev=6,r.next=9,s(p({url:E("api-kinopoisk-go-subscription-cancel",{productId:t}),method:"put"}));case 9:return n=r.sent,r.next=12,l(g);case 12:return r.next=14,l(b);case 14:return r.next=16,c(_({data:n,status:f.loaded}));case 16:r.next=22;break;case 18:return r.prev=18,r.t0=r.catch(6),r.next=22,c(h({status:f.failed}));case 22:case"end":return r.stop()}},r,null,[[6,18]])}function cancelKinopoiskGoSubscriptionWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(y,cancelKinopoiskGoSubscriptionSaga);case 2:case"end":return e.stop()}},o)}e.exports={cancelKinopoiskGoSubscriptionSaga:cancelKinopoiskGoSubscriptionSaga,cancelKinopoiskGoSubscriptionWatcher:cancelKinopoiskGoSubscriptionWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(fetchTermsOfUseSaga),o=regeneratorRuntime.mark(fetchTermsOfUseSagaWatcher);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),i=a.takeLatest,c=a.put,s=a.putResolve,u=n(25).sendRequestEffect,l=n(320).getUrl,p=n(27).LOAD_DATA_STATUS,f=n(57),d=f.FETCH_TERM_OF_USE_EFFECT,m=f.updateTermsOfUse,y=f.resetTermsOfUse;function fetchTermsOfUseSaga(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.productId,r.next=4,c(y({productId:n,fetchStatus:p.pending}));case 4:return r.prev=4,r.next=7,s(u({url:l("api-kinopoisk-go-terms-of-use",{productId:n}),method:"get"}));case 7:return o=r.sent,r.next=10,c(m(_objectSpread({},o,{fetchStatus:p.loaded})));case 10:r.next=16;break;case 12:return r.prev=12,r.t0=r.catch(4),r.next=16,c(m({fetchStatus:p.failed}));case 16:case"end":return r.stop()}},r,null,[[4,12]])}function fetchTermsOfUseSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(d,fetchTermsOfUseSaga);case 2:case"end":return e.stop()}},o)}e.exports={fetchTermsOfUseSaga:fetchTermsOfUseSaga,fetchTermsOfUseSagaWatcher:fetchTermsOfUseSagaWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(openTrailerSaga),o=n(1),a=o.call,i=o.takeEvery,c=n(580).SHOW_TRAILER_EFFECT,s=n(15),u=function(){};function openTrailerSaga(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.filmId,o=t.trailerId,r.next=3,a([window,s(window,"Ya.Kinopoisk.Widgets.discovery.open",u)],{filmId:n,trailerId:o});case 3:case"end":return r.stop()}},r)}e.exports=regeneratorRuntime.mark(function trailerWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(c,openTrailerSaga);case 2:case"end":return e.stop()}},trailerWatcher)})},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(392),o=n(6).createSelector,a=["monetizationModels","hasSubscription","watchingOption"],i=n(62).selectIsAuthorized,c=n(226).getBasicFilmModel,s=n(227).selectFilmOttData,u=n(451).selectPersonFilmographyOttData,l=n(19).getYandexPlusStatus,p=n(824),f=p.calculateType,d=p.calculateTextWithPrice,m=p.calculateText,y=function(e){return o(e,function(e){var t=e.watchingOption;return void 0===t?{}:t})},_=function(e){return o([i,l,e],function(e,t,n){var o=f(_objectSpread({},n,{yandexSubscription:t,isAuthorized:e}));if(!o)return _objectSpread({},r(n,[].concat(a)));var i=d(n),c=i||m(n);return{watchingOption:_objectSpread({},n),nameplateData:{type:o,price:i,text:c}}})},h=y(s),g=_(y(c)),b=_(s),E=_(u),v=_(h);e.exports={selectBasicFilmOttData:g,selectEntityFilmOttData:b,selectEntityFilmWatchingOptionOttData:v,selectEntityPersonFilmographyOttData:E}},function(e,t,n){var r;function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(105).update,a=n(83),i=n(166),c=i.ENTITIES_ADD_MAP,s=i.ENTITY_UPDATE_MAP,u=i.ENTITY_DEEP_UPDATE_MAP,l=i.ENTITY_PATCH_MAP,p=i.ENTITY_DELETE_MAP,f=i.ADD_ENTITIES,d=function(e,t,n){var r=t.payload,a=t.meta.entityId;return o(e,_defineProperty({},a,{$autoCreateObject:_defineProperty({},n,r)}))},m=a({},(_defineProperty(r={},c,function(e,t){return d(e,t,"$set")}),_defineProperty(r,s,function(e,t){return d(e,t,"$merge")}),_defineProperty(r,u,function(e,t){return d(e,t,"$deepMerge")}),_defineProperty(r,l,function(e,t){return d(e,t,"$patch")}),_defineProperty(r,p,function(e,t){var n=t.meta.entityId;return o(e,{$unset:[n]})}),_defineProperty(r,f,function(e,t){var n=t.payload,r=Object.entries(n).reduce(function(e,t){var n=_slicedToArray(t,2),r=n[0],o=n[1];return e[r]={$autoCreateObject:{$patch:o}},e},{});return o(e,r)}),r));e.exports={reducer:m}},function(e,t,n){"use strict";var r=n(79),o=r.WATCHING_OPTION_TYPE,a=r.SUBSCRIPTION_PURCHASE_TAG,i=r.SUBSCRIPTION_TO_SUBSCRIPTION_PURCHASE_TAG,c=r.NAMEPLATE,s=c.TYPE,u=c.BUTTON_TEXT;e.exports={calculateType:function(e){var t=e.type,n=e.purchased,r=e.subscription,c=e.subscriptionPurchaseTag,u=e.isAuthorized,l=void 0!==u&&u,p=e.yandexSubscription,f="ya_plus"===s[p];if([o.PAID,o.PAID_MULTIPLE].includes(t)&&!n)return s.transaction;if(f&&n)return s[a.PLUS];if(n&&i[r]!==a.PLUS)return s.purchased;if(t===o.SUBSCRIPTION){var d=!l&&c?c:i[r]||c;return s[d]}return null},calculateText:function(e){return e.purchased?u.TO_WATCH:u.BY_SUBSCRIPTION},calculateTextWithPrice:function(e){var t=e.type,n=e.price,r=e.minimumPrice,a=e.text,i=e.purchased;return t!==o.PAID||i?t===o.PAID_MULTIPLE?r?"от ".concat(r," ₽"):a:"":n?"за ".concat(n," ₽"):a}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(826),o=[r.nameplateWatcher];e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{watchers:o})},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(nameplateShowSaga),o=regeneratorRuntime.mark(nameplateClickSaga),a=regeneratorRuntime.mark(nameplateWatcher),i=n(1),c=i.takeLatest,s=i.call,u=n(827),l=n(452),p=l.NAMEPLATE_SHOW_EFFECT,f=l.NAMEPLATE_CLICK_EFFECT,d=n(79).WATCH_ON_KP_BLOCK_NAME;function nameplateShowSaga(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(t=e.payload,n=t.fromBlock,o=t.filmId,a=t.position,n!==d){r.next=6;break}return r.next=5,s(u.fromWatchOnKpBlockMetrikaShow,{filmId:o,position:a});case 5:return r.abrupt("return");case 6:return r.next=8,s(u.fromNowInCinemaBlockMetrikaShow,{filmId:o,position:a});case 8:case"end":return r.stop()}},r)}function nameplateClickSaga(e){var t,n,r,a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(t=e.payload,n=t.fromBlock,r=t.filmId,a=t.position,n!==d){o.next=6;break}return o.next=5,s(u.fromWatchOnKpBlockMetrikaClick,{filmId:r,position:a});case 5:return o.abrupt("return");case 6:return o.next=8,s(u.fromNowInCinemaBlockMetrikaClick,{filmId:r,position:a});case 8:case"end":return o.stop()}},o)}function nameplateWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(p,nameplateShowSaga);case 2:return e.next=4,c(f,nameplateClickSaga);case 4:case"end":return e.stop()}},a)}e.exports={nameplateWatcher:nameplateWatcher,nameplateShowSaga:nameplateShowSaga,nameplateClickSaga:nameplateClickSaga}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(sendNameplateMetrika),o=regeneratorRuntime.mark(fromNowInCinemaBlockMetrika),a=regeneratorRuntime.mark(fromNowInCinemaBlockMetrikaShow),i=regeneratorRuntime.mark(fromNowInCinemaBlockMetrikaClick),c=regeneratorRuntime.mark(fromWatchOnKpBlockMetrika),s=regeneratorRuntime.mark(fromWatchOnKpBlockMetrikaShow),u=regeneratorRuntime.mark(fromWatchOnKpBlockMetrikaClick),l=n(1).call,p=n(44),f=n(79),d=f.NOW_IN_CINEMA_BLOCK_NAME,m=f.WATCH_ON_KP_BLOCK_NAME;function sendNameplateMetrika(e){var t,n,o,a,i,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.paramName,n=e.position,o=e.filmId,a=e.type,i=void 0===a?"online":a,r.next=3,l({context:p,fn:p.getPathTemplate});case 3:return c=r.sent,r.next=6,l({context:p,fn:p.params},[t,"kp_desktop",c,n,o,i]);case 6:case"end":return r.stop()}},r)}function fromNowInCinemaBlockMetrika(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.action,n=e.filmId,r=e.position,o.next=3,l(sendNameplateMetrika,{paramName:"".concat(d,"_").concat(t),position:r,filmId:n,type:"ticket"});case 3:case"end":return o.stop()}},o)}function fromNowInCinemaBlockMetrikaShow(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,n=e.position,r.next=3,l(fromNowInCinemaBlockMetrika,{action:"show",filmId:t,position:n});case 3:case"end":return r.stop()}},a)}function fromNowInCinemaBlockMetrikaClick(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,n=e.position,r.next=3,l(fromNowInCinemaBlockMetrika,{action:"click",filmId:t,position:n});case 3:case"end":return r.stop()}},i)}function fromWatchOnKpBlockMetrika(e){var t,n,r;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.action,n=e.filmId,r=e.position,o.next=3,l(sendNameplateMetrika,{paramName:"".concat(m,"_").concat(t),position:r,filmId:n,type:"online"});case 3:case"end":return o.stop()}},c)}function fromWatchOnKpBlockMetrikaShow(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,n=e.position,r.next=3,l(fromWatchOnKpBlockMetrika,{action:"show",filmId:t,position:n});case 3:case"end":return r.stop()}},s)}function fromWatchOnKpBlockMetrikaClick(e){var t,n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.filmId,n=e.position,r.next=3,l(fromWatchOnKpBlockMetrika,{action:"click",filmId:t,position:n});case 3:case"end":return r.stop()}},u)}e.exports={fromNowInCinemaBlockMetrikaShow:fromNowInCinemaBlockMetrikaShow,fromNowInCinemaBlockMetrikaClick:fromNowInCinemaBlockMetrikaClick,fromWatchOnKpBlockMetrikaShow:fromWatchOnKpBlockMetrikaShow,fromWatchOnKpBlockMetrikaClick:fromWatchOnKpBlockMetrikaClick}},function(e,t){},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(830),o=n(833),a=n(834),i=[r.filmographyWatcher,o.filmPosterCardClickWatcher,a.carouselWatcher];e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{},a,{},o,{watchers:i})},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(filmographySaga),o=regeneratorRuntime.mark(filmographyWatcher),a=n(1),i=a.takeLatest,c=a.put,s=a.putResolve,u=a.call,l=n(203).LOAD_PERSON_FILMOGRAPHY_EFFECT,p=n(25).sendRequestEffect,f=n(831).getUrl,d=n(832),m=n(93).patchMap,y=n(47).patchList,_=n(89).UI_LIST_STATUS,h=n(88),g=n(321).carouselShowMetrika;function filmographySaga(e){var t,n,o,a,i,l,b,E,v,O,P,S,T,k;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.listId,r.next=4,c(y(n,{pagination:{status:_.pending}}));case 4:return r.next=6,u(d.getPersonId);case 6:return o=r.sent,r.prev=7,r.next=10,s(p({url:f("api-person-filmography"),method:"get",params:{query:{id:o}}}));case 10:if(a=r.sent,i=a.filmography,l=void 0===i?[]:i,b=a.name,E=a.ottData,v=void 0===E?[]:E,l.length){r.next=18;break}return r.abrupt("return");case 18:return O=h(l),P=O.map,S=O.list,T=h(v,{idFieldName:"filmId"}),k=T.map,r.next=22,c(m("personFilmography",{byId:P,ottData:k,contextData:{name:b},meta:"isOnlineAvialable"}));case 22:return r.next=24,c(y(n,{items:Array.from(new Set(S)),pagination:{status:_.loaded}}));case 24:return r.next=26,u(g,t);case 26:r.next=32;break;case 28:return r.prev=28,r.t0=r.catch(7),r.next=32,c(y(n,{pagination:{status:_.failed}}));case 32:case"end":return r.stop()}},r,null,[[7,28]])}function filmographyWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(l,filmographySaga);case 2:case"end":return e.stop()}},o)}e.exports={filmographyWatcher:filmographyWatcher,filmographySaga:filmographySaga}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(153);e.exports=r(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},{"api-person-filmography":"/api/person-filmography/"},{},{person:"/name/:id([\\d]+)/"}))},function(e,t,n){"use strict";function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}e.exports={getPersonId:function(){return _slicedToArray(location.pathname.match(/\/name\/(\d+)\/?/)||[],2)[1]}}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(filmPosterCardSaga),o=regeneratorRuntime.mark(filmPosterCardClickWatcher),a=n(1),i=a.takeLatest,c=a.call,s=n(203).FILM_POSTER_CARD_CLICK_EFFECT,u=n(321).carouselPosterSnippetClickMetrika;function filmPosterCardSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,c(u,t);case 3:case"end":return n.stop()}},r)}function filmPosterCardClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s,filmPosterCardSaga);case 2:case"end":return e.stop()}},o)}e.exports={filmPosterCardClickWatcher:filmPosterCardClickWatcher,filmPosterCardSaga:filmPosterCardSaga}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(carouselSaga),o=regeneratorRuntime.mark(carouselWatcher),a=n(1),i=a.takeLatest,c=a.call,s=n(203).ON_SHOW_CAROUSEL_EFFECT,u=n(321).carouselShowMetrika;function carouselSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload,n.next=3,c(u,t);case 3:case"end":return n.stop()}},r)}function carouselWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s,carouselSaga);case 2:case"end":return e.stop()}},o)}e.exports={carouselWatcher:carouselWatcher,carouselSaga:carouselSaga}},function(e,t,n){var r=regeneratorRuntime.mark(loadHeaderFeaturesWatcher),o=n(1),a=o.put,i=o.take,c=n(80),s=c.LOAD_HEADER_FEATURES_EFFECT,u=c.loadHeaderFeatures;function loadHeaderFeaturesWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s);case 2:return e.next=4,a(u());case 4:case"end":return e.stop()}},r)}e.exports={loadHeaderFeaturesWatcher:loadHeaderFeaturesWatcher}},function(e,t,n){var r=n(837).advRenderStartedSagaWatcher;e.exports=[r]},function(e,t,n){var r=regeneratorRuntime.mark(advRenderStartedSaga),o=regeneratorRuntime.mark(advRenderStartedSagaWatcher),a=n(1),i=a.takeEvery,c=a.call,s=a.fork,u=n(594),l=n(199),p=n(230).RUM_ADV_RENDER_STARTED_EFFECT,f=n(109),d=f.RENDER_FAILURE_ID,m=f.ID_DELIMITER,y=n(838).ACTION_TYPE_RUM_ID_MAP,_=n(839),h=n(840);function advRenderStartedSaga(e){var t,n,o,a,i,p,f,g,b,E;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.placeId,o=t.bannerId,r.next=3,s(_,n);case 3:return a=r.sent,r.next=6,c(h,n,o);case 6:if(i=r.sent,p=i.type,f=a.result()){r.next=12;break}return a.cancel(),r.abrupt("return");case 12:g=l(),b=u([y[p]||d,o]).join(m),E=g.getTime(),g.sendTimeMark(b,E,!1,f),g.sendDelta(b,E,f);case 17:case"end":return r.stop()}},r)}function advRenderStartedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,advRenderStartedSaga);case 2:case"end":return e.stop()}},o)}e.exports={advRenderStartedSaga:advRenderStartedSaga,advRenderStartedSagaWatcher:advRenderStartedSagaWatcher}},function(e,t,n){var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(230),a=o.RUM_ADV_RENDERED_SUCCESS,i=o.RUM_ADV_RENDERED_FAILURE,c=o.RUM_ADV_DESTROYED,s=n(109),u=s.RENDER_SUCCESS_ID,l=s.RENDER_FAILURE_ID,p=s.DESTROY_ID;e.exports={ACTION_TYPE_RUM_ID_MAP:(r={},_defineProperty(r,a,u),_defineProperty(r,i,l),_defineProperty(r,c,p),r)}},function(e,t,n){var r=regeneratorRuntime.mark(createPlaceSaga),o=n(1).call,a=n(199),i=n(109).RENDER_START_ID,c=n(431);function createPlaceSaga(e){var t,n,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o(c);case 2:return t=a(),n=t.getTime(),s=t.makeSubPage(e,n),t.sendTTI(!1,n,s),t.sendTimeMark(i,n,!1,s),r.abrupt("return",s);case 8:case"end":return r.stop()}},r)}e.exports=createPlaceSaga},function(e,t,n){var r=regeneratorRuntime.mark(takeFinishActionSaga),o=n(1).take,a=n(230),i=a.RUM_ADV_RENDERED_SUCCESS,c=a.RUM_ADV_RENDERED_FAILURE,s=a.RUM_ADV_DESTROYED;function takeFinishActionSaga(e,t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o(function(n){var r=n.type,o=n.payload;return[i,c,s].includes(r)&&o.placeId===e&&o.bannerId===t});case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}},r)}e.exports=takeFinishActionSaga},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(842),o=n(843).changeSeoRouteWatcher,a=n(846).changeEditorialRouteWatcher,i=n(848);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({onSeoChangeRoute:o,onEditorialChangeRoute:a,onUpdateStatsWatcher:i},r)},function(e,t,n){var r=regeneratorRuntime.mark(onFilmClickWatcher),o=regeneratorRuntime.mark(onTrailerClickWatcher),a=regeneratorRuntime.mark(onOnlineClickWatcher),i=regeneratorRuntime.mark(onRatingClickWatcher),c=regeneratorRuntime.mark(onActionClickWatcher),s=regeneratorRuntime.mark(onTopbarLinkClickWatcher),u=regeneratorRuntime.mark(onHasWatchedWatcher),l=regeneratorRuntime.mark(onFolderSetWatcher),p=n(1),f=p.takeEvery,d=p.select,m=n(19).getIsAuthorized,y=n(17).WATCHLIST_FOLDER,_=n(50),h=_.ON_FILM_CLICK_EFFECT,g=_.ON_TRAILER_CLICK_EFFECT,b=_.ON_ONLINE_CLICK_EFFECT,E=_.ON_ACTION_CLICK_EFFECT,v=_.ON_TOPBAR_LINK_CLICK_EFFECT,O=_.ON_HAS_WATCHED_EFFECT,P=n(190),S=P.RATE_FILM_EFFECT,T=P.SET_FILM_FOLDER_EFFECT,k=n(158);function onFilmClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(h,regeneratorRuntime.mark(function _callee(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendClick(["item",t.filmId]);case 2:case"end":return n.stop()}},_callee)}));case 2:case"end":return e.stop()}},r)}function onTrailerClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(g,regeneratorRuntime.mark(function _callee2(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendClick(["trailer",t.filmId]);case 2:case"end":return n.stop()}},_callee2)}));case 2:case"end":return e.stop()}},o)}function onOnlineClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(b,regeneratorRuntime.mark(function _callee3(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendOnline([t.filmId,t.buttonCaption]);case 2:case"end":return n.stop()}},_callee3)}));case 2:case"end":return e.stop()}},a)}function onRatingClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(S,regeneratorRuntime.mark(function _callee4(e){var t,n,r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(t=e.payload,n=t.filmId,r=t.rating,o=t.rollbackRating,0!==r&&(-1!==r||o)){a.next=4;break}return a.abrupt("return");case 4:k.sendClick(["star",n,r>0?"add":"remove"]);case 5:case"end":return a.stop()}},_callee4)}));case 2:case"end":return e.stop()}},i)}function onActionClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(E,regeneratorRuntime.mark(function _callee5(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendClick(["actions",t.filmId]);case 2:case"end":return n.stop()}},_callee5)}));case 2:case"end":return e.stop()}},c)}function onTopbarLinkClickWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(v,regeneratorRuntime.mark(function _callee6(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendCommon([t.linkType]);case 2:case"end":return n.stop()}},_callee6)}));case 2:case"end":return e.stop()}},s)}function onHasWatchedWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(O,regeneratorRuntime.mark(function _callee7(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t=e.payload,k.sendClick(["eye",t.filmId,t.operation]);case 2:case"end":return n.stop()}},_callee7)}));case 2:case"end":return e.stop()}},u)}function onFolderSetWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(T,regeneratorRuntime.mark(function _callee8(e){var t,n,r,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.operation,r=t.filmId,o=t.folderId,i.next=4,d(m);case 4:a=i.sent,o===y&&k.sendToWatchClick({operation:n,isTouch:!1,filmId:r,hasAuth:a});case 6:case"end":return i.stop()}},_callee8)}));case 2:case"end":return e.stop()}},l)}e.exports={onFilmClickWatcher:onFilmClickWatcher,onTrailerClickWatcher:onTrailerClickWatcher,onOnlineClickWatcher:onOnlineClickWatcher,onRatingClickWatcher:onRatingClickWatcher,onActionClickWatcher:onActionClickWatcher,onTopbarLinkClickWatcher:onTopbarLinkClickWatcher,onHasWatchedWatcher:onHasWatchedWatcher,onFolderSetWatcher:onFolderSetWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(changeSeoRouteSaga),o=regeneratorRuntime.mark(changeSeoRouteWatcher),a=n(1),i=a.takeEvery,c=a.call,s=a.select,u=n(249),l=n(17).PENDING_TYPES,p=n(50).CHANGE_SEO_ROUTE_EFFECT,f=n(453),d=n(844),m=n(455),y=n(456),_=n(457),h=n(54).selectSeoCurrentUrlParameters,g=n(845),b=n(393),E=b.DEFAULT_SORTING_OPTION,v=b.SORTING_OPTIONS,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.some(function(e){return!u(t[e],n[e])})};function changeSeoRouteSaga(e){var t,n,o,a,i,u,p,b,P,S;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.query,o=t.params,r.next=3,s(h);case 3:return a=r.sent,r.next=6,c(f,n.page);case 6:return r.next=8,c(m,n.sort,{defaultSortingOption:E,sortingOptions:v});case 8:return r.next=10,c(y,n.quick_filters);case 10:return r.next=12,c(_,n.exclude_viewed);case 12:return i=o.country,u=o.year,p=o.yearRange,b=o.genre,r.next=15,c(d,{country:i,year:u,yearRange:p,genre:b});case 15:return r.next=17,s(h);case 17:return P=r.sent,S={},O(["genreSlug","countryId","years","yearsRange"],a,P)?(S.pendingType=l.full,S.shouldChangeCover=!0):(S.pendingType=l.listOnly,S.shouldChangeCover=!1),r.next=23,c(g,S);case 23:case"end":return r.stop()}},r)}function changeSeoRouteWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,changeSeoRouteSaga);case 2:case"end":return e.stop()}},o)}e.exports={changeSeoRouteSaga:changeSeoRouteSaga,changeSeoRouteWatcher:changeSeoRouteWatcher}},function(e,t,n){var r=regeneratorRuntime.mark(sendFiltersMetrika),o=regeneratorRuntime.mark(applyFilter),a=n(1),i=a.put,c=a.select,s=a.call,u=n(158),l=n(50).changeSeoFilter,p=n(54),f=p.selectSeoCurrentUrlParameters,d=p.selectSeoAllFilters,m=n(17).EMPTY_FILTER_VALUE,y=n(189),_=y.getGenreBySlug,h=y.getCountryById,g="all";function sendFiltersMetrika(e){var t,n,o,a,i,s,l,p,m,y,b,E,v,O;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=[],r.next=3,c(f);case 3:return n=r.sent,o=n.years,a=n.genreSlug,i=n.countryId,r.next=9,c(d);case 9:if(s=r.sent,l=s.countries,p=s.genres,(m=e.year||e.yearRange||null)!==(o&&o.join("-")||null)&&(t.push("year"),t.push(m||g)),y=e.country,(b=Number(y&&y.split("-")[1])||void 0)!==i&&(E=(h(l,b)||{}).nameRus||g,t.push("country"),t.push(E)),(v=e.genre)!==a&&(t.push("genre"),O=(_(p,v)||{}).nameRusPlural||g,t.push(O)),t.length){r.next=21;break}return r.abrupt("return");case 21:u.sendFilter(t);case 22:case"end":return r.stop()}},r)}function applyFilter(e){var t,n,r,a,u,p,f,y;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=e.country,n=e.year,r=e.yearRange,a=e.genre,u={},o.next=4,c(d);case 4:return p=o.sent,f=p.genres,a?(y=f.find(function(e){return e.nameEng.toLowerCase()===a}),u.genreId=y&&y.id):u.genreId=m,u.countryId=t?Number(t.split("-")[1]):m,u.years=r?r.split("-"):n?[n]:[m],o.next=11,s(sendFiltersMetrika,{country:t,year:n,yearRange:r,genre:a});case 11:return o.next=13,i(l(u));case 13:case"end":return o.stop()}},o)}e.exports=applyFilter},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=regeneratorRuntime.mark(fetchCover),o=n(1),a=o.select,i=o.put,c=o.putResolve,s=o.all,u=o.call,l=n(279),p=n(54),f=p.selectSeoCurrentFiltersNormalized,d=p.selectSorting,m=p.selectAppliedQuickFilters,y=p.selectExcludeViewed,_=p.selectSeoSelectionMeta,h=p.selectSeoPageNumber,g=n(17).LOADING_STATUSES,b=n(458).SelectionError,E=n(85).ERROR_TYPES,v=n(25).sendRequestEffect,O=n(84).historyReplaceEffect,P=n(54).selectSeoCurrentUrlParameters,S=n(189).spreadSelectionsFilms,T=n(50),k=T.updateSeoList,C=T.updateSeoCover,w=T.raiseSelectionError,I=T.suspendSelection,A=n(93).updateMap,x=n(70).composeSeoSelectionLink,R=n(92).ENTITIES_TYPES;function fetchCover(e){var t,n,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.countryId,n=e.genreId,o=e.yearsRange,r.prev=1,r.next=4,c(v({url:l.getRoute("cover"),method:"get",params:{query:{country:t,genre:n,years:o}}}));case 4:return r.abrupt("return",r.sent);case 7:return r.prev=7,r.t0=r.catch(1),r.abrupt("return",null);case 10:case"end":return r.stop()}},r,null,[[1,7]])}e.exports=regeneratorRuntime.mark(function loadSelectionPage(){var e,t,n,r,o,p,T,N,j,D,M,L,F,U,W,B,G,H,Y,K,z,V,q,X,Q,Z,$,J=arguments;return regeneratorRuntime.wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:return e=J.length>0&&void 0!==J[0]?J[0]:{},t=e.pendingType,n=e.shouldChangeCover,r=void 0!==n&&n,ee.next=3,i(I(t));case 3:return ee.next=5,a(f);case 5:return o=ee.sent,ee.next=8,a(d);case 8:return p=ee.sent,ee.next=11,a(y);case 11:return T=ee.sent,ee.next=14,a(h);case 14:return N=ee.sent,ee.next=17,a(m);case 17:return j=ee.sent,ee.next=20,a(P);case 20:return D=ee.sent,M=(p||{}).parameter,ee.next=24,a(_);case 24:return L=ee.sent,F=L.title,document.title=F,ee.prev=27,ee.next=30,s([c(v({url:l.getUrl("seoFilms"),method:"get",params:{query:{country:null===(H=o.country)||void 0===H?void 0:H.id,genre:null===(Y=o.genre)||void 0===Y?void 0:Y.id,years:null===(K=o.years)||void 0===K?void 0:K.join("-"),page:N,sort:M,quick_filters:j.join(","),exclude_viewed:Number(T)}}})),r?u(fetchCover,{countryId:null===o||void 0===o?void 0:null===(z=o.country)||void 0===z?void 0:z.id,genreId:null===o||void 0===o?void 0:null===(V=o.genre)||void 0===V?void 0:V.id,yearsRange:null===o||void 0===o?void 0:null===(q=o.years)||void 0===q?void 0:q.join("-")}):function(){}]);case 30:if(X=ee.sent,Q=_slicedToArray(X,2),U=Q[0],W=Q[1],(null===(B=U)||void 0===B?void 0:null===(G=B.error)||void 0===G?void 0:G.type)!==E.emptySelection||!j.length||T){ee.next=38;break}return ee.next=37,i(O(x(_objectSpread({},D,{quickFilters:null}))));case 37:return ee.abrupt("return");case 38:if(!r){ee.next=41;break}return ee.next=41,i(C(W));case 41:if(U.status!==g.error){ee.next=43;break}throw new b(U.error.type);case 43:ee.next=52;break;case 45:return ee.prev=45,ee.t0=ee.catch(27),Z=ee.t0 instanceof b?ee.t0:new b(E.clientError),ee.t0.status&&(Z=new b(E.serverError)),ee.next=51,i(w({status:g.error,error:Z.data}));case 51:return ee.abrupt("return");case 52:return $=S(U.itemsInfo),ee.next=55,i(A(R.film,$));case 55:return ee.next=57,i(k(U));case 57:case"end":return ee.stop()}},loadSelectionPage,null,[[27,45]])})},function(e,t,n){var r=regeneratorRuntime.mark(changeEditorialRouteSaga),o=regeneratorRuntime.mark(changeEditorialRouteWatcher),a=n(1),i=a.takeEvery,c=a.call,s=a.select,u=n(249),l=n(17).PENDING_TYPES,p=n(50).CHANGE_EDITORIAL_ROUTE_EFFECT,f=n(453),d=n(455),m=n(456),y=n(457),_=n(54).selectEditorialCurrentUrlParameters,h=n(847),g=n(394),b=g.DEFAULT_SORTING_OPTION,E=g.SORTING_OPTIONS,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return e.some(function(e){return!u(t[e],n[e])})};function changeEditorialRouteSaga(e){var t,n,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload.query,r.next=3,s(_);case 3:return n=r.sent,r.next=6,c(f,t.page);case 6:return r.next=8,c(d,t.sort,{defaultSortingOption:b,sortingOptions:E});case 8:return r.next=10,c(m,t.quick_filters);case 10:return r.next=12,c(y,t.exclude_viewed);case 12:return r.next=14,s(_);case 14:return o=r.sent,a={},v([],n,o)?(a.pendingType=l.full,a.shouldChangeCover=!0):(a.pendingType=l.listOnly,a.shouldChangeCover=!1),r.next=20,c(h,a);case 20:case"end":return r.stop()}},r)}function changeEditorialRouteWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(p,changeEditorialRouteSaga);case 2:case"end":return e.stop()}},o)}e.exports={changeEditorialRouteSaga:changeEditorialRouteSaga,changeEditorialRouteWatcher:changeEditorialRouteWatcher}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(1),o=r.select,a=r.put,i=r.putResolve,c=n(279),s=n(54),u=s.selectEditorialSlug,l=s.selectSorting,p=s.selectAppliedQuickFilters,f=s.selectExcludeViewed,d=s.selectEditorialMetaTag,m=s.selectSeoPageNumber,y=n(17).LOADING_STATUSES,_=n(458).SelectionError,h=n(85).ERROR_TYPES,g=n(92).ENTITIES_TYPES,b=n(25).sendRequestEffect,E=n(189).spreadSelectionsFilms,v=n(84).historyReplaceEffect,O=n(54).selectEditorialCurrentUrlParameters,P=n(70).composeEditorialSelectionLink,S=n(50),T=S.updateSeoList,k=S.raiseSelectionError,C=S.suspendSelection,w=n(93).updateMap;e.exports=regeneratorRuntime.mark(function loadSelectionPage(){var e,t,n,r,s,S,I,A,x,R,N,j,D,M,L,F,U=arguments;return regeneratorRuntime.wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return e=U.length>0&&void 0!==U[0]?U[0]:{},t=e.pendingType,W.next=3,a(C(t));case 3:return W.next=5,o(u);case 5:return n=W.sent,W.next=8,o(l);case 8:return r=W.sent,W.next=11,o(f);case 11:return s=W.sent,W.next=14,o(m);case 14:return S=W.sent,W.next=17,o(p);case 17:return I=W.sent,W.next=20,o(O);case 20:return A=W.sent,x=(r||{}).parameter,W.next=24,o(d);case 24:return R=W.sent,N=R.title,document.title=N,W.prev=27,W.next=30,i(b({url:c.getUrl("editorialFilms",{slug:n}),method:"get",params:{query:{page:S,sort:x,quick_filters:I.join(","),exclude_viewed:Number(s)}}}));case 30:if(j=W.sent,(null===(D=j)||void 0===D?void 0:null===(M=D.error)||void 0===M?void 0:M.type)!==h.emptySelection||!I.length||s){W.next=35;break}return W.next=34,a(v(P(_objectSpread({},A,{quickFilters:null}))));case 34:return W.abrupt("return");case 35:if(j.status!==y.error){W.next=37;break}throw new _(j.error.type);case 37:W.next=46;break;case 39:return W.prev=39,W.t0=W.catch(27),L=W.t0 instanceof _?W.t0:new _(h.clientError),W.t0.status&&(L=new _(h.serverError)),W.next=45,a(k({status:y.error,error:L.data}));case 45:return W.abrupt("return");case 46:return F=E(j.itemsInfo),W.next=49,a(w(g.film,F));case 49:return W.next=51,a(T(j));case 51:case"end":return W.stop()}},loadSelectionPage,null,[[27,39]])})},function(e,t,n){var r=regeneratorRuntime.mark(onUpdateStatsWatcher),o=n(1),a=o.take,i=o.takeEvery,c=o.select,s=o.put,u=n(190).RATE_FILM_EFFECT,l=n(54).selectEditorialSelectionStats,p=n(50),f=p.START_UPDATE_STATS_WATCHING_EFFECT,d=p.updateEditorialStats,m=n(956);function onUpdateStatsWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(f);case 2:return e.next=4,i(u,regeneratorRuntime.mark(function _callee(e){var t,n,r,o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload,n=t.rating,r=t.rollbackRating,i.next=3,c(l);case 3:if(o=i.sent,a=o.watched,!(m(r)||n<0)){i.next=8;break}return i.next=8,s(d({watched:a+(n>=0?1:-1)}));case 8:case"end":return i.stop()}},_callee)}));case 4:case"end":return e.stop()}},r)}e.exports=onUpdateStatsWatcher},function(e,t,n){var r=regeneratorRuntime.mark(adfoxDestroyBannerRequestedSaga),o=regeneratorRuntime.mark(adfoxDestroyBannerRequestedSagaWatcher),a=n(1),i=a.takeEvery,c=a.call,s=n(493).ADFOX_DESTROY_BANNER_REQUESTED_EFFECT,u=n(850).destroyAdfox;function adfoxDestroyBannerRequestedSaga(e){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.adfoxContainer,n.next=3,c(u,t);case 3:case"end":return n.stop()}},r)}function adfoxDestroyBannerRequestedSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s,adfoxDestroyBannerRequestedSaga);case 2:case"end":return e.stop()}},o)}e.exports={adfoxDestroyBannerRequestedSaga:adfoxDestroyBannerRequestedSaga,adfoxDestroyBannerRequestedSagaWatcher:adfoxDestroyBannerRequestedSagaWatcher}},function(e,t,n){var r=n(15),o=n(579).CONTROLLER_PATH,a=n(851);e.exports={destroyAdfox:function(e){var t=r(window,o);e&&t&&t.destroy&&(e.id=a(),t.destroy(e.id))}}},function(e,t){e.exports=function(){return String.fromCharCode("a".charCodeAt(0)+Math.floor(26*Math.random()))+Math.random().toString(36).slice(2)}},function(e,t,n){"use strict";n.r(t),n.d(t,"initPartialAppSaga",function(){return initPartialAppSaga}),n.d(t,"initPartialAppSagaWatcher",function(){return initPartialAppSagaWatcher}),n.d(t,"watchers",function(){return p});var r=n(1),o=n(15),a=n.n(o),i=n(35),c=n(209),s=n(380),u=regeneratorRuntime.mark(initPartialAppSaga),l=regeneratorRuntime.mark(initPartialAppSagaWatcher);function initPartialAppSaga(){var e,t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.call)(a.a,window,"partialComponents.header.authData");case 2:if(!(e=n.sent)){n.next=6;break}return n.next=6,Object(r.put)(Object(i.setAuthData)(e));case 6:return n.next=8,Object(r.call)(a.a,window,"partialComponents.header.search");case 8:if(!(t=n.sent)||!t.value){n.next=12;break}return n.next=12,Object(r.put)(Object(c.updateUgcProperties)({searchValue:t.value,searchShortcutValue:t.shortcutFilter,defaultValue:!0}));case 12:case"end":return n.stop()}},u)}function initPartialAppSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.take)(s.ACTIONS_TYPES.initPartialAppEffect);case 2:return e.next=4,Object(r.call)(initPartialAppSaga);case 4:case"end":return e.stop()}},l)}var p=[initPartialAppSagaWatcher]},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(15),o=n(23).newContext,a=n(396),i=n(80),c=i.LOAD_HEADER_FEATURES,s=i.UPDATE_SUGGEST,u=i.UNSET_SUGGEST,l=i.HIDE_SUGGEST,p=n(35),f=p.OPEN_AUTH_POPUP,d=p.CLOSE_AUTH_POPUP,m=n(277).UPDATE_TODAY_FILMS_IN_CINEMA,y=n(91),_=y.SHOW_NOTIFICATION,h=y.HIDE_NOTIFICATION,g=y.SHOW_PREVIEW_CARD,b=y.HIDE_PREVIEW_CARD,E=y.SHOW_POPUP,v=y.HIDE_POPUP,O=y.LOAD_DEVICES,P=y.TOGGLE_PAGE_SCROLL,S=y.CHANGE_PAGINATION_CURRENT_PAGE,T=y.UPDATE_PAGINATION,k=n(63),C=k.ENABLE_PAGE_SCROLL,w=k.DISABLE_PAGE_SCROLL,I=k.PAGE_UPDATE,A=n(247),x=A.LOAD_FILM_SCHEDULE,R=A.FILTER_FILM_SCHEDULE,N=A.LOAD_FILM_SCHEDULE_IN_CINEMA,j=A.UNSELECT_CINEMA_ON_MAP,D=n(248),M=D.LOAD_CINEMA_SCHEDULE,L=D.TOGGLE_MAP_POPUP,F=D.UPDATE_CINEMA_RATING,U=D.DELETE_CINEMA_RATING,W=D.ADD_COMMENT,B=n(116).SELECTION_UPDATE_PAGE,G=n(854),H=n(856),Y=n(459).patch,K=n(857),z=o();z.extend("$patch",Y),e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var n=e;[K,G].forEach(function(e){return n=e(n,t)});var o=t.type,i=t.meta,p=t.payload;switch(o){case O:switch(i.status){case"done":return z(n,{deviceList:{$set:p.state.page.deviceList},isDevicesLoading:{$set:!1}});default:return z(n,{isDevicesLoading:{$set:"pending"===i.status}})}case E:var y;return z(n,(_defineProperty(y={},p,{$set:!0}),_defineProperty(y,"disableScroll",{$set:!0}),y));case m:return z(n,{todayFilmsInCinema:{$set:p}});case v:var k;return z(n,(_defineProperty(k={},p,{$set:!1}),_defineProperty(k,"disableScroll",{$set:!1}),k));case f:return z(n,{isDomikOpened:{$set:!0}});case d:return z(n,{isDomikOpened:{$set:!1}});case c:return"done"===i.status?z(n,{header:{dropdownContent:{filmsInCinema:{$set:r(t,"payload.state.page.header.dropdownContent.filmsInCinema",[])},featuredOnlineFilms:{$set:r(t,"payload.state.page.header.dropdownContent.featuredOnlineFilms",[])}}}}):"fail"===i.status?z(n,{header:{dropdownContent:{filmsInCinema:{$set:[]}}}}):n;case u:return z(n,{suggest:{$set:[]}});case s:return"done"===i.status?z(n,{suggest:{$set:a.normalizeSuggestResponse(p.state)}}):n;case x:var A=!p.query.page||Number(p.query.page)<2,D="isScheduleLoading";switch("filter"===p.query.loadingType&&(D="isFilteredScheduleLoading"),i.status){case"done":var Y,V=p.state.page,q=V.warnerType,X=V.schedule,Q=V.scheduleFilters,Z=p.query,$=Z.search,J=Z.daytime,ee=Z.tags,te=(_defineProperty(Y={schedule:_defineProperty({},A?"$set":"$push",X)},D,{$set:!1}),_defineProperty(Y,"warnerType",{$set:q}),Y);return A&&![$,J,ee].some(Boolean)&&(te.scheduleFilters={$set:Q}),z(n,te);case"pending":return z(n,_defineProperty({},D,{$set:!0}));case"fail":return z(n,_defineProperty({},D,{$set:!1}));default:return n}case M:if("done"===i.status){var ne=p.state.page,re=ne.warnerType,oe=ne.schedule;return z(n,{schedule:{$push:oe},warnerType:{$set:re}})}return n;case R:return z(n,{scheduleFilters:{$set:p}});case N:switch(i.status){case"done":var ae=p.schedule,ie=p.cinemaId;return z(n,{schedule:{$set:ae},cinemaId:{$set:ie},isFilmScheduleInCinemaLoading:{$set:!1}});case"pending":return z(n,{isFilmScheduleInCinemaLoading:{$set:!0}});case"fail":return z(n,{isFilmScheduleInCinemaLoading:{$set:!1}});default:return n}case j:return z(n,{cinemaId:{$set:null}});case l:return z(n,{suggest:{$set:null}});case _:return z(n,{notification:{$set:p}});case h:return z(n,{notification:{$set:null}});case g:return z(n,{previewCard:{$set:{type:p.type,id:p.id}}});case b:return z(n,{previewCard:{$set:null}});case L:var ce=void 0!==p.isOpen?p.isOpen:!n.isMapPopupOpen;return z(n,{isMapPopupOpen:{$set:ce}});case F:case U:switch(i.status){case"done":return z(n,{isCinemaRatingLoading:{$set:!1},isCinemaRatingChosen:{$set:o===F}});case"pending":return z(n,{isCinemaRatingLoading:{$set:!0}});case"fail":return z(n,{isCinemaRatingLoading:{$set:!1}});default:return n}case W:switch(i.status){case"done":return z(n,{isCommentSaving:{$set:!1}});case"pending":return z(n,{isCommentSaving:{$set:!0}});case"fail":return z(n,{isCommentSaving:{$set:!1}});default:return n}case P:return z(n,{disableScroll:{$set:p}});case C:case w:return z(n,{$merge:H(n,t)});case S:return z(n,{pagination:{currentPage:{$set:p}}});case T:return z(n,{pagination:{$merge:p}});case B:return z(n,{selection:{$patch:p}});case I:return z(n,{$merge:p});default:return n}}},function(e,t,n){"use strict";function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var r=n(23),o=n(15),a=n(496),i=a.DEADPOOL_DIALOG_GET_HISTORY,c=a.DEADPOOL_DIALOG_SEND_MESSAGE,s=n(228).DEADPOOL_HISTORY,u=function(e,t){return r(e,{deadpoolDialog:function(e){return r(e||{},{messages:function(e){return r(e||[],t)}})}})};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type,r=t.meta,a=t.payload;if(n===i&&"done"===r.status)return u(e,{$set:a.messages});if(n===c)switch(r.status){case"pending":return u(e,{$push:a.messages});case"done":case"fail":var l=o(e,"deadpoolDialog.messages",[]).filter(function(e){return"done"===e.status}),p=u(e,{$set:[].concat(_toConsumableArray(l),_toConsumableArray(a.messages))});return localStorage.setItem(s,JSON.stringify(p.deadpoolDialog.messages)),p}return e}},function(e,t,n){"use strict";e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n))+n}},function(e,t,n){"use strict";var r=n(23),o=n(63),a=o.ENABLE_PAGE_SCROLL,i=o.DISABLE_PAGE_SCROLL,c={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;switch((arguments.length>1?arguments[1]:void 0).type){case a:return r(e,{disableScroll:{$set:!1}});case i:return r(e,{disableScroll:{$set:!0}});default:return e}}},function(e,t,n){"use strict";var r=n(23),o=n(588).onPaginationChanged,a=n(15);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=a(t,"payload.state.page.pagination"),i=a(t,"payload.query.page");return n?(t.meta&&(n.pending="pending"===t.meta.status),o(n),r(e,{pagination:{$set:n}})):t.meta&&e.pagination&&i>1?r(e,{pagination:{pending:{$set:"pending"===t.meta.status}}}):e}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23),o=n(15),a=n(35),i=a.OPEN_AUTH_POPUP,c=a.SET_AUTH_DATA,s=a.LOAD_USER,u=n(139).LOAD_ACCOUNTS_SUCCESS,l=n(80).LOAD_HEADER_FEATURES;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return(0,n(346).login)(t.payload),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);case l:case s:case c:var a=o(t,"payload.state.auth",null);return a?(window.__authDataLoaded=!0,a.sezam=e.sezam,r(e,{$set:a})):e;case u:return r(e,{sezam:{$set:t.payload}});default:return e}}},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(15),o=n(23),a=n(248),i=a.UPDATE_CINEMA_RATING,c=a.DELETE_CINEMA_RATING,s=n(91).REMOVE_DEVICE,u=n(430).CHANGE_BASIC_FILM_MODEL,l=n(80).LOAD_HEADER_FEATURES,p=n(35).LOAD_USER,f=n(120),d=f.CREATE_FILM,m=f.UPDATE_FILM,y=f.UPDATE_FILMS,_=n(860),h=n(191),g=h.CREATE_PERSON,b=h.UPDATE_PERSON,E=n(247).FILM_MODEL_CREATE,v=n(861),O=n(123),P=O.MODELS_ADD_MODELS,S=O.UPDATE_MODEL,T=O.addModelsReducerHandler,k=O.updateModelReducerHandler;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.meta;switch(n){case i:if(a&&"done"===a.status){var f=t.payload.query,h=f.rating,O=f.cinemaId;return o(e,{cinemas:_defineProperty({},O,{rating:{userValue:{$set:h}}})})}return e;case c:if(a&&"done"===a.status){var C=t.payload.query.cinemaId;return o(e,{cinemas:_defineProperty({},C,{rating:{userValue:{$set:null}}})})}return e;case l:case p:if(a&&"done"===a.status){var w=r(t,"payload.state.models");if(!w)return e;var I=Object.keys(w).reduce(function(e,t){return e[t]={$merge:w[t]},e},{});return o(e,I)}return e;case s:if(a&&"done"===a.status){var A=t.payload.query.deviceId;return o(e,{"user-devices":_defineProperty({},A,{isDeleted:{$set:!0}})})}return e;case u:var x=t.payload,R=x.id,N=x.data;return o(e,{basicFilms:_defineProperty({},R,{$merge:N})});case d:case m:case y:return o(e,{plainFilms:{$merge:_(e.plainFilms,t)}});case g:case b:return o(e,{plainPeople:{$merge:v(e.plainPeople,t)}});case E:var j=t.payload,D=j.id,M=j.data;return o(e,{films:_defineProperty({},D,{$set:M})});case P:return T(e,t);case S:return k(e,t);default:var L=r(t,"payload.state.models");if(!L)return e;var F=Object.keys(L).reduce(function(e,t){return e[t]={$merge:L[t]},e},{});return o(e,F)}}},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23),o=n(120),a=o.CREATE_FILM,i=o.UPDATE_FILM,c=o.UPDATE_FILMS,s={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n=t.payload,o=n.id,u=n.data;return r(e,_defineProperty({},o,{$set:u}));case i:var l=t.payload,p=l.id,f=l.data;return e[p]?r(e,_defineProperty({},p,{$merge:f})):r(e,_defineProperty({},p,{$set:f}));case c:return r(e,{$merge:t.payload.data});default:return e}}},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23),o=n(191),a=o.CREATE_PERSON,i=o.UPDATE_PERSON,c={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:var n=t.payload,o=n.id,s=n.data;return r(e,_defineProperty({},o,{$set:s}));case i:var u=t.payload,l=u.id,p=u.data;return e[l]?r(e,_defineProperty({},l,{$merge:p})):r(e,_defineProperty({},l,{$set:p}));default:return e}}},function(e,t,n){"use strict";var r=n(23),o=n(388).SET_AB_EXPERIMENTS;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o:return r(e,{$set:t.payload.state.abExperiments});default:return e}}},function(e,t){e.exports={setAbExperiments:function(){return{type:"ab-experiments/SET_DATA",payload:{state:{abExperiments:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}}},SET_AB_EXPERIMENTS:"ab-experiments/SET_DATA"}},function(e,t,n){"use strict";var r=n(23),o=n(15),a=n(209),i=a.SET_PROPERTY,c=a.UPDATE_PROPERTIES,s=n(248),u=s.UPDATE_COMMENT,l=s.ADD_COMMENT;e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(!t)return e;var n,a,s,p=t.type,f=t.meta,d=t.payload;switch(p){case i:return r(e,(n={},a=d.key,s={$set:d.value},a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n));case c:return d.defaultValue?""===o(e,"searchValue","")?(delete d.defaultValue,r(e,{$merge:d})):e:r(e,{$merge:d});case u:var m=e;return e.comment||(m=r(e,{$merge:{comment:{}}})),r(m,{comment:{$merge:d.comment}});case l:return"done"===f.status?r(e,{comment:{$set:null}}):e;default:return e}}},function(e,t,n){"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23).newContext,o=n(459).patch,a=n(55),i=a.COMMENTS_UPDATE,c=a.COMMENTS_MODELS_UPDATE,s=a.COMMENTS_UPDATE_USER_VOTE,u=a.COMMENTS_DELETE_USER_VOTE,l=a.COMMENTS_PAGINATION_UPDATE,p=a.COMMENTS_USER_COMPLAINTS_CREATE,f=a.COMMENTS_HIGHLIGHT_CREATE,d=a.COMMENTS_HIGHLIGHT_DELETE,m=n(866),y=r();y.extend("$patch",o),e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return y(e,{$patch:t.payload});case c:var n=t.payload,r=n.id,o=n.data;return y(e,{models:_defineProperty({},r,{$merge:o})});case l:return y(e,{pagination:{$merge:t.payload}});case s:var a=t.payload,_=a.commentId,h=a.type;return y(e,{userVotes:_defineProperty({},_,{$set:h})});case u:var g=t.payload.commentId;return y(e,{userVotes:{$unset:[g]}});case p:var b=t.payload;return y(e,{userComplaints:_defineProperty({},b.commentId,{$set:b})});case f:var E=t.payload;return y(e,{highlighted:{$push:[E]}});case d:var v=t.payload,O=e.highlighted;return y(e,{highlighted:{$set:O.filter(function(e){return e!==v})}});default:return e}}},function(e,t,n){"use strict";e.exports=function(){return{models:{},list:[],pagination:{},userVotes:{},pinned:[],highlighted:[],isSubscribed:!1,userComplaints:{},totalCount:0,pageCommentId:null}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(23),o=n(119),a=o.COMMENT_FORM_UPDATE,i=o.COMMENT_FORM_UPDATE_DRAFT,c=o.COMMENT_FORM_DELETE_DRAFT,s=o.COMMENT_FORM_CREATE_DRAFT,u=n(868),l=n(869);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u(),t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a:return r(e,{$merge:t.payload});case i:var n=t.payload,o=n.id,p=n.data,f=Boolean(e.drafts[o]);return r(e,f?{drafts:_defineProperty({},o,{$merge:p})}:{drafts:_defineProperty({},o,{$set:_objectSpread({},l(),{},p)})});case c:var d=t.payload.id;return r(e,{drafts:{$unset:[d]}});case s:var m=t.payload,y=m.id,_=m.data;return r(e,{drafts:_defineProperty({},y,{$set:_objectSpread({},l(),{},_)})});default:return e}}},function(e,t,n){"use strict";e.exports=function(){return{parentId:null,drafts:{}}}},function(e,t,n){"use strict";e.exports=function(){return{isPending:!1,value:""}}},function(e,t,n){"use strict";e.exports=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}},function(e,t,n){"use strict";var r=n(872);e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();return(arguments.length>1?arguments[1]:void 0).type,e}},function(e,t,n){"use strict";e.exports=function(){return{permissions:{}}}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(186),o=r.OPEN_YANDEX_SUGGEST_TOAST,a=r.CLOSE_YANDEX_SUGGEST_TOAST,i={isOpenedYandexSuggestToast:!1};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;switch((arguments.length>1?arguments[1]:void 0).type){case o:return _objectSpread({},e,{isOpenedYandexSuggestToast:!0});case a:return _objectSpread({},e,{isOpenedYandexSuggestToast:!1});default:return e}}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(61),o=r.MDA_UPDATE_EXPERIMENT_IS_ACTIVE,a=r.MDA_UPDATE_DOMIK_LOGIN_CAPTCHA,i=r.MDA_UPDATE_DOMIK_MODE,c=r.MDA_UPDATE_USER_MENU_HINT_MODE,s=r.MDA_UPDATE_HEADER_HINT_SHOWN,u=n(64).MDA_USER_MENU_HINT_MODES,l=n(278).MODES,p={experimentIsActive:!1,domikMode:l.LOGIN,domikParams:{},domikLoginCaptcha:null,isHeaderHintShown:!1,userMenuHintMode:u.hidden};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o:return _objectSpread({},e,{experimentIsActive:r});case a:return _objectSpread({},e,{domikLoginCaptcha:r});case i:var u=_objectSpread({},e,{domikParams:r.params});if(!Object.values(l).includes(r.mode))throw new TypeError("domikMode allow only values ".concat(l.join(", "),", not ").concat(r.mode));if(u.domikMode=r.mode,"object"===_typeof(r.params)&&null!==r.params)u.domikParams=_objectSpread({},r.params);else{if(r.params)throw new TypeError("domikParams allow only objects, not ".concat(_typeof(r.params)));u.domikParams={}}return u;case c:return _objectSpread({},e,{userMenuHintMode:r});case s:return _objectSpread({},e,{isHeaderHintShown:r});default:return e}}},function(e,t,n){"use strict";var r=n(313).ANTI_ADB_UPDATE,o=n(312).DETECTED_STATUS,a=n(23),i={detectStatus:o.UNKNOWN};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case r:return a(e,{$set:t.payload});default:return e}}},function(e,t,n){"use strict";var r=n(23),o=n(78).UPDATE_USER_SUBSCRIPTION,a={isLoading:!0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case o:return r(e,{$set:i});default:return e}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(187),o=r.OPEN_TOAST,a=r.CLOSE_TOAST,i=r.TOASTER_HEIGHT_CHANGED,c={type:null,priority:0,isOpened:!1,toasterHeight:0};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o:return e.priority>r.priority?e:_objectSpread({},e,{isOpened:!0,type:r.toastType,priority:r.priority});case a:return c;case i:return _objectSpread({},e,{toasterHeight:r.toasterHeight});default:return e}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(50),o=r.SEO_CHANGE_FILTER,a=r.SEO_CHANGE_SORT,i=r.SEO_CHANGE_PAGE,c=r.SEO_CHANGE_EXCLUDE_VIEWED,s=r.SEO_UPDATE_LIST,u=r.SEO_UPDATE_COVER,l=r.SEO_CHANGE_APPLIED_QUICK_FILTERS,p=r.RAISE_SELECTION_ERROR,f=r.SUSPEND_SELECTION,d=r.EDITORIAL_UPDATE_STATS,m=n(17).LOADING_STATUSES,y={status:m.loaded,error:null,currentFilters:{genreId:null,countryId:null,years:null},filters:{genres:[],countries:[],years:[]},page:{},sort:{},items:[],quickFilters:[],appliedQuickFilters:[]};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case o:return _objectSpread({},e,{currentFilters:{genreId:r.genreId||e.currentFilters.genreId,countryId:r.countryId||e.currentFilters.countryId,years:r.years||e.currentFilters.years}});case a:return _objectSpread({},e,{sort:[r]});case i:return _objectSpread({},e,{page:_objectSpread({},e.page,{number:Number(r)})});case c:return _objectSpread({},e,{excludeViewed:r.value});case s:return _objectSpread({},e,{status:m.loaded,error:null,pendingType:null,page:r.page,items:r.itemsInfo&&r.itemsInfo.map(function(e){return e.coreData.id}),quickFilters:r.quickFilters});case u:return _objectSpread({},e,{cover:r});case p:return _objectSpread({},e,{status:m.error,error:r.error});case f:return _objectSpread({},e,{status:m.pending,pendingType:r.type});case l:return _objectSpread({},e,{appliedQuickFilters:r.appliedQuickFilters});case d:return _objectSpread({},e,{stats:_objectSpread({},e.stats,{},r)});default:return e}}},function(e,t,n){"use strict";var r=n(23),o=n(355),a=n(154).UPDATE,i={page:n(155).PAGES.LANDING,landing:{isLoading:!1,errorText:"",initialPromocode:""},paymentForm:{isLoading:!0,errorType:null},success:{}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case a:return r(e,{$merge:o({},e,c)});default:return e}}},function(e,t,n){var r=n(23),o=n(355),a=n(118).UPDATE,i={page:n(156).PAGES.empty,codeInput:{isLoading:!1,errorText:""},deviceLimit:{isLoading:!1}};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments.length>1?arguments[1]:void 0,n=t.type,c=t.payload;switch(n){case a:return r(e,{$merge:o({},e,c)});default:return e}}},function(e,t,n){var r=n(23),o=n(137).UPDATE,a={};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t=arguments.length>1?arguments[1]:void 0,n=t.type,i=t.payload;switch(n){case o:return r(e,{$merge:i});default:return e}}},function(e,t,n){var r=function(e){return e.headerBranding},o=function(e){return r(e).elementsConfigs||{}},a=function(e,t){return o(e)[t]||{}},i=function(e){return Boolean(r(e).enabled)},c=(0,n(6).createSelector)([i,a],function(e,t){return e?t:{}});e.exports={selectHeaderBrandingState:r,selectHeaderBrandingElementsConfigs:o,selectHeaderBrandingElementConfig:a,selectIsHeaderBrandingEnabled:i,selectPageHeaderBrandingConfigForElement:c}},function(e,t){e.exports={headerBrandingReducer:function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}}}},function(e,t,n){"use strict";e.exports={NOTIFICATION_COOKIE_NAME:"KP1_NOTIFICATION"}},function(e,t,n){e.exports=n(64)},function(e,t){e.exports=function(e,t,n){for(var r="",o=0;o<t.length;o++)r+=e[o]+t[o];return(r+=e[t.length]).split("\n").map(function(e){return e.replace(/^\s+/gm,"")}).join(n).trim()}},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(680),o=n(415),a=n(413);function logStateProp(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"models";Object.keys(e).forEach(function(r){r===n?logStateProp(e[r],"".concat(JSON.stringify(r),".")):a.log("".concat(t).concat(r),e[r])})}e.exports=function(e){var t=e.common.backendRequests;if(t&&t.length){var n=t.length;a.groupCollapsed("App: ".concat(n," backend request")+"".concat(n>1?"s":""," for ").concat(location.pathname)),t.map(function(e){return a.log(e.url,_objectSpread({},e,{response:_objectSpread({},e.response,{body:function(e){try{return JSON.parse(e)}catch(t){return e}}(e.response.body)})}))}),a.groupEnd()}a.groupCollapsed("App: initial state"),logStateProp(r(e,o)),a.groupEnd();var i=e.page.originalState;i&&(a.groupCollapsed("App: initial state (original)"),logStateProp(r(i,o)),a.groupEnd())}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=n(44),o="https://mc.yandex.ru/metrika/tag.js";function appendMetrikaScript(){if(!document.querySelector('script[src*="'.concat(o,'"]'))){var e=document.getElementsByTagName("script")[0],t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=o,e.parentNode.insertBefore(t,e)}}e.exports=function(e){var t=e.id,n=e.name;window.metrika=r;var o="yaCounter".concat(t);"object"!==_typeof(window[o])?(window.yandex_metrika_callbacks2||(window.yandex_metrika_callbacks2=[]),window.yandex_metrika_callbacks2.push(function(){try{window[o]=new window.Ya.Metrika2({id:t,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0}),r.onApiReady({id:t,name:n},window[o])}catch(e){}}),"[object Opera]"===window.opera?document.addEventListener("DOMContentLoaded",appendMetrikaScript,!1):appendMetrikaScript()):r.onApiReady({id:t,name:n},window[o])}},function(e,t,n){"use strict";n.r(t);var r=n(221),o=n.n(r);t.default=function(){var e={},t=document.querySelectorAll("script[data-state-chunk]"),n=document.querySelector('script[data-state-chunk][data-key="chunks"]');if(!n)return e;var r=JSON.parse(n.innerHTML);return Array.prototype.forEach.call(t,function(t){if(t.parentNode&&(t.parentNode.removeChild(t),t.dataset.key&&"chunks"!==t.dataset.key)){var n=r[t.dataset.key];o()(e,n,JSON.parse(unescape(t.innerHTML)))}}),e}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){e.exports={vk:"ВКонтакте",dz:"Deezer",fb:"Facebook",tw:"Twitter",mr:"Mail.Ru",gg:"Google",ok:"Одноклассники",fs:"Foursquare",ig:"Instagram",lf:"Last.FM",lj:"LiveJournal",in:"LinkedIn",mt:"МТС-Россия",ms:"Microsoft",yh:"Yahoo",ya:"Yandex",vf:"Vodafone-Украина",tg:"Telegram"}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(5).connect,a=n(3),i=n(1200),c=n(380).initPartialAppEffect,s=function(e){function PartialApp(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialApp),_possibleConstructorReturn(this,_getPrototypeOf(PartialApp).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialApp,r.PureComponent),t=PartialApp,(n=[{key:"componentDidMount",value:function(){this.props.onInit()}},{key:"render",value:function(){var e=this.props.children;return r.createElement(r.Fragment,null,r.createElement(i,null),e)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialApp}();s.propTypes={children:a.node,onInit:a.func.isRequired},e.exports=o(null,{onInit:c})(s)},function(e,t,n){e.exports=n(4).lock("user-subscription".concat("-partial-component"))},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a="kp1-carousel".concat("-partial-component"),i=n(4).lock(a),c=n(491),s=n(948),u=n(2);n(2076);var l=function(e){function Kp1CarouselBlock(){var e,t,n,o,a,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Kp1CarouselBlock);for(var p=arguments.length,f=new Array(p),d=0;d<p;d++)f[d]=arguments[d];return n=this,t=!(o=(e=_getPrototypeOf(Kp1CarouselBlock)).call.apply(e,[this].concat(f)))||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o,a=_assertThisInitialized(t),l=function(e){return r.createElement(c,_extends({},e,{theme:"compact",color:"white",autosize:!0,iconClassName:i("button-icon"),className:u(e.className,i("slider-button",{direction:e.direction}))}))},(s="_renderButton")in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Kp1CarouselBlock,r.PureComponent),t=Kp1CarouselBlock,(n=[{key:"render",value:function(){var e=this.props,t=e.headerChild,n=e.contentChild,o=e.adfoxConfig,a=e.adfoxPosition,c=e.rumPlaceId,l=e.rumBannerId;return r.createElement("div",{className:u(i(),this.props.className)},t,r.createElement(s,{buttons:!0,chunkSize:8,button:this._renderButton,itemClassName:i("carousel-item"),itemHiddenClassName:i("carousel-item",{hidden:!0}),className:i("carousel"),lazyLoadImg:!0,adfoxConfig:o,adfoxPosition:a,rumPlaceId:c,rumBannerId:l},n))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Kp1CarouselBlock}();l.propTypes={headerChild:o.node.isRequired,contentChild:o.node.isRequired,adfoxConfig:o.object,adfoxPosition:o.number,className:o.string,rumPlaceId:o.string,rumBannerId:o.string},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(4).lock("kp1-header".concat("-partial-component"));n(2077);var i=function(e){var t=e.href,n=e.children,o=e.onClick,i=t?"a":"span";return r.createElement("div",{className:a(),onClick:o},r.createElement(i,{href:t,className:a("link")},n))};i.propTypes={onClick:o.func,href:o.string,children:o.node.isRequired},e.exports=i},function(e,t,n){"use strict";n.r(t);var r=n(1),o=n(349),a=n(18);var i,c=n(106),s=function(e,t){return Object(c.eventChannel)(function(n){var r=function(e){return n(e)};return e.addEventListener(t,r),function(){e.removeEventListener(t,r)}})},u=n(62),l=n(61),p=n(59),f=function(e){return Object(c.eventChannel)(function(t){var n=function(n){var r=n.data;e.includes(r)&&t(r)};return window.addEventListener("message",n),function(){window.removeEventListener("message",n)}})},d=regeneratorRuntime.mark(waitForPaymentWidgetMessageSaga);function waitForPaymentWidgetMessageSaga(e){var t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t=f(e),o.prev=1,o.next=4,Object(r.take)(t);case 4:n=o.sent;case 5:return o.prev=5,t.close(),o.finish(5);case 8:return o.abrupt("return",n);case 9:case"end":return o.stop()}},d,null,[[1,,5,8]])}!function(e){e.SuccessClose="PAYMENT_WIDGET/SUCCESS/close",e.SuccessWatch="PAYMENT_WIDGET/SUCCESS/watch"}(i||(i={}));var m=regeneratorRuntime.mark(paymentWidgetModal);function paymentWidgetModal(e,t){var n,o;return regeneratorRuntime.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(r.put)(Object(p.openModal)({name:a.ONLINE_VIEW_OPTIONS_PAYMENT_WIDGET_MODAL,props:{paymentUrl:e}}));case 2:return c.next=4,Object(r.race)({message:Object(r.call)(waitForPaymentWidgetMessageSaga,[i.SuccessWatch,i.SuccessClose]),close:Object(r.take)(p.CLOSE_MODAL)});case 4:if(n=c.sent,(o=n.message)!==i.SuccessClose){c.next=9;break}return c.next=9,Object(r.call)([window.location,window.location.reload],!1);case 9:if(o!==i.SuccessWatch){c.next=12;break}return c.next=12,Object(r.call)([window.location,window.location.assign],t);case 12:case"end":return c.stop()}},m)}var y=n(28),_=n.n(y);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=regeneratorRuntime.mark(handleButtonClickSaga);function handleButtonClickSaga(e,t){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(r.call)([t,t.preventDefault]);case 2:return n.next=4,Object(r.select)(u.selectIsAuthorized);case 4:if(n.sent){n.next=9;break}return n.next=8,Object(r.put)(Object(l.openAuthPopupEffect)({retPath:(o=window.location.href,i=a.OPEN_PAYMENT_WIDGET_PARAM_NAME,c=a.OPEN_PAYMENT_WIDGET_PARAM_VALUE,void 0,s=_.a.parse(o,!0),_.a.format(_objectSpread({},s,{search:void 0,query:_objectSpread({},s.query,_defineProperty({},i,c))})))}));case 8:return n.abrupt("return");case 9:return n.next=11,Object(r.call)(paymentWidgetModal,e.getAttribute(a.WATCH_ONLINE_PAYMENT_URL_ATTRIBUTE_NAME),e.href);case 11:case"end":return n.stop()}var o,i,c,s},h)}var g=regeneratorRuntime.mark(buttonClickSaga);function buttonClickSaga(e){var t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=3,Object(r.call)(s,e,"click");case 3:return t=o.sent,n=null,o.prev=5,o.next=8,Object(r.take)(t);case 8:n=o.sent;case 9:return o.prev=9,o.next=12,Object(r.call)([t,t.close]);case 12:return o.finish(9);case 13:if(!n){o.next=16;break}return o.next=16,Object(r.call)(handleButtonClickSaga,e,n);case 16:o.next=0;break;case 18:case"end":return o.stop()}},g,null,[[5,,9,13]])}function remove_param_from_url_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function remove_param_from_url_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function removeParamFromUrl(e,t){var n=_.a.parse(e,!0);return delete n.query[t],_.a.format(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?remove_param_from_url_ownKeys(Object(n),!0).forEach(function(t){remove_param_from_url_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):remove_param_from_url_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n,{search:void 0}))}var b=n(19),E=regeneratorRuntime.mark(handleOpenPaymentWidgetParameter);function handleOpenPaymentWidgetParameter(e,t){var n,o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(r.call)(removeParamFromUrl,window.location.href,a.OPEN_PAYMENT_WIDGET_PARAM_NAME);case 2:return n=i.sent,i.next=5,Object(r.select)(u.selectIsAuthorized);case 5:return o=i.sent,i.next=8,Object(r.call)([window.history,window.history.replaceState],null,"",n);case 8:if(o){i.next=10;break}return i.abrupt("return");case 10:return i.next=12,Object(r.call)(paymentWidgetModal,e,t);case 12:case"end":return i.stop()}},E)}var v=n(181),O=n.n(v);function isSearchStringHasParameter(e,t,n){return O.a.parse(e)[t]===n}var P=regeneratorRuntime.mark(initPaymentButtonSaga),S=regeneratorRuntime.mark(initPaymentButtonSagaWatcher);function initPaymentButtonSaga(){var e,t,n;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return e="#".concat(a.ONLINE_VIEW_OPTIONS_BUTTON_ID,"[").concat(a.WATCH_ONLINE_PAYMENT_URL_ATTRIBUTE_NAME,"]"),o.next=3,Object(r.call)([document,document.querySelector],e);case 3:return t=o.sent,o.next=6,Object(r.select)(Object(b.selectIsUnderAbExperiment)(a.PAYMENT_WIDGET_EXPERIMENT_NAME,a.PAYMENT_WIDGET_EXPERIMENT_VALUE));case 6:if(n=o.sent,t&&n){o.next=9;break}return o.abrupt("return");case 9:return o.next=11,Object(r.call)(removeParamFromUrl,t.href,a.WATCH_ONLINE_URL_FALLBACK_PARAM_NAME);case 11:return t.href=o.sent,o.next=14,Object(r.call)(isSearchStringHasParameter,location.search,a.OPEN_PAYMENT_WIDGET_PARAM_NAME,a.OPEN_PAYMENT_WIDGET_PARAM_VALUE);case 14:if(!o.sent){o.next=17;break}return o.next=17,Object(r.call)(handleOpenPaymentWidgetParameter,t.getAttribute(a.WATCH_ONLINE_PAYMENT_URL_ATTRIBUTE_NAME),t.href);case 17:return o.next=19,Object(r.call)(buttonClickSaga,t);case 19:case"end":return o.stop()}},P)}function initPaymentButtonSagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(r.takeLatest)(o.ONLINE_VIEW_OPTIONS_INIT_PAYMENT_BUTTON_EFFECT,initPaymentButtonSaga);case 2:case"end":return e.stop()}},S)}n.d(t,"onlineViewOptionsWatchers",function(){return T});var T=[initPaymentButtonSagaWatcher]},function(e,t,n){"use strict";n.r(t);var r,o=n(49),a=n.n(o),i=n(1),c=n(470),s=n(25);!function(e){e.Get="get",e.Post="post",e.Put="put",e.Delete="delete"}(r||(r={}));var u,l=n(88),p=n.n(l),f=n(166),d=n(92),m=n(98),y=n(129),_=n(485),h=n.n(_);!function(e){e.NavigationHistoryLoad="Navigation history load error"}(u||(u={}));var g=regeneratorRuntime.mark(loadNavigationHistorySaga),b=regeneratorRuntime.mark(loadNavigationHistorySagaWatcher),E=a()(y.e);function loadNavigationHistorySaga(){var e,t,n,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(i.put)(Object(m.fetchListStart)(y.d));case 2:return a.prev=2,a.next=5,Object(i.putResolve)(Object(s.sendRequestEffect)({url:y.a.NAVIGATION_HISTORY,method:r.Get,params:{}}));case 5:return e=a.sent,t=p()(e),n=t.map,o=t.list,a.next=9,Object(i.put)(Object(f.addMap)(d.ENTITIES_TYPES.navigationHistory,{byId:n}));case 9:return a.next=11,Object(i.put)(Object(m.fetchListFinish)(y.d,{items:o}));case 11:a.next=18;break;case 13:return a.prev=13,a.t0=a.catch(2),a.next=17,Object(i.put)(Object(m.fetchListFailed)(y.e,{error:h()(u.NavigationHistoryLoad,a.t0.message)}));case 17:E("loadNavigationHistory:failure",a.t0);case 18:case"end":return a.stop()}},g,null,[[2,13]])}function loadNavigationHistorySagaWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(i.takeLatest)(c.a,loadNavigationHistorySaga);case 2:case"end":return e.stop()}},b)}t.default=[loadNavigationHistorySagaWatcher]},function(e,t,n){"use strict";n.r(t);var r=n(51),o=n.n(r),a=n(0),i=n.n(a),c=n(5);function reactDomHydrate(e){var t=e.container,n=e.store,r=e.Component,a=e.componentProps;t&&o.a.hydrate(function(e){var t=e.store,n=e.Component,r=e.componentProps,o=void 0===r?{}:r;return i.a.createElement(c.Provider,{store:t},i.a.createElement(n,o))}({store:n,Component:r,componentProps:a}),t)}n.d(t,"reactDomHydrate",function(){return reactDomHydrate})},function(e,t,n){var r=n(0),o=n(3),a=n(4).lock("user-account-link".concat("-partial-component"));function UserAccountLink(e){var t=e.href,n=e.primaryTitle,o=e.secondaryTitle,i=e.avatar,c=e.accountIsDefault,s=e.showLogoutButton,u=e.withoutAvatar,l=e.onLogout,p=e.onSelectAccount,f={};return i&&!u&&(f.backgroundImage="url(".concat(i,")")),r.createElement("div",{className:a({"without-avatar":u})},r.createElement("a",{className:a("link"),onClick:p,href:t},r.createElement("div",{className:a("avatar"),style:f}),r.createElement("div",{className:a("text")},r.createElement("span",{className:a("primary-title",{"default-account":c})},n),o&&r.createElement("span",{className:a("secondary-title")},o)),r.createElement("div",{className:a("gradient",{"default-account":c})})),s&&r.createElement("a",{className:a("logout"),onClick:l}))}n(1149),UserAccountLink.propTypes={href:o.string,primaryTitle:o.string.isRequired,secondaryTitle:o.string,avatar:o.string,onSelectAccount:o.func,onLogout:o.func,accountIsDefault:o.bool,showLogoutButton:o.bool,withoutAvatar:o.bool},e.exports=UserAccountLink},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(4).lock("user-subscription-info-modal"),i=n(46),c=n(149),s=n(487);n(1162);var u=function(e){var t=e.text,n=e.close;return r.createElement(c,{isOpen:!0,onClose:n},r.createElement(s,{onClose:n},r.createElement("div",{className:a()},r.createElement("div",{className:a("title")},t.title),r.createElement("div",{className:a("description")},t.description),r.createElement(i,{className:a("close"),size:"xl",theme:"orange",onClick:n},t.closeButton))))};u.defaultProps={text:{}},u.propTypes={text:o.shape({title:o.string,description:o.string,closeButton:o.string}).isRequired,close:o.func.isRequired},e.exports=u},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(4).lock("user-subscription-confirm-modal"),i=n(46),c=n(149),s=n(487);n(1164);var u=function(e){var t=e.text,n=e.close,o=e.onConfirmClick;return r.createElement(c,{isOpen:!0,onClose:n},r.createElement(s,{onClose:n},r.createElement("div",{className:a()},r.createElement("div",{className:a("title"),dangerouslySetInnerHTML:{__html:t.title}}),r.createElement("div",{className:a("list-title"),dangerouslySetInnerHTML:{__html:t.listTitle}}),r.createElement("div",{className:a("list")},t.items&&t.items.map(function(e,t){return r.createElement("div",{className:a("list-item"),key:t,dangerouslySetInnerHTML:{__html:e}})})),r.createElement("div",{className:a("footer")},r.createElement(i,{size:"xl",theme:"orange",className:a("cancel"),onClick:n},t.cancelButton),r.createElement(i,{size:"xl",theme:"silver",className:a("confirm"),onClick:o},t.confirmButton)))))};u.defaultProps={text:{items:[]}},u.propTypes={text:o.shape({title:o.string,listTitle:o.string,items:o.array.isRequired,cancelButton:o.string,confirmButton:o.string}).isRequired,close:o.func.isRequired,onConfirmClick:o.func.isRequired},e.exports=u},,function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(4).lock("dialog"),a=n(2),i=n(3);n(1223);var c=n(46),s=n(1265),u=n(37),l=u.MODES,p=u.TYPES,f=u.DIALOG_BOTTOM,d=r.Fragment,m=r.PureComponent,y=function(e){function Dialog(e){var t,n,i,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Dialog),i=this,u=_getPrototypeOf(Dialog).call(this,e),_defineProperty(_assertThisInitialized(n=!u||"object"!==_typeof(u)&&"function"!=typeof u?_assertThisInitialized(i):u),"_renderMode",function(e){return n.modeHandlerMap[e]&&n.modeHandlerMap[e]()}),_defineProperty(_assertThisInitialized(n),"_renderEmailForm",function(){var e=n.state,t=e.isEmailInvalid,i=e.email,s=n.props,u=s.isLoading,l=s.hideDisclaimer,p=s.confidentialUrl,f=s.termsOfUseUrl,d=s.error,m=s.titleText,y=s.hintText,_=s.buttonCaption;return r.createElement("form",{onSubmit:n._handleEmailSubmit},r.createElement("div",{className:a(o("title"))},m),r.createElement("div",{className:a(o("hint"))},y),r.createElement("div",{className:a(o("input-wrapper"))},r.createElement("input",{className:a(o("input",{error:t})),placeholder:"Ваша почта",onChange:n._handleEmailChange,onBlur:n._handleEmailBlur,value:i})),t&&r.createElement("div",{className:a(o("error"))},"Неверный формат почты"),d&&r.createElement("div",{className:a(o("error"))},d.message),r.createElement(c,{size:"l",type:"submit",theme:"orange",block:!0,loading:u},_),!l&&r.createElement("div",{className:a(o("disclaimer"))},"Я соглашаюсь получать рекламные сообщения от ООО ЯНДЕКС, ООО Кинопоиск, ООО Яндекс.Медиасервисы на условиях"," ",r.createElement("a",{href:p,className:a(o("disclaimer-link"))},"Политики конфиденциальности")," ","и"," ",r.createElement("a",{href:f,className:a(o("disclaimer-link"))},"Пользовательского соглашения сервиса.")))}),_defineProperty(_assertThisInitialized(n),"_renderSuccessMessage",function(){return r.createElement(d,null,r.createElement("div",{className:a(o("title"))},"Супер!"),r.createElement("div",{className:a(o("hint",{"success-message":!0}))},"Проверьте почту — мы отправили вам письмо для подтверждения адреса"),r.createElement(c,{size:"l",theme:"orange",block:!0,onClick:n._handleCloseClick},"Хорошо"))}),_defineProperty(_assertThisInitialized(n),"_handleEmailChange",function(e){var t=n.props,r=t.onErrorCleared;t.error&&r&&r(),n.setState({email:e.target.value,isEmailInvalid:!1})}),_defineProperty(_assertThisInitialized(n),"_handleEmailBlur",function(){var e=n.state.email;e&&!s(e)&&n.setState({isEmailInvalid:!0})}),_defineProperty(_assertThisInitialized(n),"_handleEmailSubmit",function(e){e.preventDefault();var t=n.state.email,r=n.props,o=r.onEmailSubmit,a=r.isLoading;t&&!a&&(s(t)?o&&o(t):n.setState({isEmailInvalid:!0}))}),_defineProperty(_assertThisInitialized(n),"_handleCloseClick",function(){var e=n.props.onDialogClose;e&&e()}),n.state={isEmailInvalid:!1,email:e.email},n.modeHandlerMap=(_defineProperty(t={},l.EMAIL_FORM,n._renderEmailForm),_defineProperty(t,l.SUCCESS_MESSAGE,n._renderSuccessMessage),t),n}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Dialog,m),t=Dialog,(n=[{key:"render",value:function(){var e=this.props,t=e.mode,n=e.type,i=e.toasterHeight,c=n===p.DESKTOP?{bottom:"".concat(i+f,"px")}:{minHeight:"".concat(i,"px")};return r.createElement("aside",{className:o({type:n}),style:c},r.createElement("span",{className:a(o("close-icon")),onClick:this._handleCloseClick}),this._renderMode(t))}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),Dialog}();y.defaultProps={type:p.DESKTOP,isLoading:!1,hideDisclaimer:!1,email:""},y.propTypes={mode:i.string.isRequired,onEmailSubmit:i.func,onDialogClose:i.func,onErrorCleared:i.func,isLoading:i.bool,type:i.string,hideDisclaimer:i.bool,email:i.string,confidentialUrl:i.string,termsOfUseUrl:i.string,error:i.object,titleText:i.string,hintText:i.string,buttonCaption:i.string,toasterHeight:i.number},e.exports=y},function(e,t,n){"use strict";n.r(t),n.d(t,"getImageSrcSet",function(){return getImageSrcSet});var r=n(28),o=n.n(r),a=n(971);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getImageSrcSet(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.mds,r=void 0===n?{}:n,i=t.st,c=void 0===i?{}:i,s=t.noFallback,u=void 0!==s&&s,l=t.fallback,p=void 0===l?a.POSTER_PLACEHOLDER:l;if("string"!=typeof e||!e)return u?void 0:{x1:p};if(e.includes("avatars."))return{x1:"".concat(e,"/").concat(r.x1||"orig"),x2:r.x2?"".concat(e,"/").concat(r.x2):void 0};var f=o.a.parse(e,!0);return{x1:o.a.format(_objectSpread({},f,{search:void 0,query:_objectSpread({},f.query,{width:c.x1||f.query.width})})),x2:c.x2?o.a.format(_objectSpread({},f,{search:void 0,query:_objectSpread({},f.query,{width:c.x2})})):void 0}}},function(e,t,n){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0);e.exports=function(e){return function(t){return r.forwardRef(function(n,o){return r.createElement(e.Consumer,null,function(e){return r.createElement(t,_extends({ref:o},n,e))})})}}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(2),i=n(1148),c=n(937),s=n(1252),u=n(64).MDA_USER_MENU_HINT_MODES,l=n(945).ANCHOR,p=n(4).lock("header-fresh-user".concat("-partial-component"));n(1151);var f=function(e){function HeaderUser(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderUser),n=this,o=_getPrototypeOf(HeaderUser).call(this,e),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_handleMdaRecoveryItemClick",function(){t.props.mdaAccountRecoveryEffect()}),_defineProperty(_assertThisInitialized(t),"_onYandexLinkClick",function(){return t.props.openPassportConnector({src:"menu",retPath:t.state.retPath})}),_defineProperty(_assertThisInitialized(t),"_handleUserAccountClick",function(e){t._onNavigationItemClick(e,["profile"])}),t.state={retPath:"/"},t._dropdownElementRef=r.createRef(),t._userButtonElementRef=r.createRef(),t._onUserButtonClick=t._onUserButtonClick.bind(_assertThisInitialized(t)),t._onLoginButtonClick=t._onLoginButtonClick.bind(_assertThisInitialized(t)),t._onLogoutButtonClick=t._onLogoutButtonClick.bind(_assertThisInitialized(t)),t._onNavigationItemClick=t._onNavigationItemClick.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderUser,r.Component),t=HeaderUser,o=[{key:"getDerivedStateFromProps",value:function(e,t){if(!e.user.id||!e.user.socialAccounts||!e.user.integrations)return null;var n=e.user.socialAccounts.some(function(e){return"yandex"===e.type}),r=(e.user.integrations.find(function(e){return"yandex"===e.service})||{}).subscription;return t.hasYandexAccount!==n||t.hasYaPlus!==r?{hasYandexAccount:n,hasYaPlus:r}:null}}],(n=[{key:"componentDidMount",value:function(){this.setState({retPath:location.href.split(location.host)[1]}),document.addEventListener("click",this._onDocumentClick)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this._onDocumentClick)}},{key:"render",value:function(){return r.createElement("div",{className:a(p({theme:this.props.theme,"app-theme":this.props.appTheme}),this.props.className)},this._renderTrigger(),this._renderDropdown())}},{key:"_renderTrigger",value:function(){return this._isAuthorized?this._renderButton():this._renderLoginButton()}},{key:"_renderLoginButton",value:function(){return r.createElement("button",{className:p("login-button"),onClick:this._onLoginButtonClick},"Войти")}},{key:"_renderButton",value:function(){var e={},t=this.props.user,n=t.img,o=t.messagesCount;n&&n.x2&&(e.backgroundImage="url(".concat(n.x2,")"));var a=o>0;return r.createElement("div",{ref:this._userButtonElementRef,className:p("button"),onClick:this._onUserButtonClick},r.createElement("div",{className:p("avatar",{bulb:a,plus:this.state.hasYaPlus}),style:e}))}},{key:"_renderDropdown",value:function(){if(!this._isAuthorized)return null;var e=this.props,t=e.currentSezamAccount.defaultEmail,n=e.user,o=n.messagesCount,a=n.displayName,c=n.id;return r.createElement("div",{ref:this._dropdownElementRef,className:p("dropdown")},r.createElement("div",{className:p("dropdown-inside")},r.createElement("ul",{className:p("dropdown-navigation")},r.createElement("div",{className:p("dropdown-navigation-group")},this._renderUserAccountItem({name:a,href:"/user/".concat(c,"/go/"),email:t}),this._renderNavigationItemYaPlus()),r.createElement("div",{className:p("dropdown-navigation-group")},this._renderNavigationItem({text:"Фильмы",url:"/mykp/movies/",metrika:["movies"]}),this._renderNavigationItem({text:"Звезды",url:"/mykp/stars/",metrika:["stars"]}),this._renderNavigationItem({text:"Друзья",url:"/mykp/friends/",metrika:["friends"]})),r.createElement("div",{className:p("dropdown-navigation-group")},this._renderNavigationItem({text:"Сообщения",url:"/mykp/messages/",metrika:["inbox"],counter:o}),this._renderNavigationItem({text:"Настройки",url:"/mykp/edit_main/",metrika:["settings"]}),this._renderNavigationItem({text:"Служба поддержки",url:"https://yandex.ru/support/kinopoisk/feedback.html#feedback",metrika:["support"]}),this._renderNavigationItem({text:"Выйти",onClick:this._onLogoutButtonClick,metrika:["logout"]})),r.createElement("div",{className:p("dropdown-navigation-group",{"multi-accounting":!0})},r.createElement(i,null)),this.props.mdaUserMenuHintMode!==u.hidden?r.createElement(s,{onClick:this._handleMdaRecoveryItemClick,appTheme:this.props.appTheme,mode:this.props.mdaUserMenuHintMode}):null)))}},{key:"_renderNavigationItem",value:function(e){var t=this,n=e.text,o=e.url,a=e.target,i=void 0===a?"_self":a,c=e.metrika,s=e.counter,u=e.mod,l=void 0===u?{}:u,f=e.onClick;return r.createElement("li",{className:p("dropdown-navigation-item",l)},r.createElement("a",{href:o,className:p("dropdown-navigation-link",l),onClick:function(e){t._onNavigationItemClick(e,c),f&&f(e)},target:i},r.createElement("div",{className:p("dropdown-navigation-link-text")},n,s>0&&r.createElement("span",{className:p("dropdown-navigation-count")},s))))}},{key:"_renderNavigationItemYaPlus",value:function(){return this.state.hasYandexAccount&&(this.state.hasYaPlus||this.props.hasPremium)?this._renderNavigationItem({text:"Управление подпиской",url:"/mykp/edit_main/#".concat(l),metrika:[this.state.hasYaPlus?"yaplus":"premium"]}):null}},{key:"_renderUserAccountItem",value:function(e){var t=e.href,n=e.name,o=e.email;return r.createElement("li",{className:p("dropdown-navigation-item",{"active-account":!0})},r.createElement(c,{primaryTitle:n,secondaryTitle:o,href:t,onClick:this._handleUserAccountClick,accountIsDefault:!0,withoutAvatar:!0}))}},{key:"_onUserButtonClick",value:function(){this.props.userProfileClickMetrika(["section"])}},{key:"_onLoginButtonClick",value:function(){this.props.loginClickMetrika(),this.props.openAuthPopupEffect()}},{key:"_onLogoutButtonClick",value:function(){this.props.logoutEffect()}},{key:"_onNavigationItemClick",value:function(e,t){e.stopPropagation(),this.props.userProfileClickMetrika(t)}},{key:"_isAuthorized",get:function(){return Boolean(this.props.user.id)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),HeaderUser}();f.defaultProps={user:{img:{}},currentSezamAccount:{}},f.propTypes={appTheme:o.string,className:o.string,hasPremium:o.bool,loginClickMetrika:o.func.isRequired,logoutEffect:o.func.isRequired,mdaAccountRecoveryEffect:o.func,mdaUserMenuHintMode:o.oneOf(Object.values(u)),openAuthPopupEffect:o.func.isRequired,openPassportConnector:o.func.isRequired,passportPlusProfileUrl:o.string,currentSezamAccount:o.shape({defaultEmail:o.string}),theme:o.string,user:o.shape({id:o.number,displayName:o.string,messagesCount:o.number,img:o.object,socialAccounts:o.arrayOf(o.shape({type:o.string})),integrations:o.arrayOf(o.shape({service:o.string}))}),userProfileClickMetrika:o.func.isRequired,yandexLinkMenuItemVisible:o.bool},e.exports=f},function(e,t){e.exports={ANCHOR:"user-subscription"}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(51),a=n(3),i=function(e){function Appender(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Appender),(t=_possibleConstructorReturn(this,_getPrototypeOf(Appender).call(this,e)))._appendedElement=null,t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Appender,r.Component),t=Appender,(n=[{key:"componentDidMount",value:function(){if(!this._appendedElement){this._appendedElementId="appender_".concat(String(Math.random()).split(".")[1]);var e=document.createElement("div");e.id=this._appendedElementId;var t=this.props.containerId;this._appendedElement=t?document.getElementById(t).appendChild(e):document.body.appendChild(e),this.forceUpdate()}}},{key:"componentDidUpdate",value:function(){o.render(r.createElement("div",this.props,this.props.children),this._appendedElement)}},{key:"render",value:function(){return null}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Appender}();i.propTypes={children:a.any,containerId:a.string},e.exports=i},function(e,t,n){var r=n(0),o=n(3),a=n(1379),i=n(1380),c=n(1381),s=function(e){var t=e.className,n=e.children,o=e.onFrameLoaded,s=e.onFrameFinished;return r.createElement(i,{onAnimationEnd:s,render:function(e){var i=e.observe,s=e.unobserve;return r.createElement(a,{onLoaded:o,render:function(e){var o=e.observe,a=e.unobserve;return r.createElement(c,{className:t,onElementInit:function(e){i(e),o(e)},onElementDestroy:function(e){s(e),a(e)}},n)}})}})};s.defaultProps={onFrameLoaded:function(){},onFrameFinished:function(){}},s.propTypes={className:o.string,children:o.node,onFrameLoaded:o.func.isRequired,onFrameFinished:o.func.isRequired},e.exports=s},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(353),o=n(115),a=n(0),i=n(3),c=n(2),s=n(572),u=n(4).lock("carousel"),l=n(1306),p=n(342),f=n(1424);n(1426);var d=function(e){function Carousel(e){var t,n,i,c,s,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Carousel),n=this,i=_getPrototypeOf(Carousel).call(this,e),t=!i||"object"!==_typeof(i)&&"function"!=typeof i?_assertThisInitialized(n):i,c=_assertThisInitialized(t),u=function(){t.setState({isAdfoxRendered:!0})},(s="_setAdfoxRendered")in c?Object.defineProperty(c,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):c[s]=u,t.state={chunk:1,isAdfoxRendered:!1},t._lastScrollEdgeReached=null,t._carouselRef=a.createRef(),t._carouselInnerRef=a.createRef(),t._leftButton=a.createRef(),t._rightButton=a.createRef(),t._childrenElements=null,t._scrollBar=null,t._onScroll=t._onScroll.bind(_assertThisInitialized(t)),t._scrollLeft=t._scroll.bind(_assertThisInitialized(t),"left"),t._scrollRight=t._scroll.bind(_assertThisInitialized(t),"right"),t._onScrollBarInit=t._onScrollBarInit.bind(_assertThisInitialized(t)),t._renderChild=t._renderChild.bind(_assertThisInitialized(t)),t._lazyLoadImg=r(t._lazyLoadImg.bind(_assertThisInitialized(t)),200),t._onWindowResize=o(t._onWindowResize.bind(_assertThisInitialized(t)),400),t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Carousel,a.Component),t=Carousel,(n=[{key:"componentDidMount",value:function(){this._checkScrollEdgeReached(),window.addEventListener("resize",this._onWindowResize),this.props.lazyLoadImg&&this._lazyLoadImg("mount")}},{key:"componentDidUpdate",value:function(e,t){this._childrenElements=null,t.chunk!==this.state.chunk&&this._checkScrollEdgeReached()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._onWindowResize)}},{key:"render",value:function(){var e=this.props,t=e.preventDefaultScroll,n=e.className,r=e.mods;return a.createElement("div",{className:c(u(r),n),ref:this._carouselRef},a.createElement(l,{onScroll:this._onScroll,onInit:this._onScrollBarInit,preventDefaultScroll:t},a.createElement("section",{ref:this._carouselInnerRef,className:u("inner")},this._renderChildren())),this._renderButtons())}},{key:"_renderChildren",value:function(){var e=this.props,t=e.chunkSize,n=e.adfoxConfig,r=this.state.isAdfoxRendered,o=this._getChildren();return n&&o.splice(this._adfoxIndex,0,this._getAdfox()),t?a.createElement(a.Fragment,null,o.slice(0,this._calcCurrentChunkSize()+Number(!!n&&!r)).map(this._renderChild),this._renderSpinner()):o.map(this._renderChild)}},{key:"_renderChild",value:function(e,t){if(!e)return null;var n=this.props.adfoxConfig,r=this.state.isAdfoxRendered,o=n&&t===this._adfoxIndex&&!r;return a.createElement("div",{key:e.key,className:this._getChildrenClassName(o)},e)}},{key:"_renderSpinner",value:function(){if(!this._hasMoreChunk())return null;var e=this.props.spinnerClassName;return a.createElement("div",{key:"spinner",className:c(this._getChildrenClassName(),e)},a.createElement("div",{className:u("spinner-wrapper")},a.createElement(p,{className:u("spinner"),size:"s"})))}},{key:"_renderButtons",value:function(){return this.props.buttons?a.createElement(a.Fragment,null,this.props.button({ref:this._leftButton,onClick:this._scrollLeft,className:u("button",{hide:!0,direction:"left","always-show":this.props.shouldAlwaysShowButtons}),direction:"left"}),this.props.button({ref:this._rightButton,onClick:this._scrollRight,className:u("button",{hide:!0,direction:"right","always-show":this.props.shouldAlwaysShowButtons}),direction:"right"})):null}},{key:"_calcCurrentChunkSize",value:function(){var e=this.props.chunkSize;return this.state.chunk*(e-2)}},{key:"_getAdfox",value:function(){var e=this.props,t=e.adfoxConfig,n=e.rumPlaceId,r=e.rumBannerId;if(!t)return null;var o=t.index,i=t.name,c=t.p1,u=t.p2;return a.createElement(s,{key:o,name:i,index:o,params:{p1:c,p2:u},onRender:this._setAdfoxRendered,rumPlaceId:n,rumBannerId:r})}},{key:"_getChildren",value:function(){return a.Children.toArray(this.props.children).filter(Boolean)}},{key:"_getChildrenClassName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.mods,r=t.itemClassName,o=t.itemHiddenClassName;return c(u("item",n),e?o:r)}},{key:"_getChildrenElements",value:function(){return this._childrenElements||(this._childrenElements=this._carouselRef.current.querySelectorAll(".".concat(u("item")))),this._childrenElements}},{key:"_getScrollRightValue",value:function(){for(var e,t=this._scrollBar.getScrolledElement().scrollLeft,n=this._carouselInnerRef.current,r=this._getChildrenElements(),o=r.length-1;o>=0;o--){var a=r[o],i=a.offsetLeft-t;if(null!==a.offsetParent&&i<n.offsetWidth){e=a.offsetLeft;break}}return void 0===e?t+n.offsetWidth:e}},{key:"_getScrollLeftValue",value:function(){for(var e,t=this._scrollBar.getScrolledElement().scrollLeft,n=this._carouselInnerRef.current,r=this._getChildrenElements(),o=0;o<r.length;o++){var a=r[o],i=a.offsetLeft+a.offsetWidth-t;if(null!==a.offsetParent&&i>0){e=t+i-n.offsetWidth;break}}return void 0===e?t-n.offsetWidth:e}},{key:"_scroll",value:function(e){this._scrollBar&&this._scrollBar.getScrolledElement().scroll({behavior:"smooth",top:0,left:"left"===e?this._getScrollLeftValue():this._getScrollRightValue()})}},{key:"_onScrollBarInit",value:function(e){this._scrollBar=e}},{key:"_onScroll",value:function(e){this._scrollBar&&(this.props.onScroll(e,this._scrollBar),this._checkScrollEdgeReached(),this.props.lazyLoadImg&&this._lazyLoadImg("scroll"))}},{key:"_onWindowResize",value:function(){this.props.lazyLoadImg&&this._lazyLoadImg("resize")}},{key:"_lazyLoadImg",value:function(e){var t=this,n=this._carouselRef.current;if(n){var r=n.getBoundingClientRect(),o=r.left,a=r.right;Array.prototype.forEach.call(n.querySelectorAll("img[data-lazyload]"),function(n){var r=n.getBoundingClientRect(),i=r.left,c=r.right;t._lazyLoadImgCallback({item:n,action:e,inViewport:c>o&&i<a})})}}},{key:"_lazyLoadImgCallback",value:function(e){var t=e.item,n=e.action,r=e.inViewport,o=this.props.lazyLoadImgCallback;if(o)o({item:t,action:n,inViewport:r});else if(r){var a=t.getAttribute("data-srcset");a&&(t.removeAttribute("data-srcset"),t.setAttribute("srcset",a));var i=t.getAttribute("data-src");i&&(t.removeAttribute("data-src"),t.setAttribute("src",i)),t.removeAttribute("data-lazyload")}}},{key:"_checkScrollEdgeReached",value:function(){if(this._scrollBar){var e=this._scrollBar.isScrollEdgeReached();e!==this._lastScrollEdgeReached&&(this._lastScrollEdgeReached=e,this._onScrollEdgeReached())}}},{key:"_onScrollEdgeReached",value:function(){this._toggleButton(),this.props.onScrollEdgeReached(this._lastScrollEdgeReached,this._scrollBar),"right"===this._lastScrollEdgeReached&&this.props.chunkSize&&this._showNextChunk()}},{key:"_hasMoreChunk",value:function(){var e=this.state.isAdfoxRendered;return this._calcCurrentChunkSize()-Number(e)<this._getChildren().length}},{key:"_showNextChunk",value:function(){var e=this.state.chunk;this._hasMoreChunk()&&this.setState({chunk:e+1})}},{key:"_toggleButton",value:function(){var e=u("button",{hide:!0}).split(" ")[1],t=this._leftButton.current&&this._leftButton.current.getElementRef(),n=this._rightButton.current&&this._rightButton.current.getElementRef();t&&n&&(t.classList.toggle(e,"left"===this._lastScrollEdgeReached||"both"===this._lastScrollEdgeReached),n.classList.toggle(e,"right"===this._lastScrollEdgeReached||"both"===this._lastScrollEdgeReached))}},{key:"_adfoxIndex",get:function(){return this.props.adfoxPosition-1}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),Carousel}();d.propTypes={buttons:i.bool,button:i.func,onScroll:i.func,onScrollEdgeReached:i.func,lazyLoadImg:i.bool,lazyLoadImgCallback:i.func,chunkSize:i.number,preventDefaultScroll:i.bool,itemClassName:i.string,itemHiddenClassName:i.string,spinnerClassName:i.string,adfoxPosition:i.number,adfoxConfig:i.object,className:i.string,mods:i.object,children:i.node,rumPlaceId:i.string,rumBannerId:i.string,shouldAlwaysShowButtons:i.bool},d.defaultProps={buttons:!1,button:function(e){return a.createElement(f,e)},preventDefaultScroll:!1,onScroll:function(){},onScrollEdgeReached:function(){},shouldAlwaysShowButtons:!1},e.exports=d},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(47).selectUiList,i=n(5).connect,c=function(e){function UiListContainer(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UiListContainer),_possibleConstructorReturn(this,_getPrototypeOf(UiListContainer).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UiListContainer,r.PureComponent),t=UiListContainer,(n=[{key:"render",value:function(){var e=this.props.list;return this.props.children(e)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),UiListContainer}();c.propTypes={list:o.object.isRequired,children:o.func.isRequired},e.exports=i(function(e,t){return{list:a(e,t)}})(c)},function(e,t,n){e.exports=n(46)},function(e,t,n){"use strict";var r;n.d(t,"a",function(){return r}),function(e){e.positive="positive",e.neutral="neutral",e.negative="negative",e.unknown="unknown"}(r||(r={}))},function(e,t,n){"use strict";var r=n(0),o=n.n(r);function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.a=function(e){var t=e.children,n=e.fallback,r=void 0===n?null:n,a=_slicedToArray(o.a.useState(!1),2),i=a[0],c=a[1];return o.a.useEffect(function(){c(!0)},[]),i?o.a.createElement(o.a.Suspense,{fallback:r},t):null}},function(e,t,n){var r=n(6).createSelector,o=function(e){return e.ugc},a=r(o,function(e){return e.searchValue}),i=r(o,function(e){return e.searchShortcutValue});e.exports={selectUgcState:o,selectSearchValue:a,selectSearchShortcutValue:i}},,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(51),a=n(3),i=function(e){function Observer(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Observer),n=this,r=_getPrototypeOf(Observer).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"createRef",function(e){t._elementRef=e&&e instanceof Element?e:o.findDOMNode(e)}),_defineProperty(_assertThisInitialized(t),"_handler",function(e){e.forEach(function(e){e.isIntersecting&&(t.props.onIntersect(e),t.props.invokeOnIntersectOnce&&t.stopObserve(e.target))})}),t._elementRef=null,t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Observer,r.PureComponent),t=Observer,(n=[{key:"componentDidMount",value:function(){this.startObserve(this._elementRef)}},{key:"componentWillUnmount",value:function(){this.stopObserve(this._elementRef)}},{key:"render",value:function(){return this.props.children(this.createRef)}},{key:"startObserve",value:function(e){var t=this.props,n=t.threshold,r=t.rootMargin,o=t.onIntersect;e&&o&&(this.observer=new IntersectionObserver(this._handler,{rootMargin:r,threshold:n}),this.observer.observe(e))}},{key:"stopObserve",value:function(e){this.observer&&e&&this.observer.unobserve(e)}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Observer}();i.defaultProps={invokeOnIntersectOnce:!1,rootMargin:"0px",threshold:0},i.propTypes={children:a.func.isRequired,onIntersect:a.func,invokeOnIntersectOnce:a.bool,rootMargin:a.string,threshold:a.number},e.exports=i},,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog-chat".concat("-partial-component"),o=n(0),a=n(3),i=n(490),c=n(4).lock(r),s=n(2),u=n(584),l=n(228),p=l.BUTTON_BUY_TICKET_LINK,f=l.BUTTON_BUY_TICKET_TEXT,d=l.BUTTON_TRAILER_LINK,m=l.BUTTON_TRAILER_TEXT,y=function(e){function DeadpoolDialogChat(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogChat),n=this,(t=!(r=_getPrototypeOf(DeadpoolDialogChat).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._renderMessage=t._renderMessage.bind(_assertThisInitialized(t)),t._onStartChatButtonClick=t._onStartChatButtonClick.bind(_assertThisInitialized(t)),t._onInputChange=t._onInputChange.bind(_assertThisInitialized(t)),t._onFormSubmit=t._onFormSubmit.bind(_assertThisInitialized(t)),t._onParentsTransitionEnd=t._onParentsTransitionEnd.bind(_assertThisInitialized(t)),t._renderMessage=t._renderMessage.bind(_assertThisInitialized(t)),t._renderMessageButton=t._renderMessageButton.bind(_assertThisInitialized(t)),t._onMessageButtonClick=t._onMessageButtonClick.bind(_assertThisInitialized(t)),t._readyAction=t._readyAction.bind(_assertThisInitialized(t)),t._sendGreetingMessage=t._sendGreetingMessage.bind(_assertThisInitialized(t)),t.state={message:"",ready:!1,isFormActive:!1},t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogChat,o.Component),t=DeadpoolDialogChat,(n=[{key:"componentDidMount",value:function(){"desktop"===this.props.appTheme&&document.addEventListener("transitionend",this._onParentsTransitionEnd),"touch"===this.props.appTheme&&this._readyAction()}},{key:"componentDidUpdate",value:function(e){var t=e.messages[e.messages.length-1],n=this.props.messages[this.props.messages.length-1];t&&n&&t.status!==n.status&&(this._searchInput&&this._searchInput.focus(),this._scrollToBottom())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("transitionend",this._onParentsTransitionEnd)}},{key:"render",value:function(){var e=this,t=this.props,n=t.appTheme,r=t.className,a=this.state.ready;return o.createElement("div",{className:s(c({"app-theme":n}),r),ref:function(t){return e._chatElement=t}},o.createElement("div",{className:c("scroll-wrapper")},this._renderDeadpool(),o.createElement("div",{className:c("scroll",{ready:a}),ref:function(t){return e._scrollElement=t}},this._renderMessages())),this._renderForm())}},{key:"_renderDeadpool",value:function(){var e=this.props,t=e.appTheme,n=e.messages;return"touch"!==t||n.length>1?null:o.createElement("div",{className:c("deadpool")})}},{key:"_renderMessages",value:function(){var e=this,t=this.props.messages;return o.createElement("div",{className:c("messages"),ref:function(t){return e._messagesElement=t}},t.map(this._renderMessage))}},{key:"_renderMessage",value:function(e,t){var n=e.author,r=e.status,a=e.text,i=void 0===a?"":a;return o.createElement("div",{className:c("message-wrapper",{author:n,status:r}),key:t},o.createElement("div",{className:c("message"),lang:"ru"},o.createElement("span",null,i),this._renderMessageButton(e)))}},{key:"_renderMessageButton",value:function(e){var t=this,n=e.showTrailerButton,r=e.showTicketButton,a="",i="",s=null,l=null,y={};return n&&(a=d,i=m,s=this.props.metrikaActions.trailerButtonShow,l=this.props.metrikaActions.trailerButtonClick,y.trailer=!0),r&&(a=p,i=f,s=this.props.metrikaActions.ticketButtonShow,l=this.props.metrikaActions.ticketButtonClick,y.ticket=!0),a&&i?(e.read&&(s=null),o.createElement(u,{didMountMetrikaAction:s},o.createElement("a",{className:c("message-button",y),href:a,target:"_blank",rel:"noopener noreferrer",onClick:function(){return t._onMessageButtonClick(l)}},i))):null}},{key:"_renderTextInput",value:function(){var e=this;return o.createElement(o.Fragment,null,o.createElement("input",{className:c("input"),type:"text",value:this.state.message,placeholder:"Сообщение...",onChange:this._onInputChange,ref:function(t){return e._searchInput=t},autoFocus:!0}),o.createElement("button",{className:c("button")}))}},{key:"_renderStartChatButton",value:function(){return o.createElement("button",{className:c("start-chat-button"),onClick:this._onStartChatButtonClick})}},{key:"_renderForm",value:function(){var e=this.state.isFormActive,t=null;return"desktop"===this.props.appTheme&&(t=this._renderTextInput()),"touch"===this.props.appTheme&&(t=o.createElement(i,{transitionName:"animate",component:"div",transitionAppear:!0},e?this._renderTextInput():this._renderStartChatButton())),o.createElement("form",{className:c("form"),onSubmit:this._onFormSubmit},t)}},{key:"_onInputChange",value:function(e){this.setState({message:e.target.value})}},{key:"_onStartChatButtonClick",value:function(){var e=this;this.setState({isFormActive:!0},function(){e._sendGreetingMessage(),e._readyAction()})}},{key:"_onFormSubmit",value:function(e){e.preventDefault(),this.state.message.replace(/\s+/i,"")&&(this.context.dispatch(this.props.sendMessage(this.state.message,this._countUserMessages+1,this.props.metrikaActions.dialogMessages)),this.setState({message:""}))}},{key:"_scrollToBottom",value:function(){var e=null,t=null;"desktop"===this.props.appTheme&&(e=this._scrollElement,t=this._messagesElement),"touch"===this.props.appTheme&&(e=window,t=this._messagesElement),e&&t&&(e.scrollTo?e.scrollTo(0,t.offsetHeight):e.scrollTop=t.offsetHeight)}},{key:"_readyAction",value:function(){this._searchInput&&this._searchInput.focus(),this._scrollToBottom(),this.setState({ready:!0})}},{key:"_onParentsTransitionEnd",value:function(e){e.target===this.props.getTransitionedElement()&&(this._readyAction(),this._sendGreetingMessage())}},{key:"_onMessageButtonClick",value:function(e){e&&this.context.dispatch(e())}},{key:"_sendGreetingMessage",value:function(){var e=this.props.sendGreetingMessage;e&&this.context.dispatch(e())}},{key:"_countUserMessages",get:function(){return this.props.messages.filter(function(e){return"user"===e.author}).length}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialogChat}();y.propTypes={appTheme:a.oneOf(["desktop","touch"]),messages:a.arrayOf(a.shape({author:a.oneOf(["alice","user"]).isRequired,text:a.string,status:a.oneOf(["pending","done"])})),sendMessage:a.func.isRequired,sendGreetingMessage:a.func,getTransitionedElement:a.func.isRequired,metrikaActions:a.object,className:a.object},y.defaultProps={messages:[]},y.contextTypes={dispatch:a.func},e.exports=y},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog-icon".concat("-partial-component"),o=n(4).lock(r),a=n(2);n(1324);var i=n(0),c=n(3),s=function(e){function DeadpoolDialogIcon(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogIcon),_possibleConstructorReturn(this,_getPrototypeOf(DeadpoolDialogIcon).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogIcon,i.Component),t=DeadpoolDialogIcon,(n=[{key:"render",value:function(){return i.createElement("div",{className:this.getClassName(),onClick:this.props.onClick,style:this.props.style})}},{key:"getClassName",value:function(){return a(o({type:this.props.type}),this.props.className)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialogIcon}();s.propTypes={type:c.oneOf(["arrow-down","close","hide"]),style:c.object,onClick:c.func,className:c.string},e.exports=s},,,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(3),o=n(969),a=n(594),i=n(4),c={};e.exports=function(e){var t=function(t){function BaseMix(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,BaseMix),_possibleConstructorReturn(this,_getPrototypeOf(BaseMix).apply(this,arguments))}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(BaseMix,e),n=BaseMix,(r=[{key:"getClassName",value:function(){var e=this.props,t=e.appTheme,n=e.mods,r=void 0===n?{}:n,o=this.getBlockName(),c=null,s="",u=Object.assign({},r,t?{"app-theme":t}:void 0);switch(arguments.length){case 3:o=arguments.length<=0?void 0:arguments[0],c=arguments.length<=1?void 0:arguments[1],u=(arguments.length<=2?void 0:arguments[2])?Object.assign(u,arguments.length<=2?void 0:arguments[2]):u,s=i(o,c,u);break;case 2:c=arguments.length<=0?void 0:arguments[0],u=(arguments.length<=1?void 0:arguments[1])?Object.assign(u,arguments.length<=1?void 0:arguments[1]):u,s=i(o,c,u);break;case 1:u=(arguments.length<=0?void 0:arguments[0])?Object.assign(u,arguments.length<=0?void 0:arguments[0]):u,s=i(o,u);break;default:s=i(o,u)}return a([s,this.props.mix]).join(" ")}},{key:"getBlockName",value:function(){var e=this.constructor.name;return c[e]||(c[e]=this._toKebabCase(e)),c[e]}},{key:"_toKebabCase",value:function(e){var t=!1;return o(e).reduce(function(e,n){var r=/[0-9]+/.test(n),o=n.toLowerCase();return(r||t)&&e.length?e[e.length-1]+=o:e.push(o),t=r,e},[]).join("-")}}])&&_defineProperties(n.prototype,r),s&&_defineProperties(n,s),BaseMix}();return t.propTypes={mix:r.string,getModel:r.func},t}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(2),a=n(4).lock("circle-play-button"),i=n(3);n(1338);var c=function(e){function CirclePlayButton(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CirclePlayButton),_possibleConstructorReturn(this,_getPrototypeOf(CirclePlayButton).apply(this,arguments))}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CirclePlayButton,r.Component),t=CirclePlayButton,(n=[{key:"render",value:function(){return r.createElement("button",_extends({},this.props,{className:o(a(),this.props.className),mods:void 0}))}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),CirclePlayButton}();c.propTypes={className:i.string},e.exports=c},function(e,t,n){var r=n(6).createSelector,o=n(1370).NAMEPLATE,a=n(173).getFilmModel,i=n(226).getBasicFilmModel,c=n(47).selectUiListPagination,s=n(172).selectEntityIdByType,u=r(c,function(e){return e.offset||0}),l=r(c,function(e){return e.limit||0}),p=r(c,function(e){return e.total||0}),f=r([u,l],function(e,t){return e+t}),d=r([f,p],function(e,t){return e<t}),m=function(e){return r(e,function(e){var t=e.isTicketsAvialable;return t?{isTicketsAvialable:t,nameplateData:{type:"tickets",text:o.TICKETS.TEXT,buttonHref:"/afisha/new/film/".concat(e.id,"/")}}:{isTicketsAvialable:!1}})},y=m(a),_=m(i),h=m(s);e.exports={selectTicketsConfig:function(e){return e.page&&e.page.ticketsConfig||{}},selectCinemasListOffset:u,selectCinemasListLimit:l,selectCinemasListTotal:p,selectCinemasListLength:f,selectCinemasListHasMorePage:d,selectPlainFilmAfishaData:y,selectBasicFilmAfishaData:_,selectEntityAfishaData:h}},function(e,t,n){var r=(0,n(14).default)("afisha/FILM_SEANCES_PAGE_LOAD_MORE_EFFECT");e.exports={AFISHA_FILM_SEANCES_PAGE_LOAD_MORE_EFFECT:"afisha/FILM_SEANCES_PAGE_LOAD_MORE_EFFECT",filmSeancesPageLoadMoreEffect:r}},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(102),i=n(2),c=function(e){var t=e.imageUrl,n=e.defaultImageType,o=e.href,c=e.title,s=e.subtitle,u=e.className;return r.createElement("div",{className:a("avatar",{mix:u})},r.createElement("a",{href:o,className:i(a("avatar-image",{stub:t?null:n}),u),style:t?{backgroundImage:"url(".concat(t,")")}:null,target:"_blank",rel:"noopener noreferrer"}),c&&r.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:o,className:a("avatar-title")},c),s&&r.createElement("div",{className:a("avatar-subtitle")},s))};c.propTypes={imageUrl:o.string,defaultImageType:o.string,href:o.string,title:o.string,subtitle:o.string,className:o.string},e.exports=c},function(e,t,n){var r=n(0),o=n(3),a=n(102),i=function(e){var t,n=e.isTouch,o=e.retPath,i=e.src,c=e.closePopup;return t="passport"===i?"https://passport.yandex.ru/profile/?from=kinopoisk":n?o||"/":null,r.createElement("div",{className:a("footer-close")},r.createElement("a",{href:t,className:a("close-link"),onClick:n?void 0:c},"Закрыть"))};i.propTypes={isTouch:o.bool,retPath:o.string,src:o.string,closePopup:o.func},e.exports=i},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("account-card".concat("-partial-component")),o=n(0),a=n(3),i=n(2);n(1408);var c={KINOPOISK:"kinopoisk",YANDEX:"yandex"},s=function(e){function AccountCard(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AccountCard),_possibleConstructorReturn(this,_getPrototypeOf(AccountCard).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AccountCard,o.PureComponent),t=AccountCard,(n=[{key:"render",value:function(){return o.createElement("div",{className:i(r({type:this.props.type}),this.props.className)},this.props.type&&o.createElement("div",{className:r("head")}),o.createElement("a",{href:this.props.accountLink,target:"_blank",rel:"noopener noreferrer",className:r("footer",{"is-clickable":Boolean(this.props.accountLink)})},o.createElement("div",{className:r("avatar"),style:this.props.imageUrl?{backgroundImage:"url(".concat(this.props.imageUrl,")")}:{}}),o.createElement("div",{className:r("info")},o.createElement("div",{className:r("name")},this.props.name),o.createElement("div",{className:r("email")},this.props.email))))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),AccountCard}();s.TYPES=c,s.propTypes={className:a.string,type:a.oneOf(Object.values(c)),name:a.string,email:a.string,imageUrl:a.string,accountLink:a.string},e.exports=s},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(963),o=n(964),a=n(1371);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},a,{},r,{},o)},,,function(e,t,n){"use strict";e.exports={POSTER_PLACEHOLDER:"/touch/static/no-movie-poster.svg",POSSIBLE_RELEASE_DATE_FORMATS:["DD.MM.YYYY","MM.YYYY","YYYY"],POSSIBLE_RELEASE_DATE_FORMATS_KP1_API:["YYYY-MM-DD","YYYY-MM","YYYY"],DESIRED_RELEASE_DATE_FORMATS:["D MMMM YYYY","MMMM YYYY","YYYY"],FILM_WITH_USER_DATA:{filmsToWatch:"FilmsToWatch"}}},function(e,t,n){e.exports=n(1343)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./ru":529,"./ru.js":529};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=1040},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(75).Footer,i=n(31),c=n(127);n(1147);var s=function(e){function PartialFooter(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialFooter),n=this,(t=!(r=_getPrototypeOf(PartialFooter).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onFooterLinkClick=t._onFooterLinkClick.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialFooter,r.Component),t=PartialFooter,(n=[{key:"render",value:function(){var e=this.props.common;return r.createElement(c,null,r.createElement(a,{mobileVersionLink:e.touchUrl,onLinkClick:this._onFooterLinkClick,currentYear:e.currentYear}))}},{key:"_onFooterLinkClick",value:function(e){this.context.dispatch(i.footer.linkClick(e))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialFooter}();s.defaultProps={common:{}},s.contextTypes={dispatch:o.func},s.propTypes={common:o.object},e.exports=s},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(127),i=n(1982).HeaderFreshConnected,c=n(930),s=function(e){function PartialHeader(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialHeader),_possibleConstructorReturn(this,_getPrototypeOf(PartialHeader).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialHeader,r.Component),t=PartialHeader,(n=[{key:"render",value:function(){return r.createElement(c,null,r.createElement(a,null,r.createElement(i,null)))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialHeader}();s.defaultProps={models:{users:[]},common:{user:{}},page:{},auth:{},branding:{},ugc:{}},s.contextTypes={dispatch:o.func},s.propTypes={dispatch:o.func,models:o.object,common:o.object,page:o.object,auth:o.object,branding:o.object,ugc:o.object,getModel:o.func},e.exports=s},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="header-fresh".concat("-partial-component");n(1983);var o=n(65),a=n(0),i=n(3),c=n(4).lock(r),s=n(2),u=n(115),l=n(353),p=n(1984),f=n(1281).HeaderUserConnected,d=n(1993),m=n(1995),y=n(1997),_=n(1999),h=n(1125),g=n(2002),b=n(1282),E=n(348).MetrikaClick,v=n(955),O=n(2005),P=n(2006),S=n(80).loadHeaderFeaturesEffect,T=n(277).loadTodayFilmsInCinemaEffect,k=n(31),C=k.header,w=k.featuring,I=n(223).THEMES,A=n(2007),x=n(386).ESC,R=n(2009),N=n(1126),j=N.CUSTOM_NAV_ITEM_TYPE,D=N.HD_NAV_ITEM_TYPE,M=n(2016),L=n(2018),F=function(e){function Header(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Header),n=this,r=_getPrototypeOf(Header).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_renderNavItem",function(e){var n,r=t.props.appTheme,o=t.state.selectedItemType===e.type,i=Boolean(e.iconSrcSet&&e.iconSrcSet.x1),s=_objectSpread({className:c("navigation-item-content",(n={},_defineProperty(n,e.modifier,Boolean(e.modifier)),_defineProperty(n,"has-icon",i),n))},e);return a.createElement("li",{className:c("navigation-item",_defineProperty({selected:o},e.modifier,Boolean(e.modifier))),onClick:function(n){return t._onNavItemClick(n,e.metrikaData)},onTouchEnd:function(n){return t._onNavItemTouchEnd(n,e)},onMouseEnter:function(){return t._onNavItemMouseEnter(e)},onMouseLeave:t._onNavItemMouseLeave,key:e.type},e.type===D?a.createElement(L,_extends({appTheme:r},s)):a.createElement(M,s))}),_defineProperty(_assertThisInitialized(t),"setSearchInputRef",function(e){t._searchInputRef=e}),_defineProperty(_assertThisInitialized(t),"_handleSearchBarOpen",function(){t.setState({isSearchBarOpen:!0},function(){t._searchInputRef&&t._searchInputRef.focus&&t._searchInputRef.focus()})}),_defineProperty(_assertThisInitialized(t),"_handleSearchBarClose",function(){t._searchInputRef&&t._searchInputRef.blur&&t._searchInputRef.blur(),t.setState({isSearchBarOpen:!1})}),_defineProperty(_assertThisInitialized(t),"_handleKeyDown",function(e){e.keyCode===x&&t._handleSearchBarClose()}),t.state={theme:e.theme,dropdownContentMeta:{},isSearchBarOpen:!1,isMainPage:!1},t._onWindowScroll=l(t._onWindowScroll.bind(_assertThisInitialized(t)),50),t._hideDropdown=u(t._hideDropdown,100),t._showDropdown=u(t._showDropdown,40),t._onNavItemClick=t._onNavItemClick.bind(_assertThisInitialized(t)),t._onNavItemMouseLeave=t._onNavItemMouseLeave.bind(_assertThisInitialized(t)),t._onLogoClick=t._onLogoClick.bind(_assertThisInitialized(t)),t._onDropdownMenuItemClick=t._onDropdownMenuItemClick.bind(_assertThisInitialized(t)),t._onDropdownMouseEnter=t._onDropdownMouseEnter.bind(_assertThisInitialized(t)),t._onDropdownMouseLeave=t._onDropdownMouseLeave.bind(_assertThisInitialized(t)),t._applyAllFilters=t._applyAllFilters.bind(_assertThisInitialized(t)),t._filterByProps=t._filterByProps.bind(_assertThisInitialized(t)),t._filterByUserAuth=t._filterByUserAuth.bind(_assertThisInitialized(t)),t._searchInputRef=null,t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Header,a.PureComponent),t=Header,(n=[{key:"componentDidMount",value:function(){this.props.dispatch(T()),this.props.isPartialComponent&&this.props.dispatch(S()),this.props.noSticky||window.addEventListener("scroll",this._onWindowScroll),this._setStartPoint(),window.addEventListener("keydown",this._handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.props.noSticky||window.removeEventListener("scroll",this._onWindowScroll),window.removeEventListener("keydown",this._handleKeyDown)}},{key:"render",value:function(){var e=this,t=this.props,n=t.appTheme,r=t.appWidth,o=t.className,i=this.state.theme;return a.createElement("div",{className:s(c({"app-theme":n,"app-width":r,theme:i}),o),ref:function(t){return e._headerRef=t}},a.createElement("div",{className:c("body")},this._renderInner(),this._renderDropdown()))}},{key:"_renderInner",value:function(){var e=this,t=this.state,n=t.isSearchBarOpen,r=t.theme;return a.createElement(R,{theme:"desktop",elementType:r,logoClassName:c("branding-logo"),backgroundClassName:c("branding-background")},function(t){var o=t.logo,i=t.background;return a.createElement(a.Fragment,null,i,a.createElement("div",{className:c("inner")},a.createElement("div",{className:c("logo-container")},o||e._renderLogo()),a.createElement("div",{className:c("search-container",{visible:r!==I.toplineLight||n})},e._renderSearch(),r===I.toplineLight&&a.createElement("button",{className:c("close-search-bar-button"),onClick:e._handleSearchBarClose})),r!==I.light&&a.createElement("div",{className:c("user-container")},e._renderUser()),a.createElement("nav",{className:c("navigation-container",{visible:r!==I.toplineLight||!n})},r===I.toplineLight&&a.createElement("button",{className:c("open-search-bar-button",{faded:Boolean(e.state.selectedItemType)}),onClick:e._handleSearchBarOpen}),e._renderNavigation())))})}},{key:"_renderNavigation",value:function(){var e=this,t=this.props.customNavItem;return a.createElement("ul",{className:c("navigation",{selected:Boolean(this.state.selectedItemType)})},this._applyAllFilters(A).map(function(n){var r=n.type===j;return r&&!t.isEnabled?null:e._renderNavItem(r?_objectSpread({},n,{},t):n)}))}},{key:"_renderUser",value:function(){return this.props.shouldRenderUser?a.createElement(a.Fragment,null,this.props.isAuthorized&&a.createElement("a",{className:c("film-to-watch-button"),href:"/mykp/movies/"},a.createElement("span",{className:c("film-to-watch-button-text")},"Буду смотреть")),a.createElement(f,{className:c("user"),theme:this.state.theme})):null}},{key:"_renderDropdown",value:function(){var e=this.state,t=e.sidebarNavigation,n=e.featuredNavigation;return a.createElement(d,{sidebarNavigation:this._applyAllFilters(t),featuredNavigation:this._applyAllFilters(n),onSidebarNavigationClick:this._onDropdownMenuItemClick,onMouseEnter:this._onDropdownMouseEnter,onMouseLeave:this._onDropdownMouseLeave,contentTitle:this.state.dropdownContentMeta.title,content:this._getDropdownContent(),className:c("dropdown",{visible:this.state.isDropdownVisible}),appTheme:this.props.appTheme,theme:this.state.theme})}},{key:"_renderLogo",value:function(){var e=this.props.logoIsClickable,t=e?"a":"div",n={};return e&&(n.href="/"),a.createElement(t,_extends({className:c("logo-wrapper"),onClick:this._onLogoClick},n),a.createElement(b,{className:c("logo")}))}},{key:"_renderSearch",value:function(){var e=this.props,t=e.suggest,n=e.searchValue,r=e.searchShortcutValue,o=e.appTheme,i=this.state.theme;return a.createElement(p,{searchInputRef:this.setSearchInputRef,suggest:t,shortcutFilterValue:r,value:n,className:c("search"),theme:i,key:"header-search",appTheme:o})}},{key:"_renderChart",value:function(){var e=this.props,t=e.chartContent,n=e.basicFilms;return!this._isCurrentThemeLight()&&t&&t.filmId?a.createElement(y,{hideChart:!0,film:n[t.filmId],positionChanges:t.positionChanges,className:c("chart")}):null}},{key:"_getLightTheme",value:function(){switch(this.props.theme){case I.topline:return I.toplineLight;default:return I.light}}},{key:"_isCurrentThemeLight",value:function(){return[I.light,I.toplineLight].includes(this.state.theme)}},{key:"_setStartPoint",value:function(){var e=this._headerRef.getBoundingClientRect().top+this.pageScrollY;this._startPoint=e+this._headerRef.clientHeight}},{key:"_onWindowScroll",value:function(){if(this.pageScrollY>=this._startPoint){var e=Boolean(this._searchInputRef&&document.activeElement===this._searchInputRef&&this.props.searchValue);this.setState({theme:this._getLightTheme(),isSearchBarOpen:e||this.state.isSearchBarOpen})}else this.setState({theme:this.props.theme})}},{key:"_onNavItemClick",value:function(e,t){e.stopPropagation(),this._metrikaMenu(t.concat("section"))}},{key:"_onDropdownMenuItemClick",value:function(e,t){e.stopPropagation(),this._metrikaMenu([].concat(this.state.selectedItemType,t))}},{key:"_onSnippetClick",value:function(e,t,n){e.stopPropagation();var r=[].concat(this.state.selectedItemType,t+1);this._metrikaMenu(r,n)}},{key:"_metrikaMenu",value:function(e,t){this.props.dispatch(C.freshMenuClick(e,t))}},{key:"_onDropdownMouseEnter",value:function(){this._hideDropdown.cancel()}},{key:"_onDropdownMouseLeave",value:function(){this._hideDropdown()}},{key:"_onNavItemTouchEnd",value:function(e,t){this._getIsDropdownVisible(t)&&(e.preventDefault(),this.state.selectedItemType===t.type?this._onNavItemMouseLeave():(this._onNavItemMouseEnter(t),this._onNavItemClick(e,t.metrikaData)))}},{key:"_onNavItemMouseLeave",value:function(){this._showDropdown.cancel(),this._hideDropdown()}},{key:"_onNavItemMouseEnter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._hideDropdown.cancel(),this._showDropdown(e)}},{key:"_hideDropdown",value:function(){this.setState({selectedItemType:null,isDropdownVisible:!1})}},{key:"_showDropdown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._getIsDropdownVisible(e),n=t?{dropdownContentMeta:e.contentMeta,sidebarNavigation:e.subitems,featuredNavigation:e.featuredSubitems}:{dropdownContentMeta:{},sidebarNavigation:[],featuredNavigation:[]};this.setState(_objectSpread({selectedItemType:e.type,isDropdownVisible:t},n))}},{key:"_getIsDropdownVisible",value:function(e){return Boolean(e.contentMeta)}},{key:"_getFilmItem",value:function(e,t,n){var r=this,i=e.firstGenre;"filmsComingSoon"===n&&(i=[e.year,e.firstGenre].filter(Boolean).join(", "));var s=Object.values(this.props.featuredFilms).some(function(t){return e.id===Number(t.id)}),u={key:e.id,mix:c("film-poster-snippet"),caption:i,truncateLines:2,truncateEllipsis:"…",isFeatured:s,onClick:function(e,n){return r._onSnippetClick(e,t,n.relativeUrl)}},l=function(n){return{type:n,filmId:e.id,isFeatured:s,position:t+1,place:"header"}};return"featuredOnlineFilms"===n?a.createElement(O,_extends({},u,{filmId:e.id,watchUrlQuery:o.stringify({from_block:"header",from_position:t+1}),position:t+1,showMinPrice:!0})):"filmsInCinema"===n?a.createElement(v,{invokeOnIntersectOnce:!0,onIntersect:function(){return w(l("show"))},key:u.key},function(n){return a.createElement(E,_extends({},l("click"),{action:function(e,t){return w(t)}}),a.createElement(P,_extends({},u,{filmId:e.id,position:t+1,ref:n})))}):a.createElement(h,_extends({},u,{film:e}))}},{key:"_getDropdownContent",value:function(){var e=this,t=this.state.dropdownContentMeta,n=t.storeKey,r=t.model,o=t.wideCount,i=this.props,s=i.dropdownContent,u=i.basicFilms,l=i.basicTrailers,p=i.theme,f=i.todayFilmsInCinema,d=i.plainFilms;if(!n||!r)return null;var m="filmsInCinema"===n?f:s[n];if(null===m||!m.length){var y="0".repeat(o).split("");switch(r){case"plainFilm":case"basicFilm":return y.map(function(e,t){return a.createElement(h,{mix:c("film-poster-snippet"),key:t,stub:!0})});case"basicTrailer":return y.map(function(e,t){return a.createElement(g,{className:c("trailer-snippet"),key:t,theme:p===I.topline?p:void 0,stub:!0})});case"post":return y.map(function(e,t){return a.createElement(_,{className:c("post-snippet"),key:t,theme:p===I.topline?p:void 0,stub:!0})});default:return this._getDropdownError()}}var b=(m||[]).slice(0,o);switch(r){case"plainFilm":return b.map(function(t,r){return e._getFilmItem(d[t],r,n)});case"basicFilm":return b.map(function(t,r){return e._getFilmItem(u[t],r,n)});case"basicTrailer":return b.map(function(t,n){return a.createElement(g,{className:c("trailer-snippet"),key:t,trailer:l[t],theme:p===I.topline?p:void 0,onClick:function(t,r){return e._onSnippetClick(t,n,r.url)}})});case"post":return m.map(function(t,n){return a.createElement(_,{className:c("post-snippet"),key:t.id,post:t,theme:p===I.topline?p:void 0,onClick:function(t,r){return e._onSnippetClick(t,n,r.url)}})});default:return this._getDropdownError()}}},{key:"_getDropdownError",value:function(){return a.createElement(m,null)}},{key:"_onLogoClick",value:function(){this.props.dispatch(C.logoClick())}},{key:"_applyAllFilters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return[this._filterByProps,this._filterByUserAuth].forEach(function(t){return e=t(e)}),e}},{key:"_filterByProps",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return!e.props.hideLinks[t.switcher]})}},{key:"_filterByUserAuth",value:function(){var e=this;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter(function(t){return!t.userAuth||(e.props.user||{}).id})}},{key:"pageScrollY",get:function(){return window.pageYOffset||window.scrollY}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Header}();F.propTypes={adfoxParams:i.object,appTheme:i.string,appWidth:i.string,basicFilms:i.object,basicTrailers:i.object,chartContent:i.object,className:i.string,customNavItem:i.object,dispatch:i.func,dropdownContent:i.object,featuredFilms:i.array,hideLinks:i.object,isAuthorized:i.bool,isDragonClose:i.bool,isPartialComponent:i.bool,logoIsClickable:i.bool,noSticky:i.bool,pageOriginalUrl:i.string,plainFilms:i.object,searchShortcutValue:i.string,searchValue:i.oneOfType([i.string,i.number]),shouldRenderUser:i.bool,suggest:i.array,theme:i.string,toasterHeight:i.number,todayFilmsInCinema:i.array,user:i.shape({id:i.number})},F.defaultProps={adfoxParams:{},dropdownContent:{},hideLinks:{},logoIsClickable:!0,shouldRenderUser:!0,theme:I.default},e.exports=F},,,,,function(e,t,n){"use strict";var r=n(573),o=n(343);n(2001),e.exports=o(r)},function(e,t){e.exports={CUSTOM_NAV_ITEM_TYPE:"custom-item",HD_NAV_ITEM_TYPE:"online"}},function(e,t){e.exports={RATING_POSITIVE_MIN_COUNT:7,RATING_NEGATIVE_MAX_COUNT:5,FILM_SEANCES_MAX_GENRES_COUNT:2,MIN_SUGGEST_VALUE_LENGTH:2,MIN_AFISHA_SUGGEST_VALUE_LENGTH:4,SNIPPETS_PER_PAGE:10,COMMENTS_PER_PAGE:10}},function(e,t,n){"use strict";e.exports={HEADER_V2_POPUP_HIDDEN_COOKIE_NAME:"header_v2_popup_hidden",TICKETS_PROMO_POPUP_SHOWN_COOKIE_NAME:"tickets_promo_popup_shown",TICKETS_PROMO_POPUP_GUEST_COOKIE_NAME:"guest_tickets_promo_popup"}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(46),c=n(108).getAvailableSubscriptionsWithTexts,s=n(116).showPaymentFormEffect,u=n(59),l=u.openModal,p=u.closeModal,f=n(110).MODAL_TYPES,d=n(31).watchOnline.purchaseBasicSubscriptionFromProfileStart,m=n(58).SUBSCRIPTION,y=n(931),_=function(e){function AvailableSubscriptions(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AvailableSubscriptions);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,r=(e=_getPrototypeOf(AvailableSubscriptions)).call.apply(e,[this].concat(s)),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(){t.props.openModal({name:f.USER_SUBSCRIPTION_AVAILABLE_LIST,props:{onClose:function(){t.props.closeModal(f.USER_SUBSCRIPTION_AVAILABLE_LIST)}}})},(a="handleClick")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AvailableSubscriptions,r.Component),t=AvailableSubscriptions,(n=[{key:"render",value:function(){var e=this,t=this.props.availableSubscriptions;return r.createElement("div",{className:y({available:!0})},r.createElement("div",{className:y("title")},"Подписка"),t.length>0&&r.createElement("div",{className:y("subscriptions-list")},t.map(function(t){return r.createElement("div",{key:t.name,className:y("subscription-item")},r.createElement("div",{className:y("subscription-item-text")},t.text),r.createElement(i,{size:"sl",theme:"silver",className:y("subscription-item-button"),onClick:function(){e.props.showPaymentFormEffect({paymentFormSource:"profile",billingProductId:t.billingProductId}),t.subscription===m.KP_BASIC&&e.props.purchaseBasicSubscriptionFromProfileStartMetrika()}},t.buttonText))})),r.createElement("a",{className:y("all-subscriptions"),onClick:this.handleClick},"Все варианты"))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),AvailableSubscriptions}();_.propTypes={availableSubscriptions:o.array,openModal:o.func.isRequired,closeModal:o.func.isRequired,showPaymentFormEffect:o.func.isRequired,purchaseBasicSubscriptionFromProfileStartMetrika:o.func.isRequired},e.exports=a(function(e){return{availableSubscriptions:c(e)}},{openModal:l,closeModal:p,showPaymentFormEffect:s,purchaseBasicSubscriptionFromProfileStartMetrika:d})(_)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(46),c=n(19).getOttIntegration,s=n(108).getCurrentSubscriptionText,u=n(116),l=u.showPaymentFormEffect,p=u.showResumeFormEffect,f=n(59),d=f.openModal,m=f.closeModal,y=n(110).MODAL_TYPES,_=n(31).watchOnline.purchaseResumptionClick,h=n(931),g=function(e){function CurrentSubscription(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CurrentSubscription);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(CurrentSubscription)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"handleResumeClick",function(){t.props.purchaseResumptionClickMetrika(),t.props.showResumeFormEffect({paymentFormSource:"profile",billingProductId:t.props.ottIntegration.billingProductId})}),_defineProperty(_assertThisInitialized(t),"handleBuyClick",function(){return t.props.showPaymentFormEffect({paymentFormSource:"profile",billingProductId:t.props.ottIntegration.billingProductId})}),_defineProperty(_assertThisInitialized(t),"handleCancelClick",function(){return t.props.openModal({name:y.USER_SUBSCRIPTION_CANCEL,props:{onClose:function(){t.props.closeModal(y.USER_SUBSCRIPTION_CANCEL)}}})}),_defineProperty(_assertThisInitialized(t),"getButtonOnClickHandler",function(){var e=t.props.ottIntegration;return e.nonAutoRenewable?null:e.finished?e.restartable?t.handleResumeClick:t.handleBuyClick:e.stoppable?t.handleCancelClick:null}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CurrentSubscription,r.Component),t=CurrentSubscription,(n=[{key:"render",value:function(){var e=this.props.text,t=e.title,n=e.description,o=e.button,a=this.getButtonOnClickHandler();return r.createElement("div",{className:h({flex:!0})},r.createElement("div",{className:h("content")},r.createElement("div",{className:h("title"),dangerouslySetInnerHTML:{__html:t}}),r.createElement("div",{className:h("description"),dangerouslySetInnerHTML:{__html:n}})),Boolean(a)&&r.createElement(i,{size:"sl",theme:"silver",className:h("button"),onClick:a},o))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CurrentSubscription}();g.propTypes={ottIntegration:o.object,text:o.object,openModal:o.func.isRequired,closeModal:o.func.isRequired,showPaymentFormEffect:o.func.isRequired,showResumeFormEffect:o.func.isRequired,purchaseResumptionClickMetrika:o.func.isRequired},e.exports=a(function(e){return{ottIntegration:c(e),text:s(e)}},{openModal:d,closeModal:m,showPaymentFormEffect:l,showResumeFormEffect:p,purchaseResumptionClickMetrika:_})(g)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(0).PureComponent,a=n(5).connect,i=n(3),c=n(33).compose,s=n(31),u=s.featuring,l=s.media,p=n(501),f=n(224).isFilmFeatured,d=n(173).getFilmModel,m=n(229),y=m.showNameplateEffect,_=m.clickNameplateEffect,h=n(397).default,g=n(968).selectPlainFilmAfishaData,b=function(e){function FilmPosterSnippetConnected(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FilmPosterSnippetConnected);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(FilmPosterSnippetConnected)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onClick",function(e,n){var r=t.props.cardIndex;l.watchInCinemaItemClick({isTouch:!1,postType:"/",postId:n.id,target:r+1}),t._sendFeaturing({type:"filmClick"})}),_defineProperty(_assertThisInitialized(t),"_sendFeaturing",function(e){var n=e.type,r=t.props,o=r.cardIndex,a=r.isFeatured,i=r.film;u({type:n,isFeatured:a,position:o+1,filmId:i.id,place:"home_today"})}),_defineProperty(_assertThisInitialized(t),"_handleShowNameplate",function(){var e=t.props,n=e.cardIndex,r=e.filmId,o=e.onShowNameplate;e.afishaData.nameplateData&&o({position:n+1,filmId:r})}),_defineProperty(_assertThisInitialized(t),"_handleClickNameplate",function(){var e=t.props,n=e.cardIndex,r=e.filmId;(0,e.onClickNameplate)({position:n+1,filmId:r})}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FilmPosterSnippetConnected,o),t=FilmPosterSnippetConnected,(n=[{key:"componentDidMount",value:function(){this._sendFeaturing({type:"show"})}},{key:"render",value:function(){var e=this.props,t=e.film,n=e.afishaData;return t?r.createElement(h,_extends({truncateLines:2,appTheme:"kp1",onClick:this._onClick,handleShowNameplate:this._handleShowNameplate,handleClickNameplate:this._handleClickNameplate,nameplateData:n.nameplateData,size:"m"},this.props,{snippetUrl:"/film/".concat(t.id,"/")})):null}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),FilmPosterSnippetConnected}();b.propTypes={isFilmFeatured:i.bool,film:i.object.isRequired,cardIndex:i.number.isRequired,isFeatured:i.bool,afishaData:i.shape({nameplateData:i.shape({type:i.string,text:i.string})}),onClickNameplate:i.func,onShowNameplate:i.func,filmId:i.number},e.exports=c(a(function(e,t){return{film:d(e,t.filmId),afishaData:g(e,t.filmId),isFeatured:f(e,t.filmId)}},{onShowNameplate:y,onClickNameplate:_}),p)(b)},function(e,t,n){"use strict";function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(0),o=n(5).connect,a=n(33).compose,i=n(3),c=n(368),s=c.filmPosterCardClick,u=c.selectPersonFilmographyOttData,l=n(501),p=n(397).default,f=n(93).selectEntityIdByType,d=n(79).WATCH_ON_KP_BLOCK_NAME,m=n(229),y=m.showNameplateEffect,_=m.clickNameplateEffect,h=function(e){var t=e.position,n=e.filmId,o=e.onlineViewOption,a=_objectWithoutProperties(e,["position","filmId","onlineViewOption"]),i=r.useCallback(function(){e.filmPosterCardClick({position:t})},[t]),c=r.useCallback(function(){var r=e.onShowNameplate;o&&o.isAvailableOnline&&r({position:t,filmId:n,fromBlock:d})},[t,o]),s=r.useCallback(function(){(0,e.onClickNameplate)({position:t,filmId:n,fromBlock:d})},[t,n]);return r.createElement(p,_extends({truncateLines:2,appTheme:"kp1",onClick:i,handleShowNameplate:c,handleClickNameplate:s,onlineViewOption:o},a))};h.defaultProps={filmPosterCardClick:function(){},onClickNameplate:function(){},onShowNameplate:function(){}},h.propTypes={filmId:i.number.isRequired,watchUrlQuery:i.string,filmPosterCardClick:i.func,position:i.number,film:i.shape({watchUrl:i.string,year:i.number,firstGenre:i.string}),onlineViewOption:i.shape({isAvailableOnline:i.bool.isRequired,isPurchased:i.bool.isRequired,text:i.string,originalOfferText:i.string,subscriptionPurchaseTag:i.string,subscription:i.string,type:i.string}),onClickNameplate:i.func,onShowNameplate:i.func},e.exports=a(o(function(e,t){return{film:f(e,{type:"personFilmography",id:t.filmId}),onlineViewOption:u(e,t.filmId)}},{filmPosterCardClick:s,onShowNameplate:y,onClickNameplate:_}),l)(h)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(0).PureComponent,a=n(5).connect,i=n(33).compose,c=n(3),s=n(397).default,u=n(227).selectFilm,l=n(229),p=l.selectEntityFilmWatchingOptionOttData,f=l.showNameplateEffect,d=l.clickNameplateEffect,m=n(79).WATCH_ON_KP_BLOCK_NAME,y=n(501),_=function(e){function WatchOnlinePosterSnippetConnected(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePosterSnippetConnected);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(WatchOnlinePosterSnippetConnected)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onShowNameplate",function(){var e=t.props,n=e.position,r=e.filmId,o=e.onShowNameplate;e.ottData.nameplateData&&o({position:n,filmId:r,fromBlock:m})}),_defineProperty(_assertThisInitialized(t),"_onClickNameplate",function(){var e=t.props,n=e.position,r=e.filmId;(0,e.onClickNameplate)({position:n,filmId:r,fromBlock:m})}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePosterSnippetConnected,o),t=WatchOnlinePosterSnippetConnected,(n=[{key:"render",value:function(){var e=this.props.film;return r.createElement(s,_extends({watchUrl:e.watchUrl,truncateLines:2,appTheme:"kp1",handleShowNameplate:this._onShowNameplate,handleClickNameplate:this._onClickNameplate,size:"m"},this.props))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),WatchOnlinePosterSnippetConnected}();_.propTypes={film:c.object.isRequired,watchUrlQuery:c.string,ottData:c.shape({nameplateData:c.shape({text:c.string,type:c.string})}),position:c.number,filmId:c.number,onClickNameplate:c.func,onShowNameplate:c.func},e.exports=i(a(function(e,t){return{film:u(e,t.filmId),ottData:p(e,t.filmId)}},{onShowNameplate:f,onClickNameplate:d}),y)(_)},,,,,,,,,,function(e,t,n){"use strict";var r=n(0).createContext({appWidth:"default"});e.exports=r},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(115),a=n(4).lock("tooltip"),i=n(2),c=n(3),s=n(946);n(1205);var u=function(e){function Tooltip(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Tooltip),n=this,(t=!(r=_getPrototypeOf(Tooltip).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={},t._onWindowMouseOver=t._onWindowMouseOver.bind(_assertThisInitialized(t)),t._onWindowMouseOut=t._onWindowMouseOut.bind(_assertThisInitialized(t)),t._hide=t._hide.bind(_assertThisInitialized(t)),t._show=t._show.bind(_assertThisInitialized(t)),t}var t,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Tooltip,r.Component),t=Tooltip,(n=[{key:"componentDidMount",value:function(){window.addEventListener("mouseover",this._onWindowMouseOver),window.addEventListener("mouseout",this._onWindowMouseOut),window.addEventListener("click",this._onWindowMouseOut)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mouseover",this._onWindowMouseOver),window.removeEventListener("mouseout",this._onWindowMouseOut),window.removeEventListener("click",this._onWindowMouseOut)}},{key:"render",value:function(){var e=this,t=this.state,n=t.isOpen,o=t.positionCoordinates,c=this.state,u=c.text,l=void 0===u?"":u,p=c.className,f=void 0===p?"":p;return r.createElement(s,null,r.createElement("div",{className:i(a({open:n}),f,this.props.className),style:n?o:null,ref:function(t){return e.tooltip=t}},l.split(/\n/).map(function(e,t){return r.createElement("div",{key:"".concat(e,"-").concat(t)},e)})))}},{key:"_getPosition",value:function(e,t){if(!e||!t)return{};var n=t.top,r=t.left,o=t.width,a=t.height,i=t.offset,c=this.tooltip,s=c.offsetHeight,u=c.offsetWidth,l={};return"top"===e&&Object.assign(l,{top:Math.round(n+window.pageYOffset-s-i),left:Math.round(r+window.pageXOffset+o/2-u/2)}),"bottom"===e&&Object.assign(l,{top:Math.round(n+window.pageYOffset+a+i),left:Math.round(r+window.pageXOffset+o/2-u/2)}),"left"===e&&Object.assign(l,{top:Math.round(n+window.pageYOffset+a/2-s/2),left:Math.round(r+window.pageXOffset-o-i)}),"right"===e&&Object.assign(l,{top:Math.round(n+window.pageYOffset+a/2-s/2),left:Math.round(r+window.pageXOffset+o+i)}),l}},{key:"_onWindowMouseOver",value:function(e){if(e.target){var t=e.target.getAttribute("data-tooltip");if(t){var n=e.target.getAttribute("data-tooltip-position"),r=Number(e.target.getAttribute("data-tooltip-show-delay"))||150,a=Number(e.target.getAttribute("data-tooltip-hide-delay"))||90,i=Number(e.target.getAttribute("data-tooltip-offset"))||10,c=e.target.getAttribute("data-tooltip-class")||"";this._hideDebounced&&this._hideDebounced.cancel(),this._hideDebounced=o(this._hide,a),this._showDebounced=o(this._show,r);var s=e.target.getBoundingClientRect(),u={top:s.top,left:s.left,height:e.target.offsetHeight,width:e.target.offsetWidth,offset:i};this._showDebounced(t,u,n,{className:c}),this.state.isOpen&&this._showDebounced.flush()}}}},{key:"_onWindowMouseOut",value:function(){this._showDebounced&&this._showDebounced.cancel(),this._hideDebounced&&this._hideDebounced()}},{key:"_show",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"top",o=(arguments.length>3?arguments[3]:void 0).className;this.setState({isOpen:!0,text:e,className:o},function(){setTimeout(function(){n.setState({positionCoordinates:n._getPosition(r,t)})},0)})}},{key:"_hide",value:function(){this.setState({isOpen:!1})}}])&&_defineProperties(t.prototype,n),c&&_defineProperties(t,c),Tooltip}();u.propTypes={className:c.string},e.exports=u},function(e,t,n){"use strict";var r;function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(0),a=n(3),i=n(5).connect,c=n(59).closeModal,s=n(110).MODAL_TYPES,u=s.PASSPORT_CONNECTOR,l=s.REG_SUGGEST,p=s.WATCH_ONLINE_PAYMENT_FORM,f=s.USER_SUBSCRIPTION_CANCEL,d=s.USER_SUBSCRIPTION_CANCELED,m=s.USER_SUBSCRIPTION_CONFIRM_CANCEL,y=s.USER_SUBSCRIPTION_CONFIRM_SWITCH_BACK,_=s.USER_SUBSCRIPTION_SWITCHED_BACK,h=s.USER_SUBSCRIPTION_AVAILABLE_LIST,g=s.MDA_DOMIK,b=n(1152),E=n(1156),v=n(1158),O=n(1161),P=n(1163),S=n(1165),T=n(1166),k=n(1167),C=n(1169),w=n(1171),I=n(1172),A=n(27).MODAL_TYPE,x=n(18).ONLINE_VIEW_OPTIONS_PAYMENT_WIDGET_MODAL,R=n(1173).OnlineViewOptionsPaymentWidgetModal,N=(_defineProperty(r={},u,b),_defineProperty(r,l,E),_defineProperty(r,p,C),_defineProperty(r,f,v),_defineProperty(r,d,O),_defineProperty(r,m,P),_defineProperty(r,y,S),_defineProperty(r,_,T),_defineProperty(r,h,k),_defineProperty(r,g,w),_defineProperty(r,A,I),_defineProperty(r,x,R),r),j=function(e){var t=e.name,n=e.props,r=e.isOpen,a=e.close,i=t&&N[t];return i?o.createElement(i,_extends({},n,{isOpen:r,close:a})):null};j.propTypes={name:a.string,props:a.object,isOpen:a.bool,close:a.func},e.exports=i(function(e){return e.modal||{}},{close:c})(j)},function(e,t,n){e.exports=n(26)},function(e,t,n){},function(e,t,n){var r=n(0),o=n(4).lock("multi-auth".concat("-partial-component")),a=n(5).connect,i=n(3),c=n(62),s=c.selectSezamAccounts,u=c.selectPassportUserId,l=n(937),p=n(1248),f=n(1249).formatAccountPrimaryTitle,d=n(1250).formatAccountSecondaryTitle,m=n(1251).getAddedAccounts,y=n(35),_=y.logoutMultiAccountEffect,h=y.changeMultiAccountEffect,g=y.addMultiAccountEffect,b=n(74).getAvatarsHost;function MultiAuth(e){var t=e.passportUserId,n=e.accounts,a=e.onLogout,i=e.onSelectAccount,c=e.onAddAccount,s=e.avatarsHost,u=r.useMemo(function(){return m(n,t)},[n,t]);return r.createElement("div",{className:o()},r.createElement("ul",{className:o("accounts")},u.map(function(e){var t=e.uid,n=e.defaultEmail,c=e.displayName,u=c.name,m=c.default_avatar,y=c.social;return r.createElement("li",{key:t,className:o("account-link")},r.createElement(l,{primaryTitle:f(u,n,y&&y.provider),secondaryTitle:d(y&&y.provider),avatar:p(s,m),showLogoutButton:!0,onSelectAccount:function(){return i(t)},onLogout:function(){return a(t)}}))})),r.createElement("button",{className:o("add-account"),onClick:c},r.createElement("span",{className:o("add-account-button")}),r.createElement("span",{className:o("add-account-title")},"Добавить пользователя")))}n(1150),MultiAuth.propTypes={passportUserId:i.number,accounts:i.arrayOf(i.shape({uid:i.string,login:i.string,defaultEmail:i.string,displayName:i.shape({name:i.string,firstname:i.string,lastname:i.string,default_avatar:i.string,social:i.shape({profileId:i.string,provider:i.string})}),imageUrl:i.shape({x1:i.string}),attributes:i.shape({})})),avatarsHost:i.string.isRequired,onLogout:i.func.isRequired,onSelectAccount:i.func.isRequired,onAddAccount:i.func.isRequired},e.exports=a(function(e){return{accounts:s(e),passportUserId:u(e),avatarsHost:b(e)}},{onLogout:_,onSelectAccount:h,onAddAccount:g})(MultiAuth)},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="passport-connector-modal".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(5).connect,s=n(33).bindActionCreators,u=n(1254),l=n(19).getCurrentUserModel,p=n(149),f=n(346),d=n(186).closePassportConnector,m=n(31).passportConnector,y=n(1146).getYaPlusPrice,_=n(1255).getYaPlusTrialLink,h=n(62),g=h.getSezam,b=h.getSezamDefaultAccount,E=n(26),v=E.getShowMoreLink,O=E.getLinkYandexPromoCode,P=E.getLinkYandexPromoText,S=function(e){function PassportConnectorModal(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PassportConnectorModal);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(PassportConnectorModal)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_login",function(e){f.login(e),t.props.close({noReplaceState:!0})}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PassportConnectorModal,o.Component),t=PassportConnectorModal,(n=[{key:"render",value:function(){var e=this.props.yaPlusTrialLink;return o.createElement(p,{className:i(),isOpen:this.props.isOpen,onClose:this.props.close},this.props.hasUserData&&this.props.queryParams&&o.createElement(u,{params:this.props.queryParams,authUser:this.props.authUser,login:this._login,metrikaActions:this.props.metrikaActions,closePopup:this.props.close,sezam:this.props.sezam,buttonTryLink:e,yaPlusPrice:this.props.yaPlusPrice,sezamDefaultAccount:this.props.sezamDefaultAccount,showMoreLink:this.props.showMoreLink,linkYandexPromoCode:this.props.linkYandexPromoCode,linkYandexPromoText:this.props.linkYandexPromoText}))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),PassportConnectorModal}();S.propTypes={isOpen:a.bool,close:a.func,hasUserData:a.bool,queryParams:a.object,authUser:a.object,metrikaActions:a.objectOf(a.func),sezam:a.object,yaPlusTrialLink:a.string,yaPlusPrice:a.string,showMoreLink:a.string,linkYandexPromoCode:a.string,linkYandexPromoText:a.string,sezamDefaultAccount:a.object},e.exports=c(function(e){var t=l(e);return{authUser:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{img:{picture:t&&t.img}}),hasUserData:e.auth&&void 0!==e.auth.isAuthorized,sezam:g(e),yaPlusPrice:y(e),yaPlusTrialLink:_(e),sezamDefaultAccount:b(e),showMoreLink:v(e),linkYandexPromoCode:O(e),linkYandexPromoText:P(e)}},function(e){return{metrikaActions:s(m,e),close:s(d,e)}})(S)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="overlay".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(2);n(1155);var s=function(e){function Overlay(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Overlay),_possibleConstructorReturn(this,_getPrototypeOf(Overlay).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Overlay,o.Component),t=Overlay,(n=[{key:"render",value:function(){return o.createElement("div",{className:c(i(),this.props.className),onClick:this.props.onClick},this.props.children)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Overlay}();s.propTypes={onClick:a.func,className:a.string,children:a.node},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="reg-suggest-modal".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(5).connect,s=n(33).bindActionCreators,u=n(36),l=n(1256),p=n(245),f=p.REG_SUGGEST_COOKIE_NAME,d=p.REG_SUGGEST_COOKIE_EXPIRATION,m=n(149),y=n(31).regSuggest,_=n(186).openPassportConnector;n(1157);var h=function(e){function RegSuggestModal(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RegSuggestModal);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(RegSuggestModal)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onButtonClick",function(e){t.props.openPassportConnector({retPath:e,src:"yaplus-login"})}),_defineProperty(_assertThisInitialized(t),"_onClose",function(){u.set(f,!0,{expires:d}),t.props.close&&t.props.close()}),_defineProperty(_assertThisInitialized(t),"_onModalClose",function(){t._onClose(),t.props.metrikaActions.popupCloseClick()}),_defineProperty(_assertThisInitialized(t),"_onLaterClick",function(){t._onClose()}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RegSuggestModal,o.Component),t=RegSuggestModal,(n=[{key:"render",value:function(){return o.createElement(m,{className:i(),isOpen:this.props.isOpen},o.createElement(l,{userId:this.props.userId,onButtonClick:this._onButtonClick,onCloseClick:this._onLaterClick,metrikaActions:this.props.metrikaActions}))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),RegSuggestModal}();h.propTypes={isOpen:a.bool,openPassportConnector:a.func,close:a.func,metrikaActions:a.objectOf(a.func),userId:a.number},e.exports=c(function(e){return{userId:e.auth.userId}},function(e){return{metrikaActions:s(y,e),openPassportConnector:s(_,e)}})(h)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("user-subscription-cancel-modal"),c=n(19).getOttIntegration,s=n(149),u=n(487),l=n(108).getCancelModalText,p=n(78).switchCancellationTypeEffect;n(1160);var f=function(e){function UserSubscriptionCancelModal(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserSubscriptionCancelModal),_possibleConstructorReturn(this,_getPrototypeOf(UserSubscriptionCancelModal).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UserSubscriptionCancelModal,r.PureComponent),t=UserSubscriptionCancelModal,(n=[{key:"render",value:function(){var e=this.props,t=e.text,n=e.ottSubscription,o=e.onClose,a=e.onCancelClick;return r.createElement(s,{isOpen:!0,onClose:o},r.createElement(u,{onClose:o},r.createElement("div",{className:i()},r.createElement("div",{className:i("title"),dangerouslySetInnerHTML:{__html:t.title}}),r.createElement("div",{className:i("description"),dangerouslySetInnerHTML:{__html:t.description}}),n.stoppable&&r.createElement("div",{className:i("cancel-subscription"),onClick:a},t.cancelLink),!n.stoppable&&r.createElement("div",{className:i("footer")},r.createElement("div",{className:i("footer-description"),dangerouslySetInnerHTML:{__html:t.manualCancelDescription}}),r.createElement("div",{className:i("footer-phone")},r.createElement("nobr",{dangerouslySetInnerHTML:{__html:t.manualCancelPhone}}))))))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),UserSubscriptionCancelModal}();f.propTypes={text:o.object.isRequired,ottSubscription:o.object.isRequired,onClose:o.func.isRequired,onCancelClick:o.func.isRequired},e.exports=a(function(e){return{text:l(e),ottSubscription:c(e)}},{onCancelClick:p})(f)},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(5).connect,o=n(108).getCanceledModalText,a=n(938);e.exports=r(function(e){return{text:o(e)}})(a)},function(e,t,n){},function(e,t,n){"use strict";var r=n(5).connect,o=n(108).getConfirmCancelModalText,a=n(78).cancelSubscriptionEffect,i=n(939);e.exports=r(function(e){return{text:o(e)}},{onConfirmClick:a})(i)},function(e,t,n){},function(e,t,n){"use strict";var r=n(5).connect,o=n(108).selectConfirmSwitchBackModalText,a=n(78).switchBackSubscriptionEffect,i=n(939);e.exports=r(function(e){return{text:o(e)}},{onConfirmClick:a})(i)},function(e,t,n){"use strict";var r=n(5).connect,o=n(108).selectSwitchBackedModalText,a=n(938);e.exports=r(function(e){return{text:o(e)}})(a)},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("user-subscription-available-list-modal"),c=n(108).getAvailableSubscriptionsWithTexts,s=n(116).showPaymentFormEffect,u=n(149),l=n(487),p=n(46),f=n(31).watchOnline.purchaseBasicSubscriptionFromProfileStart,d=n(58).SUBSCRIPTION;n(1168);var m=function(e){return r.createElement(u,{isOpen:!0,onClose:e.onClose},r.createElement(l,{onClose:e.onClose},r.createElement("div",{className:i()},r.createElement("div",{className:i("title")},"Выбор тарифа"),r.createElement("div",{className:i("list")},e.availableSubscriptions.map(function(t){return r.createElement("div",{key:t.name,className:i("subscription-item")},r.createElement("div",{className:i("subscription-item-text",{nowrap:!0})},t.text),r.createElement(p,{size:"sl",theme:"blue",className:i("subscription-item-button"),onClick:function(){e.showPaymentFormEffect({paymentFormSource:"profile",billingProductId:t.billingProductId,subscription:t.subscription}),t.subscription===d.KP_BASIC&&e.purchaseBasicSubscriptionFromProfileStartMetrika()}},t.buttonText),t.note&&r.createElement("div",{className:i("subscription-item-note"),dangerouslySetInnerHTML:{__html:t.note}}))}),r.createElement("div",{className:i("subscription-item")},r.createElement("div",{className:i("subscription-item-text")},"Подписка"," ",r.createElement("b",{className:i("subscription-item-link",{nohover:!0})},"Амедиатеки"),", 599 ₽ в месяц",r.createElement("br",null),"Для оформления подписки напишите в службу поддержки:"," ",r.createElement("a",{className:i("subscription-item-link"),href:"mailto:video@kinopoisk.ru"},"video@kinopoisk.ru")))))))};m.propTypes={availableSubscriptions:o.array,showPaymentFormEffect:o.func.isRequired,onClose:o.func.isRequired,purchaseBasicSubscriptionFromProfileStartMetrika:o.func.isRequired},e.exports=a(function(e){return{availableSubscriptions:c(e)}},{showPaymentFormEffect:s,purchaseBasicSubscriptionFromProfileStartMetrika:f})(m)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("watch-online-payment-form"),c=n(28),s=n(65),u=n(150),l=n(58),p=l.CATEGORIES_SLUGS,f=l.SUBSCRIPTION,d=n(222).getUserAuth,m=n(35),y=m.openAuthPopupEffect,_=m.linkYandexAccount,h=n(91).togglePageScroll,g=n(26).getPageUrl,b=n(492).selectInitialUtm,E=n(31),v=E.watchOnline,O=v.purchaseStart,P=v.purchaseComplete,S=v.purchaseBasicSubscriptionComplete,T=E.yandexPlusOTT;n(1170);var k=function(e){function WatchOnlinePaymentForm(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePaymentForm);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=this,_defineProperty(_assertThisInitialized(t=!(o=(e=_getPrototypeOf(WatchOnlinePaymentForm)).call.apply(e,[this].concat(i)))||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_containerRef",r.createRef()),_defineProperty(_assertThisInitialized(t),"state",{playerMode:"default",containerHeight:{value:0,unit:"px"}}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePaymentForm,r.Component),t=WatchOnlinePaymentForm,(n=[{key:"componentDidMount",value:function(){var e=this,t=c.parse(location.toString()),n=s.parse(t.query),r="qa_serp"===n.from?"qa_serp":n.source;this.props.onWidgetCreate(this._containerRef.current,{params:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({isMobile:0,source:r},this.props.paymentData,{kp_page:this.props.pageUrl,kp_utm:this.props.initialUtm}),handlers:{close:function(){e.props.close(),e.props.togglePageScroll(!1)},"auth/OPEN_POPUP":function(){e.props.openAuthPopupEffect()},"auth/LINK_YANDEX_ACCOUNT":function(){e.props.linkYandexAccount({retPath:location.href})},"page/REDIRECT":function(t){e._redirectTo(t.value)},"change/VIEW_MODE":function(t){e.setState({playerMode:t.value}),e.props.togglePageScroll(!0)},"set/CONTAINER_HEIGHT":function(t){e.setState({containerHeight:{value:Number(t.value),unit:String(t.unit)||e.state.containerHeight.unit}})},"purchase/START":function(){e.props.purchaseStartMetrika(e.props.userAuth.isAuthorized)},"purchase/COMPLETE":function(t){e.props.purchaseCompleteMetrika({fromBlock:"FIXME",purchaseId:t.purchaseId,userId:t.uuid}),e.props.paymentData.subscription===f.KP_BASIC&&e.props.purchaseBasicSubscriptionCompleteMetrika()}}})}},{key:"render",value:function(){var e=this.state,t=e.playerMode,n=e.containerHeight;return r.createElement("main",{className:i()},r.createElement("div",{className:i("player-container"),style:{height:"".concat(n.value).concat(n.unit)}},r.createElement("div",{ref:this._containerRef,className:i("player",{mode:t})})))}},{key:"_redirectTo",value:function(e){var t;switch(e){case"user":t="/mykp/edit_main/";break;case"watch-films":case"watch-series":case"watch-kids":case"watch-subscription":t=u.getRouteUrl("index",p.SUBSCRIPTION);break;case"purchases":t=u.getRouteUrl("purchases")}t&&(document.location=t)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),WatchOnlinePaymentForm}();k.defaultProps={onWidgetCreate:u.paymentEmbed},k.propTypes={userAuth:o.object.isRequired,paymentData:o.object.isRequired,purchaseStartMetrika:o.func.isRequired,purchaseCompleteMetrika:o.func.isRequired,purchaseBasicSubscriptionCompleteMetrika:o.func.isRequired,forumDataMetrika:o.func.isRequired,yaPlusMetrika:o.func.isRequired,openAuthPopupEffect:o.func.isRequired,linkYandexAccount:o.func.isRequired,togglePageScroll:o.func.isRequired,close:o.func.isRequired,pageUrl:o.string,initialUtm:o.string,onWidgetCreate:o.func},e.exports=a(function(e){return{userAuth:d(e,e.auth.userId),pageUrl:g(e),initialUtm:b(e)}},{openAuthPopupEffect:y,linkYandexAccount:_,togglePageScroll:h,purchaseStartMetrika:O,purchaseCompleteMetrika:P,purchaseBasicSubscriptionCompleteMetrika:S,forumDataMetrika:T.sendForumDataMetrika,yaPlusMetrika:T.sendPlusMetrika})(k)},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("domik-modal".concat("-partial-component")),o=n(0),a=n(3),i=n(1257),c=n(149),s=function(e){function DomikModal(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DomikModal),_possibleConstructorReturn(this,_getPrototypeOf(DomikModal).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DomikModal,o.PureComponent),t=DomikModal,(n=[{key:"render",value:function(){return o.createElement(c,{className:r(),isOpen:this.props.isOpen,onClose:this.props.close},o.createElement(i,this.props))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DomikModal}();e.exports=s,s.propTypes={isOpen:a.bool,close:a.func}},function(e,t,n){var r=n(0),o=n(3),a=n(149),i=n(1175),c=function(e){var t=e.close;return r.createElement(a,{isOpen:!0,onClose:t},r.createElement(i,{onClose:t}))};c.propTypes={close:o.func.isRequired},e.exports=c},function(e,t,n){"use strict";n.r(t),n.d(t,"OnlineViewOptionsPaymentWidgetModal",function(){return l});var r=n(0),o=n.n(r),a=n(4),i=n.n(a),c=n(149),s=n.n(c),u=(n(1174),i.a.lock("online-view-options-widget-modal".concat("-partial-component"))),l=function(e){var t=e.close,n=e.paymentUrl;return o.a.createElement(s.a,{onClose:t,isOpen:!0,className:u()},o.a.createElement("iframe",{src:n,className:u("iframe")}))}},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(27).MODAL_TYPE_CONTENT_STATES,c=n(135),s=c.selectModalContentState,u=c.showModalContent,l=c.goBackModalContent,p=c.selectSubscriptionModalContentCancelConfig,f=c.cancelKinopoiskGoSubscriptionEffect,d=n(1177),m=n(1179),y=n(1190),_=n(1193),h=function(e){function ModalContent(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalContent);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return n=this,o=(e=_getPrototypeOf(ModalContent)).call.apply(e,[this].concat(c)),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_renderContent",function(){switch(t.props.contentState){case i.detail:return r.createElement(m,{onShowModal:t._handleShowModal});case i.cancel:return r.createElement(y,{onGoBack:t._handleGoBack,onCancelSubscription:t._handleCancelSubscription,onTryAgainCancelSubscription:t._handleRepeatCancelSubscription});case i.termsOfUse:return r.createElement(_,{onGoBack:t._handleGoBack});default:return null}}),_defineProperty(_assertThisInitialized(t),"_handleShowModal",function(e){return t.props.showModalContent({name:e})}),_defineProperty(_assertThisInitialized(t),"_handleGoBack",function(){return t.props.goBackModalContent()}),_defineProperty(_assertThisInitialized(t),"_handleCancelSubscription",function(){t.props.cancelKinopoiskGoSubscription()}),_defineProperty(_assertThisInitialized(t),"_handleRepeatCancelSubscription",function(){t.props.cancelKinopoiskGoSubscription()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ModalContent,r.PureComponent),t=ModalContent,(n=[{key:"render",value:function(){return r.createElement(d,{onClose:this.props.onClose},this._renderContent())}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ModalContent}();h.propTypes={onClose:o.func,contentState:o.string.isRequired,showModalContent:o.func.isRequired,goBackModalContent:o.func.isRequired,cancelKinopoiskGoSubscription:o.func.isRequired},h.defaultProps={onClose:function(){}},e.exports=a(function(e){return{contentState:s(e),modalContentCancelConfig:p(e)}},{showModalContent:u,goBackModalContent:l,cancelKinopoiskGoSubscription:f})(h)},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(4),i=n(1258),c="kinopoisk-go-modal-container".concat("-partial-component"),s=a.lock(c);n(1178);var u=function(e){function ModalContainer(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalContainer),_possibleConstructorReturn(this,_getPrototypeOf(ModalContainer).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ModalContainer,r.PureComponent),t=ModalContainer,(n=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.onClose;return r.createElement(i,{onClose:n,className:s()},t)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ModalContainer}();u.propTypes={onClose:o.func,children:o.node},u.defaultProps={onClose:function(){}},e.exports=u},function(e,t,n){},function(e,t,n){var r=n(5).connect,o=n(135),a=o.selectModalContentDetailConfig,i=o.clickOnComingSoonFilmEffect,c=n(1180);e.exports=r(function(e){return a(e)},{clickOnComingSoonFilm:i})(c)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(4),i=n(488),c=n(27).MODAL_TYPE_CONTENT_STATES,s=n(1181),u=n(568),l=n(1187),p="kinopoisk-go-detail-modal-content".concat("-partial-component"),f=a.lock(p);n(1189);var d=function(e){function DetailModalContent(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DetailModalContent);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(DetailModalContent)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleTermsOfUseClick",function(){return t.props.onShowModal(c.termsOfUse)}),_defineProperty(_assertThisInitialized(t),"_handleCancelClick",function(){return t.props.onShowModal(c.cancel)}),_defineProperty(_assertThisInitialized(t),"_handleFilmPosterSnippetClick",function(){return t.props.clickOnComingSoonFilm()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DetailModalContent,r.PureComponent),t=DetailModalContent,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.paymentInfo,o=e.watchOnline,a=e.footer,c=e.subTitle,p=e.ticketsInfo,d=e.prolongationInfo,m=e.comingSoonFilms;return r.createElement(u,{body:r.createElement(r.Fragment,null,r.createElement(l,null,t),r.createElement("h2",{className:f("subscription-name")},c),r.createElement("div",{className:f("info")},p),d&&r.createElement("div",{className:f("info",{type:"secondary"})},d),m&&r.createElement(s,_extends({className:f("section",{"coming-soon-films":!0}),onFilmPosterSnippetTitleClick:this._handleFilmPosterSnippetClick,onFilmPosterSnippetPosterClick:this._handleFilmPosterSnippetClick},m)),r.createElement("section",{className:f("section")},r.createElement("div",{className:f("watch-container")},r.createElement("div",null,r.createElement("h2",{className:f("sub-title")},o.title),r.createElement("p",{className:f("description")},o.text.map(function(e,t){return r.createElement(r.Fragment,{key:"watch-online-".concat(t)},e,r.createElement("br",null))})),r.createElement(i,{size:"xs",kind:"secondary",target:"_blank",href:o.bottomButton.url},o.bottomButton.text)),r.createElement("div",{className:f("watch-online-banner"),style:{backgroundImage:"url(".concat(o.image,")")}}))),n&&r.createElement("section",{className:f("section")},r.createElement("h2",{className:f("sub-title")},n.title),r.createElement("p",{className:f("description")},n.description),r.createElement(i,{size:"xs",kind:"link",className:f("cancel-subscription-button"),onClick:this._handleCancelClick},n.cancelSubscriptionButton))),footer:r.createElement(r.Fragment,null,r.createElement("p",{className:f("contacts")},a.support.title,":"," ",r.createElement("a",{href:"tel:".concat(a.support.phoneLink),className:f("phone-link")},a.support.phone),","," ",r.createElement("a",{href:"mailto:".concat(a.support.email),className:f("email-link")},a.support.email)),r.createElement(i,{size:"xs",kind:"link",className:f("terms-of-use-button"),onClick:this._handleTermsOfUseClick},a.termsOfUse))})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),DetailModalContent}();d.propTypes={onShowModal:o.func,title:o.string.isRequired,prolongationInfo:o.string,subTitle:o.string.isRequired,ticketsInfo:o.string.isRequired,watchOnline:o.shape({title:o.string.isRequired,text:o.arrayOf(o.string).isRequired,bottomButton:o.shape({text:o.string.isRequired,url:o.string.isRequired}),image:o.string.isRequired}),paymentInfo:o.shape({title:o.string.isRequired,description:o.string.isRequired,cancelSubscriptionButton:o.string.isRequired}),footer:o.shape({support:o.shape({title:o.string.isRequired,phone:o.string.isRequired,phoneLink:o.string.isRequired,email:o.string.isRequired}),termsOfUse:o.string.isRequired}).isRequired,comingSoonFilms:o.shape({title:o.string,moreButtonTitle:o.string}),clickOnComingSoonFilm:o.func},d.defaultProps={onShowModal:function(){},clickOnComingSoonFilm:function(){}},e.exports=d},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(5).connect,a=n(3),i=n(27),c=i.COMING_SOON_FILMS_LIST_ID,s=i.COMING_SOON_FILMS_LIST_LIMIT,u=n(949),l=n(1182),p=n(135).fetchComingSoonFilmsCollectionEffect,f=function(e){function ComingSoonFilmsCarouselContainer(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComingSoonFilmsCarouselContainer),_possibleConstructorReturn(this,_getPrototypeOf(ComingSoonFilmsCarouselContainer).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ComingSoonFilmsCarouselContainer,r.PureComponent),t=ComingSoonFilmsCarouselContainer,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.listId;(0,e.fetchInitialData)({listId:t,limit:e.limit})}},{key:"render",value:function(){var e=this.props,t=e.listId,n=(e.fetchInitialData,e.limit,e.onFilmPosterSnippetTitleClick),o=e.onFilmPosterSnippetPosterClick,a=_objectWithoutProperties(e,["listId","fetchInitialData","limit","onFilmPosterSnippetTitleClick","onFilmPosterSnippetPosterClick"]);return r.createElement(u,{listId:t},function(e){var t=e.isAvailable,i=e.items,c=e.isPending;return t&&r.createElement(l,_extends({},a,{filmsList:i,isPending:c,onTitleClick:n,onPosterClick:o}))})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ComingSoonFilmsCarouselContainer}();f.defaultProps={listId:c,limit:s,onFilmPosterSnippetTitleClick:function(){},onFilmPosterSnippetPosterClick:function(){}},f.propTypes={limit:a.number,fetchInitialData:a.func.isRequired,listId:a.string.isRequired,onFilmPosterSnippetTitleClick:a.func,onFilmPosterSnippetPosterClick:a.func},e.exports=o(null,{fetchInitialData:p})(f)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4),o=n(2),a=n(0),i=n(3),c=n(1183),s=n(948),u=n(491),l=n(574),p=n(573),f=n(1259);n(1185);var d="kinopoisk-go-coming-soon-films-section".concat("-partial-component"),m=r.lock(d),y=function(e){function ComingSoonFilmsSection(){var e,t,n,r,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ComingSoonFilmsSection);for(var l=arguments.length,p=new Array(l),f=0;f<l;f++)p[f]=arguments[f];return n=this,t=!(r=(e=_getPrototypeOf(ComingSoonFilmsSection)).call.apply(e,[this].concat(p)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,i=_assertThisInitialized(t),s=function(e){return a.createElement(u,_extends({},e,{theme:"compact",color:"white",autosize:!0,iconClassName:m("button-icon"),className:o(e.className,m("carousel-button",{direction:e.direction}))}))},(c="_renderButton")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ComingSoonFilmsSection,a.PureComponent),t=ComingSoonFilmsSection,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.filmsList,r=e.isPending,i=e.className;return a.createElement("section",{className:o(m(),i)},t&&a.createElement(c,{className:m("title")},t),a.createElement(s,{className:m("carousel"),buttons:!0,button:this._renderButton,itemClassName:m("carousel-item"),lazyLoadImg:!0},n&&this._renderItems(n),r&&this._renderStubs()))}},{key:"_renderItems",value:function(e){var t=this,n=this.props,r=n.moreButtonTitle,o=n.onTitleClick,i=n.onPosterClick,c=e.map(function(e){return a.createElement(f,{filmId:e,key:e},function(e){return e&&a.createElement(p,{truncateEllipsis:"...",truncateLines:2,onClick:t._onClick,caption:e.genres[0],snippetUrl:e.relativeUrl,film:e,imageWrapClassName:m("film-poster-image-wrap"),titleClassName:m("film-poster-title"),captionClassName:m("film-poster-caption"),onTitleClick:o,onPosterClick:i})})});return[].concat(_toConsumableArray(c),[a.createElement(l,{key:"more",text:r,url:"/comingsoon/",color:"white",target:"_blank",arrowButtonClassName:m("more-button")})])}},{key:"_renderStubs",value:function(){var e=this.props.pendingStubsLimit;return new Array(e).fill().map(function(e,t){return a.createElement(p,{key:"stub-".concat(t),stub:!0})})}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),ComingSoonFilmsSection}();y.defaultProps={moreButtonTitle:"Все фильмы",isPending:!1,pendingStubsLimit:4,onTitleClick:function(){},onPosterClick:function(){}},y.propTypes={title:i.string,className:i.string,filmsList:i.arrayOf(i.number),isPending:i.bool,pendingStubsLimit:i.number,moreButtonTitle:i.string,onTitleClick:i.func,onPosterClick:i.func},e.exports=y},function(e,t,n){var r=n(4).lock("kinopoisk-go-section-title".concat("-partial-component")),o=n(0),a=n(3),i=n(2);n(1184);var c=function(e){var t=e.children,n=e.className;return o.createElement("h2",{className:i(r(),n)},t)};c.propTypes={children:a.node,className:a.string},e.exports=c},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(4),o=n(2),a=n(0),i=n(3);n(1188);var c="kinopoisk-go-modal-title".concat("-partial-component"),s=r.lock(c),u=function(e){var t=e.className,n=_objectWithoutProperties(e,["className"]);return a.createElement("h1",_extends({},n,{className:o(s(),t)}))};u.propTypes={className:i.string},e.exports=u},function(e,t,n){},function(e,t,n){},function(e,t,n){var r=n(5).connect,o=n(135).selectSubscriptionModalContentCancelConfig,a=n(1191);e.exports=r(function(e){return o(e)})(a)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(4),i=n(342),c=n(27).LOAD_DATA_STATUS,s=n(488),u=n(568);n(1192);var l="kinopoisk-go-cancel-modal-content".concat("-partial-component"),p=a.lock(l),f=function(e){function CancelModalContent(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CancelModalContent);for(var a=arguments.length,l=new Array(a),f=0;f<a;f++)l[f]=arguments[f];return n=this,o=(e=_getPrototypeOf(CancelModalContent)).call.apply(e,[this].concat(l)),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_renderContent",function(){var e=t.props,n=e.title,o=e.onGoBack,a=e.status,i=e.cancelButton,l=e.onCancelSubscription,f=e.cancelSubscriptionButton;return r.createElement(u,{body:r.createElement(r.Fragment,null,r.createElement("h1",{className:p("second-title")},n.map(function(e,t){return r.createElement(r.Fragment,{key:"title_".concat(t)},e,r.createElement("br",null))})),r.createElement("div",{className:p("cancel-group-button")},r.createElement(s,{size:"xl",kind:"primary",onClick:l},f),r.createElement(s,{size:"xl",kind:"secondary",onClick:o},i)),a===c.pending&&t._renderLoading())})}),_defineProperty(_assertThisInitialized(t),"_renderLoading",function(){return r.createElement("div",{className:p("cancel-spinner-container")},r.createElement(i,{className:p("cancel-spinner"),size:"sm"}))}),_defineProperty(_assertThisInitialized(t),"_renderSuccessfulCancel",function(){var e=t.props.successfulCancel;return r.createElement(u,{bodyClassName:p("successful-cancel-content"),body:r.createElement(r.Fragment,null,r.createElement("h1",{className:p("second-title")},e.title),r.createElement("p",{className:p("successful-description")},e.description))})}),_defineProperty(_assertThisInitialized(t),"_renderFailedCancel",function(){var e=t.props,n=e.failedCancel,o=e.onTryAgainCancelSubscription;return r.createElement(u,{bodyClassName:p("failed-cancel-content"),body:r.createElement(r.Fragment,null,r.createElement("p",{className:p("error-title")},n.title),r.createElement("p",{className:p("error-description")},n.description),r.createElement(s,{size:"m",kind:"secondary",onClick:o},n.tryAgainButton))})}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CancelModalContent,r.PureComponent),t=CancelModalContent,(n=[{key:"render",value:function(){switch(this.props.status){case c.loaded:return this._renderSuccessfulCancel();case c.failed:return this._renderFailedCancel();default:return this._renderContent()}}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CancelModalContent}();f.propTypes={onGoBack:o.func,onCancelSubscription:o.func,onTryAgainCancelSubscription:o.func,status:o.oneOf(Object.values(c)),title:o.arrayOf(o.string).isRequired,cancelButton:o.string.isRequired,cancelSubscriptionButton:o.string.isRequired,successfulCancel:o.shape({title:o.string.isRequired,description:o.string.isRequired}),failedCancel:o.shape({title:o.string.isRequired,description:o.string.isRequired,tryAgainButton:o.string.isRequired}).isRequired},f.defaultProps={onGoBack:function(){},onCancelSubscription:function(){},onTryAgainCancelSubscription:function(){}},e.exports=f},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(5).connect,o=n(0),a=n(3),i=n(1194),c=n(135),s=c.fetchTermsOfUseEffect,u=c.selectSubscriptionProductId,l=c.selectTermsOfUseConditions,p=c.selectTermsOfUseLegalUrl,f=c.selectIsTermsOfUsePending,d=c.selectTermsOfUseConfig,m=function(e){function TermsOfUseModalContentContainer(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TermsOfUseModalContentContainer),_possibleConstructorReturn(this,_getPrototypeOf(TermsOfUseModalContentContainer).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TermsOfUseModalContentContainer,o.PureComponent),t=TermsOfUseModalContentContainer,(n=[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchInitialData)({productId:e.productId})}},{key:"render",value:function(){var e=this.props,t=(e.productId,e.fetchInitialData,e.config),n=_objectWithoutProperties(e,["productId","fetchInitialData","config"]);return o.createElement(i,_extends({},t,n))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),TermsOfUseModalContentContainer}();m.defaultProps={fetchInitialData:function(){},config:{}},m.propTypes={fetchInitialData:a.func,productId:a.string.isRequired,conditions:a.arrayOf(a.string),isPending:a.bool,legalUrl:a.string,config:a.shape({title:a.string,legalUrlTitle:a.string,legalUrlTarget:a.string})},e.exports=r(function(e){return{productId:u(e),conditions:l(e),legalUrl:p(e),isPending:f(e),config:d(e)}},{fetchInitialData:s})(m)},function(e,t,n){var r=n(0),o=n(3),a=n(4),i=n(342),c=n(568),s=n(1195),u=n(1197);n(1199);var l="kinopoisk-go-terms-of-use-modal-content".concat("-partial-component"),p=a.lock(l),f=function(e){var t=e.onGoBack,n=e.title,o=e.conditions,a=e.isPending,l=e.legalUrl,f=e.legalUrlTarget,d=e.legalUrlTitle;return r.createElement(c,{body:r.createElement(r.Fragment,null,r.createElement(s,{onClick:t,className:p("go-back-button")}),n&&r.createElement("h1",{className:p("title")},n),a?r.createElement("div",{className:p("spinner-container")},r.createElement(i,null)):r.createElement(r.Fragment,null,r.createElement(u,{items:o}),l&&r.createElement("a",{href:l,target:f,className:p("legal-link")},d)))})};f.propTypes={conditions:o.arrayOf(o.string),isPending:o.bool,onGoBack:o.func,title:o.string,legalUrl:o.string,legalUrlTitle:o.string,legalUrlTarget:o.oneOf(["_blank","_self","_parent","_top"])},f.defaultProps={onGoBack:function(){},conditions:[],isPending:!1,legalUrlTarget:"_blank"},e.exports=f},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(4),o=n(2),a=n(0),i=n(3);n(1196);var c="kinopoisk-go-go-back-button".concat("-partial-component"),s=r.lock(c),u=function(e){var t=e.className,n=_objectWithoutProperties(e,["className"]);return a.createElement("button",_extends({},n,{className:o(s(),t)}))};u.propTypes={className:i.string},e.exports=u},function(e,t,n){},function(e,t,n){var r=n(4),o=n(2),a=n(0),i=n(3);n(1198);var c="kinopoisk-go-terms-of-use-list".concat("-partial-component"),s=r.lock(c),u=function(e){var t=e.items;return a.createElement("ol",{className:o(s())},t.map(function(e,t){return a.createElement("li",{key:t,className:s("item")},e)}))};u.defaultProps={items:[]},u.propTypes={items:i.arrayOf(i.string)},e.exports=u},function(e,t,n){},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(385),c=n(1202).AdfoxPromoContainer,s=n(1260),u=n(1216),l=n(1217),p=n(1261),f=n(1247),d=n(1145),m=n(1218),y=n(1144),_=n(1219),h=_.RegSuggest,g=_.YandexSuggest,b=_.AdblockWarning,E=n(1220),v=n(1215).default,O=n(1213).default,P=n(1262).DidMountActionsDispatcherContainer,S=n(220).selectIsMdaHeaderHintShown,T=n(26).getOriginalUrl,k=n(140).selectIsWhiteEmailEnable,C=n(384).selectToasterHeight,w=n(74).getIsPartialComponent,I=n(388).setAbExperiments,A=n(35).loadUserEffect,x=n(61),R=x.mdaInitEffect,N=x.closeMdaHeaderHintEffect,j=x.mdaAccountRecoveryEffect,D=n(137).saveInitialUtmEffect,M=n(63).pageSetOriginalUrlEffect,L=n(186).openPassportConnector,F=n(139).loadAccountsRequest,U=n(349).onlineViewOptionsInitPaymentButtonEffect,W=n(1263).default,B=n(1201).MODULE_ID,G=n(1209).default,H=n(1221),Y=n(567),K=n(343),z=n(242),V=z.selectIsDragonAvailable,q=z.dragonInitEffect,X="partial-app".concat("-partial-component"),Q=n(4).lock(X);n(1210);var Z=function(e){function CommonStuff(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CommonStuff),n=this,r=_getPrototypeOf(CommonStuff).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleMdaRecoveryToppingClick",function(){t.props.dispatch(j())}),_defineProperty(_assertThisInitialized(t),"_handleMdaRecoveryToppingClose",function(){t.props.dispatch(N())}),_defineProperty(_assertThisInitialized(t),"_showPassportConnector",function(){/[?&]link-yandex(?:[=&].*)?$/.test(location.search)&&(t.setState({isPassportConnectorShown:!0}),t.props.dispatch(L()))}),t.state={isPassportConnectorShown:!1},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CommonStuff,r.PureComponent),t=CommonStuff,(n=[{key:"componentDidMount",value:function(){var e=this.props.pageOriginalUrl,t={};if(this.props.dispatch(R()),this.props.dispatch(q()),Array.isArray(window.abExperiments)){var n=window.abExperiments.reduce(function(e,t){return e[t.experimentName]=t,e},{});this.props.dispatch(I(n))}this.props.isPartialComponent&&this.props.dispatch(A()),this.props.dispatch(F()),this._showPassportConnector(),"/"===location.pathname&&(t.isMainPage=!0),Object.keys(t).length&&this.setState(t),void 0===e&&this.props.dispatch(M()),this.props.dispatch(D())}},{key:"render",value:function(){var e=this.props,t=e.adfoxSpecial,n=e.isDragonAvailable,o=e.isWhiteEmailEnable;return r.createElement(r.Fragment,null,this.props.isMdaHeaderHintShown?r.createElement(p,{onRecoverClick:this._handleMdaRecoveryToppingClick,onCloseClick:this._handleMdaRecoveryToppingClose}):null,r.createElement(d,null),o&&r.createElement(E,null),r.createElement(u,null),n?r.createElement(l,{shadowStageClassName:Q("dragon-shadow"),furyStageClassName:Q("dragon-fury")}):r.createElement(s,{params:t.params}),r.createElement(m,null,function(e){switch(e){case H.REG_SUGGEST:return r.createElement(h,null);case H.YANDEX_SUGGEST:return r.createElement(g,null);case H.ADBLOCK_WARNING:return r.createElement(b,null);default:return null}}),r.createElement("style",null,"\n                        .feature_promo,\n                        #ui_notice_container {\n                            bottom: ".concat(this.props.toasterHeight,"px;\n                        }\n\n                        .feature_promo {\n                            margin-bottom: 40px;\n                        }\n                    ")),r.createElement(f,null),r.createElement(c,null),r.createElement(W,{featureId:B},r.createElement(G,null)),r.createElement(y,null),r.createElement(v,null),r.createElement(O,{className:Q("preview-card")}),r.createElement(P,{actions:[U()]}))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CommonStuff}();Z.propTypes={dispatch:o.func,adfoxSpecial:o.object,isDragonAvailable:o.bool,isMdaHeaderHintShown:o.bool,isPartialComponent:o.bool,isWhiteEmailEnable:o.bool,pageOriginalUrl:o.string,toasterHeight:o.number},e.exports=i(K,Y,a(function(e){return{adfoxSpecial:e.page&&e.page.adfoxSpecial,isMdaHeaderHintShown:S(e),isWhiteEmailEnable:k(e),isDragonAvailable:V(e),isPartialComponent:w(e),pageOriginalUrl:T(e),toasterHeight:C(e)}}))(Z)},function(e,t,n){"use strict";n.r(t),n.d(t,"MODULE_ID",function(){return i}),n.d(t,"INTERNAL_YANDEX_REQUEST_HEADER_VALUE",function(){return c}),n.d(t,"YANDEX_BUTTERFLY_FORM_ID",function(){return s}),n.d(t,"YANDEX_BUTTERFLY_POSITION",function(){return r}),n.d(t,"YANDEX_BUTTERFLY_DOMAIN",function(){return o}),n.d(t,"YANDEX_BUTTERFLY_MODULES",function(){return a}),n.d(t,"YANDEX_BUTTERFLY_SRC",function(){return u});var r,o,a,i="yandexButterfly",c="1",s="10013539";!function(e){e.left="left",e.right="right"}(r||(r={})),function(e){e.yandex="yandex",e.yandexTeam="yandex-team"}(o||(o={})),function(e){e.forms="forms",e.ab="ab",e.skform="skform"}(a||(a={}));var u="https://yastatic.net/s3/frontend/butterfly/v0.133.0/butterfly.js"},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("promo".concat("-partial-component")),c=n(2),s=n(74).selectAdfox,u=n(572),l=n(384).selectToasterHeight,p=n(493).adfoxDestroyBannerRequestedEffect,f=n(109),d=f.PLACE_POPUP_ID,m=f.BANNER_PROMO_ID,y=n(1203).BOTTOM_POSITION;n(1204);var _=function(e){function AdfoxPromo(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AdfoxPromo);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(AdfoxPromo)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"state",{isVisible:!1,bannerRef:null}),_defineProperty(_assertThisInitialized(t),"handleOnRender",function(e){t.setState({isVisible:!0,bannerRef:e})}),_defineProperty(_assertThisInitialized(t),"handleCloseBanner",function(){t.props.onDestroyAdfox({adfoxContainer:t.state.bannerRef}),t.setState({isVisible:!1})}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AdfoxPromo,r.PureComponent),t=AdfoxPromo,(n=[{key:"render",value:function(){var e=this.state.isVisible,t=this.props,n=t.adfoxConfig,o=n.index,a=n.name,s=n.p1,l=n.p2,p=t.toasterHeight;return r.createElement("div",{className:c(i({visible:e})),style:{bottom:"".concat(y+p,"px")}},r.createElement(u,{key:o,name:a,index:o,params:{p1:s,p2:l},onRender:this.handleOnRender,rumPlaceId:d,rumBannerId:m}),r.createElement("span",{className:c(i("close")),onClick:this.handleCloseBanner}))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),AdfoxPromo}();_.propTypes={adfoxConfig:o.object.isRequired,toasterHeight:o.number.isRequired,onDestroyAdfox:o.func.isRequired},e.exports={AdfoxPromo:_,AdfoxPromoContainer:a(function(e){return{adfoxConfig:s(e).adfoxPromo,toasterHeight:l(e)}},{onDestroyAdfox:p})(_)}},function(e,t){e.exports={BOTTOM_POSITION:40}},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(952),i=n(570),c=n.n(i),s=o.a.lazy(function(){return n.e(95).then(n.bind(null,2110))});t.default=c()(function(e){return o.a.createElement(a.a,null,o.a.createElement(s,e))})},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),i=n(4),c=n.n(i),s=n(2),u=n.n(s),l=n(341),p=n.n(l),f=n(951);n(1206);function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var d=n(942).getImageSrcSet,m=n(1245).KinoVodFilmsGallery,y=c.a.lock("preview-card-film"),_=function(e){function PreviewCardFilm(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PreviewCardFilm),_possibleConstructorReturn(this,_getPrototypeOf(PreviewCardFilm).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PreviewCardFilm,o.a.Component),t=PreviewCardFilm,(n=[{key:"render",value:function(){return o.a.createElement("div",{className:y()},this._renderFilm())}},{key:"_renderFilm",value:function(){var e=this.props.film,t=(e.actors||[]).map(function(e){var t=e.name,n=e.originalName;return t||n}).filter(function(e){return Boolean(e)}).join(", ");return[o.a.createElement(p.a,_extends({key:"image"},d(e.posterBaseUrl,{mds:{x1:m.w60,x2:m.w120}}),{className:y("image")})),o.a.createElement("div",{key:"content",className:y("content")},o.a.createElement("header",{className:y("header")},o.a.createElement("div",{className:y("header-top")},o.a.createElement("div",{className:y("title")},e.displayTitle),o.a.createElement("div",{className:y("year")},e.year),this._renderRating(e.ratings)),this._renderFilmSubtitle(e)),o.a.createElement("footer",{className:y("footer")},t))]}},{key:"_renderFilmSubtitle",value:function(e){return e.directors.length?o.a.createElement("div",{className:y("subtitle")},e.directors[0].name||e.directors[0].originalName):null}},{key:"_renderRating",value:function(e){var t;return(null===(t=e.kp)||void 0===t?void 0:t.value)?o.a.createElement("div",{className:y("rating",{positive:e.kp.type===f.a.positive})},e.kp.value):null}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),PreviewCardFilm}(),h=n(224),g=Object(a.connect)(function(e,t){return{film:Object(h.getFilmModel)(e,t.modelId)}})(function(e){var t=e.film,n=e.className;return t?o.a.createElement(_,{className:n,film:t}):null});n(1207);function person_extends(){return(person_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _toConsumableArray(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var b=c.a.lock("preview-card-person"),E=function(e){var t,n=e.person,a=n.bestFilms,i=void 0===a?[]:a,c=n.bestSerials,s=void 0===c?[]:c,u=n.filmography,l=void 0===u?[]:u,f=Object(r.useMemo)(function(){return[].concat(_toConsumableArray(i),_toConsumableArray(s),_toConsumableArray(l)).map(function(e){return e.displayTitle}).filter(function(e){return Boolean(e)}).join(", ")},[i,s,l]);return o.a.createElement("div",{className:b()},o.a.createElement(p.a,person_extends({},null===(t=n.img)||void 0===t?void 0:t.photo,{className:b("image")})),o.a.createElement("div",{className:b("content")},o.a.createElement("div",{className:b("header")},o.a.createElement("div",{className:b("header-top")},o.a.createElement("div",{className:b("name")},n.displayName),n.roles.length&&o.a.createElement("div",{className:b("role")},n.roles[0]))),o.a.createElement("div",{className:b("footer")},f)))},v=n(387),O=Object(a.connect)(function(e,t){return{person:Object(v.getPersonModel)(e,t.modelId)}})(function(e){var t=e.person,n=e.className;return t?o.a.createElement(E,{className:n,person:t}):null}),P=n(26),S=(n(1208),c.a.lock("preview-card-container"));t.default=Object(a.connect)(function(e){return{previewCard:Object(P.getPreviewCard)(e)}})(function(e){var t=e.className,n=e.previewCard;if(!n)return null;var r={modelId:n.id,className:S("preview-card")},a=null;switch(n.type){case"film":a=o.a.createElement(g,r);break;case"name":a=o.a.createElement(O,r);break;default:return null}return o.a.createElement("div",{className:u()(S(),t)},a)})},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),i=n(4),c=n.n(i),s=n(136),u=n(953),l=n(225),p=n(19),f=n(3),d=n.n(f),m=n(2),y=n.n(m),_=n(569),h=n.n(_),g=n(223),b=(n(1211),c.a.lock("header-v4-user-bar")),E=function(e){var t=e.className,n=e.isAuthorized;return o.a.createElement("div",{className:y()(b(),t)},n&&o.a.createElement("a",{className:b("film-to-watch-button"),href:"/mykp/movies/"}),o.a.createElement(h.a,{className:b("user"),theme:g.THEMES.topline}))};E.propTypes={className:d.a.string,isAuthorized:d.a.bool};var v=E,O=Object(a.connect)(function(e){return{isAuthorized:Object(p.getIsAuthorized)(e)}})(v);n(1212);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=c.a.lock("header-v4");t.default=Object(a.connect)(function(e){return{initialSearchQuery:Object(u.selectSearchValue)(e),autoFocusSearchInput:Object(l.b)(e),isCustomLogoUrlEnabled:Object(l.c)(e)}})(function(e){return o.a.createElement(s.Header,_extends({},e,{userBar:o.a.createElement(O,{className:P("user-bar")})}))})},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(5),i=n(115),c=n.n(i),s=n(91),u=n(26),l=n(243),p=function(e){return Boolean(!(null===(t=window[l.KP1_NAMESPACE])||void 0===t?void 0:null===(n=t.config)||void 0===n?void 0:n.previewCardEnabled)||e);var t,n};function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function Listener(e){var t,n,r,o,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Listener),n=this,t=!(r=_getPrototypeOf(Listener).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),a="_onMouseOutDebounced",i=c()(t._onMouseOut.bind(_assertThisInitialized(t)),200),a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t._onMouseOver=t._onMouseOver.bind(_assertThisInitialized(t)),t._handleNodeMouseOver=c()(t._handleNodeMouseOver,200),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Listener,o.a.Component),t=Listener,(n=[{key:"componentDidMount",value:function(){this.props.disableFilmPreviewCard||(document.addEventListener("mouseover",this._onMouseOver,{passive:!0}),document.addEventListener("mouseout",this._onMouseOutDebounced,{passive:!0}))}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mouseover",this._onMouseOver),document.removeEventListener("mouseout",this._onMouseOutDebounced)}},{key:"render",value:function(){return null}},{key:"_onMouseOver",value:function(e){p(this.props.disableFilmPreviewCard)&&this._handleNodeMouseOver(e.target)}},{key:"_onMouseOut",value:function(){this.props.previewCard&&this.props.dispatch(Object(s.pageHidePreviewCardEffect)())}},{key:"_isHtmlAnchorElement",value:function(e){return e instanceof HTMLAnchorElement}},{key:"_handleNodeMouseOver",value:function(e){var t,n=e,r="A"===(null===(t=n)||void 0===t?void 0:t.tagName);if(!r)for(;n;){var o;if("A"===n.tagName){r=!0;break}n=null===(o=n)||void 0===o?void 0:o.parentNode}var a=/^\/(film|name)\/(?:[\w-]+-)?(\d+)(?:\/)?$/;if(r&&this._isHtmlAnchorElement(n)&&a.test(n.pathname)){this._onMouseOutDebounced.cancel();var i=n.pathname.match(a);if(!i)return;var c=_slicedToArray(i,3),u=c[1],l=c[2];this.props.dispatch(Object(s.pageShowPreviewCardEffect)({type:u,id:l}))}}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Listener}();t.default=Object(a.connect)(function(e){return{disableFilmPreviewCard:Object(u.getDisableFilmPreviewCard)(e),previewCard:Object(u.getPreviewCard)(e)}})(f)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(5).connect,a=n(3),i=n(221),c=n(941),s=n(37),u=s.LINKS,l=u.CONFIDENTIAL_URL,p=u.TERMS_OF_USE_URL,f=s.TYPES,d=f.DESKTOP,m=f.TOUCH,y=s.TEXT_PRESETS,_=s.CHANGE_EMAIL_ACTION_PROPERTY_NAME,h=n(243).KP_MAIN_NAMESPACE,g=n(384).selectToasterHeight,b=n(244),E=b.selectShouldChange,v=b.selectError,O=b.selectEmail,P=b.selectMode,S=b.selectIsLoading,T=b.selectTextPreset,k=b.whiteEmailErrorCleared,C=b.emailChangedNormalModeEffect,w=b.changeEmailPopupClosedEffect,I=b.changeEmailRequestedEffect,A=function(e){function ChangeEmail(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ChangeEmail);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,r=(e=_getPrototypeOf(ChangeEmail)).call.apply(e,[this].concat(s)),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(e){t.props.emailChangedNormalModeEffect({newEmail:e,retPath:location.href})},(a="_handleEmailSubmit")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ChangeEmail,r.PureComponent),t=ChangeEmail,(n=[{key:"componentDidMount",value:function(){this._setKp1ActionHandler()}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.email,o=e.error,a=e.isLoading,i=e.type,s=e.textPreset,u=e.toasterHeight,f=y[s]||y.DEFAULT,d=f.HINT,_=f.BUTTON_CAPTION,h=f.TITLE;return this.props.shouldChange&&r.createElement(c,_extends({mode:t,email:n,error:o,isLoading:a,type:i,titleText:h,buttonCaption:_,hintText:d,toasterHeight:u},{hideDisclaimer:i===m,onDialogClose:this.props.changeEmailPopupClosedEffect,onErrorCleared:this.props.whiteEmailErrorCleared,onEmailSubmit:this._handleEmailSubmit,confidentialUrl:l,termsOfUseUrl:p}))}},{key:"_setKp1ActionHandler",value:function(){i(window,"".concat(h,".").concat(_),this.props.changeEmailRequestedEffect)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ChangeEmail}();A.defaultProps={type:d},A.propTypes={shouldChange:a.bool,textPreset:a.string,email:a.string,error:a.object,mode:a.string,isLoading:a.bool,type:a.string.isRequired,toasterHeight:a.number.isRequired,changeEmailRequestedEffect:a.func.isRequired,whiteEmailErrorCleared:a.func.isRequired,changeEmailPopupClosedEffect:a.func.isRequired,emailChangedNormalModeEffect:a.func.isRequired},e.exports=o(function(e){return{shouldChange:E(e),email:O(e),error:v(e),mode:P(e),textPreset:T(e),isLoading:S(e),toasterHeight:g(e)}},{changeEmailRequestedEffect:I,whiteEmailErrorCleared:k,emailChangedNormalModeEffect:C,changeEmailPopupClosedEffect:w})(A)},function(e,t,n){var r=n(5).connect,o=n(242),a=o.selectAnimationType,i=o.selectAnimationStages,c=o.selectDragonTheme,s=o.dragonShadowViewedEffect,u=o.dragonFuryViewedEffect,l=o.dragonCloseEffect,p=o.dragonMetrikaShowEffect,f=o.dragonMetrikaClickEffect,d=o.selectIsDragonClosed,m=n(1224);e.exports=r(function(e){return{animationType:a(e),stages:i(e),dragonTheme:c(e),isClosed:d(e)}},{onShadowStageFinished:s,onFuryStageFinished:u,onClose:l,metrikaShowEffect:p,metrikaClickEffect:f})(m)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("toaster-container".concat("-partial-component")),c=n(384),s=c.selectToastType,u=c.selectIsToastOpened,l=c.selectToasterHeight,p=n(187).toasterHeightChanged;n(1234);var f=function(e){function ToasterContainer(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ToasterContainer);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=this,o=(e=_getPrototypeOf(ToasterContainer)).call.apply(e,[this].concat(i)),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"containerRef",r.createRef()),_defineProperty(_assertThisInitialized(t),"_handleChangeHeight",function(){var e=t.containerRef.current;if(e){var n=0;if(t.props.isOpened)n=e.getBoundingClientRect().height;n!==t.props.toasterHeight&&t.props.toasterHeightChanged({toasterHeight:n})}}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ToasterContainer,r.PureComponent),t=ToasterContainer,(n=[{key:"componentDidMount",value:function(){this._handleChangeHeight(),window.addEventListener("resize",this._handleChangeHeight)}},{key:"componentDidUpdate",value:function(e){e.type!==this.props.type&&this._handleChangeHeight()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.children;return r.createElement("div",{ref:this.containerRef,className:i()},n(t))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ToasterContainer}();f.propTypes={type:o.string,isOpened:o.bool,toasterHeight:o.number,children:o.func,toasterHeightChanged:o.func},f.defaultProps={type:null,isOpened:!1,children:function(){}},e.exports=a(function(e){return{type:s(e),isOpened:u(e),toasterHeight:l(e)}},{toasterHeightChanged:p})(f)},function(e,t,n){e.exports={RegSuggest:n(1235),YandexSuggest:n(1238),AdblockWarning:n(1241)}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(5).connect,a=n(3),i=n(221),c=n(941),s=n(37),u=s.AUTHORITY_ACTION_PROPERTY_NAME,l=s.LINKS,p=l.CONFIDENTIAL_URL,f=l.TERMS_OF_USE_URL,d=s.TYPES,m=d.DESKTOP,y=d.TOUCH,_=s.TEXT_PRESETS,h=n(243).KP_MAIN_NAMESPACE,g=n(384).selectToasterHeight,b=n(244),E=b.selectShouldConfirm,v=b.selectError,O=b.selectEmail,P=b.selectMode,S=b.selectIsLoading,T=b.selectTextPreset,k=b.whiteEmailConfirmRequestedEffect,C=b.whiteEmailConfirmPopupClosedEffect,w=b.emailChangedWhiteModeEffect,I=b.whiteEmailSetEmailWhiteEffect,A=b.whiteEmailErrorCleared,x=n(61).mdaAuthorityActionEffect,R=function(e){function WhiteEmailConfirm(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WhiteEmailConfirm);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,r=(e=_getPrototypeOf(WhiteEmailConfirm)).call.apply(e,[this].concat(s)),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(e){e===t.props.email?t.props.whiteEmailSetEmailWhiteEffect():t.props.emailChangedWhiteModeEffect({newEmail:e,retPath:location.href})},(a="_handleEmailSubmit")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WhiteEmailConfirm,r.PureComponent),t=WhiteEmailConfirm,(n=[{key:"componentDidMount",value:function(){this.props.whiteEmailConfirmRequestedEffect(),this._setAuthorityAction()}},{key:"render",value:function(){var e=this.props,t=e.mode,n=e.email,o=e.error,a=e.isLoading,i=e.type,s=e.textPreset,u=e.toasterHeight,l=_[s]||_.DEFAULT,d=l.HINT,m=l.BUTTON_CAPTION,h=l.TITLE;return this.props.shouldConfirm&&r.createElement(c,_extends({mode:t,email:n,error:o,isLoading:a,type:i,titleText:h,buttonCaption:m,hintText:d,toasterHeight:u},{hideDisclaimer:i===y,onDialogClose:this.props.whiteEmailConfirmPopupClosedEffect,onErrorCleared:this.props.whiteEmailErrorCleared,onEmailSubmit:this._handleEmailSubmit,confidentialUrl:p,termsOfUseUrl:f}))}},{key:"_setAuthorityAction",value:function(){i(window,"".concat(h,".").concat(u),this.props.mdaAuthorityActionEffect)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),WhiteEmailConfirm}();R.defaultProps={type:m},R.propTypes={whiteEmailConfirmRequestedEffect:a.func.isRequired,mdaAuthorityActionEffect:a.func.isRequired,whiteEmailConfirmPopupClosedEffect:a.func.isRequired,emailChangedWhiteModeEffect:a.func.isRequired,whiteEmailSetEmailWhiteEffect:a.func.isRequired,shouldConfirm:a.bool.isRequired,textPreset:a.string,email:a.string,error:a.object,mode:a.string,isLoading:a.bool,type:a.string.isRequired,toasterHeight:a.number,whiteEmailErrorCleared:a.func},e.exports=o(function(e){return{shouldConfirm:E(e),email:O(e),error:v(e),mode:P(e),textPreset:T(e),isLoading:S(e),toasterHeight:g(e)}},{whiteEmailConfirmRequestedEffect:k,whiteEmailConfirmPopupClosedEffect:C,mdaAuthorityActionEffect:x,emailChangedWhiteModeEffect:w,whiteEmailSetEmailWhiteEffect:I,whiteEmailErrorCleared:A})(R)},function(e,t,n){var r=n(1243),o=n(1244),a=n(347);e.exports={REG_SUGGEST:r.type,YANDEX_SUGGEST:o.type,ADBLOCK_WARNING:a.type}},function(e,t,n){"use strict";var r=n(16),o=n(496),a=o.getHistory,i=o.sendMessage,c=o.sendGreetingMessage;e.exports={getHistory:function(){return a()},sendMessage:function(e,t,n){return i(r,e,t,n)},sendGreetingMessage:function(e){return c(e)}}},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(1266),i=n(114),c=i.DRAGON_ANIMATION_STAGES,s=i.DRAGON_THEMES,u=i.DRAGON_ANIMATION_TYPES,l=n(1225),p=n(1232),f=function(e){function Dragon(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Dragon);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,t=!(r=(e=_getPrototypeOf(Dragon)).call.apply(e,[this].concat(s)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),a="state",i={stages:t.props.stages},a in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Dragon,r.PureComponent),t=Dragon,(n=[{key:"render",value:function(){var e=this,t=this.state.stages,n=this.props,o=n.metrikaShowEffect;return n.isClosed?null:r.createElement(a,{framesCount:t.length,onReadyToStart:o,render:function(n){var r=n.readyToStart,o=n.activeFrame,a=n.handleFrameLoaded,i=n.handleFrameFinished;return t.map(function(t,n){return e._renderStage({stageName:t,handleFrameLoaded:a,handleFrameFinished:i,isActive:r&&o===n})})}})}},{key:"_renderStage",value:function(e){var t=e.stageName,n=e.handleFrameLoaded,o=e.handleFrameFinished,a=e.isActive,i=this.props,s=i.shadowStageClassName,u=i.furyStageClassName,f=i.animationType,d=i.onShadowStageFinished,m=i.onFuryStageFinished,y=i.dragonTheme,_=i.onClose,h=i.metrikaClickEffect;switch(t){case c.SHADOW:return r.createElement(p,{key:t,className:s,onLoaded:n,onFinished:function(){o(),d()},isActive:a});case c.FURY:return r.createElement(l,{key:t,className:u,onLoaded:n,onFinished:function(){o(),m()},isActive:a,animationType:f,dragonTheme:y,onClose:_,onLinkClick:h});default:return null}}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Dragon}();f.defaultProps={stages:[],metrikaShowEffect:function(){},metrikaClickEffect:function(){},onShadowStageFinished:function(){},onFuryStageFinished:function(){},onClose:function(){},animationType:u.SPRITE,dragonTheme:s.DAY,isClosed:!1},f.propTypes={shadowStageClassName:o.string,furyStageClassName:o.string,metrikaShowEffect:o.func,metrikaClickEffect:o.func,onShadowStageFinished:o.func,onFuryStageFinished:o.func,onClose:o.func,animationType:o.oneOf(Object.values(u)),dragonTheme:o.oneOf(Object.values(s)),stages:o.array,isClosed:o.bool},e.exports=f},function(e,t,n){var r=n(5).connect,o=n(242),a=o.selectButtonText,i=o.selectLinkHref,c=n(1226);e.exports=r(function(e){return{buttonText:a(e),linkHref:i(e)}})(c)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="dragon-fury-stage".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=n(114),u=s.DRAGON_THEMES,l=s.DRAGON_ANIMATION_TYPES,p=n(1227),f=n(1229);n(1231);var d=function(e){function DragonFuryStage(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragonFuryStage);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(DragonFuryStage)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleClose",function(){t.props.onClose()}),_defineProperty(_assertThisInitialized(t),"_handleLinkClick",function(){t.props.onLinkClick()}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DragonFuryStage,i.PureComponent),t=DragonFuryStage,(n=[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.className,r=e.linkHref,c=e.linkTarget,s=e.buttonText;return i.createElement("div",{className:a(o({active:t}),n)},i.createElement("div",{className:o("inner")},r&&i.createElement("a",{href:r,target:c,className:o("link"),onClick:this._handleLinkClick}),i.createElement("button",{className:o("close-button"),onClick:this._handleClose}),i.createElement("div",{className:o("dragon-scene")},i.createElement("div",{className:o("coral")}),s&&i.createElement("button",{className:o("button",{active:t})},s),this._renderDragon())))}},{key:"_renderDragon",value:function(){var e=this.props,t=e.animationType,n=e.dragonTheme,r=e.onLoaded,a=e.onFinished,c=e.isActive;switch(t){case l.SPRITE:return i.createElement(p,{theme:n,className:o("dragon-sprite",{theme:n}),isActive:c,onLoaded:r,onFinished:a});case l.VIDEO:return i.createElement(f,{theme:n,className:o("dragon-video",{theme:n}),isActive:c,onLoaded:r,onFinished:a});default:return null}}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DragonFuryStage}();d.defaultProps={dragonTheme:u.DAY,animationType:l.SPRITE,isActive:!1,onClose:function(){},onLinkClick:function(){},onFinished:function(){}},d.propTypes={className:c.string,onLoaded:c.func,onFinished:c.func,onClose:c.func,onLinkClick:c.func,isActive:c.bool,animationType:c.oneOf(Object.values(l)),dragonTheme:c.oneOf(Object.values(u)),buttonText:c.string,linkHref:c.string,linkTarget:c.oneOf(["_blank","_self","_parent","_top"])},e.exports=d},function(e,t,n){var r="dragon-fury-stage-sprite-animation".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=n(947),u=n(114).DRAGON_THEMES;n(1228);var l=function(e){var t=e.theme,n=e.className,r=e.onLoaded,c=e.onFinished,u=e.isActive;return i.createElement(s,{className:a(o({active:u,theme:t}),n),onFrameLoaded:r,onFrameFinished:c})};l.defaultProps={theme:u.DAY,isActive:!1},l.propTypes={className:c.string,onLoaded:c.func,onFinished:c.func,isActive:c.bool,theme:c.oneOf(Object.values(u))},e.exports=l},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="dragon-fury-stage-video-animation".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=n(5).connect,u=n(114).DRAGON_THEMES,l=n(242).selectVideoStaticPath;n(1230);var p=function(e){function DragonFuryStageVideoAnimation(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DragonFuryStageVideoAnimation);for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return n=this,r=(e=_getPrototypeOf(DragonFuryStageVideoAnimation)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_elementRef",i.createRef()),_defineProperty(_assertThisInitialized(t),"_handleLoaded",function(){var e=t.props,n=e.onLoaded,r=e.isActive;n(),r&&t._handlePlay()}),_defineProperty(_assertThisInitialized(t),"_handleFinished",function(){t.props.onFinished()}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DragonFuryStageVideoAnimation,i.PureComponent),t=DragonFuryStageVideoAnimation,(n=[{key:"componentDidMount",value:function(){var e=this._elementRef.current;e&&(4===e.readyState?this._handleLoaded():e.addEventListener("loadeddata",this._handleLoaded),e.addEventListener("ended",this._handleFinished))}},{key:"componentDidUpdate",value:function(e){!e.isActive&&this.props.isActive&&this._handlePlay()}},{key:"componentWillUnmount",value:function(){var e=this._elementRef.current;e&&(e.removeEventListener("loadeddata",this._handleLoaded),e.removeEventListener("ended",this._handleFinished))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.theme,r=e.videoStaticPath;return i.createElement("div",{className:a(o(),t)},i.createElement("video",{className:o("video",{theme:n}),ref:this._elementRef,src:"".concat(r).concat(n,".webm"),muted:!0}))}},{key:"_handlePlay",value:function(){var e=this._elementRef.current;e&&e.play()}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DragonFuryStageVideoAnimation}();p.defaultProps={theme:u.DAY,isActive:!1,onFinished:function(){},onLoaded:function(){}},p.propTypes={className:c.string,onLoaded:c.func,onFinished:c.func,isActive:c.bool,theme:c.oneOf(Object.values(u)),videoStaticPath:c.string.isRequired},e.exports=s(function(e){return{videoStaticPath:l(e)}})(p)},function(e,t,n){},function(e,t,n){},function(e,t,n){var r="dragon-shadow-stage".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=n(947);n(1233);var u=function(e){var t=e.className,n=e.isActive,r=e.onLoaded,c=e.onFinished;return i.createElement(s,{className:a(o({active:n}),t),onFrameLoaded:r,onFrameFinished:c})};u.defaultProps={isActive:!1},u.propTypes={className:c.string,isActive:c.bool,onLoaded:c.func,onFinished:c.func},e.exports=u},function(e,t,n){},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(5).connect,a=n(3),i=n(4).lock("reg-suggest-toast".concat("-partial-component")),c=n(186).openPassportConnector,s=n(58).CATEGORIES_SLUGS,u=n(138).REG_SUGGEST_TOAST_POSTER,l=n(74).getBunkerNode,p=n(150),f=n(1236).closeRegSuggestEffect,d=n(187).closeToast,m=n(19).getIsAuthorized;n(1237);var y=p.getRouteUrl("index",s.SUBSCRIPTION),_=function(e){function RegSuggestToast(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RegSuggestToast);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(RegSuggestToast)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleCloseClick",function(){t.props.closeRegSuggestEffect(),t.props.onToastClose()}),_defineProperty(_assertThisInitialized(t),"_handleLinkClick",function(){return t.props.openPassportConnector({retPath:y,"welcome-screen":1,src:"yaplus-login"})}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RegSuggestToast,r.Component),t=RegSuggestToast,(n=[{key:"render",value:function(){return r.createElement("div",{className:i({theme:this.props.theme})},r.createElement("div",{className:i("close"),onClick:this._handleCloseClick}),r.createElement("div",{className:i("poster-thumb")},r.createElement("img",{className:i("poster-thumb-img"),alt:"Обложка фильма",src:this.props.poster})),r.createElement("p",{className:i("paragraph")},"У вас есть подписка Яндекс.Плюс ",r.createElement("span",{className:i("plus-badge")}),r.createElement("br",null),"Вы можете смотреть фильмы",r.createElement("br",null),"и сериалы бесплатно!"),r.createElement("a",{className:i("button"),onClick:this._handleLinkClick},"Связать аккаунты"))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),RegSuggestToast}();_.propTypes={poster:a.string,theme:a.string,openPassportConnector:a.func,closeRegSuggestEffect:a.func,onToastClose:a.func,isAuthorized:a.bool},_.defaultProps={poster:"https://st.kp.yandex.net/images/film_iphone/iphone360_1100779.jpg"},e.exports=o(function(e){return{poster:l(e,{nodeName:u}),isAuthorized:m(e)}},{openPassportConnector:c,closeRegSuggestEffect:f,onToastClose:d})(_)},function(e,t,n){"use strict";e.exports={CLOSE_REG_SUGGEST_TOAST_EFFECT:"passport-connector/CLOSE_REG_SUGGEST_TOAST_EFFECT",closeRegSuggestEffect:function(){return{type:"passport-connector/CLOSE_REG_SUGGEST_TOAST_EFFECT"}}}},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="yandex-suggest-toast".concat("-partial-component"),o=n(0),a=n(4).lock(r),i=n(3),c=n(5).connect,s=n(46),u=n(2),l=n(186).openWelcomeScreenSoftModeEffect,p=n(1239).closeYandexSuggestEffect,f=n(187).closeToast;n(1240);var d=function(e){function YandexSuggestToast(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,YandexSuggestToast);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(YandexSuggestToast)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleCloseClick",function(){t.props.closeYandexSuggestEffect(),t.props.onToastClose()}),_defineProperty(_assertThisInitialized(t),"_handleBindClick",function(){t.props.openWelcomeScreenSoftModeEffect(),t.props.onToastClose()}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(YandexSuggestToast,o.Component),t=YandexSuggestToast,(n=[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.className;return o.createElement("div",{className:u(a({theme:t}),n),ref:this.container},o.createElement("div",{className:a("close"),onClick:this._handleCloseClick}),o.createElement("div",{className:a("content")},"compact"!==t&&o.createElement("div",{className:a("image")}),o.createElement("div",{className:a("message-wrapper")},o.createElement("div",{className:a("message-title")},"Мы переходим на обязательную авторизацию через Яндекс"),o.createElement("div",{className:a("message-text")},"Привяжите аккаунт на Яндексе к аккаунту на КиноПоиске и получите промокод на бесплатный"," ",o.createElement("span",{className:a("nobr")},"онлайн-просмотр")," фильма.")),o.createElement(s,{size:"sl",className:a("button"),onClick:this._handleBindClick},"compact"===t?"Привязать Яндекс-аккаунт":"Привязать аккаунт")))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),YandexSuggestToast}();d.propTypes={onToastClose:i.func.isRequired,openWelcomeScreenSoftModeEffect:i.func,className:i.string,theme:i.string,closeYandexSuggestEffect:i.func},e.exports=c(null,{openWelcomeScreenSoftModeEffect:l,closeYandexSuggestEffect:p,onToastClose:f})(d),e.exports.YandexSuggestToast=d},function(e,t,n){"use strict";e.exports={CLOSE_YANDEX_SUGGEST_TOAST_EFFECT:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST_EFFECT",closeYandexSuggestEffect:function(){return{type:"passport-connector/CLOSE_YANDEX_SUGGEST_TOAST_EFFECT"}}}},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="adblock-warning".concat("-partial-component"),o=n(0),a=n(5).connect,i=n(4).lock(r),c=n(3),s=n(31).adblock,u=n(46),l=n(495).onAdblockWarningCloseEffect,p=n(187).closeToast;n(1242);var f=function(e){function AdblockWarning(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AdblockWarning);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(AdblockWarning)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleCloseClick",function(){t.props.onAdblockWarningCloseEffect(),t.props.onToastClose(),s.adblockDetector(["click","close"])}),_defineProperty(_assertThisInitialized(t),"_handleButtonClick",function(e){e.stopPropagation(),s.adblockDetector(["click","instructions"])}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AdblockWarning,o.Component),t=AdblockWarning,(n=[{key:"render",value:function(){return o.createElement("div",{className:i()},o.createElement("div",{className:i("close"),onClick:this._handleCloseClick}),o.createElement("div",{className:i("content")},o.createElement("span",{className:i("image")}),o.createElement("p",{className:i("text")},"Кажется, вы используете блокировщик рекламы. Вместе с рекламой он может отключать постеры, папки с фильмами и другие важные элементы. Добавьте КиноПоиск в исключения, и всё будет в порядке."),o.createElement(u,{size:"sl",target:"_blank",href:"https://yandex.ru/support/common/troubleshooting/yandex-in-adblock.html",className:i("button"),onClick:this._handleButtonClick},"Как это сделать")))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),AdblockWarning}();f.propTypes={onToastClose:c.func,onAdblockWarningCloseEffect:c.func},e.exports=a(null,{onAdblockWarningCloseEffect:l,onToastClose:p})(f)},function(e,t,n){},function(e,t){e.exports={type:"reg-suggest",hideCookie:"reg-suggest-toast",hideCookieExpires:86400,defaultPriority:4}},function(e,t){e.exports={type:"yandex-suggest",defaultPriority:3,hideCookie:"yandex-suggest-toast-hide",hideCookieExpires:86400}},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"KinoVodFilmsGallery",function(){return r}),function(e){e.w60="60x",e.w120="120x",e.w220h118="220x118",e.w280h178="280x178",e.w440h236="440x236",e.w560h356="280x178_2"}(r||(r={}))},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(61),c=i.mdaRouteChangeEffect,s=i.openAuthPopupEffect,u=function(e){function MdaRouterStub(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MdaRouterStub),_possibleConstructorReturn(this,_getPrototypeOf(MdaRouterStub).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MdaRouterStub,r.Component),t=MdaRouterStub,(n=[{key:"componentDidMount",value:function(){window.addEventListener("hashchange",this.props.mdaRouteChangeEffect),this.props.mdaRouteChangeEffect(),window.__mdaLogin=this.props.openAuthPopupEffect}},{key:"componentWillUnmount",value:function(){window.removeEventListener("hashchange",this.props.mdaRouteChangeEffect)}},{key:"render",value:function(){return null}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),MdaRouterStub}();u.propTypes={mdaRouteChangeEffect:o.func.isRequired,openAuthPopupEffect:o.func.isRequired},e.exports=a(null,{mdaRouteChangeEffect:c,openAuthPopupEffect:s})(u)},function(e,t,n){var r=n(1330).DEFAULT_AVATAR_PATH;e.exports=function(e,t){return t&&t!==r?"https://".concat(e,"/get-yapic/").concat(t,"/islands-200"):""}},function(e,t,n){"use strict";function formatAccountPrimaryTitle(e,t,n){return n||!t?e:t}n.r(t),n.d(t,"formatAccountPrimaryTitle",function(){return formatAccountPrimaryTitle})},function(e,t,n){"use strict";n.r(t),n.d(t,"formatAccountSecondaryTitle",function(){return formatAccountSecondaryTitle});var r=n(929),o=n.n(r);function formatAccountSecondaryTitle(e){return o.a[e]?o.a[e]:""}},function(e,t,n){"use strict";function getAddedAccounts(e,t){return e?e.filter(function(e){var n=e.uid;return Number(n)!==t}):[]}n.r(t),n.d(t,"getAddedAccounts",function(){return getAddedAccounts})},function(e,t,n){"use strict";var r;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=n(0),a=n(3),i=n(4).lock("mda-recovery-menu-item".concat("-partial-component")),c=n(64).MDA_USER_MENU_HINT_MODES;n(1331);var s=(_defineProperty(r={},c.recover,"Ваши оценки, рецензии и папки в безопасности — перенесите их в новый аккаунт, если пока не сделали этого."),_defineProperty(r,c.connectAnother,"Привязать другой аккаунт КиноПоиска"),r),u=function(e){var t=e.onClick,n=e.theme,r=e.appTheme,a=e.mode;return o.createElement("a",{className:i({theme:n,"app-theme":r}),onClick:t},o.createElement("span",{className:i("caption")},s[a]||s[c.recover]),o.createElement("span",{className:i("icon")}))};u.propTypes={onClick:a.func.isRequired,theme:a.oneOf(["desktop","touch"]),appTheme:a.oneOf(["light","dark"]),mode:a.oneOf(Object.values(c))},u.defaultProps={theme:"desktop",mode:c.recover},e.exports=u},function(e,t,n){"use strict";var r=n(0),o=n(4).lock("nameplate"),a=n(2),i=n(3),c=n(488);n(1176);var s=function(e){var t=e.type,n=e.text,i=e.className,s=e.buttonHref,u=e.price,l=e.nameplateItemClassName,p=e.nameplateButtonClassName,f=e.onClickNameplate;return r.createElement("object",{className:a(o(),i)},r.createElement("div",{className:a(o("item",{type:t}),l)},u),r.createElement(c,{kind:"primary",className:a(o("button",{type:t}),p),size:"xs",onClick:f,href:s},r.createElement("div",{className:o("icon-wrapper")},r.createElement("span",{className:o("icon",{type:t})}),r.createElement("span",{className:o("button-text")},n))))};s.propTypes={isHovered:i.bool,className:i.string,type:i.oneOf(["kp_basic","ya_plus","ya_premium","tickets","purchased","transaction"]),text:i.node,nameplateItemClassName:i.string,nameplateButtonClassName:i.string,price:i.node,buttonHref:i.string,onShowNameplate:i.func,onClickNameplate:i.func},e.exports=s},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(1383);var r=n(0),o=n(3),a=n(115),i=n(5).connect,c=n(36),s=n(64).COOKIE_USER_FROM_LOGIN,u=n(350),l=n(281),p=n(174),f=n(356).getLogger("PassportConnector"),d=n(263).setUserKpBindYandex,m=n(19).getAbExperiments,y=n(137).sendMetrikaParams,_=n(586),h=_.QUERY_PARAMS,g=_.THANK_YOU_UI_MODES,b=n(1384),E=b.AlreadyLinked,v=b.RegAndLinked,O=b.Linked,P=b.Login,S=b.OtherLinkedRebindable,T=b.OtherLinkedNonRebindable,k=b.OtherLinkedLegacy,C=b.Register,w=b.WelcomeScreen,I=b.YandexAuth,A=b.ThankYouUI,x=b.ThankYouUIWithCode,R=n(586),N=R.VALID,j=R.INVALID,D=R.NOT_VALIDATED;function addParams(e,t){var n=e;return Object.keys(t).forEach(function(e){var r=t[e];if(!n.includes(e)){var o=n.includes("?")?"&":"?";n="".concat(n).concat(o).concat(e,"=").concat(encodeURIComponent(r))}}),n.includes(h.LINK_YANDEX)||(n+="".concat(n.includes("?")?"&":"?").concat(h.LINK_YANDEX)),n}var M=function(e){function PassportConnector(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PassportConnector),n=this,o=_getPrototypeOf(PassportConnector).call(this,e),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_renderFormRegister",function(){return r.createElement(C,{onEmailInputChange:t._onEmailInputChange,onEmailNotificationsCheckboxClick:t._onEmailNotificationsCheckboxClick,onRegisterClick:t._onRegisterClick,email:t.state.email,avatar:t.state.avatar,emailNotificationsEnabled:t.state.emailNotificationsEnabled,emailValidationStatus:t.state.emailValidationStatus,metrikaActions:t.props.metrikaActions,registerPending:t.state.registerPending,registerFormError:t.state.registerFormError,isDomikPopupOpened:t.state.domikPopupOpened,isTouch:t.props.isTouch})}),_defineProperty(_assertThisInitialized(t),"_onAlreadyLinkedDoneClick",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";c.expire(s,{path:"/"}),location.assign(e)}),_defineProperty(_assertThisInitialized(t),"_onYandexUserClick",function(){t.props.sendMetrikaParams(["ykp_link",t.state.form,"yandex_user_click"])}),_defineProperty(_assertThisInitialized(t),"_onKpUserClick",function(){t.props.sendMetrikaParams(["ykp_link",t.state.form,"kp_user_click"])}),_defineProperty(_assertThisInitialized(t),"_onShowMoreLinkClick",function(){t.props.sendMetrikaParams(["ykp_link",t.state.form,"show_more_click"])}),_defineProperty(_assertThisInitialized(t),"_onNotNowClick",function(){t.props.closePopup?t.props.closePopup():location.assign(t.props.params.retPath||"/")}),_defineProperty(_assertThisInitialized(t),"_renderFormOtherLinked",function(){var e=t.state,n=e.otherRebindable,o=e.otherSupportTicketCreated;if(n)return t.props.metrikaActions.formShown("otherLinked-rebindable"),r.createElement(S,{sezamYandexAccount:t.state.sezamYandexAccount,otherAccount:t.state.otherAccount,metrikaActions:t.props.metrikaActions,onRebindClick:t._onRebindClick,closePopup:t.props.closePopup,retPath:t.props.params.retPath,yandexAuthFormError:t.state.yandexAuthFormError,isTouch:t.props.isTouch,isDomikPopupOpened:t.state.domikPopupOpened});if(o)return t.props.metrikaActions.formShown("otherLinked-non-rebindable"),r.createElement(T,{sezamYandexAccount:t.state.sezamYandexAccount,otherAccount:t.state.otherAccount,metrikaActions:t.props.metrikaActions,onRebindClick:t._onRebindClick,closePopup:t.props.closePopup,retPath:t.props.params.retPath,yandexAuthFormError:t.state.yandexAuthFormError,isDomikPopupOpened:t.state.domikPopupOpened,otherSupportTicketContactEmail:t.state.otherSupportTicketContactEmail,isTouch:t.props.isTouch});t.props.metrikaActions.formShown("otherLinked-legacy");var a=t.state.sezamYandexAccount;return a&&a.imageUrl?r.createElement(k,{yandexImageUrl:a.imageUrl.x1,isDomikPopupOpened:t.state.domikPopupOpened,displayName:t.state.sezamYandexAccount.displayName,otherAccount:t.state.otherAccount,isTouch:t.props.isTouch}):null}),_defineProperty(_assertThisInitialized(t),"_onRebindClick",function(){return t._flowLoginAndLink({taskId:t.props.params.tid,rebindExisting:!0})}),t.request=new p,t.state={email:"",emailNotificationsEnabled:!0,emailValidationStatus:N,prevPropsSezamDefaultAccount:t.props.sezamDefaultAccount},t._onEmailNotificationsCheckboxClick=t._onEmailNotificationsCheckboxClick.bind(_assertThisInitialized(t)),t._onEmailInputChange=t._onEmailInputChange.bind(_assertThisInitialized(t)),t._login=t._login.bind(_assertThisInitialized(t)),t._signInAndLink=t._signInAndLink.bind(_assertThisInitialized(t)),t._flowLoginAndLink=t._flowLoginAndLink.bind(_assertThisInitialized(t)),t._onLoginButtonClick=t._onLoginButtonClick.bind(_assertThisInitialized(t)),t._onYandexLoginButtonClick=t._onYandexLoginButtonClick.bind(_assertThisInitialized(t)),t._onYandexLinkedButtonClick=t._onYandexLinkedButtonClick.bind(_assertThisInitialized(t)),t._onDomikPopupClose=t._onDomikPopupClose.bind(_assertThisInitialized(t)),t._onBindButtonClick=t._onBindButtonClick.bind(_assertThisInitialized(t)),t._renderForm={register:t._renderFormRegister.bind(_assertThisInitialized(t)),login:t._renderFormLogin.bind(_assertThisInitialized(t)),alreadyLinked:t._renderFormAlreadyLinked.bind(_assertThisInitialized(t)),yandexAuth:t._renderFormYandexAuth.bind(_assertThisInitialized(t)),linked:t._renderFormLinked.bind(_assertThisInitialized(t)),regAndLinked:t._renderFormRegAndLinked.bind(_assertThisInitialized(t)),otherLinked:t._renderFormOtherLinked.bind(_assertThisInitialized(t)),welcomeScreen:t._renderFormWelcomeScreen.bind(_assertThisInitialized(t)),thankYouUI:t._renderFormThankYouUI.bind(_assertThisInitialized(t)),thankYouUIWithCode:t._renderFormThankYouUIWithCode.bind(_assertThisInitialized(t))},t._validateEmail=a(t._validateEmail,500),t._onRegisterClick=t._onRegisterClick.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PassportConnector,u),t=PassportConnector,o=[{key:"getDerivedStateFromProps",value:function(e,t){return e.sezamDefaultAccount!==t.prevPropsSezamDefaultAccount&&e.sezamDefaultAccount!==t.sezamYandexAccount?{prevPropsSezamDefaultAccount:e.sezamDefaultAccount,sezamYandexAccount:e.sezamDefaultAccount}:null}}],(n=[{key:"_initAfterDomLoaded",value:function(){var e=this;if(this.props.authUser&&this.props.authUser.id&&(this._userSocialRequest=this.request.get("/user/social/")),this.props.params.tid)this._flowLoginAndLink({taskId:this.props.params.tid,rebindExisting:!0});else{if(this.props.authUser&&this.props.authUser.id)return void this._userSocialRequest.then(function(t){var n=t.items.find(function(e){return"yandex"===e.type});n?e.props.params.reg?e.setState({socialYandexAccount:n,form:"regAndLinked"}):e.props.params["auth-yandex"]?window.location.href=e.props.params.retPath||"/":e.setState({socialYandexAccount:n,form:"alreadyLinked"}):e.props.params[h.THANK_YOU_UI]===g.DEFAULT?e.setState({form:"thankYouUI"}):e.props.params[h.THANK_YOU_UI]===g.CODE?e.setState({form:"thankYouUIWithCode"}):e.props.params[h.WELCOME_SCREEN]?e.setState({form:"welcomeScreen"}):e.setState({sezamYandexAccount:e.props.sezamDefaultAccount,form:"yandexAuth"})});var t=this.props.sezamDefaultAccount;this.setState({sezamYandexAccount:t,form:"login"})}}},{key:"componentDidMount",value:function(){this.broker=new l,this._initAfterDomLoaded(),window.Ya&&window.Ya.Kinopoisk&&window.Ya.Kinopoisk.auth&&window.Ya.Kinopoisk.auth.on("close",this._onDomikPopupClose)}},{key:"_onDomikPopupClose",value:function(){this.setState({domikPopupOpened:!1})}},{key:"componentWillUnmount",value:function(){this.props.metrikaActions.formClosed(this.state.form),window.Ya&&window.Ya.Kinopoisk&&window.Ya.Kinopoisk.auth&&window.Ya.Kinopoisk.auth.un("close",this._onDomikPopupClose),this.props.sendMetrikaParams(["ykp_link",this.state.form,"close"]),this.broker.destroy()}},{key:"_onEmailNotificationsCheckboxClick",value:function(e){this.setState({emailNotificationsEnabled:e.target.checked})}},{key:"_onEmailInputChange",value:function(e){var t=e.target.value;this.setState({email:t,emailValidationStatus:D,registerFormError:!1}),this._validateEmail(t)}},{key:"_validateEmail",value:function(e){var t=this;this.request.post("/user/validation-email/",{body:{email:e}}).then(function(e){return t.setState({emailValidationStatus:e.success?N:j})})}},{key:"_onRegisterClick",value:function(){var e=this;this.setState({registerFormPending:!0,registerFormError:!1}),this.request.post("/user/register-by-task-id/",{body:{taskId:this.state.taskId,email:this.state.email,emailNotificationsEnabled:this.state.emailNotificationsEnabled}}).then(function(){var e;document.location.href=addParams(document.location.href,(_defineProperty(e={},h.LINK_YANDEX,1),_defineProperty(e,"reg",1),e))}).catch(function(){return e.setState({registerFormError:!0},function(){e.props.metrikaActions.registerViaYandexError()})}).then(function(){return e.setState({registerFormPending:!1})})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.metrikaActions;if(this.state.form&&this.state.form!==t.form&&(this.props.sendMetrikaParams(["ykp_link",this.state.form,"show"]),"yandexAuth"===this.state.form)){var r=this.state.sezamYandexAccount;n.yandexAuthorized(Boolean(r))}this.props.params[h.THANK_YOU_UI]===g.DEFAULT?this.setState({form:"thankYouUI"}):this.props.params[h.THANK_YOU_UI]===g.CODE&&this.setState({form:"thankYouUIWithCode"})}},{key:"render",value:function(){var e=this._renderForm[this.state.form];return e?e():null}},{key:"_renderFormLogin",value:function(){var e=this.props.authUser,t=this.state,n=t.sezamYandexAccount,o=t.domikPopupOpened,a=t.loginFormPending,i=t.loginFormError;if(!n||!n.attributes)return null;var c=n.imageUrl;return r.createElement(P,{authUser:e,yandexImageUrl:c.x1,displayName:n.displayName,isDomikPopupOpened:o,loginFormPending:a,loginFormError:i,metrikaActions:this.props.metrikaActions,onYandexLoginButtonClick:this._onYandexLoginButtonClick,onLoginButtonClick:this._onLoginButtonClick,isTouch:this.props.isTouch})}},{key:"_onYandexLinkedButtonClick",value:function(){this.props.sendMetrikaParams(["ykp_link",this.state.form,"other_link_click"]),this.broker.passport("yandex").then(function(e){return"ok"!==e.status?null:location.reload()})}},{key:"_onYandexLoginButtonClick",value:function(){var e=this;this.setState({loginFormError:!1,loginFormPending:!0}),this.broker.start("yandex").then(function(t){return"ok"!==t.status?null:(e.setState({taskId:t.task_id}),e.request.post("/user/resolve-by-task-id/",{body:{taskId:t.task_id}}).then(function(){var e,t=document.location.href;t=addParams(t,(_defineProperty(e={},h.LINK_YANDEX,1),_defineProperty(e,h.AUTH_YANDEX,1),e)),document.location.href=t}).catch(function(t){t.body.user?(e.setState({form:"register",email:t.body.user.email,avatar:t.body.user.image}),e.props.metrikaActions.hasEmailOnReg(t.body.user.email)):(e.setState({loginFormError:!0}),e.props.metrikaActions.loginViaYandexError())}).then(function(){return e.setState({loginFormPending:!1})}))})}},{key:"_onLoginButtonClick",value:function(){this._login({"disable-force-ya":!0})}},{key:"_renderFormAlreadyLinked",value:function(){var e=this.props,t=e.authUser,n=e.params,o=this.state,a=o.socialYandexAccount,i=o.domikPopupOpened;return r.createElement(E,{authUser:t,params:n,socialYandexAccount:a,domikPopupOpened:i,isTouch:this.props.isTouch,onDoneClick:this._onAlreadyLinkedDoneClick})}},{key:"_renderFormWelcomeScreen",value:function(){var e=this.props.experiments,t=e["welcome-screen"]&&"hard"===e["welcome-screen"].backendValue;return r.createElement(w,{authUser:this.props.authUser,sezamYandexAccount:this.state.sezamYandexAccount,onYandexLoginButtonClick:this._onYandexLinkedButtonClick,isTouch:this.props.isTouch,showMoreLink:this.props.showMoreLink,linkYandexPromoCode:this.props.linkYandexPromoCode,linkYandexPromoText:this.props.linkYandexPromoText,onBindButtonClick:this._onBindButtonClick,isHardMode:t,onShowMoreLinkClick:this._onShowMoreLinkClick,onYandexUserClick:this._onYandexUserClick,onKpUserClick:this._onKpUserClick,src:this.props.params.src})}},{key:"_renderFormThankYouUI",value:function(){var e=this.props,t=e.authUser.img,n=void 0===t?{}:t,o=e.closePopup,a=e.buttonTryLink,i=e.yaPlusPrice,c=e.isTouch,s=e.params,u=this.state.sezamYandexAccount;return u&&u.imageUrl?r.createElement(A,{hasYaPlus:u.attributes&&u.attributes.has_plus,kpImageUrl:n.x1,yaImageUrl:u&&u.imageUrl.x1,closePopup:o,isTouch:c,params:s,buttonTryLink:a,yaPlusPrice:i}):null}},{key:"_renderFormThankYouUIWithCode",value:function(){var e=this.props,t=e.closePopup,n=e.buttonTryLink,o=e.isTouch,a=e.params,i=e.linkYandexPromoCode,c=e.linkYandexPromoText,s=this.state.sezamYandexAccount;return s&&s.imageUrl?r.createElement(x,{closePopup:t,isTouch:o,params:a,showMoreLink:this.props.showMoreLink,linkYandexPromoCode:i,linkYandexPromoText:c,buttonTryLink:n}):null}},{key:"_renderFormYandexAuth",value:function(){var e=this.state.sezamYandexAccount,t=(e=void 0===e?{}:e).imageUrl,n=e.displayName,o=this.props,a=o.authUser,i=o.metrikaActions;return r.createElement(I,{sezamDisplayName:n,yandexImageUrl:t&&t.x1,authUser:a,onSignIn:this._signInAndLink,onNotNowClick:this._onNotNowClick,isDomikPopupOpened:this.state.domikPopupOpened,metrikaActions:i,yandexAuthFormError:this.state.yandexAuthFormError,isTouch:this.props.isTouch})}},{key:"_signInAndLink",value:function(){f.log("_signInAndLink()"),this._flowLoginAndLink({taskId:this.props.params.tid,rebindExisting:!0})}},{key:"_onBindButtonClick",value:function(){this.props.setUserKpBindYandex(this.props.params),this.props.sendMetrikaParams(["ykp_link",this.state.form,"link_click"])}},{key:"_flowLoginAndLink",value:function(e){var t=this,n=e.taskId,r=e.rebindExisting,o=void 0!==r&&r;f.log("_flowLoginAndLink()",n,o),this.setState({yandexAuthFormError:!1}),(n?Promise.resolve(n):this.broker.start("yandex").then(function(e){if("ok"!==e.status)throw{status:"close"};return e.task_id})).then(function(e){return t.request.post("/user/social/",{body:{taskId:e,rebindExisting:o,createSupportTicketOnError:!0}})}).then(function(e){f.log("_flowLoginAndLink then reg:",t.props.params.reg),f.log("socialYandexAccount",e),t.setState({socialYandexAccount:e,form:t.props.params.reg?"regAndLinked":"linked"})}).catch(function(e){if(409===e.status){var n=e.body,r=n.user,o=n.rebindable,a=n.supportTicketContactEmail,i=n.supportTicketCreated;t.setState({otherAccount:r,otherRebindable:o,otherSupportTicketContactEmail:a,otherSupportTicketCreated:i,form:"otherLinked"})}else"close"!==e.status&&(t.setState({yandexAuthFormError:!0}),t.props.metrikaActions.yandexAuthBackendError())})}},{key:"_renderFormLinked",value:function(){var e=this.props,t=e.authUser,n=e.params,o=e.isTouch,a=e.closePopup,i=this.state.sezamYandexAccount;if(!i||!i.attributes)return null;var c=i.attributes,s=i.imageUrl;return r.createElement(O,{authUser:t,params:n,isTouch:o,closePopup:a,yandexImageUrl:s.x1,hasPlus:c.has_plus,isDomikPopupOpened:this.state.domikPopupOpened})}},{key:"_renderFormRegAndLinked",value:function(){var e=this.props,t=e.authUser,n=e.params,o=e.isTouch,a=e.closePopup,i=this.state,c=i.sezamYandexAccount,s=i.domikPopupOpened;return c&&c.attributes?r.createElement(v,{authUser:t,params:n,hasPlus:c.attributes.has_plus,isTouch:o,closePopup:a,isDomikPopupOpened:s}):null}},{key:"_login",value:function(e){this.props.login(e),this.setState({domikPopupOpened:!0})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PassportConnector}();M.defaultProps={sezam:{},sezamDefaultAccount:{},sendMetrikaParams:function(){}},M.propTypes={login:o.func.isRequired,params:o.object.isRequired,authUser:o.object,isTouch:o.bool,metrikaActions:o.objectOf(o.func),sendMetrikaParams:o.func},e.exports=i(function(e){return{experiments:m(e)}},{setUserKpBindYandex:d,sendMetrikaParams:y})(M),e.exports.PassportConnector=M},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(28),o=r.Url,a=r.parse,i=r.format,c=n(65),s=n(6).createSelector,u=n(62).getPlusHost,l=n(26),p=s([l.getPageUrl,l.getYaPlusSource,u],function(e,t,n){var r=new o,s=a("".concat(n,"/kinopoisk/"),!0),u=a(e).query,l=c.parse(u);return r.protocol=s.protocol,r.hostname=s.hostname,r.port=s.port,r.pathname=s.pathname,r.hash=s.hash,r.query=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({source:t,retpath:e,force_open:1,origin:"kinopoisk-subscription"},s.query,{},l),i(r)});e.exports={getYaPlusTrialLink:p}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(4).lock("reg-suggest"),i=n(46),c=n(150),s=n(58).CATEGORIES_SLUGS;n(1406);var u=c.getRouteUrl("index",s.SUBSCRIPTION),l=function(e){function RegSuggest(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,RegSuggest);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(RegSuggest)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onClick",function(){t.props.onButtonClick(u),t.props.metrikaActions.popupLinkButton()}),_defineProperty(_assertThisInitialized(t),"_onLaterClick",function(){t.props.onCloseClick(!0),t.props.metrikaActions.popupLaterButton()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(RegSuggest,r.Component),t=RegSuggest,(n=[{key:"componentDidMount",value:function(){this.props.metrikaActions.popupShown(this.props.userId,location.pathname)}},{key:"render",value:function(){return r.createElement("div",{className:a({mobile:this.props.mobile})},r.createElement("h2",{className:a("supheader")},"Вы в Плюсе — у вас есть подписка КиноПоиска"),r.createElement("p",{className:a("description")},"Включите Плюс, чтобы получить доступ к эксклюзивным премьерам и большому каталогу фильмов и сериалов."),r.createElement("div",{className:a("buttons")},r.createElement(i,{block:!0,theme:"blue",size:"l",onClick:this._onClick},"Включить Плюс"),r.createElement(i,{block:!0,theme:"transparent-white",size:"l",onClick:this._onLaterClick},"Не сейчас")))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),RegSuggest}();l.propTypes={onButtonClick:o.func.isRequired,onCloseClick:o.func.isRequired,metrikaActions:o.shape({popupShown:o.func.isRequired,popupLinkButton:o.func.isRequired,popupLaterButton:o.func.isRequired,popupCloseClick:o.func.isRequired}),userId:o.number,mobile:o.bool},e.exports=l},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("domik".concat("-partial-component")),o=n(0),a=n(5).connect,i=n(3),c=n(1407),s=n(1410),u=n(1412),l=n(1414),p=n(61),f=p.mdaLoginEffect,d=p.mdaRemindPasswordEffect,m=p.mdaSocialLoginEffect,y=p.mdaCaptchaRefreshEffect,_=p.mdaDomikCloseEffect,h=p.mdaDomikBindYandexAccountEffect,g=p.mdaDomikDoneEffect,b=n(220),E=b.selectDomikLoginCaptcha,v=b.selectDomikMode,O=b.selectDomikParams;n(1418);var P=n(278),S=P.MODES,T=P.MESSAGE_TYPES,k=function(e){function Domik(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Domik);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,r=(e=_getPrototypeOf(Domik)).call.apply(e,[this].concat(s)),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(){var e=t.props.captcha,n=void 0===e?{}:e;t.props.mdaCaptchaRefreshEffect(n.trackId)},(a="_handleCaptchaRefreshClick")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Domik,o.PureComponent),t=Domik,(n=[{key:"render",value:function(){return o.createElement("div",{className:r()},this._renderDomikMode())}},{key:"_renderDomikMode",value:function(){switch(this.props.mode){case S.LOGIN:return o.createElement(l,{onActionButtonClick:this.props.mdaLoginEffect,onRemindClick:this.props.mdaRemindPasswordEffect,onSocialNetworkButtonClick:this.props.mdaSocialLoginEffect,onCaptchaRefreshClick:this._handleCaptchaRefreshClick,captcha:this.props.captcha});case S.BIND:return o.createElement(c,_extends({onActionButtonClick:this.props.mdaDomikBindYandexAccountEffect},this.props.params));case S.MESSAGE_DONE:return o.createElement(s,{type:T.SUCCESS,title:"Спасибо, все получилось!",messageText:"Ваш старый аккаунт привязан к текущему аккаунту Яндекса, и все данные перенесены.",buttonText:"Отлично",onActionButtonClick:this.props.mdaDomikDoneEffect});case S.MESSAGE_ERROR:return o.createElement(s,{type:T.ALERT,title:"Что-то пошло не так",messageText:"Не удалось восстановить ваши данные. Пожалуйста, повторите попытку.",buttonText:"Попробовать еще раз",onActionButtonClick:this.props.mdaDomikDoneEffect});case S.MESSAGE_ACCOUNT_NOT_FOUND:return o.createElement(s,{type:T.ALERT,title:"Вы ошиблись в логине или пароле.",buttonText:"Закрыть",onActionButtonClick:this.props.mdaDomikDoneEffect});case S.MESSAGE_ACCOUNT_HACKED:return o.createElement(s,{type:T.ALERT,title:"Подозрение на взлом профиля",messageText:"".concat(this.props.params.name,", мы обнаружили потенциально подозрительную активность и заблокировали ваш профиль, чтобы вырвать его из рук злоумышленника. Чтобы разблокировать профиль, мы просим вас подтвердить, что вы владелец профиля, и сменить пароль с помощью ссылки, которую мы отправили вам на почту ").concat(this.props.params.email,"."),buttonText:"Закрыть",onActionButtonClick:this.props.mdaDomikDoneEffect});case S.RECOVERY:return o.createElement(u,_extends({onActionButtonClick:this.props.mdaDomikBindYandexAccountEffect},this.props.params));default:return null}}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Domik}();k.propTypes={mode:i.oneOf(Object.values(S)),mdaLoginEffect:i.func,mdaDomikBindYandexAccountEffect:i.func,mdaRemindPasswordEffect:i.func,mdaSocialLoginEffect:i.func,captcha:i.shape({url:i.string,trackId:i.string,captchaKey:i.string}),mdaCaptchaRefreshEffect:i.func,mdaDomikCloseEffect:i.func,mdaDomikDoneEffect:i.func,params:i.shape({name:i.string,email:i.string})},e.exports=a(function(e){return{captcha:E(e),mode:v(e),params:O(e)}},{mdaLoginEffect:f,mdaRemindPasswordEffect:d,mdaSocialLoginEffect:m,mdaCaptchaRefreshEffect:y,mdaDomikCloseEffect:_,mdaDomikBindYandexAccountEffect:h,mdaDomikDoneEffect:g})(k)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(2),i=n(4),c=n(1419),s=n(1420);n(1421);var u="modal-content-adaptive-close-button".concat("-partial-component"),l=i.lock(u),p=function(e){function ModalContentAdaptiveCloseButton(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalContentAdaptiveCloseButton);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return n=this,o=(e=_getPrototypeOf(ModalContentAdaptiveCloseButton)).call.apply(e,[this].concat(i)),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_modalContentRef",r.createRef()),_defineProperty(_assertThisInitialized(t),"state",{isFixedCloseButton:!1,closeButtonLeftOffset:0}),_defineProperty(_assertThisInitialized(t),"_handleChangeSize",function(){var e=t.props.fixedCloseButtonLeftOffset;if(t._modalContentRef.current){var n=t._modalContentRef.current;if(n.parentElement.clientHeight===window.innerHeight){var r=n.getBoundingClientRect().right+e;return t.setState({isFixedCloseButton:!0,closeButtonLeftOffset:r})}}return t.setState({isFixedCloseButton:!1})}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ModalContentAdaptiveCloseButton,r.PureComponent),t=ModalContentAdaptiveCloseButton,(n=[{key:"componentDidMount",value:function(){this._handleChangeSize()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.onClose,o=this.state,i=o.isFixedCloseButton,u=o.closeButtonLeftOffset;return r.createElement(c,{onResize:this._handleChangeSize},r.createElement(s,{element:this._modalContentRef,onMutate:this._handleChangeSize},r.createElement("div",{className:a(t,l()),ref:this._modalContentRef},r.createElement("div",{onClick:n,className:l("close-button",{fixed:i}),style:{left:i?u:"initial"}}),this.props.children)))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ModalContentAdaptiveCloseButton}();p.propTypes={onClose:o.func,children:o.any,className:o.string,fixedCloseButtonLeftOffset:o.number},p.defaultProps={onClose:function(){},fixedCloseButtonLeftOffset:40},e.exports=p},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(173).getFilmModel,c=function(e){function FilmProvider(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FilmProvider),_possibleConstructorReturn(this,_getPrototypeOf(FilmProvider).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FilmProvider,r.PureComponent),t=FilmProvider,(n=[{key:"render",value:function(){var e=this.props.film;return this.props.children(e)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),FilmProvider}();c.defaultProps={film:null},c.propTypes={film:o.object,children:o.func.isRequired},e.exports=a(function(e,t){var n=t.filmId;return{film:i(e,n)}})(c)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="".concat("foxad","-special-banner").concat("-partial-component"),o=n(0),a=n(350),i=n(572),c=n(36),s=n(1376),u=s.ADFOX_SPECIAL_BANNER_CLOSE,l=s.COOKIES_EXPIRES,p=n(109),f=p.PLACE_POPUP_ID,d=p.BANNER_SPECIAL_ID,m=n(3),y=n(4).lock(r),_=n(31).promoBanner;n(1377);var h=function(e){function AdfoxSpecialBanner(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AdfoxSpecialBanner),n=this,r=_getPrototypeOf(AdfoxSpecialBanner).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onCloseClick",function(e){e.stopPropagation(),c.set(u,1,{expires:l}),t.setState({visible:!1}),t.context.dispatch(_.adfoxSpecialClick("close"))}),_defineProperty(_assertThisInitialized(t),"_onAdfoxClick",function(){t.context.dispatch(_.adfoxSpecialClick("banner"))}),_defineProperty(_assertThisInitialized(t),"render",function(){if(!t.state.visible)return null;var e=t.props,n=e.params,r=e.theme,a=void 0===r?"desktop":r,c=n.index,s=n.p1,u=n.p2;return o.createElement("div",{className:t.getClassName({theme:a}),onClick:t._onAdfoxClick},o.createElement("span",{className:y("close"),onClick:t._onCloseClick}),n&&o.createElement(i,{name:"adfox",index:c,params:{p1:s,p2:u},rumPlaceId:f,rumBannerId:d}))}),t.state={visible:!1},t}var t,n,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AdfoxSpecialBanner,a),t=AdfoxSpecialBanner,(n=[{key:"getBlockName",value:function(){return r}},{key:"componentDidMount",value:function(){c.get(u)||this.setState({visible:!0})}}])&&_defineProperties(t.prototype,n),s&&_defineProperties(t,s),AdfoxSpecialBanner}();h.contextTypes={dispatch:m.func},h.propTypes={params:m.object},h.defaultProps={params:{index:"",p1:"",p2:""}},e.exports=h},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(1271),a=n(3),i=n(4).lock("mda-header-topping".concat("-partial-component"));n(1382);var c=function(e){function MdaHeaderTopping(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MdaHeaderTopping);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,t=!(r=(e=_getPrototypeOf(MdaHeaderTopping)).call.apply(e,[this].concat(s)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i={},(a="state")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MdaHeaderTopping,r.Component),t=MdaHeaderTopping,(n=[{key:"componentDidMount",value:function(){var e=this;this.setState({toppingPortal:document.createElement("div")},function(){document.body.insertBefore(e.state.toppingPortal,document.body.firstChild);var t=document.querySelector("html"),n=window.getComputedStyle(t).backgroundPositionY;if(e._initialBackgroundOffsetY=n,n){var r=e.state.toppingPortal&&e.state.toppingPortal.offsetHeight,o=parseInt(n,10)+r;t.style.backgroundPositionY="".concat(o,"px")}})}},{key:"componentWillUnmount",value:function(){this.state.toppingPortal.parentNode.removeChild(this.state.toppingPortal),document.querySelector("html").style.backgroundPositionY=this._initialBackgroundOffsetY}},{key:"render",value:function(){var e=this.props,t=e.onRecoverClick,n=e.onCloseClick,a=e.theme;return r.createElement(o,{container:this.state.toppingPortal},r.createElement("div",{className:i({theme:a})},r.createElement("div",{className:i("content")},r.createElement("p",{className:i("paragraph")},"Ваши оценки, рецензии и папки в безопасности — перенесите их в новый аккаунт, если пока не сделали этого."),r.createElement("div",{className:i("controls")},r.createElement("button",{className:i("link"),onClick:t},"Перенести"),r.createElement("button",{className:i("link"),onClick:n},"Уже перенёс"),r.createElement("a",{className:i("more"),href:"https://www.kinopoisk.ru/news/3338687/"},"Подробнее"))),r.createElement("button",{className:i("close"),onClick:n})))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),MdaHeaderTopping}();c.propTypes={onRecoverClick:a.func.isRequired,onCloseClick:a.func.isRequired,theme:a.oneOf(["desktop","touch"])},c.defaultProps={theme:"desktop"},e.exports=c},function(e,t,n){"use strict";n.r(t),n.d(t,"DidMountActionsDispatcherContainer",function(){return a});var r=n(0),o=n(5),a=function(e){var t=e.actions,n=Object(o.useDispatch)();return Object(r.useEffect)(function(){return t.forEach(n)},[]),null}},function(e,t,n){"use strict";n.r(t);var r=n(5),o=n(210);t.default=Object(r.connect)(function(e,t){var n=t.featureId;return{isFeatureEnabled:Object(o.selectIsFeatureEnabled)(e,{featureId:n})}})(function(e){var t=e.isFeatureEnabled,n=e.children;return t?n:null})},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog".concat("-partial-component");n(1320),n(1321);var o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(36),u=n(957),l=n(1322),p=n(1327),f=n(228).DEADPOOL_DIALOG_CLOSE,d=function(e){function DeadpoolDialog(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialog),n=this,(t=!(r=_getPrototypeOf(DeadpoolDialog).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._switchToClosed=t._switchToClosed.bind(_assertThisInitialized(t)),t._switchToTeaser=t._switchToTeaser.bind(_assertThisInitialized(t)),t._switchToMessenger=t._switchToMessenger.bind(_assertThisInitialized(t)),t.state={status:"closed"},t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialog,o.Component),t=DeadpoolDialog,(n=[{key:"componentDidMount",value:function(){s.get(f)||(this.setState({status:this.props.forceStatus||"teaser"}),this.context.dispatch(this.props.getHistory()))}},{key:"render",value:function(){var e=this.state.status,t=this.props,n=t.appTheme,r=t.className,a={"app-theme":n,status:e};return o.createElement("div",{className:c(i(a),r)},o.createElement(p,{className:i("teaser"),appTheme:n,onCloseClick:this._switchToClosed,onOpenClick:this._switchToMessenger,shouldShow:"teaser"===e,metrikaActions:this.props.metrikaActions}),o.createElement(l,{className:i("messenger"),appTheme:n,messages:this.props.messages,sendMessage:this.props.sendMessage,sendGreetingMessage:this.props.sendGreetingMessage,onHideClick:this._switchToTeaser,shouldShow:"messenger"===e,metrikaActions:this.props.metrikaActions}),this._renderAwaps())}},{key:"_renderAwaps",value:function(){return"closed"===this.state.status?null:o.createElement("img",{className:i("awaps"),src:"https://awaps.yandex.ru/0/c2/TLZuSw11mBxNobY4Vjb4KWb7OdWz8u9VCsDwzpZQs4ERUAWTNeTbLyXke4Yjw02VkS8FQujYZI4PqdENZlAW.gif?random=",alt:"awaps"})}},{key:"_switchToClosed",value:function(){s.set(f,1,{expires:1/0}),this.setState({status:"closed"})}},{key:"_switchToTeaser",value:function(){var e=(this.props.scrollActions||{}).enableScroll;this.setState({status:"teaser"}),e&&this.context.dispatch(e())}},{key:"_switchToMessenger",value:function(){var e=(this.props.scrollActions||{}).disableScroll;this.setState({status:"messenger"}),e&&this.context.dispatch(e(i("page")))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialog}();d.propTypes={appTheme:a.oneOf(["desktop","touch"]),forceStatus:a.oneOf(["closed","teaser","messenger"]),messages:u.propTypes.messages,sendMessage:u.propTypes.sendMessage,sendGreetingMessage:u.propTypes.sendGreetingMessage,getHistory:a.func,metrikaActions:a.object,scrollActions:a.shape({disableScroll:a.func,enableScroll:a.func}),className:a.string},d.defaultProps={metrikaActions:{}},d.contextTypes={dispatch:a.func},e.exports=d},function(e,t){var n=/^(?=.{1,254}$)(?=.{1,64}@)(")?[-!#$%&'*+/0-9=?A-ZА-ЯЁ^_`a-zа-яё{|}~]+(\.[-!#$%&'*+/0-9=?A-ZА-ЯЁ^_`a-zа-яё{|}~]+)*\1@[A-ZА-ЯЁa-zа-яё0-9]([A-ZА-ЯЁa-zа-яё0-9-]{0,61}[A-ZА-ЯЁa-zа-яё0-9])?(\.[A-ZА-ЯЁa-zа-яё0-9]([A-ZА-ЯЁa-zа-яё0-9-]{0,61}[A-ZА-ЯЁa-zа-яё0-9])?)*$/;e.exports=function(e){return n.test(e)}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=function(e){function SpriteAnimationContainer(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SpriteAnimationContainer);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(SpriteAnimationContainer)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"loadedFramesCount",0),_defineProperty(_assertThisInitialized(t),"state",{readyToStart:!1,activeFrame:0}),_defineProperty(_assertThisInitialized(t),"_getIsReadyToStart",function(){return t.loadedFramesCount>=t.props.framesCount&&"complete"===document.readyState}),_defineProperty(_assertThisInitialized(t),"_updateReadyToStartState",function(){t._getIsReadyToStart()&&t.setState({readyToStart:!0})}),_defineProperty(_assertThisInitialized(t),"_handleFrameLoaded",function(){++t.loadedFramesCount,t._updateReadyToStartState()}),_defineProperty(_assertThisInitialized(t),"_handleFrameFinished",function(){var e=t.state.activeFrame,n=t.props,r=n.framesCount,o=n.onFinished,a=e+1;a<r?t.setState({activeFrame:a}):o()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SpriteAnimationContainer,r.PureComponent),t=SpriteAnimationContainer,(n=[{key:"componentDidMount",value:function(){"complete"===document.readyState?this._updateReadyToStartState():document.addEventListener("readystatechange",this._updateReadyToStartState)}},{key:"componentDidUpdate",value:function(e,t){!t.readyToStart&&this.state.readyToStart&&this.props.onReadyToStart()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("readystatechange",this._updateReadyToStartState)}},{key:"render",value:function(){var e=this.state,t=e.activeFrame,n=e.readyToStart;return this.props.render({activeFrame:t,readyToStart:n,handleFrameLoaded:this._handleFrameLoaded,handleFrameFinished:this._handleFrameFinished})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),SpriteAnimationContainer}();a.defaultProps={framesCount:0,onReadyToStart:function(){},onFinished:function(){}},a.propTypes={render:o.func.isRequired,framesCount:o.number.isRequired,onFinished:o.func,onReadyToStart:o.func},e.exports=a},,,,function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(0),o=n(3),a=n(940).Link,i=n(28),c=n(392),s=function(e){var t=e.href,n=e.children,o=e.state,s=(e.isRouterLink,_objectWithoutProperties(e,["href","children","state","isRouterLink"])),u=r.useMemo(function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},c(i.parse(t),["pathname","hash","search"]),{state:o})});return r.createElement(a,_extends({},s,{to:u}),n)};s.propTypes={href:o.string,children:o.node,state:o.object,isRouterLink:o.bool},e.exports=s},function(e,t,n){var r=n(51).createPortal,o=n(3),a=function(e){var t=e.container,n=e.children;return t?r(n,t):null};a.propTypes={children:o.node,container:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],a=t[1],i=t[2];return r[a]?window&&window.HTMLElement?o.instanceOf(window.HTMLElement).apply(void 0,t):new Error("Invalid prop `".concat(a,"`` supplied to `").concat(i,"`, expected HTMLElement or null. Validation failed.")):null}},e.exports=a},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(4).lock("content-loader".concat("-partial-component")),i=n(2),c=n(342);n(1272);var s=function(e){function ContentLoader(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ContentLoader),_possibleConstructorReturn(this,_getPrototypeOf(ContentLoader).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ContentLoader,r.Component),t=ContentLoader,(n=[{key:"render",value:function(){var e=this.props,t=e.isContentLoadPending,n=e.alignSpinner,o=e.behind,s={};n&&(s["align-spinner"]=n);var u=this.props.children;return!o&&t&&(u=null),r.createElement("div",{className:i(a({pending:t}),this.props.className)},t?r.createElement("div",{className:a("overlay",s)},r.createElement(c,{size:"m"})):null,u)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ContentLoader}();s.propTypes={isContentLoadPending:o.bool,alignSpinner:o.string,behind:o.bool,className:o.string,children:o.node},s.defaultProps={behind:!0},e.exports=s},,,,,,,,function(e,t,n){var r=n(944),o=n(569);e.exports={HeaderUser:r,HeaderUserConnected:o}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(2),i=n(4).lock("kp-logo".concat("-partial-component")),c=n(1283);n(1284);var s=function(e){function KpLogo(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,KpLogo),_possibleConstructorReturn(this,_getPrototypeOf(KpLogo).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(KpLogo,r.Component),t=KpLogo,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.fill;return r.createElement(c,{fill:n,className:a(t,i())})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),KpLogo}();s.defaultProps={theme:"default",fill:"#fff"},s.propTypes={theme:o.oneOf(["default","darken","orange"]),className:o.string,fill:o.string},e.exports=s},function(e,t,n){var r=n(0);function Logo(e){return r.createElement("svg",e,r.createElement("g",{id:"Symbols",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},r.createElement("g",{id:"logo/night"},r.createElement("path",{d:"M8.05380032,13.2035998 L6.61200027,13.2035998 L6.61200027,21 L0.204000092,21 L0.204000092,0.974999428 L6.61200027,0.974999428 L6.61200027,8.26409964 L8.18730032,8.26409964 L11.7117004,0.974999428 L18.2265006,0.974999428 L13.6875005,10.3466997 L18.9207006,21 L11.8719004,21 L8.05380032,13.2035998 Z M29.9211009,13.6841998 L29.5473009,13.6841998 L25.4889008,17.2352999 L25.4889008,21 L19.3479006,21 L19.3479006,4.97999954 L25.4889008,4.97999954 L25.4889008,11.0141997 L26.0229008,11.0141997 L29.9211009,7.59659962 L29.9211009,4.97999954 L36.0621011,4.97999954 L36.0621011,21 L29.9211009,21 L29.9211009,13.6841998 Z M48.5043015,15.3395998 L44.3391014,15.3395998 L44.3391014,21 L38.1981012,21 L38.1981012,4.97999954 L44.3391014,4.97999954 L44.3391014,10.4267997 L48.5043015,10.4267997 L48.5043015,4.97999954 L54.6453016,4.97999954 L54.6453016,21 L48.5043015,21 L48.5043015,15.3395998 Z M64.7913019,4.68629953 C65.8949075,4.68629953 66.9183973,4.85539785 67.861802,5.19359955 C68.8052068,5.53180125 69.6195486,6.0479961 70.3048521,6.74219959 C70.9901555,7.43640308 71.5286002,8.30414443 71.9202021,9.34544967 C72.3118041,10.3867549 72.5076022,11.6015928 72.5076022,12.9899998 C72.5076022,14.3962068 72.3118041,15.6199446 71.9202021,16.6612499 C71.5286002,17.7025551 70.9901555,18.5658465 70.3048521,19.25115 C69.6195486,19.9364534 68.8096567,20.4481983 67.875152,20.7864 C66.9406473,21.1246017 65.9305074,21.2937 64.8447019,21.2937 L64.0170019,21.2937 C62.8777962,21.2937 61.8276067,21.1246017 60.8664018,20.7864 C59.905197,20.4481983 59.0775052,19.9364534 58.3833018,19.25115 C57.6890983,18.5658465 57.1462037,17.7025551 56.7546017,16.6612499 C56.3629997,15.6199446 56.1672017,14.3962068 56.1672017,12.9899998 C56.1672017,11.6015928 56.3629997,10.3867549 56.7546017,9.34544967 C57.1462037,8.30414443 57.6846483,7.43640308 58.3699518,6.74219959 C59.0552552,6.0479961 59.8695971,5.53180125 60.8130018,5.19359955 C61.7564066,4.85539785 62.7887963,4.68629953 63.9102019,4.68629953 L64.7913019,4.68629953 Z M64.4442019,16.1672999 C65.1206053,16.1672999 65.6679499,15.8958526 66.086252,15.3529498 C66.5045541,14.8100471 66.713702,14.022405 66.713702,12.9899998 C66.713702,11.9575946 66.5045541,11.1699524 66.086252,10.6270497 C65.6679499,10.084147 65.1206053,9.81269968 64.4442019,9.81269968 L64.2306019,9.81269968 C63.5185983,9.81269968 62.9579039,10.084147 62.5485019,10.6270497 C62.1390998,11.1699524 61.9344019,11.9575946 61.9344019,12.9899998 C61.9344019,14.022405 62.1390998,14.8100471 62.5485019,15.3529498 C62.9579039,15.8958526 63.5185983,16.1672999 64.2306019,16.1672999 L64.4442019,16.1672999 Z M73.7625022,0.974999428 L90.8505027,0.974999428 L90.8505027,21 L84.4425025,21 L84.4425025,6.18149958 L80.1705024,6.18149958 L80.1705024,21 L73.7625022,21 L73.7625022,0.974999428 Z M100.729503,4.68629953 C101.833109,4.68629953 102.856598,4.85539785 103.800003,5.19359955 C104.743408,5.53180125 105.55775,6.0479961 106.243053,6.74219959 C106.928357,7.43640308 107.466801,8.30414443 107.858403,9.34544967 C108.250005,10.3867549 108.445803,11.6015928 108.445803,12.9899998 C108.445803,14.3962068 108.250005,15.6199446 107.858403,16.6612499 C107.466801,17.7025551 106.928357,18.5658465 106.243053,19.25115 C105.55775,19.9364534 104.747858,20.4481983 103.813353,20.7864 C102.878848,21.1246017 101.868708,21.2937 100.782903,21.2937 L99.9552029,21.2937 C98.8159972,21.2937 97.7658077,21.1246017 96.8046029,20.7864 C95.843398,20.4481983 95.0157063,19.9364534 94.3215028,19.25115 C93.6272993,18.5658465 93.0844047,17.7025551 92.6928027,16.6612499 C92.3012008,15.6199446 92.1054027,14.3962068 92.1054027,12.9899998 C92.1054027,11.6015928 92.3012008,10.3867549 92.6928027,9.34544967 C93.0844047,8.30414443 93.6228493,7.43640308 94.3081528,6.74219959 C94.9934562,6.0479961 95.8077981,5.53180125 96.7512029,5.19359955 C97.6946076,4.85539785 98.7269973,4.68629953 99.8484029,4.68629953 L100.729503,4.68629953 Z M100.382403,16.1672999 C101.058806,16.1672999 101.606151,15.8958526 102.024453,15.3529498 C102.442755,14.8100471 102.651903,14.022405 102.651903,12.9899998 C102.651903,11.9575946 102.442755,11.1699524 102.024453,10.6270497 C101.606151,10.084147 101.058806,9.81269968 100.382403,9.81269968 L100.168803,9.81269968 C99.4567994,9.81269968 98.896105,10.084147 98.4867029,10.6270497 C98.0773008,11.1699524 97.8726029,11.9575946 97.8726029,12.9899998 C97.8726029,14.022405 98.0773008,14.8100471 98.4867029,15.3529498 C98.896105,15.8958526 99.4567994,16.1672999 100.168803,16.1672999 L100.382403,16.1672999 Z M120.540904,13.6841998 L120.167104,13.6841998 L116.108703,17.2352999 L116.108703,21 L109.967703,21 L109.967703,4.97999954 L116.108703,4.97999954 L116.108703,11.0141997 L116.642703,11.0141997 L120.540904,7.59659962 L120.540904,4.97999954 L126.681904,4.97999954 L126.681904,21 L120.540904,21 L120.540904,13.6841998 Z M144.651004,13.8176998 C144.597604,15.1349064 144.366206,16.2651951 143.956804,17.2085999 C143.547402,18.1520046 143.004508,18.9307469 142.328104,19.54485 C141.651701,20.158953 140.859609,20.6083986 139.951804,20.8932 C139.044,21.1780014 138.056109,21.3204 136.988104,21.3204 L136.160404,21.3204 C135.021198,21.3204 133.966559,21.1468517 132.996454,20.79975 C132.026349,20.4526482 131.189757,19.9320034 130.486654,19.2377999 C129.78355,18.5435965 129.236206,17.6758551 128.844604,16.6345499 C128.453002,15.5932446 128.266104,14.3784068 128.283904,12.9899998 C128.301704,11.6015928 128.506402,10.3867549 128.898004,9.34544967 C129.289606,8.30414443 129.82805,7.43640308 130.513354,6.74219959 C131.198657,6.0479961 132.012999,5.52735129 132.956404,5.18024955 C133.899809,4.8331478 134.932198,4.65959953 136.053604,4.65959953 L136.934704,4.65959953 C137.984909,4.65959953 138.968349,4.80644807 139.885054,5.10014955 C140.801759,5.39385102 141.602751,5.84329654 142.288054,6.44849958 C142.973358,7.05370263 143.525152,7.80574513 143.943454,8.70464965 C144.361756,9.60355417 144.597604,10.6492937 144.651004,11.8418997 L138.803704,11.8418997 C138.714704,11.1654963 138.469956,10.6582014 138.069454,10.3199997 C137.668952,9.98179799 137.175007,9.81269968 136.587604,9.81269968 L136.347304,9.81269968 C135.6531,9.81269968 135.101306,10.084147 134.691904,10.6270497 C134.282502,11.1699524 134.077804,11.9575946 134.077804,12.9899998 C134.077804,14.022405 134.282502,14.8100471 134.691904,15.3529498 C135.101306,15.8958526 135.6531,16.1672999 136.347304,16.1672999 L136.587604,16.1672999 C137.210607,16.1672999 137.726802,15.9670519 138.136204,15.5665498 C138.545606,15.1660478 138.777004,14.5831036 138.830404,13.8176998 L144.651004,13.8176998 Z M153.381904,14.9657998 L152.260504,14.9657998 L152.260504,21 L146.119504,21 L146.119504,4.97999954 L152.260504,4.97999954 L152.260504,10.5869997 L153.408604,10.5869997 L156.505805,4.97999954 L162.887105,4.97999954 L158.775305,12.4292998 L163.688105,21 L156.852905,21 L153.381904,14.9657998 Z",id:"logo",fill:"#FFFFFF"}))))}Logo.defaultProps={width:"164px",height:"22px",viewBox:"0 0 164 22",version:"1.1"},e.exports=Logo,Logo.default=Logo},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("close".concat("-partial-component")),o=n(0),a=n(3),i=n(2);n(1286);var c=function(e){function Close(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Close),_possibleConstructorReturn(this,_getPrototypeOf(Close).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Close,o.Component),t=Close,(n=[{key:"render",value:function(){return o.createElement("i",{className:i(r(),this.props.className),onClick:this.props.onClick})}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Close}();c.propTypes={onClick:a.func,className:a.string},e.exports=c},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(4).lock("promo-badge"),a=n(2),i=n(3);n(1336);var c=function(e){var t=e.theme,n=e.className,i=e.caption;return r.createElement("div",{className:a(o({theme:t}),n)},i)};c.defaultProps={theme:"default",caption:"Промо"},c.propTypes={theme:i.string,className:i.string,caption:i.string},e.exports=c},,,,,,,,,,,,,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a="film-rating-bar".concat("-partial-component"),i=n(117);n(1334);var c=function(e){function FilmRatingBar(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FilmRatingBar),_possibleConstructorReturn(this,_getPrototypeOf(FilmRatingBar).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FilmRatingBar,i),t=FilmRatingBar,(n=[{key:"getBlockName",value:function(){return a}},{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.ratings,o=e.ratings.currentRating,a=e.mods,i=o&&n[o];return i&&i.ready&&i.value?r.createElement("div",{className:this.getClassName(Object.assign({},_defineProperty({},o,i.type),a)),dangerouslySetInnerHTML:{__html:i.value}}):r.createElement("div",{className:this.getClassName(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},_defineProperty({},o,"empty"),{},a))},t)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),FilmRatingBar}();c.propTypes={ratings:o.shape({expectations:o.shape({value:o.string,count:o.number,ready:o.bool,type:o.string}),kp:o.shape({value:o.string,count:o.number,ready:o.bool,type:o.string})}).isRequired},c.defaultProps={placeholder:"—"},e.exports=c},function(e,t,n){"use strict";var r={kinopoisk:"kp",imdb:"imdb",expectations:"expectations"},o=[["rating",r.kinopoisk],["kp",r.kinopoisk],["kinopoisk",r.kinopoisk],["expectations",r.expectations],["imdb",r.imdb]],a=[r.kinopoisk,r.expectations];e.exports={RATING_TYPES:{UNKNOWN:"unknown",POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral"},RATING_SOURCE:r,POSSIBLE_CURRENT_RATING:a,MINIMUM_RATING_VOTE_COUNT:50,RATING_NEGATIVE_MAX_COUNT:5,RATING_POSITIVE_MIN_COUNT:7,RATING_INCOMING_SOURCE_MAP:o,EXPECTATION_NEGATIVE_MAX_COUNT:50,EXPECTATION_POSITIVE_MIN_COUNT:70}},function(e,t,n){e.exports=n(226)},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r="film-to-watch-button".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3);n(1335);var s=function(e){var t=e.isActive,n=e.color,r=e.className,c=e.size,s=e.isTooltipEnabled,u=_objectWithoutProperties(e,["isActive","color","className","size","isTooltipEnabled"]),l=s?{"data-tooltip":t?"Не буду смотреть":"Буду смотреть","data-tooltip-position":"top","data-tooltip-theme":"nocorner","data-tooltip-show-delay":"500","data-tooltip-offset":"6"}:{};return i.createElement("button",_extends({},u,l,{className:a(o({color:n,size:c,active:t}),r)}))};s.defaultProps={color:"white",size:24,isTooltipEnabled:!0},s.propTypes={className:c.string,isActive:c.bool.isRequired,color:c.oneOf(["white","grey"]),size:c.oneOf([14,24]),isTooltipEnabled:c.bool},e.exports=s},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(353),o=n(0),a=n(2),i=n(117),c="scroll-bar".concat("-partial-component"),s=n(4).lock(c);n(1422);var u=function(e){function ScrollBar(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ScrollBar),n=this,(t=!(o=_getPrototypeOf(ScrollBar).call(this,e))||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o)._onScroll=r(t._onScroll.bind(_assertThisInitialized(t)),200),t}var t,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ScrollBar,i),t=ScrollBar,(n=[{key:"componentDidMount",value:function(){var e=this.props.onInit;e&&e(this)}},{key:"render",value:function(){var e=this,t={className:a(s({"prevent-default-scroll":this.props.preventDefaultScroll}),this.props.className)};return this.props.onScroll&&(t.onScroll=this._onScroll),o.createElement("div",t,o.createElement("div",{ref:function(t){return e.scroll=t},className:s("scroll")},this.props.children))}},{key:"_onScroll",value:function(e){this.props.onScroll(e,this)}},{key:"getScrolledElement",value:function(){return this.scroll}},{key:"isScrollEdgeReached",value:function(){var e=this.scroll,t=e.scrollWidth,n=e.clientWidth,r=e.scrollLeft;return t<=n?"both":r<50?"left":t-n-r<50&&"right"}}])&&_defineProperties(t.prototype,n),c&&_defineProperties(t,c),ScrollBar}();e.exports=u},function(e,t,n){"use strict";var r=n(5).connect,o=n(26).getScrollToOffset,a=n(1428);e.exports=r(function(e){return{pageOffset:o(e)}})(a)},,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog-messenger".concat("-partial-component");n(1323);var o=n(0),a=n(3),i=n(490),c=n(4).lock(r),s=n(2),u=n(957),l=n(958),p=n(584),f=n(1325),d=function(e){function DeadpoolDialogMessenger(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogMessenger),n=this,(t=!(r=_getPrototypeOf(DeadpoolDialogMessenger).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).getElement=t.getElement.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogMessenger,o.Component),t=DeadpoolDialogMessenger,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.appTheme,r=t.className;return o.createElement(i,{transitionName:"animate",component:"div",transitionAppear:!0},this.props.shouldShow?o.createElement(p,{didMountMetrikaAction:this.props.metrikaActions.dialogShow},o.createElement("div",{className:s(c({"app-theme":n}),r),ref:function(t){return e._messengerElement=t}},this._renderHideIcon(),o.createElement("div",{className:c("header")}),o.createElement("div",{className:c("window")},o.createElement(u,{appTheme:n,messages:this.props.messages,sendMessage:this.props.sendMessage,sendGreetingMessage:this.props.sendGreetingMessage,getTransitionedElement:this.getElement,metrikaActions:this.props.metrikaActions,className:c("chat")}),o.createElement(f,{className:c("share")})))):null)}},{key:"_renderHideIcon",value:function(){var e=this.props.appTheme,t={className:c("hide-button")};return"desktop"===e&&(t.onClick=this.props.onHideClick,t.type="hide"),"touch"===e&&(t.onClick=this._onTouchHideClick,t.type="arrow-down"),o.createElement(l,t)}},{key:"getElement",value:function(){return this._messengerElement}},{key:"_onTouchHideClick",value:function(){window.location="/"}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialogMessenger}();d.propTypes={appTheme:a.oneOf(["desktop","touch"]),messages:u.propTypes.messages,sendMessage:u.propTypes.sendMessage,sendGreetingMessage:u.propTypes.sendGreetingMessage,onHideClick:a.func.isRequired,shouldShow:a.bool,metrikaActions:a.object,className:a.string},e.exports=d},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog-share".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(28),u=n(1326).socials,l=function(e){function DeadpoolDialogShare(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogShare),t=_possibleConstructorReturn(this,_getPrototypeOf(DeadpoolDialogShare).call(this,e));var n=s.parse("/share/deadpool2/");return n.protocol=window.location.protocol,n.host=window.location.host,n.query={retPath:window.location.href.replace(window.location.origin,"")},t.state={shareUrl:s.format(n)},t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogShare,o.Component),t=DeadpoolDialogShare,(n=[{key:"render",value:function(){var e=this;return o.createElement("div",{className:c(i(),this.props.className)},u.map(function(t,n){var r=t.code,a=t.name,c=t.link;return o.createElement("a",{key:n,className:i("social",{code:r}),href:"".concat(c).concat(e.state.shareUrl),title:a,target:"_blank",rel:"noopener noreferrer"})}))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialogShare}();l.propTypes={messages:a.arrayOf(a.shape({author:a.oneOf(["alice, user"]).isRequired,text:a.string,status:a.oneOf(["pending","done"])})),className:a.string},l.defaultProps={messages:[]},e.exports=l},function(e){e.exports=JSON.parse('{"socials":[{"code":"vk","name":"VK","link":"https://vk.com/share.php?url="},{"code":"facebook","name":"Facebook","link":"https://www.facebook.com/sharer.php?src=sp&u="},{"code":"twitter","name":"Twitter","link":"https://twitter.com/intent/tweet?url="}]}')},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="deadpool-dialog-teaser".concat("-partial-component");n(1328);var o=n(0),a=n(3),i=n(490),c=n(4).lock(r),s=n(2),u=n(36),l=n(958),p=n(584),f=n(505),d=n(228),m=d.DEADPOOL_DIALOG_CURRENT_TEASER_GROUP,y=d.DEADPOOL_DIALOG_PREVIOUS_TEASER_GROUP,_=n(1329).teaserImages,h=function(e){function DeadpoolDialogTeaser(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeadpoolDialogTeaser),n=this,(t=!(r=_getPrototypeOf(DeadpoolDialogTeaser).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onClick=t._onClick.bind(_assertThisInitialized(t)),t.state={ready:!1},t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeadpoolDialogTeaser,o.Component),t=DeadpoolDialogTeaser,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.props.appTheme,n=Number(u.get(m));if(isNaN(n)){var r=Number(u.get(y));r=isNaN(r)?-1:r,n=this._getNextTeaserGroup(r)}Array.isArray(_[t][n])||(n=0),u.set(m,n),u.set(y,n,{expires:1/0});var o=f(_[t][n]);setTimeout(function(){e.setState({ready:!0,currentTeaserId:o})},100)}},{key:"componentWillReceiveProps",value:function(e){this.props.shouldShow!==e.shouldShow&&e.shouldShow&&this.setState({ready:e.shouldShow})}},{key:"render",value:function(){return o.createElement(i,{transitionName:"animate",component:"div",transitionAppear:!0},this.props.shouldShow&&this.state.ready?o.createElement(p,{didMountMetrikaAction:this.props.metrikaActions.teaserShow},this._renderTeasers()):null)}},{key:"_renderTeasers",value:function(){var e=this.props,t=e.appTheme,n=e.className,r=this.state.currentTeaserId,a={};return"desktop"===t&&(a.teaser=r),"touch"===t&&(a["teaser-touch"]=r),o.createElement("div",{className:s(c(a),n),onClick:this._onClick},o.createElement("div",{className:c("start-chat-button")}),o.createElement("div",{className:c("teaser")}),o.createElement(l,{type:"close",className:c("close-button")}))}},{key:"_onClick",value:function(e){e.preventDefault();var t=new l({});e.target.classList.contains(t.getClassName())?this.props.onCloseClick():("desktop"===this.props.appTheme&&this.props.onOpenClick(),"touch"===this.props.appTheme&&(window.location="/?deadpool-dialog")),this.setState({ready:!1})}},{key:"_getNextTeaserGroup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=this.props.appTheme,n=e+1;return n<_[t].length?n:0}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),DeadpoolDialogTeaser}();h.propTypes={appTheme:a.oneOf(["desktop","touch"]),onCloseClick:a.func.isRequired,onOpenClick:a.func.isRequired,shouldShow:a.bool,metrikaActions:a.object,className:a.string},e.exports=h},function(e,t,n){},function(e){e.exports=JSON.parse('{"teaserImages":{"desktop":[["1-1","1-2"],["2-1","2-2"],["3-1"]],"touch":[["1-1"]]}}')},function(e,t){e.exports={DEFAULT_AVATAR_PATH:"0/0-0"}},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(960).default,i="film-poster-snippet".concat("-partial-component"),c=n(4).lock(i),s=n(2),u=n(1301),l=n(1304),p=n(344),f=n(117),d=n(1288),m=n(1253),y=n(942).getImageSrcSet,_=n(1302).RATING_SOURCE;n(1337);var h=function(e){function FilmPosterSnippet(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,FilmPosterSnippet),n=this,r=_getPrototypeOf(FilmPosterSnippet).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_toggleToWatch",function(e){e.preventDefault(),t.props.toggleToWatchAction(t.props.film)}),_defineProperty(_assertThisInitialized(t),"_onClick",function(e){var n=t.props,r=n.film,o=n.onClick;o&&o(e,r)}),_defineProperty(_assertThisInitialized(t),"_handleMouseOver",function(e){var n=t.props.onMouseOver;n&&n(e)}),_defineProperty(_assertThisInitialized(t),"_handleMouseLeave",function(e){var n=t.props.onMouseLeave;n&&n(e)}),_defineProperty(_assertThisInitialized(t),"_handleImageWrapMouseEnter",function(){var e=t.props.onImageWrapMouseEnter;e&&e()}),_defineProperty(_assertThisInitialized(t),"_onPosterClick",function(e){var n=t.props,r=n.film,o=n.onPosterClick;o&&o(e,r)}),_defineProperty(_assertThisInitialized(t),"_onTitleClick",function(e){var n=t.props,r=n.film,o=n.onTitleClick;o&&o(e,r)}),_defineProperty(_assertThisInitialized(t),"_truncateCallback",function(e){t.state.truncated!==e&&t.setState({truncated:e})});var o=e.truncateEllipsis;return t.state={truncateEllipsis:o,truncated:!1},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(FilmPosterSnippet,f),t=FilmPosterSnippet,(n=[{key:"getBlockName",value:function(){return i}},{key:"componentDidMount",value:function(){this._setTruncateEllipsisStyle()}},{key:"render",value:function(){return this.props.stub?this._renderStub():this._renderFilm()}},{key:"_setTruncateEllipsisStyle",value:function(){!this.state.truncateEllipsis&&this._title&&void 0===this._title.style.webkitBackgroundClip&&this.setState({truncateEllipsis:"…"})}},{key:"_renderStub",value:function(){return r.createElement("div",{className:s(this.props.className,this.getClassName())},r.createElement("div",{className:c("stub",{image:!0})}),r.createElement("div",{className:c("stub",{title:!0})}),r.createElement("div",{className:c("stub",{genre:!0})}))}},{key:"_renderFilm",value:function(){var e=this,t=this.state,n=t.truncated,o=t.truncateEllipsis,i=this.props,u=i.film,l=i.theme,p=i.truncateLines,f=i.posterUrl,m=i.mods,y=i.snippetUrl,_=i.isFeatured,h=i.imageWrapClassName,g=i.titleClassName,b=i.size,E=i.className,v=this._getTitleUrl(),O=this._getBlockTag(y),P=this._getBlockTag(y?void 0:f),S=this._getBlockTag(v);return r.createElement(O,{className:s(E,this.getClassName({link:Boolean(y),size:b,theme:l})),onClick:this._onClick,href:y,onMouseOver:this._handleMouseOver,onMouseLeave:this._handleMouseLeave},r.createElement(P,{className:s(c("image-wrap",m),h),href:f,onClick:this._onPosterClick,onMouseEnter:this._handleImageWrapMouseEnter},this._renderRating(),this._renderImage(),_&&r.createElement(d,{className:c("promo-badge")}),this._renderNameplate(),this.props.posterChildren?r.createElement("div",{className:c("image-wrap-content")},this.props.posterChildren):null,this._renderToWatchButton()),r.createElement(S,{href:v,className:s(c("title",{theme:l,faded:!o&&n}),g),onClick:this._onTitleClick,ref:function(t){return e._title=t}},r.createElement(a,{lines:p,ellipsis:o,onTruncate:this._truncateCallback},u.displayTitle)),this._renderCaption())}},{key:"_renderImage",value:function(){var e=this.props,t=e.film,n=e.posterGetImgSrcSetOptions,o=e.lazyLoadImg,a=y(t.posterBaseUrl,n);return r.createElement(p,_extends({loadWatcher:!0,lazyLoadImg:o,className:c("image"),alt:t.displayTitle},a))}},{key:"_renderCaption",value:function(){var e=this.props,t=e.theme,n=e.caption,o=e.captionClassName;return n?r.createElement("div",{className:s(c("caption",{theme:t}),o)},n):null}},{key:"_renderRating",value:function(){var e=this.props,t=e.hideRating,n=e.hideExpectationRating,o=e.film.ratings,a=e.mods;return!o||t||n&&o.currentRating===_.expectations?null:r.createElement(u,{mix:c("film-rating-bar"),mods:a,ratings:o})}},{key:"_renderToWatchButton",value:function(){var e=this.props,t=e.film;return e.toggleToWatchAction?r.createElement(r.Fragment,null,r.createElement("div",{className:c("film-to-watch-fade",{"is-active":t.isToWatch})}),r.createElement(l,{className:c("film-to-watch-button",{"is-active":t.isToWatch}),isActive:t.isToWatch,onClick:this._toggleToWatch})):null}},{key:"_renderNameplate",value:function(){var e=this.props,t=e.nameplate,n=e.handleClickNameplate,o={className:c("nameplate"),nameplateItemClassName:c("nameplate-item"),nameplateButtonClassName:c("nameplate-button"),onClickNameplate:n};return t?r.createElement(m,_extends({},o,t)):null}},{key:"_getBlockTag",value:function(e){return e?"a":"div"}},{key:"_getTitleUrl",value:function(){if(!this.props.snippetUrl)return this.props.titleUrl||this.props.film.relativeUrl}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),FilmPosterSnippet}();h.propTypes={stub:o.bool,caption:o.oneOfType([o.string,o.element]),film:o.shape({id:o.number,displayTitle:o.string,ratings:o.shape({expectations:o.shape({value:o.string,count:o.number,ready:o.bool,type:o.string}),kp:o.shape({value:o.string,count:o.number,ready:o.bool,type:o.string})}),relativeUrl:o.string,watchUrl:o.string}),posterGetImgSrcSetOptions:o.shape({mds:o.shape({x1:o.string.isRequired,x2:o.string}),st:o.shape({x1:o.string.isRequired,x2:o.string}),noFallback:o.bool,fallback:o.string}).isRequired,onClick:o.func,onPosterClick:o.func,onTitleClick:o.func,hideRating:o.bool,hideExpectationRating:o.bool,truncateLines:o.number,theme:o.oneOf(["default","compact","hd"]),posterUrl:o.string,titleUrl:o.string,snippetUrl:o.string,lazyLoadImg:o.bool,toggleToWatchAction:o.func,isFeatured:o.bool,imageWrapClassName:o.string,titleClassName:o.string,className:o.string,captionClassName:o.string,size:o.oneOf(["s","m","l"]),nameplate:o.shape({type:o.string,text:o.string}),handleClickNameplate:o.func,onImageWrapMouseEnter:o.func,onlineViewOption:o.shape({isAvailableOnline:o.bool.isRequired,isPurchased:o.bool.isRequired,text:o.string,originalOfferText:o.string,subscriptionPurchaseTag:o.string,subscription:o.string,type:o.string}),watchUrl:o.string},h.defaultProps={truncateLines:1,truncateEllipsis:null,theme:"default"},e.exports=h},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(350),i=function(e){function Click(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Click),n=this,(t=!(r=_getPrototypeOf(Click).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._handler=t._handler.bind(_assertThisInitialized(t)),t._proxyChildHandler=t._proxyChildHandler.bind(_assertThisInitialized(t)),t._modifyChildren=t._modifyChildren.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Click,a),t=Click,(n=[{key:"render",value:function(){return this.props.action?r.Children.map(this.props.children,this._modifyChildren):this.props.children}},{key:"_modifyChildren",value:function(e){return r.cloneElement(e,{onClick:e.props.onClick?this._proxyChildHandler.bind(this,e.props.onClick):this._handler})}},{key:"_proxyChildHandler",value:function(e,t){this._handler(t);for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];e.apply(void 0,[t].concat(r))}},{key:"_handler",value:function(e){this.props.action(e,this.props)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Click}();i.propTypes={action:o.func},e.exports=i},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(3),o=n(115),a=n(350),i=function(e){function WindowScroll(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WindowScroll),n=this,(t=!(r=_getPrototypeOf(WindowScroll).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._handler=o(t._handler.bind(_assertThisInitialized(t)),500),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WindowScroll,a),t=WindowScroll,(n=[{key:"componentDidMount",value:function(){this.props.action&&(window.addEventListener("scroll",this._handler),window.addEventListener("resize",this._handler))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this._handler),window.removeEventListener("resize",this._handler)}},{key:"render",value:function(){return this.props.children}},{key:"_handler",value:function(e){this.props.action(e,this.props)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),WindowScroll}();i.propTypes={action:r.func},e.exports=i},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=function(e){function Rendered(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Rendered),_possibleConstructorReturn(this,_getPrototypeOf(Rendered).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Rendered,r.Component),t=Rendered,(n=[{key:"componentDidMount",value:function(){this.props.action()}},{key:"render",value:function(){return this.props.children}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Rendered}();a.propTypes={action:o.func.isRequired,children:o.node},e.exports=a},function(e,t){e.exports=function(e){return e.displayName||e.name||"Component"}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="watch-online-poster-snippet".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(344),s=n(1344),u=s.PosterOverlay,l=s.StatusIcon,p=s.PlayButton,f=s.Caption,d=s.ProgressBar,m=n(573),y=n(1354);n(1369);var _=n(350),h=function(e){function WatchOnlinePosterSnippet(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePosterSnippet);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(WatchOnlinePosterSnippet)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"state",{nameplateForm:y.FORM.collapsed}),_defineProperty(_assertThisInitialized(t),"handleMouseEnter",function(){return t.setState({nameplateForm:y.FORM.expanded})}),_defineProperty(_assertThisInitialized(t),"handleMouseLeave",function(){return t.setState({nameplateForm:y.FORM.collapsed})}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePosterSnippet,_),t=WatchOnlinePosterSnippet,(n=[{key:"getBlockName",value:function(){return r}},{key:"render",value:function(){var e=this.props,t=e.film,n=e.purchase,r=e.caption,a=e.watchUrl,s=e.watchUrlQuery,_=e.theme,h=e.appTheme,g=e.showMinPrice,b=e.showPlayButton,E=e.onlineViewOption;return o.createElement(m,_extends({},this.props,{mix:this.getClassName(),imageWrapClassName:i("image-wrapper",{"light-fade":!Boolean(b)}),posterUrl:!n||n.hasLicense?[a,s].filter(Boolean).join("?"):void 0,caption:o.createElement(f,{purchase:n,caption:r}),posterChildren:o.createElement(o.Fragment,null,o.createElement(u,{film:t,purchase:n}),o.createElement(l,{appTheme:h,film:t,purchase:n}),o.createElement(y,_extends({className:i("nameplate")},E,{size:y.SIZE.small,color:y.COLOR.default,form:"compact"===_?y.FORM.expanded:this.state.nameplateForm})),b&&o.createElement(p,{film:t,purchase:n,showMinPrice:g,appTheme:h}),o.createElement(d,{purchase:n}),(null===E||void 0===E?void 0:E.rightholderLogo)?o.createElement(c,_extends({},E.rightholderLogo,{className:i("vendor-badge")})):null),theme:_,appTheme:h,onMouseOver:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave}))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),WatchOnlinePosterSnippet}();h.defaultProps={theme:"default",showMinPrice:!1,showPlayButton:!1},h.propTypes={film:a.object,watchUrl:a.string,watchUrlQuery:a.string,purchase:a.object,caption:a.string,mix:a.string,theme:a.oneOf(["default","compact","hd"]),showMinPrice:a.bool,showPlayButton:a.bool,onlineViewOption:a.shape({isAvailableOnline:a.bool.isRequired,isPurchased:a.bool.isRequired,text:a.string,originalOfferText:a.string,subscriptionPurchaseTag:a.string,subscription:a.string,type:a.string,rightholderLogo:a.shape({x1:a.string.isRequired,x2:a.string})})},e.exports=h},function(e,t,n){e.exports={Caption:n(1345),PlayButton:n(1346),PosterOverlay:n(1348),StatusIcon:n(1350),ProgressBar:n(1352)}},function(e,t,n){"use strict";var r=n(151),o=n(3),a=n(58).WATCH_STATUS,i=function(e){var t=e.caption,n=e.purchase;if(n){if(!n.hasLicense)return"Фильм недоступен для просмотра";if(n.watchStatus===a.EXPIRED)return"Время аренды истекло";if(n.watchStatus===a.WAITING_START_WATCHING)return n.hoursToStartWatching>24?"".concat(r(n.daysToStartWatching,"%d день","%d дня","%d дней"),", чтобы начать просмотр"):"".concat(r(n.hoursToStartWatching,"%d час","%d часа","%d часов"),", чтобы начать просмотр");if(n.watchStatus===a.WAITING_END_WATCHING&&n.hoursToEndWatching)return"".concat(r(n.hoursToEndWatching,"%d час","%d часа","%d часов"),", чтобы завершить просмотр")}return t};i.propTypes={purchase:o.shape({hasLicense:o.bool,watchStatus:o.string,daysToStartWatching:o.number,hoursToStartWatching:o.number}),caption:o.string},i.defaultProps={caption:null},e.exports=i},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(58),i=a.WATCH_STATUS,c=a.MONETIZATION_MODELS,s=n(499),u=n(962),l=n(350);n(1347);var p=function(e){function PlayButton(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PlayButton),_possibleConstructorReturn(this,_getPrototypeOf(PlayButton).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PlayButton,l),t=PlayButton,(n=[{key:"render",value:function(){var e=this.props,t=e.film,n=e.purchase,o=e.appTheme;return!n||n.hasLicense&&n.watchStatus!==i.EXPIRED?r.createElement("div",{className:s("play-button",{"app-theme":o})},r.createElement("div",{className:s("play-button__inner")},r.createElement("div",{className:s("play-button__icon-wrap")},r.createElement(u,{className:s("play-button__icon")})),r.createElement("span",{className:s("play-button__caption")},!n&&t.monetizationModels.includes(c.AVOD)?r.createElement(r.Fragment,null," ","Смотреть",r.createElement("br",null),"бесплатно"):this._renderMinPrice()))):null}},{key:"_renderMinPrice",value:function(){var e=this.props,t=e.showMinPrice,n=e.film;if(!t||!n.minPrice)return"Смотреть";var o=n.monetizationModels.includes(c.EST),a=n.monetizationModels.includes(c.TVOD),i=o&&a?"от":"за";return r.createElement(r.Fragment,null,"Смотреть",r.createElement("br",null),i," ",n.minPrice," ","₽")}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PlayButton}();p.propTypes={film:o.shape({monetizationModels:o.array}),purchase:o.shape({hasLicense:o.bool,watchStatus:o.string}),showMinPrice:o.bool,appTheme:o.string},e.exports=p},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(58),i=a.MONETIZATION_MODELS,c=a.WATCH_STATUS,s=n(499);n(1349);var u=function(e){var t=e.film,n=e.purchase,o={};return n?n.hasLicense&&n.watchStatus!==c.EXPIRED||(o.faded=!0):o.free=(t.monetizationModels||[]).includes(i.AVOD),r.createElement("div",{className:s("poster-overlay",o)})};u.propTypes={film:o.shape({monetizationModels:o.array}),purchase:o.shape({hasLicense:o.bool,watchStatus:o.string,watchProgressPercent:o.number})},e.exports=u},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(58),i=a.MONETIZATION_MODELS,c=a.WATCH_STATUS,s=n(499);n(1351);var u=function(e){function StatusIcon(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,StatusIcon),_possibleConstructorReturn(this,_getPrototypeOf(StatusIcon).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(StatusIcon,r.PureComponent),t=StatusIcon,(n=[{key:"render",value:function(){var e=this.props,t=e.appTheme,n=e.purchase,o={"app-theme":t};return n&&(n.hasLicense?n.monetizationModel===i.TVOD&&n.watchStatus!==c.EXPIRED&&(o.rented=!0):o.blocked=!0),r.createElement("div",{className:s("status-icon",o)})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),StatusIcon}();u.propTypes={appTheme:o.string,purchase:o.shape({hasLicense:o.bool,monetizationModel:o.string,watchStatus:o.string})},e.exports=u},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(58).WATCH_STATUS,i=n(499);n(1353);var c=function(e){var t=e.purchase;return!t||!t.hasLicense||t.watchStatus===a.EXPIRED||!t.watchProgressPercent||t.watchProgressPercent>90?null:r.createElement("div",{className:i("progress-bar")},r.createElement("div",{className:i("progress-bar__line"),style:{width:"".concat(t.watchProgressPercent,"%")}}))};c.propTypes={purchase:o.shape({hasLicense:o.bool,watchStatus:o.string,watchProgressPercent:o.number})},e.exports=c},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(0),o=n(5).connect,a=n(3),i=n(2),c=n(4).lock("nameplate-container"),s=n(79).MONETIZATION_MODELS,u=n(18),l=u.TYPE,p=u.SUBSCRIPTION_PURCHASE_TAG,f=n(250),d=f.FORM,m=f.SIZE,y=f.COLOR,_=n(1355),h=n(1367).default,g=n(79).NAMEPLATE;n(1368);var b=function(e){var t=e.isPurchased,n=e.subscriptionPurchaseTag,o=e.text,a=e.type,s=_objectWithoutProperties(e,["isPurchased","subscriptionPurchaseTag","text","type"]),u=h({isPurchased:t,type:a,subscriptionPurchaseTag:n});return u?r.createElement("div",{className:i(c(),e.className)},r.createElement(_,_extends({},s,{type:u,text:o,form:u===g.TYPE.transaction?_.FORM.expanded:e.form}))):null};b.propTypes={className:a.string,type:a.oneOf(Object.values(l)),monetizations:a.arrayOf(a.oneOf(Object.values(s))),isPurchased:a.bool,minimumPrice:a.number,price:a.number,subscriptionPurchaseTag:a.oneOf(Object.values(p)),form:_.propTypes.form,isAuthorized:a.bool,text:a.string},b.FORM=d,b.SIZE=m,b.COLOR=y,e.exports=o(function(e){return{isAuthorized:e.auth.isAuthorized}},{})(b)},function(e,t,n){var r=n(0),o=n(3),a=n(250),i=a.FORM,c=a.SIZE,s=a.COLOR,u=n(79).NAMEPLATE.TYPE,l={ya_plus:n(1356),ya_premium:n(1358),kp_basic:n(1362),transaction:n(1365)},p=function(e){var t=l[e.type];return t?r.createElement(t,e):null};p.defaultProps={size:c.small,color:s.default,text:""},p.propTypes={type:o.oneOf(Object.values(u)).isRequired,form:o.oneOf(Object.values(i)).isRequired,size:o.oneOf(Object.values(c)),color:o.oneOf(Object.values(s)),text:o.string},p.TYPE=u,p.FORM=i,p.SIZE=c,p.COLOR=s,e.exports=p},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var r=n(0),o=n(3),a=n(4).lock("nameplate-ya-plus"),i=n(250).SIZE;n(1357);var c=function(e){var t=e.size,n=_objectWithoutProperties(e,["size"]);return r.createElement("div",_extends({},n,{className:a({size:t})}))};c.propTypes={size:o.oneOf(Object.values(i))},e.exports=c},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(4).lock("nameplate-ya-premium"),i=n(585),c=n(1360),s=n(250).COLOR;n(1361);var u=function(e){return r.createElement(i,_extends({},e,{text:"Подписка",icon:r.createElement(c,{className:a("icon")}),className:a({color:e.color})}))};u.propTypes={color:o.oneOf(Object.values(s))},e.exports=u},function(e,t,n){},function(e,t,n){var r=n(0);function AmediatekaIcon(e){return r.createElement("svg",e,r.createElement("path",{fillRule:"evenodd",d:"M14.3724816,17 L13.5944308,14.6043956 L10.9122031,14.6043956 C10.9122031,14.6043956 10.9531532,14.4285714 11.0145782,14.2967033 C11.0760033,14.1648352 11.0555283,14.032967 10.9531532,14.010989 C10.8507781,13.989011 10.8712531,13.8791209 10.9326781,13.8351648 C10.9941032,13.7912088 11.1579034,13.7252747 11.5469287,13.5274725 C11.9359541,13.3296703 11.6902539,13.1758242 11.5674038,13.0879121 C11.5059787,13.021978 11.4650287,12.9340659 11.4855037,12.8241758 L12.9801802,12.8241758 L11.9564292,9.7032967 L10.9941032,12.6263736 C10.9941032,12.6263736 10.8712531,12.9340659 11.0145782,13.0659341 C11.1579034,13.1978022 11.4036036,13.3076923 10.9941032,13.5054945 C10.5846028,13.7032967 10.4412776,13.7692308 10.3798526,13.8131868 C10.3184275,13.8571429 10.2774775,13.967033 10.4003276,13.989011 C10.5231777,14.010989 10.5027027,14.1428571 10.4617527,14.2747253 L10.3798526,14.4725275 L9.56085176,17 L7.8,17 L8.61900082,14.4945055 L8.7009009,14.2747253 C8.74185094,14.1428571 8.74185094,14.010989 8.63947584,13.989011 C8.53710074,13.967033 8.5985258,13.8571429 8.65995086,13.8131868 C8.72137592,13.7692308 8.88517609,13.7032967 9.27420147,13.5054945 C9.66322686,13.3076923 9.41752662,13.1538462 9.29467649,13.0659341 C9.17182637,12.978022 9.27420147,12.6263736 9.27420147,12.6263736 L9.29467649,12.5824176 L11.1169533,7 L12.8778051,7 L14.7205569,12.6263736 C14.7205569,12.6483516 14.7205569,12.6483516 14.7410319,12.6703297 C14.802457,12.8241758 14.9048321,12.956044 15.0276822,13.043956 C15.2733825,13.2197802 15.785258,13.3076923 15.3962326,13.5054945 C15.2324324,13.5934066 15.0686323,13.6813187 14.9253071,13.7912088 C14.8638821,13.8351648 14.8638821,13.9450549 14.9867322,14.010989 C15.1095823,14.0769231 15.2119574,14.0989011 15.2529075,14.2527473 C15.2938575,14.4065934 15.3143325,14.4725275 15.3143325,14.4725275 L15.3143325,14.4945055 L16.1333333,17 L14.3724816,17 Z"}))}AmediatekaIcon.defaultProps={width:"100%",height:"100%",viewBox:"0 0 24 24"},e.exports=AmediatekaIcon,AmediatekaIcon.default=AmediatekaIcon},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(4).lock("nameplate-kp-basic"),i=n(585),c=n(1363),s=n(250).COLOR;n(1364);var u=function(e){return r.createElement(i,_extends({},e,{text:"Подписка",icon:r.createElement(c,{className:a("icon")}),className:a({color:e.color})}))};u.propTypes={color:o.oneOf(Object.values(s))},e.exports=u},function(e,t,n){var r=n(0);function KinopoiskIcon(e){return r.createElement("svg",e,r.createElement("path",{fillRule:"evenodd",d:"M10.119401,17.1669032 C7.26579916,16.1282771 5.79447063,12.9730029 6.83309677,10.119401 C7.87172291,7.26579916 11.0269971,5.79447063 13.880599,6.83309677 C16.7342008,7.87172291 18.2055294,11.0269971 17.1669032,13.880599 C16.1282771,16.7342008 12.9730029,18.2055294 10.119401,17.1669032 Z M10.2974862,10.6489125 C11.0108866,10.908569 11.7997052,10.5407369 12.0593617,9.82733642 C12.3190182,9.11393595 11.9511861,8.3251174 11.2377857,8.06546086 C10.5243852,7.80580433 9.73556663,8.17363646 9.4759101,8.88703693 C9.21625356,9.60043739 9.5840857,10.3892559 10.2974862,10.6489125 Z M14.1726636,12.0593617 C14.886064,12.3190182 15.6748826,11.9511861 15.9345391,11.2377857 C16.1941957,10.5243852 15.8263635,9.73556663 15.1129631,9.4759101 C14.3995626,9.21625356 13.6107441,9.5840857 13.3510875,10.2974862 C13.091431,11.0108866 13.4592631,11.7997052 14.1726636,12.0593617 Z M12.7622143,15.9345391 C13.4756148,16.1941957 14.2644334,15.8263635 14.5240899,15.1129631 C14.7837464,14.3995626 14.4159143,13.6107441 13.7025138,13.3510875 C12.9891134,13.091431 12.2002948,13.4592631 11.9406383,14.1726636 C11.6809818,14.886064 12.0488139,15.6748826 12.7622143,15.9345391 Z M8.88703693,14.5240899 C9.60043739,14.7837464 10.3892559,14.4159143 10.6489125,13.7025138 C10.908569,12.9891134 10.5407369,12.2002948 9.82733642,11.9406383 C9.11393595,11.6809818 8.3251174,12.0488139 8.06546086,12.7622143 C7.80580433,13.4756148 8.17363646,14.2644334 8.88703693,14.5240899 Z M11.7649251,12.6458629 C12.1216254,12.7756912 12.5160346,12.5917751 12.6458629,12.2350749 C12.7756912,11.8783746 12.5917751,11.4839654 12.2350749,11.3541371 C11.8783746,11.2243088 11.4839654,11.4082249 11.3541371,11.7649251 C11.2243088,12.1216254 11.4082249,12.5160346 11.7649251,12.6458629 Z"}))}KinopoiskIcon.defaultProps={width:"100%",height:"100%",viewBox:"0 0 24 24"},e.exports=KinopoiskIcon,KinopoiskIcon.default=KinopoiskIcon},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(4).lock("nameplate-transaction"),i=n(585),c=n(250).COLOR;n(1366);var s=function(e){return r.createElement(i,_extends({},e,{className:a({color:e.color})}))};s.propTypes={color:o.oneOf(Object.values(c)),text:o.string},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,o=n(0),a=n.n(o),i=n(79),c=n(18);function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=(_defineProperty(r={},c.SUBSCRIPTION_PURCHASE_TAG.plus,"ya_plus"),_defineProperty(r,c.SUBSCRIPTION_PURCHASE_TAG.kpAmediateka,"ya_premium"),_defineProperty(r,c.SUBSCRIPTION_PURCHASE_TAG.kpBasic,"kp_basic"),r);t.default=function(e){var t=e.subscriptionPurchaseTag,n=e.type,r=e.isPurchased;return a.a.useMemo(function(){return r?t===c.SUBSCRIPTION_PURCHASE_TAG.plus?i.NAMEPLATE.TYPE[c.SUBSCRIPTION_PURCHASE_TAG.plus]:i.NAMEPLATE.TYPE.purchased:n===c.TYPE.subscription?t&&s[t]:n===c.TYPE.transaction?i.NAMEPLATE.TYPE.transaction:void 0},[t,n,r])}},function(e,t,n){},function(e,t,n){},function(e,t){e.exports={AFISHA_LISTS_IDS:{afishaCinemas:"afisha.cinemas"},AFISHA_MAIN_PAGE_TITLE:"— билеты на фильм и расписание сеансов в кинотеатрах — КиноПоиск",AFISHA_DEFAULT_LISTS_LIMIT:30,AFISHA_DEFAULT_OFFSET:0,AFISHA_FILM_SEANCES_STUBS_LIMIT:10,NAMEPLATE:{TICKETS:{TEXT:"Билеты"}}}},function(e,t,n){function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(1372),o=[r.filmSeancesPageCinemasLoadMoreWatcher];e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},r,{watchers:o})},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(filmSeancesPageCinemasLoadMoreSaga),o=regeneratorRuntime.mark(filmSeancesPageCinemasLoadMoreWatcher);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a=n(1),i=a.takeLatest,c=a.call,s=a.put,u=a.select,l=n(1373).loadMoreCinemas,p=n(47).patchList,f=n(89).UI_LIST_STATUS,d=n(963),m=d.selectCinemasListLimit,y=d.selectCinemasListOffset,_=n(93).patchMap,h=n(26).selectRegionId,g=n(964).AFISHA_FILM_SEANCES_PAGE_LOAD_MORE_EFFECT;function filmSeancesPageCinemasLoadMoreSaga(e){var t,n,o,a,i,d,g,b,E,v;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.payload,n=t.cinemasListId,o=t.filmId,r.next=4,u(m,{listId:n});case 4:return a=r.sent,r.next=7,u(y,{listId:n});case 7:return i=r.sent,r.next=10,u(h);case 10:return d=r.sent,r.next=13,s(p(n,{pagination:{limit:a,offset:i,status:f.pending}}));case 13:return r.next=15,c(l,{limit:a,offset:i+a,filmId:o,regionId:d});case 15:return g=r.sent,b=g.map,E=g.list,v=g.pagination,r.next=21,s(_("cinemas",{byId:b}));case 21:return r.next=23,s(p(n,{items:E,pagination:_objectSpread({},v,{status:f.loaded})}));case 23:case"end":return r.stop()}},r)}function filmSeancesPageCinemasLoadMoreWatcher(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(g,filmSeancesPageCinemasLoadMoreSaga);case 2:case"end":return e.stop()}},o)}e.exports={filmSeancesPageCinemasLoadMoreWatcher:filmSeancesPageCinemasLoadMoreWatcher,filmSeancesPageCinemasLoadMoreSaga:filmSeancesPageCinemasLoadMoreSaga}},function(e,t,n){"use strict";var r=regeneratorRuntime.mark(loadMoreCinemas),o=n(1).putResolve,a=n(25).sendRequestEffect,i=n(88);function loadMoreCinemas(e){var t,n,c,s,u,l,p,f,d,m;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return t=e.limit,n=e.offset,c=e.filmId,s=e.regionId,r.next=3,o(a({url:"/api/afisha/film-seances/",method:"get",params:{query:{offset:n,limit:t,filmId:c,regionId:s}}}));case 3:return u=r.sent,l=u.cinemas,p=u.pagination,f=i(l),d=f.map,m=f.list,r.abrupt("return",{map:d,list:m,pagination:p});case 8:case"end":return r.stop()}},r)}e.exports={loadMoreCinemas:loadMoreCinemas}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(597),i=n(15),c=function(e){function Adv(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Adv),n=this,(t=!(r=_getPrototypeOf(Adv).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onRender=t._onRender.bind(_assertThisInitialized(t)),t._onStub=t._onStub.bind(_assertThisInitialized(t)),t._onError=t._onError.bind(_assertThisInitialized(t)),t._onInViewport=t._onInViewport.bind(_assertThisInitialized(t));var o=t.props,a=o.name,i=o.index;return t.state={containerId:a+(i?"_".concat(i):"")},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Adv,r.Component),t=Adv,(n=[{key:"componentDidMount",value:function(){var e=this.state.containerId,t=i(window,"advCallbacks[".concat(e,"]"));t?t.isRendered?this._onRender():t.isError?this._onError():this._onStub():(window.advCallbacks||(window.advCallbacks={}),window.advCallbacks[e]={},window.advCallbacks[e].onRender=this._onRender,window.advCallbacks[e].onStub=this._onStub,window.advCallbacks[e].onError=this._onError),this.advContainerIsReady(),this._sendMetrika({init:!0})}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"componentWillUnmount",value:function(){this._inViewportWatcher=null,clearTimeout(this._inViewPortTimeout)}},{key:"getContainerElement",value:function(){return document.getElementById(this.state.containerId)||document.querySelector("[data-direct-container-id=".concat(this.state.containerId,"]"))}},{key:"advContainerIsReady",value:function(){this._inViewportWatcher=a(this.getContainerElement(),this._onInViewport)}},{key:"_sendMetrika",value:function(e){this.props.metrikaCallback(Object.assign({name:this.props.name},e))}},{key:"_onRender",value:function(){var e=this.props.onRender;e&&e(),this._sendMetrika({isRendered:!0})}},{key:"_onStub",value:function(){this._sendMetrika({isRendered:!1,metaStatus:"stub_callback"})}},{key:"_onError",value:function(){this._sendMetrika({isRendered:!1,metaStatus:"error_callback"})}},{key:"_onInViewport",value:function(e){var t=this;this._inViewportWatcher&&(clearTimeout(this._inViewPortTimeout),this._inViewPortTimeout=setTimeout(function(){a(e)?(t._inViewportWatcher.dispose(),t._sendMetrika({view:!0})):t._inViewportWatcher.watch()},this.props.ADV_VIEW_DELAY))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),Adv}();c.propTypes={name:o.string.isRequired,index:o.oneOfType([o.string,o.number]),onRender:o.func,ADV_VIEW_DELAY:o.number,metrikaCallback:o.func},c.defaultProps={ADV_VIEW_DELAY:1e3,metrikaCallback:function(){}},e.exports=c},function(e,t,n){},function(e,t,n){"use strict";e.exports={ADFOX_SPECIAL_BANNER_CLOSE:"special_project_banner_close",COOKIES_EXPIRES:86400}},function(e,t,n){},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=function(e){function CssBackgroundObserver(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CssBackgroundObserver);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(CssBackgroundObserver)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_imageElement",null),_defineProperty(_assertThisInitialized(t),"_backgroundImage",null),_defineProperty(_assertThisInitialized(t),"_elementRef",null),_defineProperty(_assertThisInitialized(t),"observe",function(e){e&&(t._elementRef=e,t._imageElement=new Image,t._observer=new MutationObserver(t._handleBackgroundChange),t._handleBackgroundChange(),t._observer.observe(t._elementRef,{attributes:!0}))}),_defineProperty(_assertThisInitialized(t),"unobserve",function(){t._observer&&t._observer.disconnect(),t._imageElement&&t._removeEventListener()}),_defineProperty(_assertThisInitialized(t),"_handleBackgroundChange",function(){var e=t._getElementBackgroundImage(t._elementRef);e!==t._backgroundImage&&(t._removeEventListener(),t._backgroundImage=e,t._backgroundImage&&t._addEventListener())}),_defineProperty(_assertThisInitialized(t),"_handleBackgroundLoaded",function(){t.props.onLoaded()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CssBackgroundObserver,r.PureComponent),t=CssBackgroundObserver,(n=[{key:"render",value:function(){return this.props.render({observe:this.observe,unobserve:this.unobserve})}},{key:"_addEventListener",value:function(){this._imageElement.src=this._backgroundImage,this._imageElement.complete?this._handleBackgroundLoaded():this._imageElement.addEventListener("load",this._handleBackgroundLoaded)}},{key:"_removeEventListener",value:function(){this._imageElement.removeEventListener("load",this._handleBackgroundLoaded)}},{key:"_getElementBackgroundImage",value:function(){return window.getComputedStyle(this._elementRef).backgroundImage.slice(4,-1).replace(/"/g,"")}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CssBackgroundObserver}();a.defaultProps={onLoaded:function(){}},a.propTypes={render:o.func.isRequired,onLoaded:o.func},e.exports=a},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"},i=function(e){function CssAnimationObserver(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CssAnimationObserver);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(CssAnimationObserver)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_elementRef",null),_defineProperty(_assertThisInitialized(t),"_animationEndEventName",null),_defineProperty(_assertThisInitialized(t),"observe",function(e){e&&(t._elementRef=e,t._addEventListener())}),_defineProperty(_assertThisInitialized(t),"unobserve",function(){t._elementRef&&t._removeEventListener()}),_defineProperty(_assertThisInitialized(t),"_handleAnimationEnd",function(){t.props.onAnimationEnd()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CssAnimationObserver,r.PureComponent),t=CssAnimationObserver,(n=[{key:"render",value:function(){return this.props.render({observe:this.observe,unobserve:this.unobserve})}},{key:"_addEventListener",value:function(){var e=this._getAnimationEndEventName();e&&this._elementRef.addEventListener(e,this._handleAnimationEnd)}},{key:"_removeEventListener",value:function(){var e=this._getAnimationEndEventName();e&&this._elementRef.removeEventListener(e,this._handleAnimationEnd)}},{key:"_detectAnimationEndEventName",value:function(){for(var e=document.createElement("div"),t=0,n=Object.entries(a);t<n.length;t++){var r=_slicedToArray(n[t],2),o=r[0],i=r[1];if(void 0!==e.style[o])return i}return null}},{key:"_getAnimationEndEventName",value:function(){return this._animationEndEventName||(this._animationEndEventName=this._detectAnimationEndEventName()),this._animationEndEventName}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),CssAnimationObserver}();i.defaultProps={onAnimationEnd:function(){}},i.propTypes={render:o.func.isRequired,onAnimationEnd:o.func},e.exports=i},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="sprite-animation-frame-element".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=function(e){function SpriteAnimationFrameElement(){var e,t,n,r,o,a,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SpriteAnimationFrameElement);for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=this,t=!(r=(e=_getPrototypeOf(SpriteAnimationFrameElement)).call.apply(e,[this].concat(u)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),a="_elementRef",c=i.createRef(),a in o?Object.defineProperty(o,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[a]=c,t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SpriteAnimationFrameElement,i.PureComponent),t=SpriteAnimationFrameElement,(n=[{key:"componentDidMount",value:function(){this.props.onElementInit(this._elementRef.current)}},{key:"componentWillUnmount",value:function(){this.props.onElementDestroy(this._elementRef.current)}},{key:"render",value:function(){var e=this.props.className;return i.createElement("div",{ref:this._elementRef,className:a(o(),e)},this.props.children)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),SpriteAnimationFrameElement}();s.defaultProps={onElementInit:function(){},onElementDestroy:function(){}},s.propTypes={className:c.string,children:c.node,onElementInit:c.func.isRequired,onElementDestroy:c.func.isRequired},e.exports=s},function(e,t,n){},function(e,t,n){},function(e,t,n){e.exports={AlreadyLinked:n(1385),RegAndLinked:n(1386),Linked:n(1388),Login:n(1389),OtherLinkedRebindable:n(1390),OtherLinkedNonRebindable:n(1391),OtherLinkedLegacy:n(1392),Register:n(1393),WelcomeScreen:n(1395),YandexAuth:n(1401),ThankYouUI:n(1402),ThankYouUIWithCode:n(1404)}},function(e,t,n){"use strict";var r=n(0),o=n(390),a=n(3),i=n(46),c=n(15),s=n(102),u=function(e){var t=e.authUser,n=e.params,a=e.socialYandexAccount,u=e.domikPopupOpened,l=e.isTouch,p=e.onDoneClick;return r.createElement("div",{className:s({hidden:u,"is-touch":l,form:"already-linked"})},r.createElement("div",{className:s("header")},"Ваш аккаунт на КиноПоиске уже привязан к Яндексу"),r.createElement("div",{className:s("body")},r.createElement(o,{leftAvatar:{imageUrl:c(t,"img.picture.x2"),title:t.displayName,subtitle:"КиноПоиск",defaultImageType:"kp"},rightAvatar:{title:a.name,subtitle:"Яндекс",defaultImageType:"ya"},linkSymbol:"arrows"}),r.createElement(i,{size:"l",theme:"outline",block:!0,className:s("button"),onClick:function(){return p(n.retPath)}},"Хорошо"),r.createElement("div",{className:s("footer-help")},r.createElement("a",{href:"https://yandex.ru/support/kinopoisk/settings.html",className:s("help-link"),target:"_blank",rel:"noopener noreferrer"},"Помощь"))))};u.propTypes={authUser:a.object,params:a.object,socialYandexAccount:a.object,domikPopupOpened:a.bool,isTouch:a.bool,onDoneClick:a.func},e.exports=u},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(15),i=n(102),c=n(46),s=n(351).LinkedAvatars,u=n(966),l=function(e){var t,n=e.authUser,o=e.params,l=e.isTouch,p=e.closePopup,f=e.hasPlus,d=e.isDomikPopupOpened,m=o.retPath,y=o.src;return t=f?"/watch/subscription/?src=yaplus-login":m||"/",r.createElement("div",{className:i({hidden:d,"is-touch":l,form:"reg-and-linked"})},r.createElement("div",{className:i("body")},r.createElement(s,{leftAvatar:{imageUrl:a(n,"img.picture.x2"),defaultImageType:"kp"},rightAvatar:{defaultImageType:"ya"}}),r.createElement("div",{className:i("message")},"Аккаунт на КиноПоиске создан и привязан к Яндексу"),r.createElement("div",{className:i("tip")},f?"Теперь вы можете смотреть фильмы и сериалы на КиноПоиске по подписке Яндекс.Плюс":"Теперь вы можете быстро заходить на КиноПоиск, используя Яндекс"),r.createElement(c,{size:"l",theme:f?"blue":"outline",block:!0,href:t,target:f&&"_blank",className:i("button")},f?"Начать смотреть":"Хорошо"),f&&r.createElement(u,{isTouch:l,closePopup:p,retPath:m,src:y})))};l.propTypes={authUser:o.object,params:o.object,isTouch:o.bool,closePopup:o.func,hasPlus:o.bool,isDomikPopupOpened:o.bool},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(102),i=function(e){var t=e.imageUrl,n=e.defaultImageType,o=e.href,i=e.title,c=e.subtitle;return r.createElement("a",{href:o,target:"_blank",rel:"noopener noreferrer",className:a("avatar",{brick:!0})},r.createElement("span",{className:a("avatar-image",{stub:t?null:n}),style:t?{backgroundImage:"url(".concat(t,")")}:null}),r.createElement("div",{className:a("avatar-caption",{brick:!0})},i&&r.createElement("div",{className:a("avatar-title")},i),c&&r.createElement("div",{className:a("avatar-subtitle")},c)))};i.propTypes={imageUrl:o.string,defaultImageType:o.string,href:o.string,title:o.string,subtitle:o.string},e.exports=i},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(46),i=n(15),c=n(102),s=n(966),u=n(390),l=function(e){var t,n=e.authUser,o=e.params,l=e.isTouch,p=e.closePopup,f=e.yandexImageUrl,d=e.hasPlus,m=e.isDomikPopupOpened;return t=d?"/watch/subscription/?src=yaplus-login":o.retPath||"/",r.createElement("div",{className:c({hidden:m,"is-touch":l,form:"linked"})},r.createElement("div",{className:c("body")},r.createElement(u,{leftAvatar:{imageUrl:i(n,"img.picture.x2"),defaultImageType:"kp"},rightAvatar:{imageUrl:f,defaultImageType:"ya"}}),r.createElement("div",{className:c("message")},"Аккаунт Яндекса привязан к КиноПоиску"),r.createElement("div",{className:c("tip")},d?"Теперь вы можете смотреть фильмы и сериалы на КиноПоиске по подписке Яндекс.Плюс":"Теперь вы можете быстро заходить на КиноПоиск, используя Яндекс"),r.createElement(a,{size:"l",theme:d?"blue":"outline",block:!0,target:d&&"_blank",href:t,className:c("button-watch")},d?"Начать смотреть":"Хорошо"),d&&r.createElement(s,{isTouch:l,closePopup:p,retPath:o.retPath})))};l.propTypes={authUser:o.object,params:o.object,socialYandexAccount:o.object,isDomikPopupOpened:o.bool,isTouch:o.bool,closePopup:o.func,yandexImageUrl:o.string,hasPlus:o.bool},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(46),i=n(102),c=n(348).MetrikaClick,s=n(352),u=n(351).LinkedAvatars,l=function(e){var t=e.yandexImageUrl,n=e.displayName,o=e.isDomikPopupOpened,l=e.loginFormPending,p=e.loginFormError,f=e.metrikaActions,d=e.onYandexLoginButtonClick,m=e.onLoginButtonClick,y=e.isTouch;return r.createElement("div",{className:i({hidden:o,"is-touch":y,form:"login"})},r.createElement("div",{className:i("header")},"Вход и регистрация"),r.createElement("div",{className:i("body")},r.createElement("div",{className:i("message")},"Войдите или создайте аккаунт на КиноПоиске, используя Яндекс"),r.createElement(u,{leftAvatar:{imageUrl:t,title:n.name,subtitle:"Яндекс",defaultImageType:"ya"}}),r.createElement(c,{action:f.loginViaYandexButtonClick},r.createElement(a,{size:"l",onClick:d,theme:"coral",block:!0,className:i("button"),disabled:l},"Войти через Яндекс")),p&&r.createElement("p",{className:i("error-message")},"Что-то пошло не так, попробуйте ещё раз"),r.createElement(c,{action:f.loginOtherWayClick},r.createElement(a,{size:"l",onClick:m,theme:"outline",block:!0,className:i("button"),disabled:l},"Войти другим способом")),r.createElement(s,null)))};l.propTypes={yandexImageUrl:o.string,displayName:o.object,isDomikPopupOpened:o.bool,loginFormPending:o.bool,loginFormError:o.bool,metrikaActions:o.object,onYandexLoginButtonClick:o.func,onLoginButtonClick:o.func,isTouch:o.bool},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(46),i=n(102),c=n(348).MetrikaClick,s=n(352),u=n(351).AvatarBrick,l=function(e){var t=e.otherAccount,n=e.metrikaActions,o=e.onRebindClick,l=e.closePopup,p=e.retPath,f=e.yandexAuthFormError,d=e.isDomikPopupOpened,m=e.isTouch;return r.createElement("div",{className:i({hidden:d,"is-touch":m,form:"other-linked-rebindable"})},r.createElement("div",{className:i("header")},"Ваш аккаунт Яндекса привязан к другому аккаунту КиноПоиска"),r.createElement("div",{className:i("body")},r.createElement("div",{className:i("other-linked-info")},r.createElement(u,{imageUrl:t.img&&t.img.x2,title:t.displayName,href:"/user/".concat(t.id,"/"),subtitle:"КиноПоиск",defaultImageType:"kp"})),r.createElement("div",{className:i("other-linked-content")},r.createElement("p",null,"Удалить связь и привязать Яндекс к текущему аккаунту КиноПоиска?")),r.createElement(c,{action:n.rebindButtonClick},r.createElement(a,{size:"l",theme:"outline",block:!0,onClick:o,className:i("button")},"Да, привязать")),r.createElement(c,{action:n.leaveUnbindedClick},r.createElement(a,{size:"l",theme:"outline",block:!0,onClick:l||function(){return location.assign(p||"/")},className:i("button")},"Оставить как есть")),f?r.createElement("p",{className:i("rebind-error")},"Произошла ошибка, попробуйте ещё раз"):null,r.createElement("div",{className:i("footer")},r.createElement("span",{className:i("footer_enable",{rebind:!0})},"Возникли вопросы?"," ",r.createElement("a",{className:i("link",{theme:"black"}),href:"https://yandex.ru/support/kinopoisk/settings.html#settings__link-yandex-account"},"Написать в поддержку"))),r.createElement(s,null)))};l.propTypes={sezamYandexAccount:o.object,otherAccount:o.object,metrikaActions:o.object,onRebindClick:o.func,closePopup:o.func,retPath:o.string,yandexAuthFormError:o.bool,isDomikPopupOpened:o.bool,isTouch:o.bool},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(46),i=n(102),c=n(348).MetrikaClick,s=n(352),u=n(351).AvatarBrick,l=function(e){var t=e.otherAccount,n=e.otherSupportTicketContactEmail,o=e.metrikaActions,l=e.closePopup,p=e.retPath,f=e.isDomikPopupOpened,d=e.isTouch;return r.createElement("div",{className:i({hidden:f,"is-touch":d,form:"other-linked-non-rebindable"})},r.createElement("div",{className:i("header")},"Ваш аккаунт Яндекса привязан к другому аккаунту КиноПоиска"),r.createElement("div",{className:i("body")},r.createElement("div",{className:i("other-linked-info")},r.createElement(u,{imageUrl:t.img&&t.img.x2,title:t.displayName,href:"/user/".concat(t.id,"/"),subtitle:"КиноПоиск",defaultImageType:"kp"})),r.createElement("div",{className:i("other-linked-content")},r.createElement("p",null,"Чтобы помочь вам разобраться с ситуацией, мы отправили заявку в поддержку."),r.createElement("p",null,"Ответ придет на:",r.createElement("a",{className:i("link",{theme:"darkgrey"}),href:"mailto:".concat(n)},n))),r.createElement(c,{action:o.supportTicketCreatedOkButtonClick},r.createElement(a,{size:"l",theme:"outline",block:!0,onClick:l||function(){return location.assign(p||"/")},className:i("button")},"Хорошо")),r.createElement("div",{className:i("footer")},r.createElement("span",{className:i("footer_enable",{rebind:!0})},"Возникли вопросы?"," ",r.createElement("a",{className:i("link",{theme:"black"}),href:"https://yandex.ru/support/kinopoisk/settings.html#settings__link-yandex-account"},"Написать в поддержку"))),r.createElement(s,null)))};l.propTypes={otherAccount:o.object,metrikaActions:o.object,closePopup:o.func,retPath:o.string,yandexAuthFormError:o.bool,isDomikPopupOpened:o.bool,otherSupportTicketContactEmail:o.string,isTouch:o.bool},e.exports=l},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(46),i=n(102),c=n(352),s=n(351).LinkedAvatars,u=function(e){var t=e.displayName,n=e.yandexImageUrl,o=e.otherAccount,u=e.isDomikPopupOpened,l=e.isTouch;return r.createElement("div",{className:i({hidden:u,"is-touch":l,form:"other-linked-legacy"})},r.createElement("div",{className:i("header")},"Ваш аккаунт Яндекса привязан к другому аккаунту КиноПоиска"),r.createElement("div",{className:i("body")},r.createElement(s,{leftAvatar:{imageUrl:o.img&&o.img.x2,title:o.displayName,href:"/user/".concat(o.id,"/"),subtitle:"КиноПоиск",defaultImageType:"kp"},rightAvatar:{title:t.name,imageUrl:n,subtitle:"Яндекс",defaultImageType:"ya"},linkSymbol:"arrows"}),r.createElement(a,{size:"l",theme:"outline",block:!0,href:"https://yandex.ru/support/kinopoisk/settings.html#settings__link-yandex-account",className:i("button")},"Написать в поддержку"),r.createElement("div",{className:i("footer")},r.createElement("a",{href:"/",className:i("footer_enable")},"На главную"),r.createElement(c,null))))};u.defaultProps={otherAccount:{}},u.propTypes={displayName:o.object,yandexImageUrl:o.string,otherAccount:o.object,isDomikPopupOpened:o.bool,isTouch:o.bool},e.exports=u},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(102),i=n(46),c=n(1394),s=n(352),u=n(390),l=n(348).MetrikaClick,p=n(586),f=p.VALID,d=p.INVALID,m=p.NOT_VALIDATED,y=function(e){var t=e.onEmailInputChange,n=e.onEmailNotificationsCheckboxClick,o=e.onRegisterClick,p=e.email,m=e.avatar,y=e.emailNotificationsEnabled,_=e.emailValidationStatus,h=e.metrikaActions,g=e.registerPending,b=e.registerFormError,E=e.isDomikPopupOpened,v=e.isTouch;return r.createElement("div",{className:a({hidden:E,"is-touch":v,form:"register"})},r.createElement("div",{className:a("header")},"Регистрация на КиноПоиске"),r.createElement("div",{className:a("body")},r.createElement(u,{leftAvatar:{imageUrl:m,defaultImageType:"kp"}}),r.createElement("div",{className:a("message",{smaller:!0})},"Мы не нашли такого аккаунта. Хотите зарегистрироваться через Яндекс?"),r.createElement("input",{className:a("text-input",{invalid:_===d}),type:"text",autoFocus:!0,onChange:t,value:p,placeholder:"Почта"}),_===d&&r.createElement("p",{className:a("error-message")},"Некорректный формат адреса"),r.createElement(c,{label:r.createElement("span",{className:a("checkbox-label")},"Я согласен получать уведомления и рассылки от КиноПоиска"),onChange:n,value:y}),r.createElement(l,{action:h.registerViaYandexButtonClick},r.createElement(i,{block:!0,size:"l",onClick:o,theme:"orange",className:a("button"),disabled:g||_!==f||""===p},"Да, зарегистрироваться")),b&&r.createElement("p",{className:a("error-message")},"Что-то пошло не так, попробуйте ещё раз"),r.createElement("div",{className:a("footer")},"Регистрируясь, вы принимаете условия"," ",r.createElement("a",{href:"/docs/usage/"},"Пользовательского соглашения")),r.createElement(s,null)))};y.propTypes={onEmailInputChange:o.func,onEmailNotificationsCheckboxClick:o.func,onRegisterClick:o.func,email:o.string,avatar:o.string,emailNotificationsEnabled:o.bool,emailValidationStatus:o.oneOf([f,d,m]),metrikaActions:o.object,registerPending:o.bool,registerFormError:o.bool,isDomikPopupOpened:o.bool,isTouch:o.bool},e.exports=y},function(e,t,n){var r=n(0),o=n(102),a=n(3),i=function(e){var t=e.label,n=e.onChange,a=e.value;return r.createElement("label",{className:o("checkbox")},r.createElement("input",{type:"checkbox",checked:a,onChange:n}),r.createElement("span",{className:o("checkbox-box")}),t)};i.propTypes={label:a.node,onChange:a.func,value:a.bool},e.exports=i},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("welcome-screen"),c=n(46),s=n(137).sendMetrikaParams,u=n(502),l=n(263).logout,p=n(1396);n(1400);var f=function(e){function WelcomeScreen(e){var t,n,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WelcomeScreen),n=this,o=_getPrototypeOf(WelcomeScreen).call(this,e),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_renderLeftContent",function(){var e=t.props,n=e.isTouch,o=e.showMoreLink,a=e.src,c=e.isHardMode,s=t.state.isShowMoreTextVisible;return r.createElement("div",{className:i("left",{isTouch:n})},r.createElement("div",{className:i("content",{isTouch:n})},r.createElement("h1",{className:i("left-title")},"Друзья, важные новости!",r.createElement("br",null),"Мы переходим на обязательную авторизацию через Яндекс"),c&&"yandex-suggest-toast"!==a?r.createElement("p",{className:i("left-text")},"Чтобы войти в ваш профиль, привяжите его к аккаунту Яндекса."):r.createElement("p",{className:i("left-text")},"Вы можете связать аккаунты прямо сейчас или позже — периодически мы будем напоминать вам об этом."),r.createElement("a",{onClick:t.props.onShowMoreLinkClick,href:o,className:i("left-show-more-link"),target:"_blank",rel:"noopener noreferrer"},"Подробнее в блоге")),n&&r.createElement("div",{className:i("button-wrapper")},r.createElement("button",{className:i("show-more-button"),onClick:t._showMoreButtonClick},r.createElement("span",{className:i({"show-more-hide":s})}))),t.state.isShowMoreTextVisible&&r.createElement("div",{className:i("show-more-content")},r.createElement("h3",{className:i("left-subtitle",{isTouch:n})},"Кратко о переходе"),r.createElement("ul",{className:i("left-snippets")},r.createElement("li",{className:i("left-snippet",{isTouch:n})},r.createElement("span",{className:i("snippet-text")},"Папки, рецензии, сообщения —",r.createElement("br",null),"всё, что у вас есть на  КиноПоиске,",r.createElement("br",null),"конечно же, сохранится.")),r.createElement("li",{className:i("left-snippet",{isTouch:n})},r.createElement("span",{className:i("snippet-text")},"Вы сможете использовать один аккаунт",r.createElement("br",null),"для авторизации во  всех сервисах",r.createElement("br",null),"Яндекса.")),r.createElement("li",{className:i("left-snippet",{isTouch:n})},r.createElement("span",{className:i("snippet-text")},"С подпиской Яндекс.Плюс вы получите",r.createElement("br",null),"доступ к  фильмам и сериалам для"," ",r.createElement("nobr",null,"онлайн-просмотра"),".")))))}),_defineProperty(_assertThisInitialized(t),"_renderRightContent",function(){var e=t.props,n=e.authUser,o=e.sezamYandexAccount,a=e.isTouch,s=e.src,u=e.isHardMode,l=e.onYandexUserClick,f=e.onYandexLoginButtonClick;return r.createElement("div",{className:i("right",{isTouch:a})},r.createElement("div",{className:i("right-cards-container",{isTouch:a})},r.createElement(p,{type:"kp",account:n,onClick:t.props.onKpUserClick}),r.createElement("span",{className:i("right-icon")}),r.createElement(p,{type:"ya",account:o,onYandexLoginButtonClick:f,onClick:l,isHardMode:u,src:s})),r.createElement(c,{size:"l",theme:"orange",className:i("button",{isTouch:a}),disabled:!o||!o.displayName,onClick:t.props.onBindButtonClick},"Привязать"),o&&o.displayName&&r.createElement("div",{className:i("linked-other-account",{isTouch:a})},r.createElement("a",{onClick:t._linkedOtherAccountClick},"Привязать другой аккаунт Яндекса")),t.props.isHardMode&&"yandex-suggest-toast"!==s&&r.createElement("div",{className:i("logout",{isTouch:a})},r.createElement("a",{onClick:t._logoutClick},"Выйти из КиноПоиска")))}),_defineProperty(_assertThisInitialized(t),"_logoutClick",function(){t.props.logout(t.props.isTouch?"/":u(["welcome-screen","link-yandex"]))}),_defineProperty(_assertThisInitialized(t),"_showMoreButtonClick",function(){t.setState({isShowMoreTextVisible:!t.state.isShowMoreTextVisible})}),_defineProperty(_assertThisInitialized(t),"_linkedOtherAccountClick",function(e){e.preventDefault(),t.props.onYandexLoginButtonClick()}),t.state={isShowMoreTextVisible:!t.props.isTouch||!1},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WelcomeScreen,r.Component),t=WelcomeScreen,(n=[{key:"render",value:function(){var e=this.props.isTouch;return r.createElement("div",{className:i({isTouch:e})},this._renderLeftContent(),this._renderRightContent())}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),WelcomeScreen}();f.defaultProps={authUser:{},sezamYandexAccount:{},sendMetrikaParams:function(){},showMoreLinkClick:function(){},onYandexUserClick:function(){},onKpUserClick:function(){}},f.propTypes={authUser:o.object.isRequired,sezamYandexAccount:o.object,onYandexLoginButtonClick:o.func,isTouch:o.bool,showMoreLink:o.string,onBindButtonClick:o.func,isHardMode:o.bool,src:o.string,sendMetrikaParams:o.func,onShowMoreLinkClick:o.func,onYandexUserClick:o.func,onKpUserClick:o.func,logout:o.func},e.exports=a(null,{sendMetrikaParams:s,logout:l})(f),e.exports.WelcomeScreen=f},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(4).lock("welcome-screen-card"),a=n(46),i=n(3),c=n(1397);n(1399);var s=function(e){function WelcomeScreenCard(){var e,t,n,i,s,u,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WelcomeScreenCard);for(var p=arguments.length,f=new Array(p),d=0;d<p;d++)f[d]=arguments[d];return n=this,i=(e=_getPrototypeOf(WelcomeScreenCard)).call.apply(e,[this].concat(f)),t=!i||"object"!==_typeof(i)&&"function"!=typeof i?_assertThisInitialized(n):i,s=_assertThisInitialized(t),l=function(){var e=t.props,n=e.type,i=e.account,s=e.isHardMode,u=e.src;return"kp"===n?r.createElement(c,{imageUrl:t.props.account.img.picture,name:i.displayName,email:i.email,url:"/user/".concat(i.id,"/go"),onClick:t.props.onClick}):"ya"===n&&i.displayName?r.createElement(c,{imageUrl:i.imageUrl,name:i.displayName&&i.displayName.name,email:i.defaultEmail,url:"https://passport.yandex.ru/profile",onClick:t.props.onClick}):r.createElement(a,{size:"l",theme:"coral",className:o("signin"),onClick:t.props.onYandexLoginButtonClick},s&&"yandex-suggest-toast"!==u?"Войти или создать":"Войти в Яндекс аккаунт")},(u="_renderContent")in s?Object.defineProperty(s,u,{value:l,enumerable:!0,configurable:!0,writable:!0}):s[u]=l,t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WelcomeScreenCard,r.Component),t=WelcomeScreenCard,(n=[{key:"render",value:function(){var e=this.props.type;return r.createElement("div",{className:o()},r.createElement("div",{className:o("wrapper")},r.createElement("span",{className:o("logo",{type:e})})),this._renderContent())}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),WelcomeScreenCard}();s.defaultProps={account:{},onYandexLoginButtonClick:function(){},onClick:function(){}},s.propTypes={type:i.string.isRequired,account:i.object,onYandexLoginButtonClick:i.func,onClick:i.func,isHardMode:i.bool,src:i.string},e.exports=s},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(4).lock("user-info"),a=n(344),i=n(3);n(1398);var c=function(e){function UserInfo(){var e,t,n,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserInfo);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,i=(e=_getPrototypeOf(UserInfo)).call.apply(e,[this].concat(s)),_defineProperty(_assertThisInitialized(t=!i||"object"!==_typeof(i)&&"function"!=typeof i?_assertThisInitialized(n):i),"state",{isImageError:!1}),_defineProperty(_assertThisInitialized(t),"_renderImage",function(){var e=t.props.imageUrl;return e&&e.x1&&!t.state.isImageError?r.createElement(a,_extends({className:o("image")},e,{onError:t._onError})):r.createElement("div",{className:o("image",{default:!0})})}),_defineProperty(_assertThisInitialized(t),"_onError",function(){return t.setState({isImageError:!0})}),t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UserInfo,r.Component),t=UserInfo,(n=[{key:"render",value:function(){var e=this.props,t=e.name,n=e.email,a=e.url;return r.createElement("a",{onClick:this.props.onClick,className:o(),href:a,target:"_blank",rel:"noopener noreferrer"},this._renderImage(),r.createElement("div",{className:o("wrapper")},r.createElement("div",{className:o("wrapper-name")},t),n&&r.createElement("div",{className:o("wrapper-email")},n)))}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),UserInfo}();c.defaultProps={email:null,onClick:function(){}},c.propTypes={imageUrl:i.object.isRequired,name:i.string.isRequired,email:i.any,url:i.string.isRequired,onClick:i.func},e.exports=c},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(3),a=n(15),i=n(102),c=n(46),s=n(352),u=n(390),l=n(348).MetrikaClick,p=function(e){var t=e.sezamDisplayName,n=e.yandexImageUrl,o=e.authUser,p=e.onSignIn,f=e.onNotNowClick,d=e.isDomikPopupOpened,m=e.metrikaActions,y=e.yandexAuthFormError,_=e.isTouch;return r.createElement("div",{className:i({hidden:d,"is-touch":_,form:"yandex-auth"})},r.createElement("div",{className:i("header")},"Войдите в аккаунт Яндекса, чтобы привязать его к КиноПоиску"),r.createElement("div",{className:i("body")},r.createElement(u,{leftAvatar:{imageUrl:a(o,"img.picture.x2"),title:o.displayName,subtitle:"КиноПоиск",defaultImageType:"kp"},rightAvatar:{imageUrl:n,title:t&&t.name,subtitle:"Яндекс",defaultImageType:"ya"},linkSymbol:"plus"}),r.createElement(l,{action:m.yandexAuthButtonClick},r.createElement(c,{size:"l",onClick:p,theme:"coral",block:!0,className:i("button")},"Войти и привязать Яндекс")),y&&r.createElement("p",{className:i("error-message")},"Что-то пошло не так, попробуйте ещё раз"),r.createElement(l,{action:m.notNowButtonClick},r.createElement("a",{className:i("not-now-link"),onClick:f},"Не сейчас")),r.createElement(s,null)))};p.propTypes={sezamDisplayName:o.object,yandexImageUrl:o.string,authUser:o.object,onSignIn:o.func,onNotNowClick:o.func,isDomikPopupOpened:o.bool,metrikaActions:o.object,yandexAuthFormError:o.bool,isTouch:o.bool},e.exports=p},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(4).lock("thank-you-ui"),a=n(351).LinkedAvatars,i=n(3),c=n(46);n(1403);var s=function(e){function ThankYouUI(){var e,t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ThankYouUI);for(var i=arguments.length,s=new Array(i),u=0;u<i;u++)s[u]=arguments[u];return n=this,a=(e=_getPrototypeOf(ThankYouUI)).call.apply(e,[this].concat(s)),_defineProperty(_assertThisInitialized(t=!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(n):a),"_renderContent",function(){var e=t.props,n=e.hasYaPlus,a=e.yaPlusPrice;return n?r.createElement("div",{className:o("content")},r.createElement("h1",{className:o("content-title")},"Всё получилось!"),r.createElement("div",{className:o("content-text")},"Теперь вы можете быстро заходить",r.createElement("br",null),"на КиноПоиск, используя Яндекс")):r.createElement("div",{className:o("content")},r.createElement("h1",{className:o("content-title")},"Подключите Плюс",r.createElement("br",null),"и получите доступ",r.createElement("br",null),"к эксклюзивным премьерам"),r.createElement("div",{className:o("content-text")},"Первые 30 дней бесплатно,",r.createElement("br",null)," затем — ",a," ₽ в месяц"))}),_defineProperty(_assertThisInitialized(t),"_renderButton",function(){var e=t.props,n=e.hasYaPlus,a=e.isTouch,i=e.params,s=e.closePopup;return n?r.createElement(c,{size:"l",theme:"outline",className:o("button"),href:i.retPath||"/",onClick:a?void 0:s},"Продолжить"):r.createElement(c,{size:"l",theme:"blue",className:o("button"),href:t.props.buttonTryLink},"Попробовать")}),t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ThankYouUI,r.Component),t=ThankYouUI,(n=[{key:"render",value:function(){var e=this.props,t=e.kpImageUrl,n=e.yaImageUrl,i=e.hasYaPlus,c=e.params,s=e.isTouch,u=e.closePopup,l={"has-plus":i};return r.createElement("div",{className:o(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({isTouch:s},l))},r.createElement(a,{leftAvatar:{imageUrl:t,defaultImageType:"kp",className:o("image")},rightAvatar:{imageUrl:n,defaultImageType:"ya",className:o("image")},className:o("wrapper-image")}),this._renderContent(),this._renderButton(),!i&&r.createElement("a",{className:o("link"),href:s?c.retPath||"/":null,onClick:s?void 0:u},"Не сейчас"))}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),ThankYouUI}();s.defaultProps={params:{},yaPlusPrice:"169"},s.propTypes={hasYaPlus:i.bool,kpImageUrl:i.string,yaImageUrl:i.string,params:i.object,isTouch:i.bool,closePopup:i.func,buttonTryLink:i.string,yaPlusPrice:i.string},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(4).lock("thank-you-ui-with-code"),a=n(3),i=n(46),c=n(504).copyTextToClipboard,s=n(150),u=n(58).CATEGORIES_SLUGS;n(1405);var l=function(e){function ThankYouUIWithCode(){var e,t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ThankYouUIWithCode),t=this,n=_getPrototypeOf(ThankYouUIWithCode).call(this),_defineProperty(_assertThisInitialized(e=!n||"object"!==_typeof(n)&&"function"!=typeof n?_assertThisInitialized(t):n),"_clipboardButtonRender",function(){return e.state.codeCopyDone?r.createElement("div",{className:o("code-clipboard",{done:!0})},r.createElement("div",{className:o("check-icon")})," Промокод скопирован"):r.createElement("div",{onClick:e._copyCodeToClipboard,className:o("code-clipboard")},"Скопировать промокод")}),_defineProperty(_assertThisInitialized(e),"_copyCodeToClipboard",function(){c(e.props.linkYandexPromoCode),e.setState({codeCopyDone:!0})}),e.state={codeCopyDone:!1},e}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ThankYouUIWithCode,r.Component),t=ThankYouUIWithCode,(n=[{key:"render",value:function(){var e=this.props,t=e.isTouch,n=e.params,a=e.closePopup,c=e.linkYandexPromoCode,l=e.linkYandexPromoText;return r.createElement("div",{className:o({"is-touch":t})},r.createElement("h1",{className:o("title")},"Всё получилось, вот ваш промокод!"),r.createElement("div",{className:o("description")},"Сохраните его — с ним можно бесплатно посмотреть один фильм в разделе «Онлайн» или в приложении КиноПоиска для Smart TV."),r.createElement("div",{className:o("card")},r.createElement("div",{className:o("card-item")},r.createElement("div",{className:o("card-item-code")},r.createElement("div",{className:o("code")},c),r.createElement("div",{className:o("code-description")},l))),r.createElement("div",{className:o("card-item")},this._clipboardButtonRender())),r.createElement(i,{size:"l",className:o("button"),theme:"orange",href:n.retPath||s.getRouteUrl("index",u.SUBSCRIPTION),onClick:t?void 0:a},"Выбрать фильм"),r.createElement("div",{className:o("link-wrapper")},r.createElement("a",{className:o("link"),target:"_blank",rel:"noopener noreferrer",href:"//yandex.ru/support/kinopoisk/online.html#online__pay-with-promocode"},"Полные условия")))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),ThankYouUIWithCode}();l.defaultProps={params:{}},l.propTypes={params:a.object,isTouch:a.bool,closePopup:a.func,linkYandexPromoCode:a.string,linkYandexPromoText:a.string},e.exports=l},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("domik-bind".concat("-partial-component")),o=n(0),a=n(3),i=n(967),c=n(46);n(1409);var s=function(e){function DomikBind(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DomikBind),_possibleConstructorReturn(this,_getPrototypeOf(DomikBind).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DomikBind,o.PureComponent),t=DomikBind,(n=[{key:"render",value:function(){return o.createElement("div",{className:r()},o.createElement("div",{className:r("title")},"Аккаунт, который вы хотите перенести, уже привязан к другому аккаунту Яндекса:"),o.createElement(i,{className:r("account-card-top"),name:this.props.firstAccountName,email:this.props.firstAccountEmail,accountLink:this.props.firstAccountLink,imageUrl:this.props.firstAccountImageUrl}),o.createElement("div",{className:r("hint")},"Вы можете привязать его к текущему:"),o.createElement(i,{className:r("account-card-bottom"),name:this.props.secondAccountName,email:this.props.secondAccountEmail,accountLink:this.props.secondAccountLink,imageUrl:this.props.secondAccountImageUrl}),o.createElement(c,{size:"xl",theme:"orange",className:r("action-button"),onClick:this.props.onActionButtonClick},"Привязать"),o.createElement("a",{className:r("relogin-link"),href:this.props.reloginLink},"Войти в другой аккаунт Яндекса"))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DomikBind}();s.propTypes={onActionButtonClick:function(){}},s.propTypes={firstAccountName:a.string,firstAccountEmail:a.string,firstAccountImageUrl:a.string,firstAccountLink:a.string,secondAccountName:a.string,secondAccountEmail:a.string,secondAccountImageUrl:a.string,secondAccountLink:a.string,reloginLink:a.string,onActionButtonClick:a.func},e.exports=s},function(e,t,n){},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("domik-message".concat("-partial-component")),o=n(0),a=n(3),i=n(46);n(1411);var c=n(278).MESSAGE_TYPES,s=function(e){function DomikMessage(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DomikMessage),_possibleConstructorReturn(this,_getPrototypeOf(DomikMessage).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DomikMessage,o.PureComponent),t=DomikMessage,(n=[{key:"render",value:function(){return o.createElement("div",{className:r({type:this.props.type})},o.createElement("div",{className:r("wrapper")},o.createElement("div",{className:r("icon")}),o.createElement("div",{className:r("title")},this.props.title),o.createElement("div",{className:r("message")},this.props.messageText),o.createElement(i,{onClick:this.props.onActionButtonClick,size:"xl",theme:"outline",className:r("action-button")},this.props.buttonText)))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DomikMessage}();s.propTypes={type:a.oneOf(Object.values(c)).isRequired,title:a.string,messageText:a.string,buttonText:a.string.isRequired,onActionButtonClick:a.func},e.exports=s},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("domik-recovery".concat("-partial-component")),o=n(0),a=n(3),i=n(46),c=n(967);n(1413);var s=function(e){function DomikRecovery(e){var t,n,r,o,a,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DomikRecovery),n=this,r=_getPrototypeOf(DomikRecovery).call(this,e),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(e){var n=e.target,r=n.scrollHeight-n.scrollTop!==n.clientHeight;r!==t.state.isMoreContent&&t.setState({isMoreContent:r})},(a="_handleScroll")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t.state={isMoreContent:!0},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DomikRecovery,o.PureComponent),t=DomikRecovery,(n=[{key:"render",value:function(){return o.createElement("div",{className:r()},o.createElement("div",{className:r("content"),onScroll:this._handleScroll},o.createElement("div",{className:r("content-title")},"Перенос данных"),o.createElement("div",{className:r("content-message")},"Для завершения переноса данных привяжите аккаунт Яндекса к аккаунту КиноПоиска"),o.createElement(c,{className:r("account-card"),type:c.TYPES.YANDEX,name:this.props.yandexAccountName,email:this.props.yandexAccountEmail,imageUrl:this.props.yandexAccountImageUrl,accountLink:this.props.yandexAccountLink}),o.createElement("div",{className:r("plus")}),o.createElement(c,{className:r("account-card"),type:c.TYPES.KINOPOISK,name:this.props.kpAccountName,email:this.props.kpAccountEmail,imageUrl:this.props.kpAccountImageUrl,accountLink:this.props.kpAccountLink})),o.createElement("div",{className:r("footer",{"is-more-content":this.state.isMoreContent})},o.createElement(i,{size:"xl",theme:"orange",className:r("action-button"),onClick:this.props.onActionButtonClick},"Восстановить")))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DomikRecovery}();s.propTypes={onActionButtonClick:function(){}},s.propTypes={kpAccountName:a.string,kpAccountEmail:a.string,kpAccountImageUrl:a.string,kpAccountLink:a.string,yandexAccountName:a.string,yandexAccountEmail:a.string,yandexAccountImageUrl:a.string,yandexAccountLink:a.string,onActionButtonClick:a.func},e.exports=s},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(4).lock("domik-login".concat("-partial-component")),o=n(0),a=n(3),i=n(46),c=n(1415);n(1417);var s="vkontakte",u="google",l="facebook",p="twitter",f="placeholder",d=f,m=[s,l,u,p,f],y=[s,l,u,p,"odnoklassniki","mailru"],_=function(e){function DomikLogin(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DomikLogin),n=this,r=_getPrototypeOf(DomikLogin).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleSocialNetworkButtonClick",function(e){var n=e.target.dataset.socialNetwork;n!==d?t.props.onSocialNetworkButtonClick(n):t.setState({isSocialNetworksListFull:!0})}),_defineProperty(_assertThisInitialized(t),"_handleInputChange",function(e){var n=e.target;t.setState(_defineProperty({},n.name,n.value))}),_defineProperty(_assertThisInitialized(t),"_handleActionButtonClick",function(){var e=t.props.captcha||{};t.props.onActionButtonClick({login:t.state.login,password:t.state.password,captchaKey:e.captchaKey,trackId:e.trackId,captchaAnswer:t.props.captcha&&t.state.captcha})}),t.state={isSocialNetworksListFull:!1,login:"",password:"",captcha:""},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DomikLogin,o.PureComponent),t=DomikLogin,(n=[{key:"render",value:function(){return o.createElement("div",{className:r()},o.createElement("div",{className:r("title")},"Перенос данных"),o.createElement("div",{className:r("message")},"Для завершения переноса данных войдите в ваш предыдущий аккаунт КиноПоиска"),this._renderSocialNetworksButtons(),o.createElement("div",{className:r("plus")},"или"),o.createElement("input",{className:r("input",{field:"email"}),type:"text",placeholder:"Почта или логин",name:"login",onChange:this._handleInputChange,value:this.state.login,autoFocus:!0}),o.createElement("div",{className:r("input-placeholder-wrapper")},o.createElement("input",{className:r("input",{"with-placeholder":!0}),type:"password",placeholder:"Пароль",name:"password",onChange:this._handleInputChange,value:this.state.password}),o.createElement("button",{className:r("input-placeholder"),onClick:this.props.onRemindClick},"Напомнить")),this.props.captcha&&o.createElement(o.Fragment,null,o.createElement(c,{className:r("captcha"),imageUrl:this.props.captcha.imageUrl,onRefreshClick:this.props.onCaptchaRefreshClick}),o.createElement("input",{className:r("input"),type:"text",placeholder:"Текст на картинке",name:"captcha",onChange:this._handleInputChange,value:this.state.captcha})),o.createElement(i,{disabled:!this.state.login||!this.state.password||this.props.captcha&&!this.state.captcha,size:"xl",theme:"orange",className:r("action-button"),onClick:this._handleActionButtonClick},"Войти"),o.createElement("a",{className:r("help-link"),target:"_blank",rel:"noopener noreferrer",href:"https://yandex.ru/support/kinopoisk/settings.html#settings__authorization"},"Помощь"))}},{key:"_renderSocialNetworksButtons",value:function(){var e=this,t=this.state.isSocialNetworksListFull?y:m;return o.createElement("div",{className:r("social-networks")},t.map(function(t){return o.createElement("button",{key:t,className:r("social-network",{type:t}),onClick:e._handleSocialNetworkButtonClick,"data-social-network":t})}))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DomikLogin}();_.defaultProps={onActionButtonClick:function(){},onSocialNetworkButtonClick:function(){},onRemindClick:function(){},onCaptchaRefreshClick:function(){}},_.propTypes={onActionButtonClick:a.func,onRemindClick:a.func,onSocialNetworkButtonClick:a.func,onCaptchaRefreshClick:a.func,captcha:a.shape({imageUrl:a.string,captchaKey:a.string,trackId:a.string})},e.exports=_},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("captcha".concat("-partial-component")),o=n(0),a=n(3),i=n(2);n(1416);var c=function(e){function Captcha(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Captcha),_possibleConstructorReturn(this,_getPrototypeOf(Captcha).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Captcha,o.PureComponent),t=Captcha,(n=[{key:"render",value:function(){return o.createElement("div",{className:i(r(),this.props.className),style:{backgroundImage:"url(".concat(this.props.imageUrl,")")}},o.createElement("button",{className:r("refresh"),onClick:this.props.onRefreshClick}))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Captcha}();c.defaultProps={imageUrl:"",onRefreshClick:function(){}},c.propTypes={className:a.string,imageUrl:a.string,onRefreshClick:a.func},e.exports=c},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=function(e){function ResizeListener(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResizeListener),_possibleConstructorReturn(this,_getPrototypeOf(ResizeListener).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ResizeListener,r.PureComponent),t=ResizeListener,(n=[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.props.onResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.props.onResize)}},{key:"render",value:function(){return this.props.children}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),ResizeListener}();a.propTypes={children:o.any,onResize:o.func},a.defaultProps={onResize:function(){}},e.exports=a},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=function(e){function MutationObserverComponent(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MutationObserverComponent);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,t=!(r=(e=_getPrototypeOf(MutationObserverComponent)).call.apply(e,[this].concat(s)))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=null,(a="_mutationObserver")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(MutationObserverComponent,r.PureComponent),t=MutationObserverComponent,(n=[{key:"componentDidMount",value:function(){this._mutationObserver=new MutationObserver(this.props.onMutate),this._mutationObserver.observe(this.props.element.current,this.props.mutateConfig)}},{key:"componentWillUnmount",value:function(){this._mutationObserver.disconnect()}},{key:"render",value:function(){return this.props.children}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),MutationObserverComponent}();a.propTypes={children:o.any,mutateConfig:o.shape({attributes:o.bool,childList:o.bool,subtree:o.bool}),onMutate:o.func,element:o.object.isRequired},a.defaultProps={mutateConfig:{attributes:!0,childList:!0,subtree:!0},onMutate:function(){}},e.exports=a},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(491),a=r.forwardRef(function(e,t){return r.createElement(o,_extends({theme:"compact",ref:t},e))});e.exports=a},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(2),o=n(0),a=n(3),i=n(4).lock("anchor-element");n(1429);var c=function(e){var t=e.id,n=e.className,a=e.offset,c=e.pageOffset;return o.createElement("span",{id:t,className:r(i(),n),style:{top:a+c}})};c.defaultProps={offset:0,pageOffset:0},c.propTypes={id:a.string.isRequired,className:a.string,offset:a.number,pageOffset:a.number},e.exports=c},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n(1769)},function(e,t,n){"use strict";window._babelPolyfill||n(1770),n(1e3).polyfill();var r=n(554).loadableReady,o=n(888);n(53).locale("ru");var a=n(432),i=n(648),c=n(346),s=n(104).default,u=n(1935),l=n(887),p=n(281),f=n(310),d=n(889).default,m=n(936).reactDomHydrate,y=function(){s.createStoreWithMiddleware(d());var e=s.getStore(),t=e.getState();!function(e){var t=e.Component,n=e.store;n.getState().common.partialComponents.forEach(function(e){r(function(){m({container:document.getElementById("partial_component__".concat(e.name)),store:n,Component:t,componentProps:{componentName:e.name,getModel:function(e,t){return s.getModel(e,t)}}})})})}({Component:u,store:e}),l(t),t.common.metrikaCounters.forEach(function(e){return o(e)}),c.init(),p.init({socialBrokerUrlPath:t.common.socialBrokerUrlPath,yandexPassportUrlPath:t.common.yandexPassportUrlPath}),f.init({sezamApiUrl:t.common.sezamApiUrl}),a.init(t.common.antiAdBlockCookieName);var n=document.querySelectorAll(".js-position-sticky");i.add(n)};"loading"!==document.readyState?y():document.addEventListener("DOMContentLoaded",y)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(385),c=n(558).default,s=n(570);n(1936);var u=n(1937),l=function(e){function PartialWrapper(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialWrapper),_possibleConstructorReturn(this,_getPrototypeOf(PartialWrapper).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialWrapper,r.Component),t=PartialWrapper,(n=[{key:"getChildContext",value:function(){return{dispatch:this.props.dispatch}}},{key:"componentWillReceiveProps",value:function(e){if(this.props.page.disableScroll!==e.page.disableScroll){document.body.classList.toggle("partial-components-body_no-scroll",e.page.disableScroll)}}},{key:"render",value:function(){var e=this.props.componentName;if(!e)return null;var t=u("./".concat(e,"/index.jsx"));return r.createElement(c,null,r.createElement(t,this.props))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialWrapper}();l.propTypes={dispatch:o.func.isRequired,componentName:o.string,page:o.object},l.childContextTypes={dispatch:o.func},e.exports=i(s,a(function(e){return e}))(l)},function(e,t,n){},function(e,t,n){var r={"./deadpool-dialog/index.jsx":1938,"./footer-header_structure/index.jsx":1118,"./footer/index.jsx":1980,"./header-fresh-experience/index.jsx":1981,"./header-header_structure/index.jsx":2024,"./header-topline/index.jsx":2038,"./header/index.jsx":1119,"./kinopoisk-go-subscription/index.jsx":2041,"./partial-app/index.jsx":930,"./tickets-promo-popup/index.jsx":2046,"./user-devices/index.jsx":2052,"./user-social-options/index.jsx":2062,"./user-subscription/available-subscriptions.jsx":1129,"./user-subscription/current-subscription.jsx":1130,"./user-subscription/index.jsx":2073,"./watch-in-cinema-slider/film-poster-snippet-connected.jsx":1131,"./watch-in-cinema-slider/index.jsx":2075,"./watch-online-button/index.jsx":2078,"./watch-online-person-slider/index.jsx":2083,"./watch-online-person-slider/watch-online-poster-snippet-connected.jsx":1132,"./watch-online-slider/index.jsx":2086,"./watch-online-slider/watch-online-poster-snippet-connected.jsx":1133,"./watch-online-vendor-badge/index.jsx":2087};function webpackContext(e){var t=webpackContextResolve(e);return n(t)}function webpackContextResolve(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}webpackContext.keys=function(){return Object.keys(r)},webpackContext.resolve=webpackContextResolve,e.exports=webpackContext,webpackContext.id=1937},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1939);var r=n(0),o=n(3),a=n(15),i=n(4).lock("partial-deadpool-dialog"),c=n(1264),s=n(1222),u=s.getHistory,l=s.sendMessage,p=s.sendGreetingMessage,f=n(31).deadpoolDialog,d=n(127),m=function(e){function PartialDeadpoolDialog(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialDeadpoolDialog),_possibleConstructorReturn(this,_getPrototypeOf(PartialDeadpoolDialog).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialDeadpoolDialog,r.Component),t=PartialDeadpoolDialog,(n=[{key:"render",value:function(){var e=a(this.props.page,"deadpoolDialog.messages",[]);return r.createElement(d,null,r.createElement(c,{appTheme:"desktop",messages:e,sendMessage:l,sendGreetingMessage:p,getHistory:u,metrikaActions:f,className:i()}))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialDeadpoolDialog}();m.defaultProps={models:{users:[]},common:{user:{}},page:{deadpoolDialog:{messages:[]}},auth:{},branding:{},ugc:{}},m.propTypes={page:o.object},m.contextTypes={dispatch:o.func},e.exports=m},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){e.exports=n(1118)},function(e,t,n){e.exports=n(1119)},function(e,t,n){var r=n(1120),o=n(2020);e.exports={HeaderFresh:r,HeaderFreshConnected:o}},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-fresh-search".concat("-partial-component");n(1985);var o=n(0),a=n(3),i=n(353),c=n(1121),s=n(597),u=n(4).lock(r),l=n(2),p=n(80),f=n(246).MIN_SUGGEST_VALUE_LENGTH,d=n(31).header,m=n(209).updateUgcProperties,y=n(1990),_=n(386),h=n(223).THEMES,g=["text","studio","user","keyword"],b=function(e){function HeaderSearch(e){var t,n,r,o,a,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderSearch),n=this,r=_getPrototypeOf(HeaderSearch).call(this,e),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),c=function(e){t.searchInput=e,t.props.searchInputRef(e)},(a="_setSearchInputRef")in o?Object.defineProperty(o,a,{value:c,enumerable:!0,configurable:!0,writable:!0}):o[a]=c,t.state={metrikaRequestId:String(Math.floor(1e4*Math.random()+1)+Number(new Date)),value:t._getDefaultSearchValue()},t._onInputChange=i(t._onInputChange.bind(_assertThisInitialized(t)),200),t._hideSuggest=t._hideSuggest.bind(_assertThisInitialized(t)),t._onSuggestSelect=t._onSuggestSelect.bind(_assertThisInitialized(t)),t._onFormSubmit=t._onFormSubmit.bind(_assertThisInitialized(t)),t._onSearchButtonClick=t._onSearchButtonClick.bind(_assertThisInitialized(t)),t._onAdvancedSearchButtonClick=t._onAdvancedSearchButtonClick.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderSearch,o.Component),t=HeaderSearch,(n=[{key:"componentDidMount",value:function(){var e=this;""!==this.searchInput.value?this._onInputChange():this._setDefaultValuesToInputs(),"/"===location.pathname&&setTimeout(function(){s(e.searchInput)&&e.searchInput.focus()},300)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this._getDefaultSearchValue(e);this.searchInput!==document.activeElement&&this.searchInput.value!==n&&this.setState({value:n},function(){t._setDefaultValuesToInputs()})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,r=t.appTheme,a=t.className;return o.createElement("form",{className:l(u({theme:n,"app-theme":r}),a),onSubmit:this._onFormSubmit,action:"/index.php",method:"GET",acceptCharset:"cp1251",ref:function(t){return e._searchForm=t}},o.createElement("div",{className:u("inner")},this._renderSearchInput(),o.createElement("input",{type:"hidden",name:"what",ref:function(t){return e.shortcutFilterInput=t}}),o.createElement("div",{className:u("controls")},this._renderAdvancedSearchButton(),o.createElement("button",{className:u("button"),type:"button",onClick:this._onSearchButtonClick},"Найти")),o.createElement(y,{suggest:this.props.suggest,value:this._getSuggestValue(),onSelect:this._onSuggestSelect,ref:function(t){return e._headerSearchSuggest=t},className:u("suggest"),theme:n,appTheme:r})))}},{key:"_renderSearchInput",value:function(){return o.createElement("input",{className:u("field"),type:"text",name:"kp_query",placeholder:"Фильмы, персоны, кинотеатры",autoComplete:"off",onChange:this._onInputChange,onKeyDown:this._onInputKeyDown,ref:this._setSearchInputRef})}},{key:"_renderAdvancedSearchButton",value:function(){var e=this.props.theme;return"light"===e?null:o.createElement("a",{className:u("advanced-search-button"),href:"/s/","data-tooltip":"Расширенный поиск","data-tooltip-position":e===h.topline?"bottom":"top","data-tooltip-theme":"nocorner","data-tooltip-show-delay":"1000","data-tooltip-offset":"6",onClick:this._onAdvancedSearchButtonClick})}},{key:"_getSuggestValue",value:function(){return this.shortcutFilterInput&&this.shortcutFilterInput.value?"":this.state.value}},{key:"_getDefaultSearchValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getDefaultShortcutFilterValue(e),n="";t&&(n+="".concat(t,": "));var r=e.value;return n+=void 0===r?"":r}},{key:"_getDefaultShortcutFilterValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).shortcutFilterValue;return e&&g.includes(e)?e:null}},{key:"_setDefaultValuesToInputs",value:function(){this.searchInput.value=this._getDefaultSearchValue(),this.shortcutFilterInput.value=this._getDefaultShortcutFilterValue()}},{key:"_onAdvancedSearchButtonClick",value:function(){this.context.dispatch(d.advancedSearchClick())}},{key:"_onSuggestSelect",value:function(e){var t=this.props.suggest[e],n=this.props.theme,r=this.state,o=r.value,a={metrikaRequestId:r.metrikaRequestId,value:o,itemIndex:e+1,item:t,time:(Date.now()-this.state.startSearchTime)/1e3,theme:n};this.context.dispatch(d.suggestSelect(a))}},{key:"_onFormSubmit",value:function(e){var t=this.state.value;if(t&&t.length||e.preventDefault(),this.shortcutFilterInput&&this.shortcutFilterInput.value&&!this._isShortcutFilterHidden){var n=this.shortcutFilterInput.value.length+1;this.searchInput.value=c(this.searchInput.value.substring(n)),this._isShortcutFilterHidden=!0}}},{key:"_onInputKeyDown",value:function(e){[_.UP,_.DOWN].includes(e.keyCode)&&e.preventDefault()}},{key:"_onInputChange",value:function(){var e=this,t=this.searchInput.value,n=this.state.startSearchTime,r=_slicedToArray(t.split(":"),2),o=r[0],a=r[1],i=t.startsWith("".concat(o,":"))&&g.includes(o);i&&this.shortcutFilterInput.value!==o?(this.shortcutFilterInput.value=o,this._hideSuggest()):i||(this.shortcutFilterInput.value="",t&&t.length>=f?(this.context.dispatch(p.updateSuggest(t)),this.state.startSearchTime||(n=Date.now(),this.context.dispatch(d.searchStart(this.state.metrikaRequestId,this.props.theme)))):this._hideSuggest()),this.setState({value:t,startSearchTime:n},function(){e.context.dispatch(m({searchValue:i?c(a):t,searchShortcutValue:i?o:""}))})}},{key:"_hideSuggest",value:function(){this._headerSearchSuggest&&this._headerSearchSuggest.hide&&this._headerSearchSuggest.hide()}},{key:"_onSearchButtonClick",value:function(){var e=this.state,t=e.value,n=e.metrikaRequestId;if(!t)return this.context.dispatch(d.promolinkClick()),void(window.location="/chance/");var r=this.props.theme;this.context.dispatch(d.searchButtonClick({metrikaRequestId:n,value:t,theme:r})),this._searchForm.dispatchEvent(new Event("submit")),this._searchForm.submit()}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),HeaderSearch}();b.defaultProps={theme:"default",searchInputRef:function(){}},b.propTypes={suggest:a.array,value:a.oneOfType([a.string,a.number]),shortcutFilterValue:a.string,theme:a.oneOf(Object.values(h)),appTheme:a.string,className:a.string,searchInputRef:a.func},b.contextTypes={dispatch:a.func},e.exports=b},function(e,t,n){},,,,,function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(4).lock("header-fresh-search-suggest".concat("-partial-component")),i=n(2),c=n(249),s=n(115),u=n(959),l=n(80),p=n(246).MIN_SUGGEST_VALUE_LENGTH;n(1992);var f=[{type:"first",name:"Возможно, вы искали"},{type:"film",name:"Фильмы"},{type:"people",name:"Персоны"},{type:"cinema",name:"Кинотеатры"},{type:"page",name:"Страницы КиноПоиска"}],d=n(386),m=function(e){function HeaderSearchSuggest(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderSearchSuggest),n=this,(t=!(r=_getPrototypeOf(HeaderSearchSuggest).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={focusedItemIndex:-1},t._renderGroup=t._renderGroup.bind(_assertThisInitialized(t)),t._renderItem=t._renderItem.bind(_assertThisInitialized(t)),t._onKeyDown=t._onKeyDown.bind(_assertThisInitialized(t)),t._selectItem=t._selectItem.bind(_assertThisInitialized(t)),t._onMouseEnter=t._onMouseEnter.bind(_assertThisInitialized(t)),t._onMouseLeave=s(t._onMouseLeave.bind(_assertThisInitialized(t)),90),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderSearchSuggest,r.Component),t=HeaderSearchSuggest,(n=[{key:"componentDidMount",value:function(){this._suggest.parentNode.addEventListener("keydown",this._onKeyDown)}},{key:"componentWillReceiveProps",value:function(e){c(e.suggest,this.props.suggest)||this.setState({focusedItemIndex:-1})}},{key:"componentWillUnmount",value:function(){this._suggest.parentNode.removeEventListener("keydown",this._onKeyDown)}},{key:"render",value:function(){var e=this,t=this.props,n=t.value,o=t.theme,c=t.appTheme,s=t.className,u=[];return n.length>=p&&this._suggestHasItems&&(this._itemIndex=0,u=u.concat(f.map(this._renderGroup),this._renderFooter())),r.createElement("div",{className:i(a({"app-theme":c,theme:o}),s),ref:function(t){return e._suggest=t}},u)}},{key:"_renderGroup",value:function(e){var t=this.props.suggest,n=e.type,o=e.name,i=t.filter(function(e){return e.type===n});return i.length?r.createElement("div",{className:a("group",{type:n}),key:n},r.createElement("div",{className:a("group-title")},o),i.map(this._renderItem)):null}},{key:"_renderItem",value:function(e){var t,n=this,o=e.id,i=e.name,c=e.subname,s=e.serialType,u=e.rating,l=e.link,p=e.type,f=this._itemIndex++;return this.state.focusedItemIndex>=0&&(t=this.props.suggest[this.state.focusedItemIndex].id),r.createElement("a",{href:l,className:a("item",{type:p,focused:t===o}),key:f,onClick:function(){return n._selectItem(f,!1)},onMouseEnter:function(){return n._onMouseEnter(f)},onMouseLeave:this._onMouseLeave},r.createElement("span",{className:a("content")},this._renderNamesWrapper({name:i,subname:c,serialType:s}),this._renderYear(e)),this._renderRating(u))}},{key:"_renderNamesWrapper",value:function(e){var t=e.name,n=e.subname,o=e.serialType;return r.createElement("span",{className:a("names-wrapper")},this._renderName(t,n),this._renderSubname(t,n),this._renderSerialType(o))}},{key:"_renderName",value:function(e,t){return e||t?r.createElement("span",{dangerouslySetInnerHTML:{__html:"".concat(e||t)},className:a("name")}):null}},{key:"_renderSubname",value:function(e,t){return!e&&t||!t?null:r.createElement("span",{dangerouslySetInnerHTML:{__html:t},className:a("subname")})}},{key:"_renderSerialType",value:function(e){return e?r.createElement("span",{className:a("serial-type")},e):null}},{key:"_renderYear",value:function(e){var t=e.year,n=void 0===t?"":t;return 0===Number(n)?null:r.createElement("span",{dangerouslySetInnerHTML:{__html:n},className:a("year")})}},{key:"_renderRating",value:function(e){return e?r.createElement("span",{className:a("rating",{type:Number(e.value)?e.type:"neutral"})},Number(e.value)?e.value:"—"):null}},{key:"_renderFooter",value:function(){return r.createElement("a",{href:"/index.php?kp_query=".concat(this.props.value),className:a("more"),key:"footer"},"Все результаты")}},{key:"handleClickOutside",value:function(){var e=this.props.suggest,t=void 0===e?[]:e;t&&t.length&&this.hide()}},{key:"_onKeyDown",value:function(e){if(this._suggestHasItems){var t=d.ENTER,n=d.UP,r=d.DOWN,o=d.ESC,a=d.TAB;switch(e.keyCode){case n:this._focusItem("prev");break;case a:e.preventDefault(),e.shiftKey?this._focusItem("prev"):this._focusItem("next");break;case r:this._focusItem("next");break;case o:e.stopPropagation(),this.hide();break;case t:this.state.focusedItemIndex>=0&&(e.preventDefault(),e.stopPropagation()),-1!==this.state.focusedItemIndex&&this._selectItem()}}}},{key:"_focusItem",value:function(e){var t=this.props.suggest.length-1,n=this.state.focusedItemIndex;"next"===e?n+1<=t?n+=1:n=0:"prev"===e&&(n>0?n-=1:n=t),this.setState({focusedItemIndex:n})}},{key:"_selectItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0!==e?e:this.state.focusedItemIndex;this.props.onSelect(n),t&&(document.location=this.props.suggest[n].link)}},{key:"_onMouseEnter",value:function(e){this._onMouseLeave.cancel(),this.setState({focusedItemIndex:e})}},{key:"_onMouseLeave",value:function(){this.setState({focusedItemIndex:-1})}},{key:"hide",value:function(){this.setState({focusedItemIndex:-1}),this.context.dispatch(l.hideSuggest())}},{key:"_suggestHasItems",get:function(){var e=this.props.suggest;return e&&e.length}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),HeaderSearchSuggest}();m.defaultProps={value:""},m.propTypes={value:o.string,suggest:o.array,onSelect:o.func.isRequired,className:o.string,theme:o.string,appTheme:o.string},m.contextTypes={dispatch:o.func},e.exports=u(m)},,function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-fresh-dropdown".concat("-partial-component");n(1994);var o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=function(e){function HeaderDropdown(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderDropdown),n=this,(t=!(r=_getPrototypeOf(HeaderDropdown).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._renderNavigation=t._renderNavigation.bind(_assertThisInitialized(t)),t._renderNavigationItem=t._renderNavigationItem.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderDropdown,o.Component),t=HeaderDropdown,(n=[{key:"render",value:function(){var e=this.props,t=e.appTheme,n=e.theme,r=e.className;return o.createElement("div",{onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,className:c(i({theme:n,"app-theme":t}),r)},o.createElement("div",{className:i("inner")},this._renderSidebar(),o.createElement("div",{className:i("content-wrapper")},this._renderContent())))}},{key:"_renderSidebar",value:function(){var e=this.props,t=e.sidebarNavigation,n=void 0===t?[]:t,r=e.featuredNavigation,a=void 0===r?[]:r;return o.createElement("div",{className:i("sidebar")},[[n],[a,{featured:!0}]].map(this._renderNavigation))}},{key:"_renderNavigation",value:function(e,t){var n=_slicedToArray(e,2),r=n[0],a=void 0===r?[]:r,c=n[1],s=void 0===c?{}:c;return a&&a.length?o.createElement("ul",{key:t,className:i("sidebar-navigation",s)},a.map(this._renderNavigationItem)):null}},{key:"_renderNavigationItem",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.name,r=t.link,a=t.target,c=t.modifier,s=t.metrikaData,u={};return c&&(u[c]=!0),o.createElement("li",{className:i("sidebar-item",u),key:"item-".concat(n)},o.createElement("a",{href:r,target:a,className:i("sidebar-link"),onClick:function(t){return e.props.onSidebarNavigationClick(t,s)}},n))}},{key:"_renderContent",value:function(){var e=this.props,t=e.contentTitle,n=e.content;if(!n)return null;var r=[];return t&&r.push(o.createElement("div",{key:"title",className:i("content-title")},t)),r.push(o.createElement("div",{key:"content",className:i("content")},n)),r}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),HeaderDropdown}();s.propTypes={sidebarNavigation:a.array,featuredNavigation:a.array,onSidebarNavigationClick:a.func,contentTitle:a.string,content:a.oneOfType([a.array,a.element]),onMouseEnter:a.func,onMouseLeave:a.func,className:a.string,appTheme:a.string,theme:a.string},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1996);var r=n(0),o=n(3),a=n(2),i=n(4).lock("header-fresh-dropdown-error".concat("-partial-component")),c=function(e){function HeaderDropdownError(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderDropdownError),_possibleConstructorReturn(this,_getPrototypeOf(HeaderDropdownError).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderDropdownError,r.Component),t=HeaderDropdownError,(n=[{key:"render",value:function(){return r.createElement("div",{className:a(i(),this.props.className)},r.createElement("div",{className:i("icon")}),r.createElement("div",{className:i("title")},"Что-то пошло не так"),r.createElement("div",{className:i("description")},"Попробуйте обновить страницу"))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),HeaderDropdownError}();c.propTypes={className:o.string},e.exports=c},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n(1998);var r=n(0),o=n(3),a=n(4).lock("header-fresh-chart".concat("-partial-component")),i=n(2),c=n(31).header,s=function(e){function HeaderChart(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderChart),n=this,(t=!(r=_getPrototypeOf(HeaderChart).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={ellipsis:!1,shadow:!1,showTooltip:!1},t._onLoad=t._onLoad.bind(_assertThisInitialized(t)),t._onClick=t._onClick.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderChart,r.Component),t=HeaderChart,(n=[{key:"componentDidMount",value:function(){"complete"===document.readyState?this._onLoad():window.addEventListener("load",this._onLoad)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("load",this._onLoad)}},{key:"render",value:function(){var e=this.props,t=e.film,n=e.className,o=this.state.loaded;return r.createElement("a",{className:i(a({loaded:o}),n),href:t.relativeUrl,onClick:this._onClick},this._renderTooltipWrapper(),this._renderFilm())}},{key:"_renderTooltipWrapper",value:function(){if(!this.state.showTooltip)return null;var e={"data-tooltip":this.props.film.displayTitle,"data-tooltip-position":"bottom","data-tooltip-show-delay":1e3,"data-tooltip-offset":1,"data-tooltip-class":a("tooltip")};return r.createElement("div",_extends({className:a("tooltip-trigger")},e))}},{key:"_renderFilm",value:function(){var e=this,t=this.props.film,n=this.state,o=n.ellipsis,i=n.shadow;return r.createElement("div",{className:a("details")},r.createElement("div",{className:a("label")},"Фильм дня"),r.createElement("div",{className:a("title-wrapper")},r.createElement("div",{className:a("title",{ellipsis:o,shadow:i}),ref:function(t){return e._title=t}},r.createElement("span",{className:a("title-inner"),ref:function(t){return e._titleInner=t}},t.displayTitle)),this._renderPositionChanges()))}},{key:"_renderPositionChanges",value:function(){var e=this.props.positionChanges;return e?r.createElement("span",{className:a("position-changes")},e):null}},{key:"_onLoad",value:function(){var e={loaded:!0};this._titleInner.offsetWidth>this._title.offsetWidth+1&&(void 0!==this._title.style.webkitBackgroundClip?e.shadow=!0:e.ellipsis=!0,e.showTooltip=!0),Object.keys(e).length&&this.setState(e)}},{key:"_onClick",value:function(){this.context.dispatch(c.chartClick())}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),HeaderChart}();s.propTypes={film:o.shape({displayTitle:o.string,relativeUrl:o.string}),positionChanges:o.number,className:o.string},s.contextTypes={dispatch:o.func},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="post-snippet".concat("-partial-component");n(2e3);var o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(343),u=n(341),l=function(e){function PostSnippet(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PostSnippet),n=this,(t=!(r=_getPrototypeOf(PostSnippet).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onClick=t._onClick.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PostSnippet,o.Component),t=PostSnippet,(n=[{key:"render",value:function(){return this.props.stub?this._renderStub():this._renderPost()}},{key:"_renderStub",value:function(){var e=this.props,t=e.theme,n=e.className;return o.createElement("div",{className:c(i({theme:t}),n)},o.createElement("div",{className:i("stub",{image:!0})}),o.createElement("div",{className:i("stub",{title:!0})}))}},{key:"_renderPost",value:function(){var e=this.props,t=e.post,n=e.appTheme,r=e.theme,a=e.className;return o.createElement("a",{className:c(i({theme:r,"app-theme":n}),a),href:t.url,onClick:this._onClick},o.createElement("div",{className:i("image-wrap")},o.createElement(u,_extends({className:i("image"),alt:t.title},t.previewImg,{loadWatcher:!0})),this._renderVideoIcon()),o.createElement("div",{className:i("title")},t.title))}},{key:"_renderVideoIcon",value:function(){return this.props.post.withVideo?o.createElement("div",{className:i("video")}):null}},{key:"_onClick",value:function(e){var t=this.props,n=t.post,r=t.onClick;"function"==typeof r&&r(e,n)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),PostSnippet}();l.propTypes={big:a.bool,stub:a.bool,post:a.shape({id:a.number,title:a.string,previewImg:a.shape({x1:a.string,x2:a.string}),url:a.string,withVideo:a.bool}),onClick:a.func,className:a.string,theme:a.string,appTheme:a.string},l.contextTypes={dispatch:a.func},l.defaultProps={theme:"default"},e.exports=s(l)},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="trailer-snippet".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(960).default,u=n(15),l=n(343),p=n(341),f=n(2003);n(2004);var d=function(e){function TrailerSnippet(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TrailerSnippet),n=this,(t=!(r=_getPrototypeOf(TrailerSnippet).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onClick=t._onClick.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TrailerSnippet,o.Component),t=TrailerSnippet,(n=[{key:"render",value:function(){return this.props.stub?this._renderStub():this._renderTrailer()}},{key:"_renderStub",value:function(){return o.createElement("div",{className:c(i(),this.props.className)},o.createElement("div",{className:i("stub",{image:!0})}),o.createElement("div",{className:i("stub",{title:!0})}),o.createElement("div",{className:i("stub",{genre:!0})}))}},{key:"_renderTrailer",value:function(){var e=this.props,t=e.trailer,n=e.appTheme,r=e.theme,a=e.className;return o.createElement("div",{className:c(i({theme:r,"app-theme":n}),a)},o.createElement("a",{onClick:this._onClick,href:t.url,className:i("image-wrap")},o.createElement("div",{className:i("play-wrap")},o.createElement(f,{mods:{theme:"grey"},className:i("play")})),o.createElement(p,_extends({className:i("image"),alt:t.displayMovieTitle},t.img.preview,{loadWatcher:!0}))),o.createElement("a",{href:t.filmRelativeUrl,className:i("title")},o.createElement(s,{lines:2},t.displayMovieTitle)),o.createElement("div",{className:i("genre")},[t.filmYear,t.firstGenre].filter(Boolean).join(", ")))}},{key:"_onClick",value:function(e){var t=this.props,n=t.trailer,r=t.onClick;"function"==typeof r&&r(e,n);var o=u(window,"Ya.Kinopoisk.Widgets.discovery");o&&(e.preventDefault(),o.open(n.movieId,{trailerId:n.id}))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),TrailerSnippet}();d.defaultProps={theme:"default"},d.propTypes={big:a.bool,stub:a.bool,trailer:a.shape({id:a.number,displayMovieTitle:a.string,firstGenre:a.string,img:a.shape({preview:a.shape({x1:a.string,x2:a.string})}),url:a.string,filmRelativeUrl:a.string,movieId:a.number,filmYear:a.string}),onClick:a.func,theme:a.string,appTheme:a.string,className:a.string},d.contextTypes={dispatch:a.func},e.exports=l(d)},function(e,t,n){"use strict";var r=n(962);e.exports=r},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(0).PureComponent,a=n(5).connect,i=n(33).compose,c=n(501),s=n(3),u=n(397).default,l=n(226).getBasicFilmModel,p=n(229),f=p.selectBasicFilmOttData,d=p.showNameplateEffect,m=p.clickNameplateEffect,y=n(79).WATCH_ON_KP_BLOCK_NAME,_=function(e){function WatchOnlinePosterSnippetConnected(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePosterSnippetConnected);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(WatchOnlinePosterSnippetConnected)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleShowNameplate",function(){var e=t.props,n=e.position,r=e.filmId,o=e.onShowNameplate;e.ottData.nameplateData&&o({position:n,filmId:r,fromBlock:y})}),_defineProperty(_assertThisInitialized(t),"_handleClickNameplate",function(){var e=t.props,n=e.position,r=e.filmId;(0,e.onClickNameplate)({position:n,filmId:r,fromBlock:y})}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePosterSnippetConnected,o),t=WatchOnlinePosterSnippetConnected,(n=[{key:"render",value:function(){var e=this.props,t=e.film,n=e.ottData,o=void 0===n?{}:n;return r.createElement(u,_extends({watchUrl:t.watchUrl,nameplateData:o.nameplateData,handleShowNameplate:this._handleShowNameplate,handleClickNameplate:this._handleClickNameplate,size:"m"},this.props))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),WatchOnlinePosterSnippetConnected}();_.propTypes={film:s.object.isRequired,watchUrlQuery:s.string,ottData:s.shape({nameplateData:s.shape({text:s.string,type:s.string})}),position:s.number,filmId:s.number,onClickNameplate:s.func,onShowNameplate:s.func},e.exports=i(a(function(e,t){return{film:l(e,t.filmId),ottData:f(e,t.filmId)}},{onShowNameplate:d,onClickNameplate:m}),c)(_)},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(5).connect,a=n(3),i=n(397).default,c=n(173).getFilmModel,s=n(968).selectPlainFilmAfishaData,u=n(229),l=u.showNameplateEffect,p=u.clickNameplateEffect,f=function(e){var t=e.film,n=e.afishaData,o=void 0===n?{}:n,a=e.filmId,c=e.position,s=e.onShowNameplate,u=e.onClickNameplate,l=r.useCallback(function(){o.nameplateData&&s({position:c,filmId:a})},[c,a]),p=r.useCallback(function(){u({position:c,filmId:a})},[c,a]);return t?r.createElement(i,_extends({nameplateData:o.nameplateData,snippetUrl:t.relativeUrl,handleShowNameplate:l,handleClickNameplate:p,size:"m"},e)):null};f.propTypes={film:a.object.isRequired,afishaData:a.shape({nameplateData:a.shape({type:a.string,text:a.string,buttonHref:a.string})}),onClickNameplate:a.func,onShowNameplate:a.func,filmId:a.number,position:a.number},e.exports=o(function(e,t){return{film:c(e,t.filmId),afishaData:s(e,t.filmId)}},{onShowNameplate:l,onClickNameplate:p})(f)},function(e,t,n){var r=n(100).POST_TYPES_NAVIGATION_LIST,o=n(1126),a=o.CUSTOM_NAV_ITEM_TYPE,i=o.HD_NAV_ITEM_TYPE,c=n(2008).TITLES_VALUES.default,s=n(345).getUrl,u=n(354),l=[{name:"Афиша",link:"/afisha/new/city/",type:"afisha",metrikaData:["afisha"],contentMeta:{title:"Смотрите в кинотеатрах",model:"plainFilm",storeKey:"filmsInCinema",count:4,wideCount:5},subitems:[{name:"Сегодня в кино",link:"/afisha/new/",metrikaData:["afisha_now"]},{name:"Кинотеатры",link:"/cinemas/",metrikaData:["cinemas"]},{name:"График премьер",link:"/premiere/",metrikaData:["premiere"]},{name:"Акции и скидки",link:"/action/promo",target:"_blank",metrikaData:["promo_discount"]},{name:"КиноПоиск Go",link:"/special/kinopoisk-go/",target:"_blank",metrikaData:["kinopoiskgo"]},{target:"_blank",link:"/special/imax/",modifier:"imax-films",metrikaData:["imax-films"]}]},{name:"Фильмы",link:"/top/lists/",type:"films",metrikaData:["films"],contentMeta:{title:"Новые трейлеры",model:"basicTrailer",storeKey:"newTrailers",count:3,wideCount:3},subitems:[{name:"Списки фильмов",link:"/top/lists/",metrikaData:["lists"]},{name:"Популярные фильмы",link:"/popular/",metrikaData:["popular_films"]},{name:"Смотреть онлайн",link:"/watch/subscription/",metrikaData:["online"]},{name:"Навигатор по фильмам",link:"/top/navigator/",metrikaData:["navigator"]},{name:"Рекомендации",link:"/recommend/",metrikaData:["recommend"]},{name:"Кассовые сборы",link:"/box/",metrikaData:["box_rus"]},{name:"Трейлеры",link:"/video/",metrikaData:["video"]},{name:"Саундтреки",link:"/tracks/",metrikaData:["tracks"]},{name:"Постеры и кадры",link:"/posters/",metrikaData:["posters"]}]},{name:"Рейтинги",link:"/top/",type:"ratings",metrikaData:["ratings"],contentMeta:{title:"Самые ожидаемые",model:"basicFilm",storeKey:"filmsComingSoon",count:4,wideCount:5},subitems:[{name:"Топ 250",link:"/top/",metrikaData:["top250"]},{name:"Ожидаемые фильмы",link:"/comingsoon/",metrikaData:["comingsoon"]},{name:"Популярные персоны",link:"/popular/names/",metrikaData:["popular_names"]},{name:"Кассовые рекорды",link:"/box/best_usa/",metrikaData:["box_best"]},{name:"Награды и премии",link:"/awards/",metrikaData:["awards"]},{name:"Оценки пользователей",link:"/votes/",metrikaData:["votes"]}]},{name:"Медиа",link:s("posts"),type:"journal",metrikaData:["journal"],contentMeta:{title:"Главное",model:"post",storeKey:"pinnedPosts",count:3,wideCount:3},subitems:r.map(function(e){return{name:u({type:e}),link:s("posts",{type:e}),metrikaData:[e]}}),featuredSubitems:[]},{title:c,link:"/watch/subscription/",type:i,switcher:"online",metrikaData:["online"],contentMeta:{title:"Смотрите онлайн",model:"basicFilm",storeKey:"featuredOnlineFilms",count:4,wideCount:5},subitems:[{name:"Подписка",link:"/watch/subscription/",metrikaData:["subscription"]},{name:"Покупка и аренда",link:"/watch/films/",metrikaData:["films"]},{name:"Мои покупки",link:"/watch/purchases/",userAuth:!0,metrikaData:["purchases"]}],featuredSubitems:[{name:"Как это работает",link:"/watch/about/",modifier:"ott",switcher:"ott",metrikaData:["watch-about"]}]},{type:a,switcher:a,metrikaData:[a],modifier:a}];e.exports=l},function(e,t){e.exports={TITLES_VALUES:{default:"Онлайн-кинотеатр",experiment:"Видеосервис"},TITLE_EXPERIMENT_NAME:"hd_online2_header"}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(3),o=n(0),a=n(5).connect,i=n(15),c=n(2010),s=n(2013),u=n(536).selectPageHeaderBrandingConfigForElement,l=n(2015).BACKGROUND_COLOR_PATH,p=function(e){function HeaderBranding(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderBranding),_possibleConstructorReturn(this,_getPrototypeOf(HeaderBranding).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderBranding,o.PureComponent),t=HeaderBranding,(n=[{key:"render",value:function(){var e=this.props,t=e.theme,n=e.logoClassName,r=e.backgroundClassName,a=e.config,u=a.logo,p=a.background;return this.props.children({logo:u&&o.createElement(c,_extends({},u,{className:n,theme:t})),background:p&&o.createElement(s,_extends({},p,{className:r,theme:t})),backgroundColor:i(p,l,"")})}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),HeaderBranding}();p.propTypes={backgroundClassName:r.string,children:r.func.isRequired,config:r.object,logoClassName:r.string,theme:r.oneOf(["desktop","touch"])},p.defaultProps={config:{}},e.exports=a(function(e,t){return{config:u(e,t.elementType)}})(p)},function(e,t,n){var r=n(5).connect,o=n(26).selectIsHomePage,a=n(2011);e.exports=r(function(e){return{isHomePage:o(e)}})(a)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-branding-logo".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3);n(2012);var s=function(e){function HeaderBrandingLogo(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderBrandingLogo),_possibleConstructorReturn(this,_getPrototypeOf(HeaderBrandingLogo).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderBrandingLogo,i.PureComponent),t=HeaderBrandingLogo,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.imgSrcSet,r=e.style,c=e.theme,s=e.target,u=e.isHomePage,l=e.homePageUrl,p=e.url;return i.createElement("a",{className:a(o({theme:c}),t),style:r,href:u?p:l,target:s},n&&n.x1&&i.createElement("img",{className:o("img"),src:n.x1,srcSet:n.x2&&"".concat(n.x1," 1x, ").concat(n.x2," 2x"),alt:""}))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),HeaderBrandingLogo}();s.defaultProps={url:"/",homePageUrl:"/",target:"_self",isHomePage:!1},s.propTypes={className:c.string,imgSrcSet:c.shape({x1:c.string.isRequired,x2:c.string}),style:c.object,theme:c.oneOf(["desktop","touch"]),url:c.string,target:c.oneOf(["_blank","_self","_parent","_top"]),isHomePage:c.bool,homePageUrl:c.string},e.exports=s},function(e,t,n){},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-branding-background".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3);n(2014);var s=function(e){function HeaderBrandingBackground(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderBrandingBackground),_possibleConstructorReturn(this,_getPrototypeOf(HeaderBrandingBackground).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderBrandingBackground,i.PureComponent),t=HeaderBrandingBackground,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.style,r=e.imgSrcSet,c=e.theme;return i.createElement("div",{className:a(o({theme:c}),t),style:n},r&&r.x1&&i.createElement("div",{className:o("img-container")},i.createElement("img",{className:o("img"),src:r.x1,srcSet:r.x2&&"".concat(r.x1," 1x, ").concat(r.x2," 2x"),alt:""})))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),HeaderBrandingBackground}();s.propTypes={className:c.string,imgSrcSet:c.shape({x1:c.string.isRequired,x2:c.string}),style:c.object,theme:c.oneOf(["desktop","touch"])},s.defaultProps={theme:"desktop"},e.exports=s},function(e,t,n){},function(e,t){e.exports={BACKGROUND_COLOR_PATH:"style.backgroundColor"}},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r="header-nav-item".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3),s=n(344);n(2017);var u=function(e){var t=e.link,n=e.className,r=e.iconSrcSet,c=e.name,u=t?"a":"span";return i.createElement(u,{className:a(o(),n),href:t},r&&r.x1&&i.createElement(s,_extends({},r,{className:o("icon")})),c)};u.propTypes={className:c.string,iconSrcSet:c.shape({x1:c.string,x2:c.string}),link:c.string,name:c.string},e.exports=u},function(e,t,n){},function(e,t,n){var r="header-hd-nav-item-type-title".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3);n(2019);var s=function(e){var t=e.className,n=e.link,r=e.title;return i.createElement("a",{href:n,className:a(o(),t)},i.createElement("span",{className:o("light-animation-container")},i.createElement("span",{className:o("light-animation-wrapper")},i.createElement("span",{className:o("light-animation")}))),i.createElement("span",{className:o("title")},r))};s.propTypes={className:c.string,link:c.string,title:c.string.isRequired},e.exports=s},function(e,t,n){},function(e,t,n){var r=n(5).connect,o=n(385),a=n(567),i=n(343),c=n(1120),s=n(395).getFilmsInCinema,u=n(62),l=u.getSezam,p=u.getSezamDefaultAccount,f=u.getSezamDefaultAccountPlusStatus,d=n(1303).getBasicFilmModels,m=n(2021).getBasicTrailerModels,y=n(175).selectCustomNavItem,_=n(74).getIsPartialComponent,h=n(500).getFeaturedFilms,g=n(2022),b=g.getChartContent,E=g.getDropdownContent,v=n(2023).getFilmModels,O=n(19),P=O.getCurrentUserModel,S=O.getIsAuthorized,T=O.getIsAuthorizedWithoutYandexAccount;e.exports=o(i,a,r(function(e){return{adfoxSpecial:e.page.adfoxSpecial,appWidth:e.page.appWidth,basicFilms:d(e),basicTrailers:m(e),chartContent:b(e),customNavItem:y(e),dropdownContent:E(e),featuredFilms:h(e),hideLinks:{smartTv:e.common.hideSmartTvLink,ott:e.common.hideOttButton,movieGeek:e.common.hideMovieGeekButton,imax:!e.common.isImaxLinkEnabled},isAuthorized:S(e),isAuthorizedWithoutYandexAccount:T(e),isPartialComponent:_(e),isSezamDefaultAccountPlus:f(e),noSticky:e.page.headerNoSticky,passportConnector:e.page.passportConnector,plainFilms:v(e),searchShortcutValue:e.ugc.searchShortcutValue,searchValue:e.ugc.searchValue,sezam:l(e),sezamDefaultAccount:p(e),suggest:e.page.suggest,theme:e.page.headerTheme,todayFilmsInCinema:s(e),user:P(e)||{}}}))(c)},function(e,t,n){"use strict";e.exports={getBasicTrailerModels:function(e){return e.models.basicTrailers}}},function(e,t,n){var r=n(15);e.exports={getChartContent:function(e){return r(e,"page.header.chartContent")},getDropdownContent:function(e){return r(e,"page.header.dropdownContent")}}},function(e,t,n){e.exports=n(173)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(15),i=n(2025),c=n(35),s=c.setAuthData,u=c.openAuthPopupEffect,l=n(388).setAbExperiments,p=n(209).updateUgcProperties,f=n(80),d=n(31),m=n(127),y=n(223).HEADER_V2_POPUP,_={openAuthPopupEffect:u,updateUgcProperties:p,headerActions:f},h={header:d.header,headerPopup:d.headerPopup},g=function(e){function PartialHeaderV2(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialHeaderV2),_possibleConstructorReturn(this,_getPrototypeOf(PartialHeaderV2).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialHeaderV2,r.Component),t=PartialHeaderV2,(n=[{key:"componentDidMount",value:function(){var e=a(window,"partialComponents.header.authData");if(e&&this.context.dispatch(s(e)),Array.isArray(window.abExperiments)){var t=window.abExperiments.reduce(function(e,t){return e[t.experimentName]=t,e},{});this.context.dispatch(l(t))}var n=a(window,"partialComponents.header.search");n&&n.value&&this.context.dispatch(p({searchValue:n.value,searchShortcutValue:n.shortcutFilter,defaultValue:!0}))}},{key:"render",value:function(){var e=this.props,t=e.models,n=e.common,o=e.page,c=e.auth,s=e.branding,u=e.ugc,l=t.users[c.userId],p=l?l.messagesCount:null;return r.createElement(m,null,r.createElement(i,{user:l,messagesCount:p,suggest:o.suggest,registrationUrl:n.registrationUrl,backgroundImage:s.png,borderColor:s.borderColor,searchValue:u.searchValue,searchShortcutValue:u.searchShortcutValue,popupTexts:a(n.bunker,y),actions:_,metrikaActions:h}))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialHeaderV2}();g.defaultProps={models:{users:[]},common:{user:{}},page:{},auth:{},branding:{},ugc:{}},g.contextTypes={dispatch:o.func},g.propTypes={models:o.object,common:o.object,page:o.object,auth:o.object,branding:o.object,ugc:o.object},e.exports=g},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header".concat("-partial-component");n(2026);var o=n(0),a=n(3),i=n(4).lock(r),c=n(36),s=n(15),u=n(117),l=n(2027),p=n(2029),f=n(2031),d=n(2033),m=n(245).HEADER_V2_POPUP_HIDDEN_COOKIE_NAME,y=function(e){function Header(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Header),n=this,(t=!(r=_getPrototypeOf(Header).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onLogoClick=t._onLogoClick.bind(_assertThisInitialized(t)),t._onMenuHover=t._onMenuHover.bind(_assertThisInitialized(t)),t._hideHeaderPopup=t._hideHeaderPopup.bind(_assertThisInitialized(t)),t._togglePopup=t._togglePopup.bind(_assertThisInitialized(t)),t.state={shouldHeaderPopupRender:!1,popupIsOpen:!1},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Header,u),t=Header,(n=[{key:"getBlockName",value:function(){return r}},{key:"componentDidMount",value:function(){var e=!c.get(m);e!==this.state.shouldHeaderPopupRender&&this.setState({shouldHeaderPopupRender:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,r=t.metrikaActions;return o.createElement("header",{className:this.getClassName()},o.createElement("a",{href:"/",className:i("logo"),onClick:this._onLogoClick}),o.createElement("div",{className:i("content")},o.createElement("div",{className:i("menu-wrapper")},o.createElement(l,{onHover:this._onMenuHover,metrikaActions:r.header}),this._renderPopup()),o.createElement(p,{user:this.props.user,registrationUrl:this.props.registrationUrl,openAuthPopupEffect:n.openAuthPopupEffect,metrikaActions:r.header}),o.createElement(d,{messagesCount:this.props.messagesCount,suggest:this.props.suggest,value:this.props.searchValue,shortcutFilterValue:this.props.searchShortcutValue,ref:function(t){return e._headerSearch=t},actions:n.headerActions,actionsUpdateUgcProperties:n.updateUgcProperties,metrikaActions:r.header,mix:i("search")})))}},{key:"_renderPopup",value:function(){var e=this.props,t=e.popupTexts,n=e.metrikaActions,r=this.state,a=r.shouldHeaderPopupRender,i=r.popupIsOpen;return t&&a?o.createElement(f,{texts:t,isOpen:i,hide:this._hideHeaderPopup,toggleStatus:this._togglePopup,metrikaActions:n.headerPopup}):null}},{key:"_onLogoClick",value:function(){var e=(this.props.metrikaActions||{}).header;this.context.dispatch(e.logoClick())}},{key:"_onMenuHover",value:function(){this._togglePopup(!1);var e=s(this._headerSearch,"refs.wrappedComponent",{});e.blur&&e.blur()}},{key:"_hideHeaderPopup",value:function(){this.setState({shouldHeaderPopupRender:!1}),c.set(m,"yes",{expires:1/0,path:"/",domain:".kinopoisk.ru"})}},{key:"_togglePopup",value:function(e){var t=!this.state.popupIsOpen;void 0!==e&&(t=e),this.setState({popupIsOpen:t})}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),Header}();y.propTypes={user:a.shape({id:a.number,login:a.string}),registrationUrl:a.string.isRequired,messagesCount:a.number,suggest:a.array,searchValue:a.oneOfType([a.string,a.number]),searchShortcutValue:a.string,popupTexts:a.object,actions:a.object,metrikaActions:a.object},y.contextTypes={dispatch:a.func},e.exports=y},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-menu".concat("-partial-component");n(2028);var o=n(0),a=n(3),i=n(4).lock(r),c=n(353),s=n(115),u=n(117),l=[{name:"Афиша",type:"afisha_tv",metrikaData:["afisha_tv"],subitems:[{name:"Сегодня в кино",link:"/afisha/new/",metrikaData:["afisha_now"]},{name:"Кинотеатры",link:"/cinemas/",metrikaData:["cinemas"]},{name:"График премьер",link:"/premiere/",metrikaData:["premiere"]},{name:"Акции и скидки",link:"/action/promo",target:"_blank",metrikaData:["promo_discount"]}]},{name:"Журнал",type:"texts",metrikaData:["texts"],subitems:[{name:"Новости",link:"/news/",metrikaData:["news"]},{name:"Статьи",link:"/article/",metrikaData:["article"]},{name:"Видео и фото",link:"/photostory/",metrikaData:["photostory"]},{name:"Подкасты",link:"/photostory/keyword/%ef%ee%e4%ea%e0%f1%f2%fb/",metrikaData:["podcasts"]}]},{name:"Фильмы",type:"films",metrikaData:["films"],subitems:[{name:"Навигатор по фильмам",link:"/top/navigator/",metrikaData:["navigator"]},{name:"Рекомендации",link:"/recommend/",metrikaData:["recommend"]},{name:"DVD и Blu-ray",link:"/dvd/",metrikaData:["dvd"]},{name:"Кассовые сборы",link:"/box/",metrikaData:["box_rus"]},{name:"Трейлеры",link:"/video/",metrikaData:["video"]},{name:"Саундтреки",link:"/tracks/",metrikaData:["tracks"]},{name:"Постеры и кадры",link:"/posters/",metrikaData:["posters"]}]},{name:"Рейтинги",type:"ratings",metrikaData:["ratings"],subitems:[{name:"Ожидаемые фильмы",link:"/comingsoon/",metrikaData:["comingsoon"]},{name:"Топ 250",link:"/top/",metrikaData:["Top250"]},{name:"Списки фильмов",link:"/top/lists/",metrikaData:["lists"]},{name:"Популярные фильмы",link:"/popular/",metrikaData:["popular_films"]},{name:"Популярные персоны",link:"/popular/names/",metrikaData:["popular_names"]},{name:"Кассовые рекорды",link:"/box/best_usa/",metrikaData:["box_best"]},{name:"Награды и премии",link:"/awards/",metrikaData:["awards"]},{name:"Оценки пользователей",link:"/votes/",metrikaData:["votes"]}]}],p=function(e){function HeaderMenu(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderMenu),n=this,(t=!(r=_getPrototypeOf(HeaderMenu).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._hideSubitems=t._hideSubitems.bind(_assertThisInitialized(t)),t._showSubitems=s(t._showSubitems,150),t._onItemClick=t._onItemClick.bind(_assertThisInitialized(t)),t._onItemMouseEnter=t._onItemMouseEnter.bind(_assertThisInitialized(t)),t._onItemMouseLeave=t._onItemMouseLeave.bind(_assertThisInitialized(t)),t._onMenuItemClick=t._onMenuItemClick.bind(_assertThisInitialized(t)),t._onHover=c(t._onHover.bind(_assertThisInitialized(t)),150),t.state={openItemIndex:null},t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderMenu,u),t=HeaderMenu,(n=[{key:"getBlockName",value:function(){return r}},{key:"render",value:function(){return o.createElement("ul",{className:this.getClassName(),onTouchStart:this._onHover,onMouseEnter:this._onHover},this._renderItems())}},{key:"_renderItems",value:function(){var e=this,t=this.state.openItemIndex;return l.map(function(n,r){return o.createElement("li",{className:i("item",{active:t===r}),onClick:function(t){return e._onItemClick(t,[].concat(n.metrikaData))},onMouseEnter:function(){return e._onItemMouseEnter(r)},onMouseLeave:function(){return e._onItemMouseLeave()},key:r},o.createElement("span",{className:i("item-name")},n.name),e._renderSubitems(n,r))})}},{key:"_renderSubitems",value:function(e,t){var n=this;if(t!==this.state.openItemIndex)return null;var r=e.subitems.map(function(t){return n._renderSubitem(t,e.type)});return o.createElement("ul",{className:i("subitems")},r)}},{key:"_renderSubitem",value:function(e,t){var n=e.name,r=e.link,a=e.mods,c=e.target,s=e.metrikaData;return o.createElement("li",{className:i("subitem",a),key:r},this._renderLink({link:r,name:n,target:c,metrikaData:t?[t].concat(s):s}))}},{key:"_renderLink",value:function(e){var t=this,n=e.link,r=e.name,a=e.target,c=e.metrikaData;return o.createElement("a",{href:n,className:i("subname"),onClick:function(e){return t._onMenuItemClick(e,c)},target:a},r)}},{key:"_hideSubitems",value:function(){this._toggleSubitems(null)}},{key:"_showSubitems",value:function(e){this._toggleSubitems(e)}},{key:"_toggleSubitems",value:function(e){var t=this.state.openItemIndex;this.setState({openItemIndex:t!==e?e:null})}},{key:"_onItemClick",value:function(e,t){e.stopPropagation(),this._onMenuItemClick(e,t.concat("section"))}},{key:"_onItemMouseEnter",value:function(e){this._showSubitems(e)}},{key:"_onItemMouseLeave",value:function(){this._showSubitems.cancel(),this._hideSubitems()}},{key:"_onMenuItemClick",value:function(e,t){e.stopPropagation(),this._metrikaAction("menuClick",t)}},{key:"_onHover",value:function(){var e=this.props.onHover;"function"==typeof e&&e()}},{key:"_metrikaAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.metrikaActions;n&&"function"==typeof n[e]&&this.context.dispatch(n[e](t))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),HeaderMenu}();p.propTypes={onHover:a.func,metrikaActions:a.object},p.contextTypes={dispatch:a.func},e.exports=p},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-auth".concat("-partial-component");n(2030);var o=n(0),a=n(3),i=n(4).lock(r),c=n(117),s=function(e){function HeaderAuth(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderAuth),n=this,(t=!(r=_getPrototypeOf(HeaderAuth).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onAuthClick=t._onAuthClick.bind(_assertThisInitialized(t)),t._onJoinClick=t._onJoinClick.bind(_assertThisInitialized(t)),t._onMyKpClick=t._onMyKpClick.bind(_assertThisInitialized(t)),t._onProfileClick=t._onProfileClick.bind(_assertThisInitialized(t)),t._onRegistrationClick=t._onRegistrationClick.bind(_assertThisInitialized(t)),t._onLogoutClick=t._onLogoutClick.bind(_assertThisInitialized(t)),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderAuth,c),t=HeaderAuth,(n=[{key:"getBlockName",value:function(){return r}},{key:"render",value:function(){var e=this.props.user,t=[];return e&&e.id?t.push(o.createElement("span",{className:i("auth"),key:"auth"},o.createElement("a",{href:"/mykp/",className:i("link"),onClick:this._onMyKpClick},"Мой КиноПоиск"),this._renderSeparator(),o.createElement("a",{href:"/user/".concat(e.id,"/go/"),className:i("link"),onClick:this._onProfileClick},"Профиль: ",e.displayName)),o.createElement("a",{href:"/logout/",className:i("link",{position:"right"}),key:"adds",onClick:this._onLogoutClick},"выйти")):t.push(o.createElement("span",{className:i("auth"),key:"auth"},o.createElement("a",{className:i("link"),onClick:this._onAuthClick},"Войти на сайт"),this._renderSeparator(),o.createElement("a",{className:i("link"),href:this.props.registrationUrl,onClick:this._onRegistrationClick},"Регистрация")),o.createElement("a",{href:"/docs/join",className:i("link",{position:"right"}),key:"adds",onClick:this._onJoinClick},"зачем?")),o.createElement("span",{className:this.getClassName()},t)}},{key:"_renderSeparator",value:function(){return o.createElement("span",{className:i("separator")},"•")}},{key:"_onAuthClick",value:function(){this._metrikaAction("loginClick"),this.context.dispatch(this.props.openAuthPopupEffect())}},{key:"_onJoinClick",value:function(){this._metrikaAction("joinClick")}},{key:"_onMyKpClick",value:function(){this._metrikaAction("myKpClick")}},{key:"_onProfileClick",value:function(){this._metrikaAction("profileClick")}},{key:"_onRegistrationClick",value:function(){this._metrikaAction("registrationClick")}},{key:"_onLogoutClick",value:function(){this._metrikaAction("logoutClick")}},{key:"_metrikaAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.metrikaActions;n&&"function"==typeof n[e]&&this.context.dispatch(n[e](t))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),HeaderAuth}();s.propTypes={user:a.shape({id:a.number,login:a.string}),registrationUrl:a.string.isRequired,openAuthPopupEffect:a.func.isRequired,metrikaActions:a.object},s.contextTypes={dispatch:a.func},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-popup".concat("-partial-component");n(2032);var o=n(0),a=n(3),i=n(4).lock(r),c=n(117),s=function(e){function HeaderPopup(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderPopup),n=this,(t=!(r=_getPrototypeOf(HeaderPopup).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onButtonClick=t._onButtonClick.bind(_assertThisInitialized(t)),t._onContentClick=t._onContentClick.bind(_assertThisInitialized(t)),t._onIconClick=t._onIconClick.bind(_assertThisInitialized(t)),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderPopup,c),t=HeaderPopup,(n=[{key:"getBlockName",value:function(){return r}},{key:"componentDidMount",value:function(){this._metrikaAction("iconShow")}},{key:"render",value:function(){return o.createElement("div",{className:this.getClassName()},o.createElement("div",{className:i("icon",{active:!this.props.isOpen}),onClick:this._onIconClick}),this._renderPopup())}},{key:"_renderPopup",value:function(){if(!this.props.isOpen)return null;var e=this.props.texts,t=e.button,n=e.message;return o.createElement("div",{className:i("popup")},o.createElement("div",{className:i("content"),dangerouslySetInnerHTML:{__html:n},onClick:this._onContentClick}),o.createElement("button",{className:i("button"),onClick:this._onButtonClick},t))}},{key:"_onIconClick",value:function(){this._metrikaAction("iconClick"),this.props.isOpen||this._metrikaAction("popupShow"),this.props.toggleStatus()}},{key:"_onContentClick",value:function(e){"A"===e.target.tagName&&this._metrikaAction("popupLinkClick")}},{key:"_onButtonClick",value:function(){this._metrikaAction("popupButtonClick"),this.props.hide()}},{key:"_metrikaAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.metrikaActions;n&&"function"==typeof n[e]&&this.context.dispatch(n[e](t))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),HeaderPopup}();s.propTypes={isOpen:a.bool,texts:a.shape({button:a.string.isRequired,message:a.string.isRequired}).isRequired,toggleStatus:a.func.isRequired,hide:a.func.isRequired,metrikaActions:a.object},s.contextTypes={dispatch:a.func},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _slicedToArray(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-search".concat("-partial-component");n(2034);var o=n(0),a=n(3),i=n(4).lock(r),c=n(353),s=n(1121),u=n(53),l=n(597),p=n(959),f=n(117),d=n(2035),m=n(1127).MIN_SUGGEST_VALUE_LENGTH,y=["text","studio","user","keyword"],_=function(e){function HeaderSearch(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderSearch),n=this,(t=!(r=_getPrototypeOf(HeaderSearch).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={metrikaRequestId:String(Math.floor(1e4*Math.random()+1)+Number(new Date)),value:t._getDefaultSearchValue()},t._onInputChange=c(t._onInputChange.bind(_assertThisInitialized(t)),200),t._onButtonClick=t._onButtonClick.bind(_assertThisInitialized(t)),t._hideSuggest=t._hideSuggest.bind(_assertThisInitialized(t)),t._onSuggestSelect=t._onSuggestSelect.bind(_assertThisInitialized(t)),t._onWhatLookingForClick=t._onWhatLookingForClick.bind(_assertThisInitialized(t)),t._onAdvancedSearchClick=t._onAdvancedSearchClick.bind(_assertThisInitialized(t)),t._onMessagesClick=t._onMessagesClick.bind(_assertThisInitialized(t)),t._onFormSubmit=t._onFormSubmit.bind(_assertThisInitialized(t)),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderSearch,f),t=HeaderSearch,(n=[{key:"componentWillReceiveProps",value:function(e){var t=this,n=this._getDefaultSearchValue(e);this.searchInput!==document.activeElement&&this.searchInput.value!==n&&this.setState({value:n},function(){t._setDefaultValuesToInputs()})}},{key:"getBlockName",value:function(){return r}},{key:"_getDefaultSearchValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getDefaultShortcutFilterValue(e),n="";t&&(n+="".concat(t,": "));var r=e.value;return n+=void 0===r?"":r}},{key:"_getDefaultShortcutFilterValue",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).shortcutFilterValue;return e&&y.includes(e)?e:null}},{key:"_setDefaultValuesToInputs",value:function(){this.searchInput.value=this._getDefaultSearchValue(),this.shortcutFilterInput.value=this._getDefaultShortcutFilterValue()}},{key:"componentDidMount",value:function(){var e=this;""!==this.searchInput.value?this._onInputChange():this._setDefaultValuesToInputs(),setTimeout(function(){l(e.searchInput)&&e.searchInput.focus()},300)}},{key:"render",value:function(){var e=this,t=this.shortcutFilterInput&&this.shortcutFilterInput.value?"":this.state.value;return o.createElement("div",{className:this.getClassName()},o.createElement("span",{className:i("title")},"всё о любом фильме:"),o.createElement("span",{className:i("search")},o.createElement("form",{className:i("search-inner"),onSubmit:this._onFormSubmit,action:"/index.php",method:"GET",acceptCharset:"cp1251",ref:function(t){return e._searchForm=t}},o.createElement("input",{className:i("search-field"),type:"text",name:"kp_query",autoComplete:"off",onChange:this._onInputChange,ref:function(t){return e.searchInput=t}}),o.createElement("input",{type:"hidden",name:"first",ref:function(t){return e.showFirstInput=t},value:"no"}),o.createElement("input",{type:"hidden",name:"what",ref:function(t){return e.shortcutFilterInput=t}}),o.createElement("span",{className:i("buttons")},o.createElement("input",{className:i("button"),type:"button",value:"искать!",onClick:this._onButtonClick}),o.createElement("input",{className:i("button",{type:"search-first"}),type:"button",value:"",title:"перейти к первому результату поиска",onClick:function(t){return e._onButtonClick(t,"first")}})),o.createElement(d,{suggest:this.props.suggest,value:t,hideSuggest:this._hideSuggest,onSelect:this._onSuggestSelect})),o.createElement("div",{className:i("links")},o.createElement("a",{href:"/s/",className:i("link"),onClick:this._onAdvancedSearchClick},"расширенный поиск"),o.createElement("span",{className:i("separator")},"•"),o.createElement("a",{href:"/s/top/",className:i("link"),onClick:this._onWhatLookingForClick},"что ищут?"),this._renderMessages())))}},{key:"_onFormSubmit",value:function(e){var t=this.state.value;if(t&&t.length||e.preventDefault(),this.shortcutFilterInput&&this.shortcutFilterInput.value&&!this._isShortcutFilterHidden){var n=this.shortcutFilterInput.value.length+1;this.searchInput.value=s(this.searchInput.value.substring(n)),this._isShortcutFilterHidden=!0}}},{key:"_renderMessages",value:function(){var e=this.props.messagesCount;return e?o.createElement("span",{className:i("messages")},o.createElement("i",{className:i("messages-icon")}),o.createElement("a",{href:"/mykp/messages/new/",className:i("messages-count"),onClick:this._onMessagesClick},e)):null}},{key:"_onInputChange",value:function(){var e=this,t=this.searchInput.value,n=this.state.startSearchTime,r=_slicedToArray(t.split(":").reverse(),2),o=r[0],a=r[1],i=t.startsWith("".concat(a,":"))&&y.includes(a);i&&this.shortcutFilterInput.value!==a?(this.shortcutFilterInput.value=a,this._hideSuggest()):i||(this.shortcutFilterInput.value="",t&&t.length>=m?(this.context.dispatch(this.props.actions.updateSuggest(t)),this.state.startSearchTime||(n=u(),this._metrikaAction("searchStart",this.state.metrikaRequestId))):this._hideSuggest()),this.setState({value:t,startSearchTime:n},function(){e.context.dispatch(e.props.actionsUpdateUgcProperties({searchValue:i?s(o):t,searchShortcutValue:i?a:""}))})}},{key:"handleClickOutside",value:function(){this.props.suggest&&this._hideSuggest()}},{key:"_hideSuggest",value:function(){this.context.dispatch(this.props.actions.hideSuggest())}},{key:"_onSuggestSelect",value:function(e){if(-1!==e){var t=this.props.suggest[e],n=this.state,r=n.value,o={metrikaRequestId:n.metrikaRequestId,value:r,itemIndex:e+1,item:t,time:(u()-this.state.startSearchTime)/1e3};this._metrikaAction("suggestSelect",o)}}},{key:"_onButtonClick",value:function(e,t){var n=this.state,r=n.value,o=n.metrikaRequestId;if(!r)return this._metrikaAction("promolinkClick"),void(window.location="/chance/");"first"===t&&r&&r.length&&this.showFirstInput&&(this.showFirstInput.value="yes"),r&&r.length>=m&&this._metrikaAction("searchButtonClick",{metrikaRequestId:o,value:r}),this._searchForm.dispatchEvent(new Event("submit")),this._searchForm.submit()}},{key:"_onAdvancedSearchClick",value:function(){this._metrikaAction("advancedSearchClick")}},{key:"_onWhatLookingForClick",value:function(){this._metrikaAction("whatLookingForClick")}},{key:"_onMessagesClick",value:function(){this._metrikaAction("messagesClick")}},{key:"blur",value:function(){this.searchInput.blur()}},{key:"_metrikaAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.props.metrikaActions;n&&"function"==typeof n[e]&&this.context.dispatch(n[e](t))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),HeaderSearch}();_.propTypes={suggest:a.array,messagesCount:a.number,value:a.oneOfType([a.string,a.number]),shortcutFilterValue:a.string,actions:a.object,actionsUpdateUgcProperties:a.func,metrikaActions:a.object},_.contextTypes={dispatch:a.func},e.exports=p(_)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="header-search-suggest".concat("-partial-component");n(2036);var o=n(0),a=n(3),i=n(4).lock(r),c=n(117),s=n(1127).MIN_SUGGEST_VALUE_LENGTH,u=n(2037),l=u.ENTER,p=u.UP,f=u.DOWN,d=u.ESC,m=[{type:"first",name:"Возможно, вы искали"},{type:"film",name:"Фильмы"},{type:"people",name:"Имена"},{type:"cinema",name:"Кинотеатры"},{type:"page",name:"Страницы КиноПоиска"}],y=function(e){function HeaderSearchSuggest(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,HeaderSearchSuggest),n=this,(t=!(r=_getPrototypeOf(HeaderSearchSuggest).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={focusedItemIndex:-1},t._renderGroup=t._renderGroup.bind(_assertThisInitialized(t)),t._renderItem=t._renderItem.bind(_assertThisInitialized(t)),t._onKeyDown=t._onKeyDown.bind(_assertThisInitialized(t)),t._selectItem=t._selectItem.bind(_assertThisInitialized(t)),t._onMouseOver=t._onMouseOver.bind(_assertThisInitialized(t)),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(HeaderSearchSuggest,c),t=HeaderSearchSuggest,(n=[{key:"getBlockName",value:function(){return r}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this._onKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._onKeyDown)}},{key:"render",value:function(){var e=this.props.value;return(void 0===e?"":e).length<s||!this._suggestHasItems?null:(this._itemIndex=0,o.createElement("div",{className:this.getClassName()},m.map(this._renderGroup),this._renderFooter()))}},{key:"_renderGroup",value:function(e){var t=this.props.suggest,n=e.type,r=e.name,a=t.filter(function(e){return e.type===n});return a.length?o.createElement("div",{className:i("group",{type:n}),key:n},o.createElement("span",{className:i("group-title")},r),a.map(this._renderItem)):null}},{key:"_renderItem",value:function(e){var t,n=this,r=e.id,a=e.name,c=e.subname,s=e.serialType,u=e.rating,l=e.link,p=e.type,f=this._itemIndex++;return this.state.focusedItemIndex>=0&&(t=this.props.suggest[this.state.focusedItemIndex].id),o.createElement("a",{href:l,className:i("item",{type:p,focused:t===r}),key:f,onClick:function(){return n._selectItem(f,!1)},onMouseOver:function(){return n._onMouseOver(f)}},o.createElement("div",{className:i("content")},this._renderName(a,c),this._renderSubname(a,c),this._renderSerialType(s),this._renderYear(e)),this._renderRating(u))}},{key:"_renderName",value:function(e,t){return e||t?o.createElement("span",{dangerouslySetInnerHTML:{__html:"".concat(e||t)},className:i("name")}):null}},{key:"_renderSubname",value:function(e,t){return!e&&t||!t?null:o.createElement("span",{dangerouslySetInnerHTML:{__html:" ".concat(t)}})}},{key:"_renderSerialType",value:function(e){return e?o.createElement("span",null,", ",e):null}},{key:"_renderYear",value:function(e){var t=e.year,n=void 0===t?"":t,r=e.serialType;if(0===Number(n))return null;var a=r?", ":" ";return o.createElement("span",{className:i("year"),dangerouslySetInnerHTML:{__html:"".concat(a).concat(n)}})}},{key:"_renderRating",value:function(e){return e?o.createElement("div",{className:i("rating",{type:e.type})},Number(e.value)?e.value:"—"):null}},{key:"_renderFooter",value:function(){return o.createElement("div",{className:i("footer")},o.createElement("a",{href:"/index.php?kp_query=".concat(this.props.value),className:i("more")},"все результаты")," »")}},{key:"_onKeyDown",value:function(e){if(this._suggestHasItems)switch(e.keyCode){case p:this._focusItem("prev");break;case f:this._focusItem("next");break;case d:e.stopPropagation(),this.props.hideSuggest();break;case l:this.state.focusedItemIndex>=0&&(e.preventDefault(),e.stopPropagation()),this._selectItem()}}},{key:"_focusItem",value:function(e){var t=this.props.suggest.length-1,n=this.state.focusedItemIndex;"next"===e?n+1<=t?n+=1:n=0:"prev"===e&&(n>0?n-=1:n=t),this.setState({focusedItemIndex:n})}},{key:"_selectItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0!==e?e:this.state.focusedItemIndex;this.props.onSelect(n),t&&(document.location=this.props.suggest[n].link)}},{key:"_onMouseOver",value:function(e){this.setState({focusedItemIndex:e})}},{key:"_suggestHasItems",get:function(){var e=this.props.suggest;return e&&e.length}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),HeaderSearchSuggest}();y.propTypes={value:a.string,suggest:a.array,hideSuggest:a.func.isRequired,onSelect:a.func.isRequired},e.exports=y},function(e,t,n){},function(e,t,n){"use strict";e.exports={ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40,ESC:27}},function(e,t,n){"use strict";var r=n(0),o=n(4).lock("partial-header-v4"),a=n(136).PortalStickyContainer,i=n(2039).HEADER_PORTAL_STICKY_CONTAINER_ID,c=n(1214).default,s=n(930);n(2040);e.exports=function(){return r.createElement(s,null,r.createElement(a,{id:i,className:o("wrapper")},r.createElement(c,null)))}},function(e,t,n){"use strict";n.r(t),n.d(t,"HEADER_PORTAL_STICKY_CONTAINER_ID",function(){return r}),n.d(t,"HEADER_METRIKA_SEND_PARAMS_ROOT_LEVEL",function(){return o});var r="kinopoisk-header-sticky-container",o="desktop_header_click"},function(e,t,n){},function(e,t,n){"use strict";e.exports=n(2042)},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(342),c=n(955),s=n(2043),u=n(367).openModal,l=n(135),p=l.subscriptionClickOnButtonEffect,f=l.subscriptionClickOnLinkEffect,d=l.loadKinopoiskGoSubscriptionEffect,m=l.subscriptionAppearOnScreenEffect,y=n(135),_=y.selectSubscription,h=y.selectHasPendingStatus,g=y.selectHasFailureStatus,b=y.selectSubscriptionState,E=n(27),v=E.MODAL_TYPE,O=E.STATUSES,P="kinopoisk-go".concat("-partial-component"),S=n(4).lock(P);n(2045);var T=function(e){function KinopoiskGoSubscription(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,KinopoiskGoSubscription);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return n=this,r=(e=_getPrototypeOf(KinopoiskGoSubscription)).call.apply(e,[this].concat(a)),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_handleButtonClick",function(){var e=t.props,n=e.subscriptionState;switch((0,e.subscriptionClickOnButton)(),n){case O.active:case O.active_and_prolongation_disabled:return void t.props.openModal({name:v});default:return}}),_defineProperty(_assertThisInitialized(t),"_handleLinkClick",function(){return t.props.subscriptionClickOnLink()}),_defineProperty(_assertThisInitialized(t),"_subscriptionAppearOnScreen",function(){return t.props.subscriptionAppearOnScreen()}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(KinopoiskGoSubscription,r.PureComponent),t=KinopoiskGoSubscription,(n=[{key:"componentDidMount",value:function(){this.props.loadKinopoiskGoSubscription()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isPending,o=t.isFailure;return n?r.createElement("div",{className:S({"is-pending":n})},r.createElement(i,null)):o?r.createElement("div",{className:S({"is-failed":o})},"Что-то пошло не так. ",r.createElement("br",null),"Попробуйте обновить страницу."):r.createElement(c,{threshold:.5,invokeOnIntersectOnce:!0,onIntersect:this._subscriptionAppearOnScreen},function(t){return r.createElement("div",{ref:t,className:S()},r.createElement(s,_extends({},e.props.subscription,{onButtonClick:e._handleButtonClick,onLinkClick:e._handleLinkClick})))})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),KinopoiskGoSubscription}();T.defaultProps={isPending:!0,subscription:{},subscriptionAppearOnScreen:function(){},subscriptionClickOnLink:function(){},subscriptionClickOnButton:function(){}},T.propTypes={subscription:o.shape({contentText:o.string,buttonText:o.string,title:o.string,links:o.arrayOf(o.shape({title:o.string.isRequired,href:o.string.isRequired,target:o.string}))}),loadKinopoiskGoSubscription:o.func,isPending:o.bool,isFailure:o.bool,openModal:o.func.isRequired,subscriptionState:o.string,subscriptionClickOnLink:o.func,subscriptionAppearOnScreen:o.func,subscriptionClickOnButton:o.func},e.exports=a(function(e){return{isPending:h(e),isFailure:g(e),subscription:_(e),subscriptionState:b(e)}},{openModal:u,loadKinopoiskGoSubscription:d,subscriptionAppearOnScreen:m,subscriptionClickOnLink:f,subscriptionClickOnButton:p})(T)},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(4).lock("subscription-panel"),a=n(3),i=n(488);n(2044);var c=function(e){function SubscriptionPanel(){var e,t,n,a,i,c,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SubscriptionPanel);for(var u=arguments.length,l=new Array(u),p=0;p<u;p++)l[p]=arguments[p];return n=this,a=(e=_getPrototypeOf(SubscriptionPanel)).call.apply(e,[this].concat(l)),t=!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(n):a,i=_assertThisInitialized(t),s=function(){var e=t.props,n=e.links,a=void 0===n?[]:n,i=e.onLinkClick;return a.length?r.createElement("div",{className:o("links")},a.map(function(e,t){return r.createElement("a",{className:o("link"),key:"link-".concat(t),target:e.target,href:e.href,onClick:i},e.title)})):null},(c="_renderLinks")in i?Object.defineProperty(i,c,{value:s,enumerable:!0,configurable:!0,writable:!0}):i[c]=s,t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SubscriptionPanel,r.PureComponent),t=SubscriptionPanel,(n=[{key:"render",value:function(){var e=this.props,t=e.title,n=e.contentText,a=e.buttonText,c=e.buttonLink,s=e.children,u=e.onButtonClick;return r.createElement(r.Fragment,null,r.createElement("div",{className:o("left")},r.createElement("div",{className:o("title"),dangerouslySetInnerHTML:{__html:t}}),r.createElement("div",{className:o("content")},n,s),this._renderLinks()),r.createElement("div",{className:o("right")},a&&r.createElement(i,{size:"xs",kind:"secondary",className:o("button"),onClick:u,href:c,target:c?"_blank":void 0},a)))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),SubscriptionPanel}();c.propTypes={title:a.string,contentText:a.string,buttonText:a.string,buttonLink:a.string,children:a.node,links:a.arrayOf(a.shape({target:a.string,title:a.string,href:a.string})),onButtonClick:a.func,onLinkClick:a.func},c.defaultProps={onButtonClick:function(){},onLinkClick:function(){}},e.exports=c},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(15),i=n(36),c=n(2047),s=n(35).setAuthData,u=n(1128).TICKETS_PROMO_POPUP_SHOWN_COOKIE_NAME,l=n(127),p=function(e){function PartialTicketsPromoPopup(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialTicketsPromoPopup),(t=_possibleConstructorReturn(this,_getPrototypeOf(PartialTicketsPromoPopup).call(this,e))).state={isOpen:!1},t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialTicketsPromoPopup,r.Component),t=PartialTicketsPromoPopup,(n=[{key:"componentDidMount",value:function(){var e=a(window,"partialComponents.header.authData");e&&this.context.dispatch(s(e)),this.setState({isOpen:!i.get(u)})}},{key:"render",value:function(){var e=this.props.auth.isAuthorized;return this.state.isOpen?r.createElement(l,null,r.createElement(c,{isUserAuthorized:e})):null}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialTicketsPromoPopup}();p.defaultProps={auth:{}},p.contextTypes={dispatch:o.func},p.propTypes={auth:o.func},e.exports=p},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="tickets-promo-popup".concat("-partial-component");n(1246),n(2048);var o=n(0),a=n(3),i=n(36),c=n(4).lock(r),s=n(48),u=n(2049),l=n(91).togglePageScroll,p=n(35).openAuthPopupEffect,f=n(198),d=n(1128),m=d.TICKETS_PROMO_POPUP_SHOWN_COOKIE_NAME,y=d.TICKETS_PROMO_POPUP_GUEST_COOKIE_NAME,_=n(2051),h=function(e){function TicketsPromoPopup(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TicketsPromoPopup),n=this,(t=!(r=_getPrototypeOf(TicketsPromoPopup).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={afishaLink:{},startFromIndex:0},t._onPopupClose=t._onPopupClose.bind(_assertThisInitialized(t)),t._onSlideOpen=t._onSlideOpen.bind(_assertThisInitialized(t)),t._onAuthButtonClick=t._onAuthButtonClick.bind(_assertThisInitialized(t)),t._slideStartViewTime=0,t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(TicketsPromoPopup,o.Component),t=TicketsPromoPopup,(n=[{key:"componentDidMount",value:function(){this.setState({startFromIndex:this.startFromIndex,afishaLink:this.afishaLink})}},{key:"render",value:function(){var e=this,t=this.props.isOpen;return o.createElement(u,{isOpen:t,slides:this._getSlides(),startFromIndex:this.state.startFromIndex,onSlideOpen:this._onSlideOpen,onClose:this._onPopupClose,ref:function(t){return e._popupSlider=t},onOpen:function(){return e.context.dispatch(l(!0))}})}},{key:"_renderSlide",value:function(e,t){return o.createElement("div",{className:c("slide")},o.createElement("div",{className:c("image",{slide:e})}),o.createElement("div",{className:c("content")},t))}},{key:"_sendMetrika",value:function(e,t){var n=t.index,r=t.viewTime,o=["tickets_promo_popup",this.props.isUserAuthorized?"auth":"guest",e,n+1];r&&o.push(r),f.params(o)}},{key:"_onPopupClose",value:function(e){this._removeCookie(y),this._setCookie(m);var t=(Date.now()-this._slideStartViewTime)/1e3;this._sendMetrika("closed_on",{index:e,viewTime:t}),this.context.dispatch(l(!1))}},{key:"_onSlideOpen",value:function(e){this.props.isUserAuthorized||1!==e||this._setCookie(y),this._slideStartViewTime=Date.now(),this._sendMetrika("view_screen",{index:e})}},{key:"_onAuthButtonClick",value:function(){this.context.dispatch(p())}},{key:"_setCookie",value:function(e){i.get(e)||i.set(e,1,{expires:2592e3,path:"/",domain:".kinopoisk.ru"})}},{key:"_removeCookie",value:function(e){i.expire(e,{path:"/",domain:".kinopoisk.ru"})}},{key:"_getSlides",value:function(){var e=this,t=this.state.afishaLink;return[this._renderSlide("first",o.createElement("div",null,o.createElement("div",{className:c("title")},"Элементарно, Ватсон!"),o.createElement("p",{className:c("description")},"Покупать билеты на КиноПоиске стало удобнее. ",o.createElement("br",null),"Теперь вы можете привязать банковскую карту, ",o.createElement("br",null),"ходить в кино без очереди и вернуть билет ",o.createElement("br",null),"онлайн, если передумаете."),o.createElement("button",{className:c("button-more"),onClick:function(){return e._popupSlider.openNextSlide()}},"Подробнее"))),this._renderSlide("second",o.createElement("div",null,o.createElement("div",{className:c("title")},"Карты, деньги, два билета"),o.createElement("p",{className:c("description")},"Привяжите банковскую карту и покупайте ",o.createElement("br",null),"билеты в два клика. Перед покупкой необходимо ",o.createElement("br",null),"авторизоваться, тогда карта сохранится на этапе ",o.createElement("br",null),"оплаты."),this.props.isUserAuthorized?null:o.createElement("button",{className:c("button"),onClick:this._onAuthButtonClick},"Авторизоваться"))),this._renderSlide("third",o.createElement("div",null,o.createElement("div",{className:c("title")},"Предложение, от которого",o.createElement("br",null),"невозможно отказаться"),o.createElement("p",{className:c("description")},"Посмотрите список действующих акций",o.createElement("br",null)," на КиноПоиске."),o.createElement("a",{className:c("button"),href:"https://www.kinopoisk.ru/action/promo/?from=tickets_promo_popup_screen=3",target:"_blank",rel:"noopener noreferrer"},"Перейти к акциям"))),this._renderSlide("fourth",o.createElement("div",null,o.createElement("div",{className:c("title")},"Если передумаете — вернете"),o.createElement("p",{className:c("description")},"Не волнуйтесь, что планы изменятся. Вернуть",o.createElement("br",null),"билеты можно до начала сеанса в один клик."),o.createElement("a",{className:c("button",{tickets:!0}),href:t.url,target:"_blank",rel:"noopener noreferrer"},t.text)))]}},{key:"_currentPageParams",get:function(){var e=location.pathname.match(/\/film\/([\w-_.]+)-([0-9]+)\//i)||[];return{id:e[2],slug:e[1],cityId:i.get(_.USER_GEO_CITY_ID_COOKIE_NAME)||1}}},{key:"startFromIndex",get:function(){return this.props.isUserAuthorized&&i.get(y)?(this._removeCookie(y),1):0}},{key:"afishaLink",get:function(){var e={text:"Перейти к aфише",url:s.url("afisha",this._currentPageParams)};return this._currentPageParams.id&&(e.text="Расписание и билеты",e.url=s.url("ab-afisha-film-seances-list",this._currentPageParams)),e}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),TicketsPromoPopup}();h.propTypes={isOpen:a.bool.isRequired,isUserAuthorized:a.bool.isRequired},h.defaultProps={isOpen:!0,isUserAuthorized:!1},h.contextTypes={dispatch:a.func},e.exports=h},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="popup-slider".concat("-partial-component");n(2050);var o=n(0),a=n(3),i=n(4).lock(r),c=n(2),s=n(386),u=s.ESC,l=s.LEFT,p=s.RIGHT,f=function(e){function PopupSlider(e){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PopupSlider),n=this;var o=(t=!(r=_getPrototypeOf(PopupSlider).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).props,a=o.isOpen,i=o.startFromIndex;return t.state={isOpen:a,currentSlideIndex:i},t._onOverlayClick=t._onOverlayClick.bind(_assertThisInitialized(t)),t._onInnerClick=t._onInnerClick.bind(_assertThisInitialized(t)),t._onSlideClick=t._onSlideClick.bind(_assertThisInitialized(t)),t._onCloseButtonClick=t._onCloseButtonClick.bind(_assertThisInitialized(t)),t._onPrevButtonClick=t._onPrevButtonClick.bind(_assertThisInitialized(t)),t._onNextButtonClick=t._onNextButtonClick.bind(_assertThisInitialized(t)),t._onKeyDown=t._onKeyDown.bind(_assertThisInitialized(t)),t._renderSlide=t._renderSlide.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PopupSlider,o.Component),t=PopupSlider,(n=[{key:"componentDidMount",value:function(){if(this.state.isOpen){var e=this.props,t=e.onOpen,n=e.onSlideOpen;"function"==typeof t&&t(),"function"==typeof n&&n(this.state.currentSlideIndex)}window.addEventListener("keydown",this._onKeyDown)}},{key:"componentWillReceiveProps",value:function(e){this.props.startFromIndex!==e.startFromIndex&&this.setState({currentSlideIndex:e.startFromIndex})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this._onKeyDown)}},{key:"render",value:function(){return this.state.isOpen?o.createElement("div",{className:c(i(),this.props.className)},this._renderInner(),this._renderOverlay()):null}},{key:"_renderInner",value:function(){return o.createElement("div",{className:i("inner"),onClick:this._onInnerClick},this._renderCloseButton(this._onCloseButtonClick),this._renderSlidesWrapper())}},{key:"_renderOverlay",value:function(){return o.createElement("div",{onClick:this._onOverlayClick,className:i("overlay")})}},{key:"_renderCloseButton",value:function(e){var t=this.props.renderCloseButton;return"function"==typeof t?t(e):o.createElement("button",{className:i("close"),onClick:e},"Close")}},{key:"_renderPrevButton",value:function(e){var t=this.props.renderPrevButton,n=0===this.state.currentSlideIndex;return"function"==typeof t?t(e,{hidden:n}):o.createElement("button",{className:i("prev-button",{hidden:n}),onClick:e},"Prev")}},{key:"_renderNextButton",value:function(e){var t=this.props,n=t.renderNextButton,r=t.slides,a=void 0===r?[]:r,c=this.state.currentSlideIndex+1===a.length;return"function"==typeof n?n(e,{hidden:c}):o.createElement("button",{className:i("next-button",{hidden:c}),onClick:e},"Next")}},{key:"_renderSlidesWrapper",value:function(){return o.createElement("div",{className:i("slides-wrapper")},this._renderPrevButton(this._onPrevButtonClick),this._renderSlides(),this._renderNextButton(this._onNextButtonClick))}},{key:"_renderSlides",value:function(){var e=this.props.slides;return o.createElement("ul",{className:i("slides")},e.map(this._renderSlide))}},{key:"_renderSlide",value:function(e,t){var n=this.state.currentSlideIndex===t;return o.createElement("li",{className:i("slide",{active:n}),onClick:this._onSlideClick,key:"slide-".concat(t)},e)}},{key:"_onKeyDown",value:function(e){switch(e.keyCode){case u:this.close();break;case l:this.openPrevSlide();break;case p:this.openNextSlide()}}},{key:"_onSlideClick",value:function(e){e.stopPropagation()}},{key:"_onPrevButtonClick",value:function(e){e.stopPropagation(),this.openPrevSlide()}},{key:"_onNextButtonClick",value:function(e){e.stopPropagation(),this.openNextSlide()}},{key:"_onInnerClick",value:function(){this.close()}},{key:"_onOverlayClick",value:function(){this.close()}},{key:"_onCloseButtonClick",value:function(e){e.stopPropagation(),this.close()}},{key:"openNextSlide",value:function(){this.openSlide(this.state.currentSlideIndex+1)}},{key:"openPrevSlide",value:function(){this.openSlide(this.state.currentSlideIndex-1)}},{key:"openSlide",value:function(e){var t=this,n=e,r=this.props,o=r.slides,a=void 0===o?[]:o,i=r.onSlideOpen,c=a.length;n<0?n=0:n+1>c&&(n=c-1),this.state.currentSlideIndex!==n&&this.setState({currentSlideIndex:n},function(){"function"==typeof i&&i(t.state.currentSlideIndex)})}},{key:"close",value:function(){var e=this.props.onClose,t=this.state.currentSlideIndex;this.setState({currentSlideIndex:0,isOpen:!1},function(){"function"==typeof e&&e(t)})}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),PopupSlider}();f.propTypes={isOpen:a.bool.isRequired,startFromIndex:a.number,slides:a.array,onOpen:a.func,onClose:a.func,onSlideOpen:a.func,renderNextButton:a.func,renderPrevButton:a.func,renderCloseButton:a.func,className:a.string},f.defaultProps={isOpen:!1,startFromIndex:0},e.exports=f},function(e,t,n){},function(e,t,n){"use strict";e.exports={DEFAULT_REGION_ID:213,DEFAULT_CITY_ID:1,DEFAULT_COUNTRY_ID:2,DEFAULT_REGION_LOCATION:{lat:55.76,lon:37.64},TIMEOUT:5e3,EXPIRE_TIME:864e5,USER_GEO_LOCATION_COOKIE_NAME:"user-geo-location",USER_GEO_REGION_LOCATION_COOKIE_NAME:"user-geo-region-location",USER_GEO_COUNTRY_ID_COOKIE_NAME:"user-geo-country-id",USER_GEO_REGION_ID_COOKIE_NAME:"user-geo-region-id",USER_GEO_CITY_ID_COOKIE_NAME:"tc",YANDEX_REGION_ID:9999,ERRORS:{PERMISSION_DENIED:{text:"Для отображения списка ближайших кинотеатров необходимо разрешить доступ к вашей геопозиции"},POSITION_UNAVAILABLE:{title:"Сеть не работает",text:"Сейчас эта страница недоступна, попробуйте обновить страницу через несколько минут"},TIMEOUT:{title:"Таймаут определения геопозиции",text:"Определение геопозиции занимает слишком много времени"},ERROR:{title:"Местоположение устройства не определено",text:"Геолокация недоступна"}}}},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(4).lock("partial-user-devices"),i=n(2053),c=n(91),s=c.togglePopup,u=c.loadDevices,l=c.removeDevice,p=n(127);n(2061);var f=function(e){function PartialUserDevices(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialUserDevices),n=this,(t=!(r=_getPrototypeOf(PartialUserDevices).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._toogleDevicePopup=t._toogleDevicePopup.bind(_assertThisInitialized(t)),t._loadDevices=t._loadDevices.bind(_assertThisInitialized(t)),t._removeDevice=t._removeDevice.bind(_assertThisInitialized(t)),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialUserDevices,r.Component),t=PartialUserDevices,(n=[{key:"render",value:function(){var e=this.props.page;return r.createElement(p,null,r.createElement(i,{className:a(),isDevicePopupOpen:e.isDevicePopupOpen,toggleDevicePopup:this._toogleDevicePopup,loadDevices:this._loadDevices,removeDevice:this._removeDevice,items:e.deviceList,isLoading:e.isDevicesLoading,getModel:this.props.getModel,removedDeviceTokens:e.removedDeviceTokens}))}},{key:"_toogleDevicePopup",value:function(e){this.props.dispatch(s("isDevicePopupOpen",e))}},{key:"_loadDevices",value:function(){this.props.dispatch(u())}},{key:"_removeDevice",value:function(e){this.props.dispatch(l(e))}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialUserDevices}();f.defaultProps={page:{}},f.contextTypes={dispatch:o.func},f.propTypes={dispatch:o.func,page:o.object,getModel:o.func},e.exports=f},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="user-devices".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(3),c=n(0),s=n(946),u=n(950),l=n(1285),p=n(1273),f=n(2054),d=n(149),m=n(2058);n(2060);var y=function(e){function UserDevices(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserDevices),n=this,(t=!(r=_getPrototypeOf(UserDevices).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._closePopup=t._closePopup.bind(_assertThisInitialized(t)),t._showPopup=t._showPopup.bind(_assertThisInitialized(t)),t._togglePopup=t._togglePopup.bind(_assertThisInitialized(t)),t._renderPanel=t._renderPanel.bind(_assertThisInitialized(t)),t._renderModal=t._renderModal.bind(_assertThisInitialized(t)),t._renderDeviceList=t._renderDeviceList.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UserDevices,c.Component),t=UserDevices,(n=[{key:"render",value:function(){return c.createElement("div",{className:a(o(),this.props.className)},this._renderModal(),this._renderPanel())}},{key:"_renderPanel",value:function(){return c.createElement("div",{className:o("panel")},c.createElement("div",{className:o("content")},c.createElement("div",null,c.createElement("div",{className:o("title")},"Мои устройства"),c.createElement("div",{className:o("description")},"Это список устройств, которые",c.createElement("br",null),"привязаны к вашему профилю.")),c.createElement("div",null,c.createElement(u,{className:o("button"),size:"sl",theme:"silver",onClick:this._showPopup},"Показать список"))))}},{key:"_renderModal",value:function(){var e=this.props.isLoading;return c.createElement(s,null,c.createElement(d,{isOpen:this.props.isDevicePopupOpen,className:o("modal"),onClose:this._closePopup},c.createElement("div",{className:o("modal-content")},c.createElement(m,null,c.createElement("span",{className:o("modal-title")},"Мои устройства"),c.createElement(l,{className:o("close-btn"),onClick:this._closePopup})),c.createElement("div",{className:o("modal-body",{loading:e})},c.createElement(p,{alignSpinner:"vertical-middle",behind:!1,isContentLoadPending:e},this._renderDeviceList())))))}},{key:"_renderDeviceList",value:function(){var e=this.props,t=e.items,n=void 0===t?[]:t,r=e.removeDevice;return n.length>0?c.createElement(f,{removeButtonHidden:!0,enableHover:!0,onRemove:r,items:n,getModel:this.props.getModel}):c.createElement("div",{className:o("info")},"Нет привязанных устройств")}},{key:"_closePopup",value:function(){this._togglePopup(!1)}},{key:"_showPopup",value:function(){this._togglePopup(!0),this.props.loadDevices&&this.props.loadDevices()}},{key:"_togglePopup",value:function(e){"function"==typeof this.props.toggleDevicePopup&&this.props.toggleDevicePopup(e)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),UserDevices}();y.propTypes={isDevicePopupOpen:i.bool,toggleDevicePopup:i.func,loadDevices:i.func,removeDevice:i.func,items:f.propTypes.items,isLoading:i.bool,className:i.string,getModel:i.func},e.exports=y},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o="device-list".concat("-partial-component"),a=n(3),i=n(117),c=n(2055),s=n(4).lock(o);n(2057);var u=function(e){function DeviceList(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeviceList),_possibleConstructorReturn(this,_getPrototypeOf(DeviceList).apply(this,arguments))}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeviceList,i),t=DeviceList,(n=[{key:"getBlockName",value:function(){return o}},{key:"render",value:function(){var e=this,t=this.props,n=t.onRemove,o=t.items,a=void 0===o?[]:o,i=t.removeButtonHidden,u=t.enableHover;return r.createElement("ul",{className:this.getClassName()},a.map(function(t){return r.createElement(c,{mix:s("device",{removeButtonHidden:i,enableHover:u}),onRemove:n,key:"device_".concat(t),item:e.props.getModel("user-device",t)})}))}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),DeviceList}();u.propTypes={items:a.arrayOf(a.string),onRemove:a.func,removeButtonVisible:a.bool,enableHover:a.bool},u.defaultProps={removeButtonHidden:!1,enableHover:!1},e.exports=u},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o="device-snippet".concat("-partial-component"),a=n(3),i=n(46),c=n(117),s=n(4).lock(o);n(2056);var u=function(e){function DeviceSnippet(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,DeviceSnippet),n=this,(t=!(r=_getPrototypeOf(DeviceSnippet).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onRemoveClick=t._onRemoveClick.bind(_assertThisInitialized(t)),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(DeviceSnippet,c),_createClass(DeviceSnippet,[{key:"getBlockName",value:function(){return o}}]),_createClass(DeviceSnippet,[{key:"_onRemoveClick",value:function(){var e=this.props.item.id;this.props.onRemove(e)}},{key:"render",value:function(){var e=this.props.item,t=e.lastUsed;return e.isDeleted&&(t="Устройство удалено"),r.createElement("li",{className:this.getClassName({removed:e.isDeleted})},r.createElement("div",{className:s("left")},r.createElement("div",{className:s("title")},e.deviceModel),t?r.createElement("div",{className:s("subtitle")},t):null),r.createElement(i,{className:s("button-popup"),size:"sl",theme:"outline",onClick:this._onRemoveClick},"Отвязать"))}}]),DeviceSnippet}();u.propTypes={item:a.shape({id:a.string,os:a.string,osVersion:a.string,vendor:a.string,deviceModel:a.string,year:a.number}),onRemove:a.func},e.exports=u},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="modal-header".concat("-partial-component"),o=n(0),a=n(3),i=n(4).lock(r),c=n(2);n(2059);var s=function(e){function ModalHeader(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ModalHeader),_possibleConstructorReturn(this,_getPrototypeOf(ModalHeader).apply(this,arguments))}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(ModalHeader,o.Component),t=ModalHeader,(n=[{key:"render",value:function(){return o.createElement("div",{className:c(i(),this.props.className)},this.props.children)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),ModalHeader}();s.propTypes={children:a.node,className:a.string},e.exports=s},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(4).lock("partial-user-social-options"),a=n(2063),i=n(127);n(2072);var c=function(e){function PartialUserSocialOptions(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialUserSocialOptions),_possibleConstructorReturn(this,_getPrototypeOf(PartialUserSocialOptions).apply(this,arguments))}var t,n,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialUserSocialOptions,r.Component),t=PartialUserSocialOptions,(n=[{key:"render",value:function(){return r.createElement(i,{className:o()},r.createElement(a,null))}}])&&_defineProperties(t.prototype,n),c&&_defineProperties(t,c),PartialUserSocialOptions}();e.exports=c},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="user-social-options".concat("-partial-component"),o=n(4).lock(r),a=n(0),i=n(3),c=n(2),s=n(2064),u=n(281),l=n(16);n(2071);var p=function(e){function UserSocialOptions(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserSocialOptions),n=this,r=_getPrototypeOf(UserSocialOptions).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_onLoad",function(){t.state.listState!==UserSocialOptions.LIST_STATES.LOADING&&t.setState({listState:UserSocialOptions.LIST_STATES.LOADING}),l.get("/user/social/").then(function(e){t.setState(e.items.reduce(function(e,n){return _objectSpread({},e,{},t.state[n.type],_defineProperty({},n.type,{accountId:n.id,connectionStatus:"yes",userName:n.name,shareEnabled:n.export.enabled,shareOptions:n.export.options}))},{listState:UserSocialOptions.LIST_STATES.LIST,mainNetwork:e.contextData.user.socialNetwork}))}).catch(function(){t.setState({listState:UserSocialOptions.LIST_STATES.ERROR})})}),_defineProperty(_assertThisInitialized(t),"_onShareEnable",function(e,n,r){return t.broker.start(e,r).then(function(r){return"ok"!==r.status?null:l.put("/user/social/".concat(e,"/").concat(n,"/share/"),{body:{enabled:!0,taskId:r.task_id}}).then(function(){t.setState(_defineProperty({},e,_objectSpread({},t.state[e],{shareEnabled:!0})))}).catch(function(n){t.setState(_defineProperty({},e,_objectSpread({},t.state[e],{error:n})))})})}),_defineProperty(_assertThisInitialized(t),"_onShareOptionChange",function(e,n,r,o,a){t.setState({areShareOptionsBlocked:!0}),(t.state[r].shareEnabled?Promise.resolve(!0):t._onShareEnable(r,o,a)).then(function(){return l.patch("/user/social/".concat(r,"/").concat(o,"/"),{body:{options:_defineProperty({},n,e)}})}).then(function(e){var o;t.setState((_defineProperty(o={},r,_objectSpread({},t.state[r],{shareOptions:_objectSpread({},t.state[r].shareOptions,_defineProperty({},n,e[n]))})),_defineProperty(o,"areShareOptionsBlocked",!1),o))})}),_defineProperty(_assertThisInitialized(t),"_onConnect",function(e){t.setState(_defineProperty({},e,{connectionStatus:"pending"})),t.broker.start(e).then(function(n){return"close"===n.status?(t.setState(_defineProperty({},e,{connectionStatus:UserSocialOptions.LIST_STATES.ERROR})),null):"ok"!==n.status?(t.setState(_defineProperty({},e,{connectionStatus:"no"})),null):l.post("/user/social/",{body:{taskId:n.task_id,rebindExisting:!0}}).then(function(n){t.setState(_defineProperty({},e,{accountId:n.id,connectionStatus:"yes",userName:n.name,shareEnabled:n.export.enabled,shareOptions:n.export.options}))})}).catch(function(n){t.setState(_defineProperty({},e,{connectionStatus:UserSocialOptions.LIST_STATES.ERROR,error:{status:n.status,user:n.body&&n.body.user}}))})}),_defineProperty(_assertThisInitialized(t),"_onDisconnect",function(e){t.setState(_defineProperty({},e,{connectionStatus:"pending"})),l.delete("/user/social/".concat(e,"/")).then(function(){t.setState(_defineProperty({},e,{connectionStatus:"no"}))}).catch(function(){t.setState(_defineProperty({},e,_objectSpread({},t.state[e],{connectionStatus:"yes"})))})}),t.state=UserSocialOptions.NETWORKS.reduce(function(e,t){return _objectSpread(_defineProperty({},t.name,{connectionStatus:"no"}),e)},{listState:UserSocialOptions.LIST_STATES.LOADING,sharingTransactionsBlocked:!1}),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UserSocialOptions,a.Component),t=UserSocialOptions,(n=[{key:"componentDidMount",value:function(){this.broker=new u,this._onLoad()}},{key:"componentWillUnmount",value:function(){this.broker.destroy()}},{key:"render",value:function(){return a.createElement("div",{className:c(o(),this.props.className)},a.createElement("div",{className:o("head")},a.createElement("div",{className:o("title")},"Привязанные аккаунты"),a.createElement("div",{className:o("subtitle")},"Перенос оценок фильмам и других действий в ВКонтакте и Twitter."),this.state.listState===UserSocialOptions.LIST_STATES.LOADING&&this._renderLoading(),this.state.listState===UserSocialOptions.LIST_STATES.ERROR&&this._renderError()),this.state.listState===UserSocialOptions.LIST_STATES.LIST&&this._renderList())}},{key:"_renderList",value:function(){var e=this;return a.createElement("div",{className:o("list")},UserSocialOptions.NETWORKS.filter(function(e){return e.shareAvailable}).map(function(e,t){return _objectSpread({},e,{index:t})}).sort(function(t,n){var r="yes"===e.state[t.name].connected,o="yes"===e.state[n.name].connected;return Number(o)-Number(r)||t.index-n.index}).map(function(t){var n=e.state[t.name];return a.createElement(s,_extends({},t,n,{key:t.name,isMainAccount:e.state.mainNetwork===t.name,connectionStatus:n.connectionStatus,error:n.error,userName:n.userName,shareEnabled:n.shareEnabled,shareOptions:n.shareOptions,onShareEnable:e._onShareEnable,onShareOptionChange:e._onShareOptionChange,onConnect:e._onConnect,onDisconnect:e._onDisconnect,areShareOptionsBlocked:e.state.areShareOptionsBlocked}))}))}},{key:"_renderLoading",value:function(){return a.createElement("div",{className:o("status")},"Загружаем...")}},{key:"_renderError",value:function(){return a.createElement("div",{className:o("status")},"Не удалось загрузить список привязанных аккаунтов",a.createElement("span",{className:o("reload-link"),onClick:this._onLoad},"Oбновить"))}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),UserSocialOptions}();p.NETWORKS=[{name:"vkontakte",title:"ВКонтакте",shareAvailable:!0,scope:"share"},{name:"twitter",title:"Twitter",shareAvailable:!0,scope:"share"}],p.LIST_STATES={LOADING:"loading",ERROR:"error",LIST:"list"},p.propTypes={socialNetworks:i.array,className:i.string},e.exports=p},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r="user-social-options-network-card".concat("-partial-component"),o=n(4).lock(r),a=n(0),i=n(3),c=n(2065),s=n(950),u=n(2068);n(2070);var l=function(e){function UserSocialOptionsNetworkCard(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,UserSocialOptionsNetworkCard),n=this,r=_getPrototypeOf(UserSocialOptionsNetworkCard).call(this,e),_defineProperty(_assertThisInitialized(t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r),"_renderDeprecatedText",function(){var e=t.props.shareDeprecatedText;return a.createElement("div",{className:o("body")},a.createElement("div",{className:o("share-options-title")},"Перенос действий"),a.createElement("div",{className:o("share-options-info")},e))}),_defineProperty(_assertThisInitialized(t),"_handleRebind",function(){t.props.onConnect(t.props.name)}),t.state={expandState:t._hasShareOptionsError()?"expanded":"collapsed"},t._onConnect=t._onConnect.bind(_assertThisInitialized(t)),t._onDisconnect=t._onDisconnect.bind(_assertThisInitialized(t)),t._onShareEnable=t._onShareEnable.bind(_assertThisInitialized(t)),t._onShareOptionChange=t._onShareOptionChange.bind(_assertThisInitialized(t)),t._hasShareOptionsError=t._hasShareOptionsError.bind(_assertThisInitialized(t)),t._getShareOptionsError=t._getShareOptionsError.bind(_assertThisInitialized(t)),t._renderShareOptionsError=t._renderShareOptionsError.bind(_assertThisInitialized(t)),t._onToggle=t._onToggle.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(UserSocialOptionsNetworkCard,a.PureComponent),t=UserSocialOptionsNetworkCard,(n=[{key:"componentDidUpdate",value:function(e){"yes"===this.props.connectionStatus&&"yes"!==e.connectionStatus&&this.setState({expandState:"expanded"})}},{key:"render",value:function(){var e,t=this.props,n=t.shareDeprecatedText,r=t.shareAvailable,i=t.connectionStatus,c=t.name;return n?e=this._renderDeprecatedText():r&&"yes"===i&&(e=this._renderBody()),a.createElement("div",{className:o({network:c,connect:i})},a.createElement(u,{head:this._renderHead(),body:e,cardState:this._getCardState(),onToggle:this._onToggle}))}},{key:"_renderShareOptionsError",value:function(){if(!this._hasShareOptionsError())return null;var e=this._getShareOptionsError(),t=e.name,n=e.text;return a.createElement("span",{className:o("share-disabled",{error:"tokenExpired"!==t})},n)}},{key:"_renderShareOption",value:function(e,t){return a.createElement("div",{className:o("share-option")},a.createElement(c,{name:e,value:this.props.shareOptions[e],onChange:this._onShareOptionChange,blocked:this.props.areShareOptionsBlocked},a.createElement("span",{className:o("toggle-label")},t)))}},{key:"_renderBody",value:function(){return a.createElement("div",{className:o("body")},a.createElement("div",{className:o("share-options-title")},"Перенос действий"),a.createElement("div",{className:o("share-options-info")},"Выберите действия, которые вы хотите автоматически публиковать в привязанных аккаунтах соцсетей."),this._hasShareOptionsError()&&a.createElement("div",null,this._renderShareOptionsError(),a.createElement("span",{className:o("share-enable"),onClick:this._onShareEnable},"wrongAccount"!==this._getShareOptionsError().name?"Включить":"Повторить")),(this.props.shareEnabled||!this._hasShareOptionsError())&&a.createElement("div",{className:o("share-options")},this._renderShareOption("vote","Оценки"),this._renderShareOption("await","Ожидаемые фильмы"),this._renderShareOption("review","Новые рецензии"),this._renderShareOption("favourite","Любимые фильмы"),this._renderShareOption("seen","Просмотры фильмов")))}},{key:"_renderDisconnectLink",value:function(){return this.props.isMainAccount?a.createElement("div",{className:o("subtitle")},"Этот аккаунт используется для входа на сайт, его нельзя отключить."):this.props.renderConnectedSubtitle?a.createElement("div",{className:o("subtitle")},this.props.renderConnectedSubtitle()):this.props.isRebindableOnly?this._renderRebindingText():a.createElement("div",{className:o("subtitle",{disconnect:!0}),onClick:this._onDisconnect},"Отключить")}},{key:"_renderRebindingText",value:function(){return a.createElement("div",{className:o("subtitle",{disconnect:!0}),onClick:this._handleRebind},"Привязать другой")}},{key:"_renderSubtitle",value:function(){switch(this.props.connectionStatus){case"yes":return this._renderDisconnectLink();case"no":case"pending":return a.createElement("div",{className:o("subtitle")},this.props.subtitle);case"error":return this.props.error&&409===this.props.error.status?this._userConflictErrorRender(this.props.error.user):this._textErrorRender("Произошла ошибка. Пожалуйста, попробуйте еще раз.");default:return null}}},{key:"_renderHead",value:function(){var e="no"===this.props.connectionStatus||"error"===this.props.connectionStatus,t=this.props.shareAvailable&&"yes"===this.props.connectionStatus;return a.createElement("div",{className:o("head",{togglable:t}),onClick:e?this._onConnect:void 0},a.createElement("div",{className:o("icon")}),a.createElement("div",{className:o("title-wrapper")},a.createElement("div",{className:o("title")},"yes"===this.props.connectionStatus?this.props.userName:this.props.title),this._renderSubtitle()),e&&a.createElement(s,{size:"sl",theme:"silver",className:o("connect-button")},"Привязать"))}},{key:"_getShareOptionsError",value:function(){var e=this;return this.props.error&&409===this.props.error.status?{name:"wrongAccount",text:"Вы пытаетесь включить экспорт не в тот аккаунт ".concat(this.props.title,", который подключён к текущему профилю.")}:"yes"===this.props.connectionStatus&&!this.props.shareEnabled&&this.props.shareOptions&&Object.keys(this.props.shareOptions).some(function(t){return e.props.shareOptions[t]})?{name:"tokenExpired",text:"Экспорт действий в соцсеть не работает."}:null}},{key:"_hasShareOptionsError",value:function(){return Boolean(this._getShareOptionsError())}},{key:"_onToggle",value:function(e){this.setState({expandState:e})}},{key:"_onShareEnable",value:function(){this.props.onShareEnable(this.props.name,this.props.accountId,this.props.scope)}},{key:"_onShareOptionChange",value:function(e,t){this.props.onShareOptionChange(e,t,this.props.name,this.props.accountId,this.props.scope)}},{key:"_onConnect",value:function(){this.props.onConnect(this.props.name)}},{key:"_onDisconnect",value:function(){this.props.onDisconnect(this.props.name)}},{key:"_userConflictErrorRender",value:function(e){return a.createElement("div",{className:o("subtitle")},"Аккаунт уже привязан к пользователю"," ",a.createElement("a",{onClick:function(e){return e.stopPropagation()},href:"/user/".concat(e.id,"/")},e.displayName))}},{key:"_textErrorRender",value:function(e){return a.createElement("div",{className:o("error")},e)}},{key:"_getCardState",value:function(){return{no:"empty",pending:"loading",yes:this.props.shareAvailable||this.props.shareDeprecatedText?this.state.expandState:"empty"}[this.props.connectionStatus]}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),UserSocialOptionsNetworkCard}();l.propTypes={name:i.string.isRequired,title:i.string.isRequired,subtitle:i.string,renderConnectedSubtitle:i.func,shareAvailable:i.bool,scope:i.string,error:i.shape({status:i.number.isRequired,user:i.object}),isRebindableOnly:i.bool,userName:i.string,shareEnabled:i.bool,shareOptions:i.shape({vote:i.bool,review:i.bool,seen:i.bool,await:i.bool,favourite:i.bool}),shareDeprecatedText:i.string,areShareOptionsBlocked:i.bool,accountId:i.string,isMainAccount:i.bool.isRequired,connectionStatus:i.oneOf(["no","pending","yes","error"]).isRequired,onConnect:i.func.isRequired,onDisconnect:i.func.isRequired,onShareOptionChange:i.func.isRequired,onShareEnable:i.func.isRequired},l.defaultProps={shareAvailable:!1,isMainAccount:!1},e.exports=l},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(2066),a=function(e){function OptimisticToggle(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OptimisticToggle),n=this,(t=!(r=_getPrototypeOf(OptimisticToggle).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={prevPropsValue:e.value,value:e.value},t._onChange=t._onChange.bind(_assertThisInitialized(t)),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(OptimisticToggle,r.Component),t=OptimisticToggle,a=[{key:"getDerivedStateFromProps",value:function(e,t){return e.value===t.prevPropsValue||e.value===t.value||e.blocked?null:{prevPropsValue:e.value,value:e.value}}}],(n=[{key:"render",value:function(){return r.createElement(o,_extends({},this.props,{value:this.state.value,blocked:this.props.blocked,onChange:this._onChange}))}},{key:"_onChange",value:function(e,t){var n=this;this.props.blocked||this.setState({value:!this.props.value},function(){return n.props.onChange(e,t)})}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),OptimisticToggle}();a.propTypes=o.propTypes,e.exports=a},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r="toggle".concat("-partial-component"),o=n(4).lock(r),a=n(2),i=n(0),c=n(3);n(2067);var s=function(e){function Toggle(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Toggle),n=this,(t=!(r=_getPrototypeOf(Toggle).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r)._onChange=t._onChange.bind(_assertThisInitialized(t)),t}var t,n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Toggle,i.Component),t=Toggle,(n=[{key:"render",value:function(){return i.createElement("label",{className:a(o({blocked:this.props.blocked}),this.props.className)},i.createElement("input",{name:this.props.name,className:o("input"),type:"checkbox",checked:this.props.value,onChange:this._onChange}),i.createElement("span",{className:o("slider")}),i.createElement("span",{className:o("label")},this.props.children))}},{key:"_onChange",value:function(e){this.props.onChange(e.target.checked,e.target.name)}}])&&_defineProperties(t.prototype,n),r&&_defineProperties(t,r),Toggle}();s.propTypes={name:c.string,value:c.bool,onChange:c.func,blocked:c.bool,children:c.node,className:c.string},s.defaultProps={value:!1,onChange:function(){}},e.exports=s},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(4).lock("collapse-card".concat("-partial-component")),o=n(2),a=n(0),i=n(3);n(2069);var c=function(e){function CollapseCard(e){var t,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollapseCard),n=this,(t=!(r=_getPrototypeOf(CollapseCard).call(this,e))||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r).state={prevPropsCardState:e.cardState,cardState:e.cardState},t._onToggle=t._onToggle.bind(_assertThisInitialized(t)),t}var t,n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(CollapseCard,a.Component),t=CollapseCard,i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.cardState!==t.prevPropsCardState&&e.cardState!==t.cardState?{prevPropsCardState:e.cardState,cardState:e.cardState}:null}}],(n=[{key:"render",value:function(){return a.createElement("div",{className:o(r({state:this.state.cardState}),this.props.className)},a.createElement("div",{className:r("head-wrapper"),onClick:this._onToggle},a.createElement("div",{className:r("head")},this.props.head),a.createElement("div",{className:r("toggle-button"),onClick:"expanded"===this.state.cardState||"collapsed"===this.state.cardState?this._onToggle:void 0})),a.createElement("div",{className:r("body")},this.props.body))}},{key:"_onToggle",value:function(){var e=this.state.cardState;if("expanded"===e||"collapsed"===e){var t="collapsed"===e?"expanded":"collapsed";this.props.onToggle?this.props.onToggle(t):this.setState({cardState:t})}}}])&&_defineProperties(t.prototype,n),i&&_defineProperties(t,i),CollapseCard}();c.propTypes={head:i.element,body:i.element,cardState:i.oneOf(["empty","loading","expanded","collapsed"]).isRequired,onToggle:i.func,className:i.string},c.defaultProps={cardState:"empty"},e.exports=c},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(3),a=n(5).connect,i=n(342),c=n(1129),s=n(1130),u=n(19).getOttIntegration,l=n(108).isUserSubscriptionLoading,p=n(78).loadAvailableSubscriptionsListEffect,f=n(1307),d=n(945).ANCHOR,m=n(931),y=n(127);n(2074);var _=function(e){function PartialUserSubscription(){var e,t,n,r,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialUserSubscription);for(var c=arguments.length,s=new Array(c),u=0;u<c;u++)s[u]=arguments[u];return n=this,r=(e=_getPrototypeOf(PartialUserSubscription)).call.apply(e,[this].concat(s)),t=!r||"object"!==_typeof(r)&&"function"!=typeof r?_assertThisInitialized(n):r,o=_assertThisInitialized(t),i=function(){t.props.loadAvailableSubscriptionsListEffect()},(a="componentDidMount")in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialUserSubscription,r.Component),t=PartialUserSubscription,(n=[{key:"render",value:function(){return r.createElement(y,null,r.createElement(f,{id:d,offset:-25}),this.renderContent())}},{key:"renderContent",value:function(){var e=this.props,t=e.isLoading,n=e.ottIntegration;return t?r.createElement("div",{className:m({loading:!0,flex:!0})},r.createElement(i,{className:m("spinner"),size:"s"})):n?r.createElement(s,null):r.createElement(c,null)}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialUserSubscription}();_.propTypes={isLoading:o.bool,ottIntegration:o.object,loadAvailableSubscriptionsListEffect:o.func},e.exports=a(function(e){return{isLoading:l(e),ottIntegration:u(e)}},{loadAvailableSubscriptionsListEffect:p})(_)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(3),a=n(5).connect,i=n(574),c=n(489),s=n(1131),u=n(1125),l=n(932),p=n(933),f=n(277).loadTodayFilmsInCinemaEffect,d=n(395).getFilmsInCinema,m=n(74).selectAdfox,y=n(31).media,_=n(127),h=n(109),g=h.PLACE_MIDDLE_ID_ID,b=h.BANNER_CINEMA_ID,E="/afisha/new/city/",v=function(e){function PartialWatchInCinemaSlider(){var e,t,n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialWatchInCinemaSlider);for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];return n=this,o=(e=_getPrototypeOf(PartialWatchInCinemaSlider)).call.apply(e,[this].concat(c)),_defineProperty(_assertThisInitialized(t=!o||"object"!==_typeof(o)&&"function"!=typeof o?_assertThisInitialized(n):o),"_renderStubs",function(){return new Array(4).fill().map(function(e,t){return r.createElement(u,{key:t,stub:!0})})}),_defineProperty(_assertThisInitialized(t),"_renderCarouselHeader",function(){return r.createElement(p,{onClick:t._onCarouselHeaderClick,href:E},"Смотрите в кинотеатрах")}),_defineProperty(_assertThisInitialized(t),"_renderCarouselContent",function(){return[t.props.filmsInCinema.map(function(e,t){return r.createElement(s,{key:e,filmId:e,cardIndex:t})}),r.createElement(i,{key:"afisha",url:"/afisha/new/city/",text:"Все фильмы",color:"white"})]}),_defineProperty(_assertThisInitialized(t),"_onCarouselHeaderClick",function(){y.watchInCinemaItemClick({isTouch:!1,postType:"/",postId:"block_title",target:E})}),t}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialWatchInCinemaSlider,r.Component),t=PartialWatchInCinemaSlider,(n=[{key:"componentDidMount",value:function(){this.props.loadTodayFilmsInCinemaEffect()}},{key:"componentDidUpdate",value:function(e){var t=this.props.filmsInCinema;!e.filmsInCinema.length&&t.length&&y.watchInCinemaShow({isTouch:!1,postType:"/",filmsIds:t})}},{key:"render",value:function(){return r.createElement(_,null,this._renderChildren())}},{key:"_renderChildren",value:function(){var e=this.props,t=e.filmsInCinema,n=e.adfoxConfig;return t.length?r.createElement(c.Provider,{value:{appTheme:"kp1"}},r.createElement(l,{headerChild:this._renderCarouselHeader(),contentChild:this._renderCarouselContent(),adfoxConfig:n,adfoxPosition:3})):r.createElement(l,{headerChild:this._renderCarouselHeader(),contentChild:this._renderStubs(),rumPlaceId:g,rumBannerId:b})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),PartialWatchInCinemaSlider}();v.propTypes={filmsInCinema:o.arrayOf(o.number).isRequired,loadTodayFilmsInCinemaEffect:o.func.isRequired,adfoxConfig:o.object},e.exports=a(function(e){return{filmsInCinema:d(e),adfoxConfig:m(e).cinemaSlider}},{loadTodayFilmsInCinemaEffect:f})(v)},function(e,t,n){},function(e,t,n){},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(5).connect,i=n(2079).WatchOnlineButton,c=n(2108).getOnlineUrl,s=n(2081).getWatchOnlinePaymentUrl,u=n(2082).selectPaymentWidgetHost,l=n(18).ONLINE_VIEW_OPTIONS_BUTTON_ID,p=n(127),f=function(e){var t=e.filmWatchOnlineOptions,n=e.paymentWidgetHost,o=t||{},a=o.filmId,u=o.type,f=o.subscriptionPurchaseTag,d=o.isAvailableOnline,m=o.isPurchased,y=r.useMemo(function(){return t?c(t):void 0},[t]),_=r.useMemo(function(){return m?void 0:s(n,a,u,f)},[n,a,u,f,m]);return t&&d?r.createElement(p,null,r.createElement(i,_extends({},t,{url:y,paymentUrl:_,linkElementId:l}))):null};f.defaultProps={filmWatchOnlineOptions:null},f.propTypes={filmWatchOnlineOptions:o.shape({filmId:o.number.isRequired,isAvailableOnline:o.bool.isRequired,text:o.string.isRequired,originalOfferText:o.string,descriptionText:o.string,descriptionSubtext:o.string,descriptionIconsUrls:o.arrayOf(o.string),isUnderAbExperiment:o.bool.isRequired,type:o.string,subscriptionPurchaseTag:o.string}),paymentWidgetHost:o.string},e.exports=a(function(e){return{filmWatchOnlineOptions:e.page.filmWatchOnlineOptions,paymentWidgetHost:u(e)}})(f)},function(e,t,n){"use strict";n.r(t),n.d(t,"WATCH_ONLINE_BUTTON_THEMES",function(){return f}),n.d(t,"WatchOnlineButton",function(){return m});var r=n(0),o=n.n(r),a=n(2),i=n.n(a),c=n(4),s=n.n(c),u=n(69),l=n.n(u),p=n(18);n(2080);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f,d=s.a.lock("kinopoisk-watch-online-button".concat("-partial-component"));!function(e){e.desktop="desktop",e.touch="touch"}(f||(f={}));var m=function(e){var t,n,r,a=e.className,c=e.url,s=e.paymentUrl,u=e.theme,l=e.text,f=e.descriptionText,m=e.descriptionSubtext,y=e.descriptionIconsUrls,_=e.originalOfferText,h=e.onLinkClick,g=e.linkElementId,b=o.a.useMemo(function(){return[f,m,y].some(Boolean)},[f,m,y]),E=o.a.useMemo(function(){return f||m?[f,m].filter(Boolean).join(", "):null},[f,m]);return o.a.createElement("div",{className:i()(d({theme:u}),a)},o.a.createElement("a",_extends({id:g,href:c,className:d("link"),onClick:h},(t={},n=p.WATCH_ONLINE_PAYMENT_URL_ATTRIBUTE_NAME,r=s,n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t)),o.a.createElement("span",{className:d("text")},l),_&&o.a.createElement("span",{className:d("not-actual-text")},_)),b&&o.a.createElement("div",{className:d("description")},y&&y.map(function(e,t){return o.a.createElement("img",{className:d("description-img"),key:t,src:e,alt:""})}),E&&o.a.createElement("span",{className:d("description-text")},E)))};m.defaultProps={theme:f.desktop,onLinkClick:l.a}},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"getWatchOnlinePaymentUrl",function(){return getWatchOnlinePaymentUrl});var r=n(28),o=n.n(r),a=n(58),i=n(18);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getWatchOnlinePaymentUrl(e,t,n,r){var c=n===i.TYPE.subscription?{license:a.MONETIZATION_MODELS.SVOD,subscriptionPurchaseTag:r}:{};return o.a.format({protocol:"https",host:e,query:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({ottApiDomain:i.OTT_API_DOMAIN,kpId:t,serviceId:a.SERVICE_ID},c)})}},function(e,t,n){"use strict";n.r(t),n.d(t,"selectPaymentWidgetHost",function(){return r});var r=function(e){return e.common.paymentWidgetHost}},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(0),o=n(65),a=n(127),i=n(489),c=n(2084),s=n(932),u=n(535).LIST_ID,l=n(109),p=l.PLACE_MIDDLE_ID,f=l.BANNER_PERSON_ID,d=n(933),m=n(1132),y="watch-online-person-slider".concat("-partial-component"),_=n(4).lock(y);n(2085);var h=function(e){function WatchOnlinePersonSlider(){var e,t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePersonSlider);for(var i=arguments.length,c=new Array(i),s=0;s<i;s++)c[s]=arguments[s];return n=this,_defineProperty(_assertThisInitialized(t=!(a=(e=_getPrototypeOf(WatchOnlinePersonSlider)).call.apply(e,[this].concat(c)))||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(n):a),"_renderCarouselHeader",function(e){return r.createElement(d,null,"".concat(e,": смотрите онлайн"))}),_defineProperty(_assertThisInitialized(t),"_renderCarouselContent",function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(e,t){return r.createElement(m,{filmId:e,watchUrlQuery:o.stringify({from_block:"person_page",from_position:t+1}),position:t+1,key:"".concat(e,"-").concat(t)})})}),t}var t,n,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePersonSlider,r.PureComponent),t=WatchOnlinePersonSlider,(n=[{key:"render",value:function(){var e=this;return r.createElement(a,null,r.createElement(i.Provider,{value:{appTheme:"kp1"}},r.createElement(c,{listId:u},function(t){var n=t.items,o=t.isLoaded,a=t.personName;return o||n.length?r.createElement(s,{headerChild:e._renderCarouselHeader(a),contentChild:e._renderCarouselContent(n),className:_("carousel"),rumPlaceId:p,rumBannerId:f}):null})))}}])&&_defineProperties(t.prototype,n),l&&_defineProperties(t,l),WatchOnlinePersonSlider}();e.exports=h},function(e,t,n){function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var r=n(0),o=n(5).connect,a=n(949),i=n(3),c=n(368).loadPersonFilmography,s=n(368).selectPersonName,u=function(e){function WatchOnlinePersonSliderContainer(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WatchOnlinePersonSliderContainer),_possibleConstructorReturn(this,_getPrototypeOf(WatchOnlinePersonSliderContainer).apply(this,arguments))}var t,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WatchOnlinePersonSliderContainer,r.PureComponent),t=WatchOnlinePersonSliderContainer,(n=[{key:"componentDidMount",value:function(){var e=this.props.listId;this.props.loadPersonFilmography({listId:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.personName,o=t.listId;return r.createElement(a,{listId:o},function(t){var r=t.items,o=void 0===r?[]:r,a=t.isLoaded;return e.props.children({items:o,personName:n,isLoaded:a})})}}])&&_defineProperties(t.prototype,n),o&&_defineProperties(t,o),WatchOnlinePersonSliderContainer}();u.propTypes={children:i.func,loadPersonFilmography:i.func,personName:i.string,listId:i.string.isRequired},e.exports=o(function(e){return{personName:s(e,{type:"personFilmography"})}},{loadPersonFilmography:c})(u)},function(e,t,n){},function(e,t,n){"use strict";function _typeof(e){"@babel/helpers - typeof";return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var r=n(65),o=n(0),a=n(3),i=n(5).connect,c=n(932),s=n(933),u=n(503),l=n(574),p=n(489),f=n(58).CATEGORIES_SLUGS,d=n(1133),m=n(497).selectUiListItems,y=n(74).selectAdfox,_=n(127),h=n(109),g=h.PLACE_MIDDLE_ID,b=h.BANNER_ONLINE_ID,E=n(498).MAIN_PAGE_HD_FILMS,v=n(116).loadMainPageSliderDataEffect,O=function(e){function PartialWatchOnlineSlider(){var e,t,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PartialWatchOnlineSlider);for(var i=arguments.length,c=new Array(i),p=0;p<i;p++)c[p]=arguments[p];return n=this,a=(e=_getPrototypeOf(PartialWatchOnlineSlider)).call.apply(e,[this].concat(c)),_defineProperty(_assertThisInitialized(t=!a||"object"!==_typeof(a)&&"function"!=typeof a?_assertThisInitialized(n):a),"_renderCarouselHeader",function(){return o.createElement(s,{href:u.getRouteUrl("index",f.SUBSCRIPTION)},"Смотрите на КиноПоиске")}),_defineProperty(_assertThisInitialized(t),"_renderCarouselContent",function(){return[t.props.films.map(function(e,t){return o.createElement(d,{filmId:e,watchUrlQuery:r.stringify({from_block:"main_page",from_position:t+1}),key:e,position:t+1})}),o.createElement(l,{key:"watch-online-slider__carousel-snippet",url:u.getRouteUrl("index",f.SUBSCRIPTION),text:"Все фильмы",color:"white"})]}),t}var t,n,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(PartialWatchOnlineSlider,o.Component),t=PartialWatchOnlineSlider,(n=[{key:"componentDidMount",value:function(){this.props.loadData()}},{key:"render",value:function(){var e=this.props,t=e.films,n=e.adfoxConfig;return t.length?o.createElement(_,null,o.createElement(p.Provider,{value:{appTheme:"kp1"}},o.createElement(c,{headerChild:this._renderCarouselHeader(),contentChild:this._renderCarouselContent(),adfoxConfig:n,adfoxPosition:3,rumPlaceId:g,rumBannerId:b}))):null}}])&&_defineProperties(t.prototype,n),a&&_defineProperties(t,a),PartialWatchOnlineSlider}();O.propTypes={films:a.arrayOf(a.number),adfoxConfig:a.object,loadData:a.func},O.defaultProps={films:[]},e.exports=i(function(e){return{films:m(e,{listId:E}),adfoxConfig:y(e).onlineSlider}},{loadData:v})(O)},function(e,t,n){function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var r=n(0),o=n(3),a=n(5).connect,i=n(4).lock("watch-online-vendor-badge"),c=n(127),s=n(344);n(2088);var u=function(e){var t=e.filmWatchOnlineOptions,n=t.isAvailableOnline,o=t.rightholderLogo;return n?r.createElement(c,null,r.createElement(s,_extends({},o,{className:i("img")}))):null};u.defaultProps={filmWatchOnlineOptions:{isAvailableOnline:!1}},u.propTypes={filmWatchOnlineOptions:o.shape({isAvailableOnline:o.bool.isRequired,rightholderLogo:o.shape({x1:o.string.isRequired,x2:o.string}).isRequired})},e.exports=a(function(e){return{filmWatchOnlineOptions:e.page.filmWatchOnlineOptions}})(u)},function(e,t,n){},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r,o,a,i=n(28),c=n.n(i),s=n(150),u=n.n(s),l=n(18);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function getOnlineUrl(e){var t,n=e.isUnderAbExperiment?(_defineProperty(t={},r.Experiment,o.On),_defineProperty(t,r.From,a.Kp1FilmButtonOnline),_defineProperty(t,r.Fallback,l.WATCH_ONLINE_URL_FALLBACK_PARAM_VALUE),t):_defineProperty({},r.Experiment,o.Off);return c.a.format({pathname:u.a.getRouteUrl("film",e.filmId),query:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}(_defineProperty({},r.FromBlock,l.FROM_BLOCK_QUERY_VALUE),e.isPurchased?{}:n)})}!function(e){e.FromBlock="from_block",e.From="from",e.Experiment="experiment",e.Fallback="fallback"}(r||(r={})),function(e){e.On="1",e.Off="0"}(o||(o={})),function(e){e.Kp1FilmButtonOnline="kp1_film_button_online"}(a||(a={})),n.d(t,"getOnlineUrl",function(){return getOnlineUrl})}]);
//# sourceMappingURL=partial-client.00dffe9d59e5ac3f614b.min.js.map